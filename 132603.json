{"path":"solr/solrj/src/test/org/apache/solr/client/solrj/SolrQueryTest#testFacetInterval().mjava","commits":[{"id":"4b74869edee26aa619609ae7a51351466ba06d39","date":1407454039,"type":0,"author":"Tomas Eduardo Fernandez Lobbe","isMerge":false,"pathNew":"solr/solrj/src/test/org/apache/solr/client/solrj/SolrQueryTest#testFacetInterval().mjava","pathOld":"/dev/null","sourceNew":"  public void testFacetInterval() {\n    SolrQuery solrQuery = new SolrQuery();\n    solrQuery.addIntervalFacets(\"field1\", new String[]{});\n    assertTrue(solrQuery.getBool(FacetParams.FACET));\n    assertEquals(\"field1\", solrQuery.get(FacetParams.FACET_INTERVAL));\n    \n    solrQuery.addIntervalFacets(\"field2\", new String[]{\"[1,10]\"});\n    assertArrayEquals(new String[]{\"field1\", \"field2\"}, solrQuery.getParams(FacetParams.FACET_INTERVAL));\n    assertEquals(\"[1,10]\", solrQuery.get(\"f.field2.facet.interval.set\"));\n    \n    solrQuery.addIntervalFacets(\"field3\", new String[]{\"[1,10]\", \"(10,100]\", \"(100,1000]\", \"(1000,*]\"});\n    assertArrayEquals(new String[]{\"field1\", \"field2\", \"field3\"}, solrQuery.getParams(FacetParams.FACET_INTERVAL));\n    assertArrayEquals(new String[]{\"[1,10]\", \"(10,100]\", \"(100,1000]\", \"(1000,*]\"}, solrQuery.getParams(\"f.field3.facet.interval.set\"));\n    \n    //Validate adding more intervals for an existing field\n    solrQuery.addIntervalFacets(\"field2\", new String[]{\"[10,100]\"});\n    assertArrayEquals(new String[]{\"[1,10]\", \"[10,100]\"}, solrQuery.getParams(\"f.field2.facet.interval.set\"));\n    \n    assertNull(solrQuery.removeIntervalFacets(\"field1\"));\n    assertArrayEquals(new String[]{\"field2\", \"field3\", \"field2\"}, solrQuery.getParams(FacetParams.FACET_INTERVAL));\n    assertNull(solrQuery.getParams(\"f.field1.facet.interval.set\"));\n    \n    assertArrayEquals(new String[]{\"[1,10]\", \"[10,100]\"}, solrQuery.removeIntervalFacets(\"field2\"));\n    assertArrayEquals(new String[]{\"field3\"}, solrQuery.getParams(FacetParams.FACET_INTERVAL));\n    assertNull(solrQuery.getParams(\"f.field2.facet.interval.set\"));\n    \n    assertArrayEquals(new String[]{\"[1,10]\", \"(10,100]\", \"(100,1000]\", \"(1000,*]\"}, solrQuery.removeIntervalFacets(\"field3\"));\n    assertNull(solrQuery.getParams(FacetParams.FACET_INTERVAL));\n    assertNull(solrQuery.getParams(\"f.field3.facet.interval.set\"));\n    \n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"4b74869edee26aa619609ae7a51351466ba06d39":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["4b74869edee26aa619609ae7a51351466ba06d39"]},"commit2Childs":{"4b74869edee26aa619609ae7a51351466ba06d39":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["4b74869edee26aa619609ae7a51351466ba06d39"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}