{"path":"solr/core/src/java/org/apache/solr/schema/BBoxField#getValueSourceFromSpatialArgs(QParser,SchemaField,SpatialArgs,String,BBoxStrategy).mjava","commits":[{"id":"aa75c94645bfc8da99a503e2018fd71899cbf9f2","date":1404877329,"type":0,"author":"David Wayne Smiley","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/schema/BBoxField#getValueSourceFromSpatialArgs(QParser,SchemaField,SpatialArgs,String,BBoxStrategy).mjava","pathOld":"/dev/null","sourceNew":"  @Override\n  protected ValueSource getValueSourceFromSpatialArgs(QParser parser, SchemaField field, SpatialArgs spatialArgs, String scoreParam, BBoxStrategy strategy) {\n    switch (scoreParam) {\n      //TODO move these to superclass after LUCENE-5804 ?\n      case \"overlapRatio\":\n        double queryTargetProportion = 0.25;//Suggested default; weights towards target area\n\n        String v = parser.getParam(PARAM_QUERY_TARGET_PROPORTION);\n        if (v != null)\n          queryTargetProportion = Double.parseDouble(v);\n\n        double minSideLength = 0.0;\n        v = parser.getParam(PARAM_MIN_SIDE_LENGTH);\n        if (v != null)\n          minSideLength = Double.parseDouble(v);\n\n        return new BBoxOverlapRatioValueSource(\n            strategy.makeShapeValueSource(), ctx.isGeo(),\n            (Rectangle) spatialArgs.getShape(),\n            queryTargetProportion, minSideLength);\n\n      case \"area\":\n        return new ShapeAreaValueSource(strategy.makeShapeValueSource(), ctx, ctx.isGeo());\n\n      case \"area2D\":\n        return new ShapeAreaValueSource(strategy.makeShapeValueSource(), ctx, false);\n\n      default:\n        return super.getValueSourceFromSpatialArgs(parser, field, spatialArgs, scoreParam, strategy);\n    }\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":["17727014530f6432ae28e319a0242b6030d3f18a"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"17727014530f6432ae28e319a0242b6030d3f18a","date":1416941348,"type":3,"author":"David Wayne Smiley","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/schema/BBoxField#getValueSourceFromSpatialArgs(QParser,SchemaField,SpatialArgs,String,BBoxStrategy).mjava","pathOld":"solr/core/src/java/org/apache/solr/schema/BBoxField#getValueSourceFromSpatialArgs(QParser,SchemaField,SpatialArgs,String,BBoxStrategy).mjava","sourceNew":"  @Override\n  protected ValueSource getValueSourceFromSpatialArgs(QParser parser, SchemaField field, SpatialArgs spatialArgs, String scoreParam, BBoxStrategy strategy) {\n    if (scoreParam == null) {\n      return null;\n    }\n    switch (scoreParam) {\n      //TODO move these to superclass after LUCENE-5804 ?\n      case OVERLAP_RATIO:\n        double queryTargetProportion = 0.25;//Suggested default; weights towards target area\n\n        String v = parser.getParam(PARAM_QUERY_TARGET_PROPORTION);\n        if (v != null)\n          queryTargetProportion = Double.parseDouble(v);\n\n        double minSideLength = 0.0;\n        v = parser.getParam(PARAM_MIN_SIDE_LENGTH);\n        if (v != null)\n          minSideLength = Double.parseDouble(v);\n\n        return new BBoxOverlapRatioValueSource(\n            strategy.makeShapeValueSource(), ctx.isGeo(),\n            (Rectangle) spatialArgs.getShape(),\n            queryTargetProportion, minSideLength);\n\n      case AREA:\n        return new ShapeAreaValueSource(strategy.makeShapeValueSource(), ctx, ctx.isGeo());\n\n      case AREA2D:\n        return new ShapeAreaValueSource(strategy.makeShapeValueSource(), ctx, false);\n\n      default:\n        return super.getValueSourceFromSpatialArgs(parser, field, spatialArgs, scoreParam, strategy);\n    }\n  }\n\n","sourceOld":"  @Override\n  protected ValueSource getValueSourceFromSpatialArgs(QParser parser, SchemaField field, SpatialArgs spatialArgs, String scoreParam, BBoxStrategy strategy) {\n    switch (scoreParam) {\n      //TODO move these to superclass after LUCENE-5804 ?\n      case \"overlapRatio\":\n        double queryTargetProportion = 0.25;//Suggested default; weights towards target area\n\n        String v = parser.getParam(PARAM_QUERY_TARGET_PROPORTION);\n        if (v != null)\n          queryTargetProportion = Double.parseDouble(v);\n\n        double minSideLength = 0.0;\n        v = parser.getParam(PARAM_MIN_SIDE_LENGTH);\n        if (v != null)\n          minSideLength = Double.parseDouble(v);\n\n        return new BBoxOverlapRatioValueSource(\n            strategy.makeShapeValueSource(), ctx.isGeo(),\n            (Rectangle) spatialArgs.getShape(),\n            queryTargetProportion, minSideLength);\n\n      case \"area\":\n        return new ShapeAreaValueSource(strategy.makeShapeValueSource(), ctx, ctx.isGeo());\n\n      case \"area2D\":\n        return new ShapeAreaValueSource(strategy.makeShapeValueSource(), ctx, false);\n\n      default:\n        return super.getValueSourceFromSpatialArgs(parser, field, spatialArgs, scoreParam, strategy);\n    }\n  }\n\n","bugFix":["aa75c94645bfc8da99a503e2018fd71899cbf9f2"],"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"167133992e7b384ce97f83ddb1dd2ddd09daf7aa","date":1420315776,"type":3,"author":"David Wayne Smiley","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/schema/BBoxField#getValueSourceFromSpatialArgs(QParser,SchemaField,SpatialArgs,String,BBoxStrategy).mjava","pathOld":"solr/core/src/java/org/apache/solr/schema/BBoxField#getValueSourceFromSpatialArgs(QParser,SchemaField,SpatialArgs,String,BBoxStrategy).mjava","sourceNew":"  @Override\n  protected ValueSource getValueSourceFromSpatialArgs(QParser parser, SchemaField field, SpatialArgs spatialArgs, String scoreParam, BBoxStrategy strategy) {\n    if (scoreParam == null) {\n      return null;\n    }\n\n    switch (scoreParam) {\n      //TODO move these to superclass after LUCENE-5804 ?\n      case OVERLAP_RATIO:\n        double queryTargetProportion = 0.25;//Suggested default; weights towards target area\n\n        String v = parser.getParam(PARAM_QUERY_TARGET_PROPORTION);\n        if (v != null)\n          queryTargetProportion = Double.parseDouble(v);\n\n        double minSideLength = 0.0;\n        v = parser.getParam(PARAM_MIN_SIDE_LENGTH);\n        if (v != null)\n          minSideLength = Double.parseDouble(v);\n\n        return new BBoxOverlapRatioValueSource(\n            strategy.makeShapeValueSource(), ctx.isGeo(),\n            (Rectangle) spatialArgs.getShape(),\n            queryTargetProportion, minSideLength);\n\n      case AREA:\n        return new ShapeAreaValueSource(strategy.makeShapeValueSource(), ctx, ctx.isGeo(),\n            distanceUnits.multiplierFromDegreesToThisUnit() * distanceUnits.multiplierFromDegreesToThisUnit());\n\n      case AREA2D:\n        return new ShapeAreaValueSource(strategy.makeShapeValueSource(), ctx, false,\n            distanceUnits.multiplierFromDegreesToThisUnit() * distanceUnits.multiplierFromDegreesToThisUnit());\n\n      default:\n        return super.getValueSourceFromSpatialArgs(parser, field, spatialArgs, scoreParam, strategy);\n    }\n  }\n\n","sourceOld":"  @Override\n  protected ValueSource getValueSourceFromSpatialArgs(QParser parser, SchemaField field, SpatialArgs spatialArgs, String scoreParam, BBoxStrategy strategy) {\n    if (scoreParam == null) {\n      return null;\n    }\n    switch (scoreParam) {\n      //TODO move these to superclass after LUCENE-5804 ?\n      case OVERLAP_RATIO:\n        double queryTargetProportion = 0.25;//Suggested default; weights towards target area\n\n        String v = parser.getParam(PARAM_QUERY_TARGET_PROPORTION);\n        if (v != null)\n          queryTargetProportion = Double.parseDouble(v);\n\n        double minSideLength = 0.0;\n        v = parser.getParam(PARAM_MIN_SIDE_LENGTH);\n        if (v != null)\n          minSideLength = Double.parseDouble(v);\n\n        return new BBoxOverlapRatioValueSource(\n            strategy.makeShapeValueSource(), ctx.isGeo(),\n            (Rectangle) spatialArgs.getShape(),\n            queryTargetProportion, minSideLength);\n\n      case AREA:\n        return new ShapeAreaValueSource(strategy.makeShapeValueSource(), ctx, ctx.isGeo());\n\n      case AREA2D:\n        return new ShapeAreaValueSource(strategy.makeShapeValueSource(), ctx, false);\n\n      default:\n        return super.getValueSourceFromSpatialArgs(parser, field, spatialArgs, scoreParam, strategy);\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"32b9119890a8e82252b6cc341ac491d18fa1e49b","date":1498575219,"type":3,"author":"Alan Woodward","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/schema/BBoxField#getValueSourceFromSpatialArgs(QParser,SchemaField,SpatialArgs,String,BBoxStrategy).mjava","pathOld":"solr/core/src/java/org/apache/solr/schema/BBoxField#getValueSourceFromSpatialArgs(QParser,SchemaField,SpatialArgs,String,BBoxStrategy).mjava","sourceNew":"  @Override\n  protected DoubleValuesSource getValueSourceFromSpatialArgs(QParser parser, SchemaField field, SpatialArgs spatialArgs, String scoreParam, BBoxStrategy strategy) {\n    if (scoreParam == null) {\n      return null;\n    }\n\n    switch (scoreParam) {\n      //TODO move these to superclass after LUCENE-5804 ?\n      case OVERLAP_RATIO:\n        double queryTargetProportion = 0.25;//Suggested default; weights towards target area\n\n        String v = parser.getParam(PARAM_QUERY_TARGET_PROPORTION);\n        if (v != null)\n          queryTargetProportion = Double.parseDouble(v);\n\n        double minSideLength = 0.0;\n        v = parser.getParam(PARAM_MIN_SIDE_LENGTH);\n        if (v != null)\n          minSideLength = Double.parseDouble(v);\n\n        return new BBoxOverlapRatioValueSource(\n            strategy.makeShapeValueSource(), ctx.isGeo(),\n            (Rectangle) spatialArgs.getShape(),\n            queryTargetProportion, minSideLength);\n\n      case AREA:\n        return new ShapeAreaValueSource(strategy.makeShapeValueSource(), ctx, ctx.isGeo(),\n            distanceUnits.multiplierFromDegreesToThisUnit() * distanceUnits.multiplierFromDegreesToThisUnit());\n\n      case AREA2D:\n        return new ShapeAreaValueSource(strategy.makeShapeValueSource(), ctx, false,\n            distanceUnits.multiplierFromDegreesToThisUnit() * distanceUnits.multiplierFromDegreesToThisUnit());\n\n      default:\n        return super.getValueSourceFromSpatialArgs(parser, field, spatialArgs, scoreParam, strategy);\n    }\n  }\n\n","sourceOld":"  @Override\n  protected ValueSource getValueSourceFromSpatialArgs(QParser parser, SchemaField field, SpatialArgs spatialArgs, String scoreParam, BBoxStrategy strategy) {\n    if (scoreParam == null) {\n      return null;\n    }\n\n    switch (scoreParam) {\n      //TODO move these to superclass after LUCENE-5804 ?\n      case OVERLAP_RATIO:\n        double queryTargetProportion = 0.25;//Suggested default; weights towards target area\n\n        String v = parser.getParam(PARAM_QUERY_TARGET_PROPORTION);\n        if (v != null)\n          queryTargetProportion = Double.parseDouble(v);\n\n        double minSideLength = 0.0;\n        v = parser.getParam(PARAM_MIN_SIDE_LENGTH);\n        if (v != null)\n          minSideLength = Double.parseDouble(v);\n\n        return new BBoxOverlapRatioValueSource(\n            strategy.makeShapeValueSource(), ctx.isGeo(),\n            (Rectangle) spatialArgs.getShape(),\n            queryTargetProportion, minSideLength);\n\n      case AREA:\n        return new ShapeAreaValueSource(strategy.makeShapeValueSource(), ctx, ctx.isGeo(),\n            distanceUnits.multiplierFromDegreesToThisUnit() * distanceUnits.multiplierFromDegreesToThisUnit());\n\n      case AREA2D:\n        return new ShapeAreaValueSource(strategy.makeShapeValueSource(), ctx, false,\n            distanceUnits.multiplierFromDegreesToThisUnit() * distanceUnits.multiplierFromDegreesToThisUnit());\n\n      default:\n        return super.getValueSourceFromSpatialArgs(parser, field, spatialArgs, scoreParam, strategy);\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"98f11c416d30e556e0004a9a84960702d12d35b1","date":1498628359,"type":3,"author":"Shalin Shekhar Mangar","isMerge":true,"pathNew":"solr/core/src/java/org/apache/solr/schema/BBoxField#getValueSourceFromSpatialArgs(QParser,SchemaField,SpatialArgs,String,BBoxStrategy).mjava","pathOld":"solr/core/src/java/org/apache/solr/schema/BBoxField#getValueSourceFromSpatialArgs(QParser,SchemaField,SpatialArgs,String,BBoxStrategy).mjava","sourceNew":"  @Override\n  protected DoubleValuesSource getValueSourceFromSpatialArgs(QParser parser, SchemaField field, SpatialArgs spatialArgs, String scoreParam, BBoxStrategy strategy) {\n    if (scoreParam == null) {\n      return null;\n    }\n\n    switch (scoreParam) {\n      //TODO move these to superclass after LUCENE-5804 ?\n      case OVERLAP_RATIO:\n        double queryTargetProportion = 0.25;//Suggested default; weights towards target area\n\n        String v = parser.getParam(PARAM_QUERY_TARGET_PROPORTION);\n        if (v != null)\n          queryTargetProportion = Double.parseDouble(v);\n\n        double minSideLength = 0.0;\n        v = parser.getParam(PARAM_MIN_SIDE_LENGTH);\n        if (v != null)\n          minSideLength = Double.parseDouble(v);\n\n        return new BBoxOverlapRatioValueSource(\n            strategy.makeShapeValueSource(), ctx.isGeo(),\n            (Rectangle) spatialArgs.getShape(),\n            queryTargetProportion, minSideLength);\n\n      case AREA:\n        return new ShapeAreaValueSource(strategy.makeShapeValueSource(), ctx, ctx.isGeo(),\n            distanceUnits.multiplierFromDegreesToThisUnit() * distanceUnits.multiplierFromDegreesToThisUnit());\n\n      case AREA2D:\n        return new ShapeAreaValueSource(strategy.makeShapeValueSource(), ctx, false,\n            distanceUnits.multiplierFromDegreesToThisUnit() * distanceUnits.multiplierFromDegreesToThisUnit());\n\n      default:\n        return super.getValueSourceFromSpatialArgs(parser, field, spatialArgs, scoreParam, strategy);\n    }\n  }\n\n","sourceOld":"  @Override\n  protected ValueSource getValueSourceFromSpatialArgs(QParser parser, SchemaField field, SpatialArgs spatialArgs, String scoreParam, BBoxStrategy strategy) {\n    if (scoreParam == null) {\n      return null;\n    }\n\n    switch (scoreParam) {\n      //TODO move these to superclass after LUCENE-5804 ?\n      case OVERLAP_RATIO:\n        double queryTargetProportion = 0.25;//Suggested default; weights towards target area\n\n        String v = parser.getParam(PARAM_QUERY_TARGET_PROPORTION);\n        if (v != null)\n          queryTargetProportion = Double.parseDouble(v);\n\n        double minSideLength = 0.0;\n        v = parser.getParam(PARAM_MIN_SIDE_LENGTH);\n        if (v != null)\n          minSideLength = Double.parseDouble(v);\n\n        return new BBoxOverlapRatioValueSource(\n            strategy.makeShapeValueSource(), ctx.isGeo(),\n            (Rectangle) spatialArgs.getShape(),\n            queryTargetProportion, minSideLength);\n\n      case AREA:\n        return new ShapeAreaValueSource(strategy.makeShapeValueSource(), ctx, ctx.isGeo(),\n            distanceUnits.multiplierFromDegreesToThisUnit() * distanceUnits.multiplierFromDegreesToThisUnit());\n\n      case AREA2D:\n        return new ShapeAreaValueSource(strategy.makeShapeValueSource(), ctx, false,\n            distanceUnits.multiplierFromDegreesToThisUnit() * distanceUnits.multiplierFromDegreesToThisUnit());\n\n      default:\n        return super.getValueSourceFromSpatialArgs(parser, field, spatialArgs, scoreParam, strategy);\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"28288370235ed02234a64753cdbf0c6ec096304a","date":1498726817,"type":3,"author":"Karl Wright","isMerge":true,"pathNew":"solr/core/src/java/org/apache/solr/schema/BBoxField#getValueSourceFromSpatialArgs(QParser,SchemaField,SpatialArgs,String,BBoxStrategy).mjava","pathOld":"solr/core/src/java/org/apache/solr/schema/BBoxField#getValueSourceFromSpatialArgs(QParser,SchemaField,SpatialArgs,String,BBoxStrategy).mjava","sourceNew":"  @Override\n  protected DoubleValuesSource getValueSourceFromSpatialArgs(QParser parser, SchemaField field, SpatialArgs spatialArgs, String scoreParam, BBoxStrategy strategy) {\n    if (scoreParam == null) {\n      return null;\n    }\n\n    switch (scoreParam) {\n      //TODO move these to superclass after LUCENE-5804 ?\n      case OVERLAP_RATIO:\n        double queryTargetProportion = 0.25;//Suggested default; weights towards target area\n\n        String v = parser.getParam(PARAM_QUERY_TARGET_PROPORTION);\n        if (v != null)\n          queryTargetProportion = Double.parseDouble(v);\n\n        double minSideLength = 0.0;\n        v = parser.getParam(PARAM_MIN_SIDE_LENGTH);\n        if (v != null)\n          minSideLength = Double.parseDouble(v);\n\n        return new BBoxOverlapRatioValueSource(\n            strategy.makeShapeValueSource(), ctx.isGeo(),\n            (Rectangle) spatialArgs.getShape(),\n            queryTargetProportion, minSideLength);\n\n      case AREA:\n        return new ShapeAreaValueSource(strategy.makeShapeValueSource(), ctx, ctx.isGeo(),\n            distanceUnits.multiplierFromDegreesToThisUnit() * distanceUnits.multiplierFromDegreesToThisUnit());\n\n      case AREA2D:\n        return new ShapeAreaValueSource(strategy.makeShapeValueSource(), ctx, false,\n            distanceUnits.multiplierFromDegreesToThisUnit() * distanceUnits.multiplierFromDegreesToThisUnit());\n\n      default:\n        return super.getValueSourceFromSpatialArgs(parser, field, spatialArgs, scoreParam, strategy);\n    }\n  }\n\n","sourceOld":"  @Override\n  protected ValueSource getValueSourceFromSpatialArgs(QParser parser, SchemaField field, SpatialArgs spatialArgs, String scoreParam, BBoxStrategy strategy) {\n    if (scoreParam == null) {\n      return null;\n    }\n\n    switch (scoreParam) {\n      //TODO move these to superclass after LUCENE-5804 ?\n      case OVERLAP_RATIO:\n        double queryTargetProportion = 0.25;//Suggested default; weights towards target area\n\n        String v = parser.getParam(PARAM_QUERY_TARGET_PROPORTION);\n        if (v != null)\n          queryTargetProportion = Double.parseDouble(v);\n\n        double minSideLength = 0.0;\n        v = parser.getParam(PARAM_MIN_SIDE_LENGTH);\n        if (v != null)\n          minSideLength = Double.parseDouble(v);\n\n        return new BBoxOverlapRatioValueSource(\n            strategy.makeShapeValueSource(), ctx.isGeo(),\n            (Rectangle) spatialArgs.getShape(),\n            queryTargetProportion, minSideLength);\n\n      case AREA:\n        return new ShapeAreaValueSource(strategy.makeShapeValueSource(), ctx, ctx.isGeo(),\n            distanceUnits.multiplierFromDegreesToThisUnit() * distanceUnits.multiplierFromDegreesToThisUnit());\n\n      case AREA2D:\n        return new ShapeAreaValueSource(strategy.makeShapeValueSource(), ctx, false,\n            distanceUnits.multiplierFromDegreesToThisUnit() * distanceUnits.multiplierFromDegreesToThisUnit());\n\n      default:\n        return super.getValueSourceFromSpatialArgs(parser, field, spatialArgs, scoreParam, strategy);\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"aa75c94645bfc8da99a503e2018fd71899cbf9f2":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"32b9119890a8e82252b6cc341ac491d18fa1e49b":["167133992e7b384ce97f83ddb1dd2ddd09daf7aa"],"17727014530f6432ae28e319a0242b6030d3f18a":["aa75c94645bfc8da99a503e2018fd71899cbf9f2"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"167133992e7b384ce97f83ddb1dd2ddd09daf7aa":["17727014530f6432ae28e319a0242b6030d3f18a"],"28288370235ed02234a64753cdbf0c6ec096304a":["167133992e7b384ce97f83ddb1dd2ddd09daf7aa","32b9119890a8e82252b6cc341ac491d18fa1e49b"],"98f11c416d30e556e0004a9a84960702d12d35b1":["167133992e7b384ce97f83ddb1dd2ddd09daf7aa","32b9119890a8e82252b6cc341ac491d18fa1e49b"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["28288370235ed02234a64753cdbf0c6ec096304a"]},"commit2Childs":{"aa75c94645bfc8da99a503e2018fd71899cbf9f2":["17727014530f6432ae28e319a0242b6030d3f18a"],"32b9119890a8e82252b6cc341ac491d18fa1e49b":["28288370235ed02234a64753cdbf0c6ec096304a","98f11c416d30e556e0004a9a84960702d12d35b1"],"17727014530f6432ae28e319a0242b6030d3f18a":["167133992e7b384ce97f83ddb1dd2ddd09daf7aa"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["aa75c94645bfc8da99a503e2018fd71899cbf9f2"],"167133992e7b384ce97f83ddb1dd2ddd09daf7aa":["32b9119890a8e82252b6cc341ac491d18fa1e49b","28288370235ed02234a64753cdbf0c6ec096304a","98f11c416d30e556e0004a9a84960702d12d35b1"],"28288370235ed02234a64753cdbf0c6ec096304a":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"98f11c416d30e556e0004a9a84960702d12d35b1":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["98f11c416d30e556e0004a9a84960702d12d35b1","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}