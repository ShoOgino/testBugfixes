{"path":"solr/core/src/java/org/apache/solr/search/facet/HLLAgg#createSlotAcc(FacetContext,int,int).mjava","commits":[{"id":"2ddd9456ddbc1edc62d5a14a84ad0e4fcd74a008","date":1431878853,"type":0,"author":"Yonik Seeley","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/search/facet/HLLAgg#createSlotAcc(FacetContext,int,int).mjava","pathOld":"/dev/null","sourceNew":"  @Override\n  public SlotAcc createSlotAcc(FacetContext fcontext, int numDocs, int numSlots) throws IOException {\n    SchemaField sf = fcontext.qcontext.searcher().getSchema().getField(getArg());\n    if (sf.multiValued() || sf.getType().multiValuedFieldCache()) {\n      if (sf.hasDocValues()) {\n        return new UniqueMultiDvSlotAcc(fcontext, getArg(), numSlots, fcontext.isShard() ? factory : null);\n      } else {\n        return new UniqueMultivaluedSlotAcc(fcontext, getArg(), numSlots, fcontext.isShard() ? factory : null);\n      }\n    } else {\n      if (sf.getType().getNumericType() != null) {\n        // always use hll here since we don't know how many values there are?\n        return new NumericAcc(fcontext, getArg(), numSlots);\n      } else {\n        return new UniqueSinglevaluedSlotAcc(fcontext, getArg(), numSlots, fcontext.isShard() ? factory : null);\n      }\n    }\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":["dd30fbe31e14b6b22bdfd331cb2685137e9a9e86"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"3d81baa64023bbb9b43f6d929ee168b105940d30","date":1486492702,"type":3,"author":"Tomas Fernandez Lobbe","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/search/facet/HLLAgg#createSlotAcc(FacetContext,int,int).mjava","pathOld":"solr/core/src/java/org/apache/solr/search/facet/HLLAgg#createSlotAcc(FacetContext,int,int).mjava","sourceNew":"  @Override\n  public SlotAcc createSlotAcc(FacetContext fcontext, int numDocs, int numSlots) throws IOException {\n    SchemaField sf = fcontext.qcontext.searcher().getSchema().getField(getArg());\n    if (sf.multiValued() || sf.getType().multiValuedFieldCache()) {\n      if (sf.hasDocValues()) {\n        return new UniqueMultiDvSlotAcc(fcontext, getArg(), numSlots, fcontext.isShard() ? factory : null);\n      } else {\n        return new UniqueMultivaluedSlotAcc(fcontext, getArg(), numSlots, fcontext.isShard() ? factory : null);\n      }\n    } else {\n      if (sf.getType().getNumberType() != null) {\n        // always use hll here since we don't know how many values there are?\n        return new NumericAcc(fcontext, getArg(), numSlots);\n      } else {\n        return new UniqueSinglevaluedSlotAcc(fcontext, getArg(), numSlots, fcontext.isShard() ? factory : null);\n      }\n    }\n  }\n\n","sourceOld":"  @Override\n  public SlotAcc createSlotAcc(FacetContext fcontext, int numDocs, int numSlots) throws IOException {\n    SchemaField sf = fcontext.qcontext.searcher().getSchema().getField(getArg());\n    if (sf.multiValued() || sf.getType().multiValuedFieldCache()) {\n      if (sf.hasDocValues()) {\n        return new UniqueMultiDvSlotAcc(fcontext, getArg(), numSlots, fcontext.isShard() ? factory : null);\n      } else {\n        return new UniqueMultivaluedSlotAcc(fcontext, getArg(), numSlots, fcontext.isShard() ? factory : null);\n      }\n    } else {\n      if (sf.getType().getNumericType() != null) {\n        // always use hll here since we don't know how many values there are?\n        return new NumericAcc(fcontext, getArg(), numSlots);\n      } else {\n        return new UniqueSinglevaluedSlotAcc(fcontext, getArg(), numSlots, fcontext.isShard() ? factory : null);\n      }\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"dd30fbe31e14b6b22bdfd331cb2685137e9a9e86","date":1493867073,"type":3,"author":"yonik","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/search/facet/HLLAgg#createSlotAcc(FacetContext,int,int).mjava","pathOld":"solr/core/src/java/org/apache/solr/search/facet/HLLAgg#createSlotAcc(FacetContext,int,int).mjava","sourceNew":"  @Override\n  public SlotAcc createSlotAcc(FacetContext fcontext, int numDocs, int numSlots) throws IOException {\n    SchemaField sf = fcontext.qcontext.searcher().getSchema().getField(getArg());\n    if (sf.multiValued() || sf.getType().multiValuedFieldCache()) {\n      if (sf.hasDocValues()) {\n        return new UniqueMultiDvSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      } else {\n        return new UniqueMultivaluedSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      }\n    } else {\n      if (sf.getType().getNumberType() != null) {\n        // always use hll here since we don't know how many values there are?\n        return new NumericAcc(fcontext, getArg(), numSlots);\n      } else {\n        return new UniqueSinglevaluedSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      }\n    }\n  }\n\n","sourceOld":"  @Override\n  public SlotAcc createSlotAcc(FacetContext fcontext, int numDocs, int numSlots) throws IOException {\n    SchemaField sf = fcontext.qcontext.searcher().getSchema().getField(getArg());\n    if (sf.multiValued() || sf.getType().multiValuedFieldCache()) {\n      if (sf.hasDocValues()) {\n        return new UniqueMultiDvSlotAcc(fcontext, getArg(), numSlots, fcontext.isShard() ? factory : null);\n      } else {\n        return new UniqueMultivaluedSlotAcc(fcontext, getArg(), numSlots, fcontext.isShard() ? factory : null);\n      }\n    } else {\n      if (sf.getType().getNumberType() != null) {\n        // always use hll here since we don't know how many values there are?\n        return new NumericAcc(fcontext, getArg(), numSlots);\n      } else {\n        return new UniqueSinglevaluedSlotAcc(fcontext, getArg(), numSlots, fcontext.isShard() ? factory : null);\n      }\n    }\n  }\n\n","bugFix":["2ddd9456ddbc1edc62d5a14a84ad0e4fcd74a008"],"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"e9017cf144952056066919f1ebc7897ff9bd71b1","date":1496757600,"type":3,"author":"Shalin Shekhar Mangar","isMerge":true,"pathNew":"solr/core/src/java/org/apache/solr/search/facet/HLLAgg#createSlotAcc(FacetContext,int,int).mjava","pathOld":"solr/core/src/java/org/apache/solr/search/facet/HLLAgg#createSlotAcc(FacetContext,int,int).mjava","sourceNew":"  @Override\n  public SlotAcc createSlotAcc(FacetContext fcontext, int numDocs, int numSlots) throws IOException {\n    SchemaField sf = fcontext.qcontext.searcher().getSchema().getField(getArg());\n    if (sf.multiValued() || sf.getType().multiValuedFieldCache()) {\n      if (sf.hasDocValues()) {\n        return new UniqueMultiDvSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      } else {\n        return new UniqueMultivaluedSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      }\n    } else {\n      if (sf.getType().getNumberType() != null) {\n        // always use hll here since we don't know how many values there are?\n        return new NumericAcc(fcontext, getArg(), numSlots);\n      } else {\n        return new UniqueSinglevaluedSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      }\n    }\n  }\n\n","sourceOld":"  @Override\n  public SlotAcc createSlotAcc(FacetContext fcontext, int numDocs, int numSlots) throws IOException {\n    SchemaField sf = fcontext.qcontext.searcher().getSchema().getField(getArg());\n    if (sf.multiValued() || sf.getType().multiValuedFieldCache()) {\n      if (sf.hasDocValues()) {\n        return new UniqueMultiDvSlotAcc(fcontext, getArg(), numSlots, fcontext.isShard() ? factory : null);\n      } else {\n        return new UniqueMultivaluedSlotAcc(fcontext, getArg(), numSlots, fcontext.isShard() ? factory : null);\n      }\n    } else {\n      if (sf.getType().getNumberType() != null) {\n        // always use hll here since we don't know how many values there are?\n        return new NumericAcc(fcontext, getArg(), numSlots);\n      } else {\n        return new UniqueSinglevaluedSlotAcc(fcontext, getArg(), numSlots, fcontext.isShard() ? factory : null);\n      }\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"0138536655ed6adafa2e07c09cd3c9572112922f","date":1497930179,"type":3,"author":"Cao Manh Dat","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/search/facet/HLLAgg#createSlotAcc(FacetContext,int,int).mjava","pathOld":"solr/core/src/java/org/apache/solr/search/facet/HLLAgg#createSlotAcc(FacetContext,int,int).mjava","sourceNew":"  @Override\n  public SlotAcc createSlotAcc(FacetContext fcontext, int numDocs, int numSlots) throws IOException {\n    SchemaField sf = fcontext.qcontext.searcher().getSchema().getField(getArg());\n    if (sf.multiValued() || sf.getType().multiValuedFieldCache()) {\n      if (sf.getType().isPointField()) {\n        return new SortedNumericAcc(fcontext, getArg(), numSlots);\n      } else if (sf.hasDocValues()) {\n        return new UniqueMultiDvSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      } else {\n        return new UniqueMultivaluedSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      }\n    } else {\n      if (sf.getType().getNumberType() != null) {\n        // always use hll here since we don't know how many values there are?\n        return new NumericAcc(fcontext, getArg(), numSlots);\n      } else {\n        return new UniqueSinglevaluedSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      }\n    }\n  }\n\n","sourceOld":"  @Override\n  public SlotAcc createSlotAcc(FacetContext fcontext, int numDocs, int numSlots) throws IOException {\n    SchemaField sf = fcontext.qcontext.searcher().getSchema().getField(getArg());\n    if (sf.multiValued() || sf.getType().multiValuedFieldCache()) {\n      if (sf.hasDocValues()) {\n        return new UniqueMultiDvSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      } else {\n        return new UniqueMultivaluedSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      }\n    } else {\n      if (sf.getType().getNumberType() != null) {\n        // always use hll here since we don't know how many values there are?\n        return new NumericAcc(fcontext, getArg(), numSlots);\n      } else {\n        return new UniqueSinglevaluedSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      }\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"2a3ed3f77cdd034e789d00d1ca8bb7054c9fb8e9","date":1498028748,"type":3,"author":"Shalin Shekhar Mangar","isMerge":true,"pathNew":"solr/core/src/java/org/apache/solr/search/facet/HLLAgg#createSlotAcc(FacetContext,int,int).mjava","pathOld":"solr/core/src/java/org/apache/solr/search/facet/HLLAgg#createSlotAcc(FacetContext,int,int).mjava","sourceNew":"  @Override\n  public SlotAcc createSlotAcc(FacetContext fcontext, int numDocs, int numSlots) throws IOException {\n    SchemaField sf = fcontext.qcontext.searcher().getSchema().getField(getArg());\n    if (sf.multiValued() || sf.getType().multiValuedFieldCache()) {\n      if (sf.getType().isPointField()) {\n        return new SortedNumericAcc(fcontext, getArg(), numSlots);\n      } else if (sf.hasDocValues()) {\n        return new UniqueMultiDvSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      } else {\n        return new UniqueMultivaluedSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      }\n    } else {\n      if (sf.getType().getNumberType() != null) {\n        // always use hll here since we don't know how many values there are?\n        return new NumericAcc(fcontext, getArg(), numSlots);\n      } else {\n        return new UniqueSinglevaluedSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      }\n    }\n  }\n\n","sourceOld":"  @Override\n  public SlotAcc createSlotAcc(FacetContext fcontext, int numDocs, int numSlots) throws IOException {\n    SchemaField sf = fcontext.qcontext.searcher().getSchema().getField(getArg());\n    if (sf.multiValued() || sf.getType().multiValuedFieldCache()) {\n      if (sf.hasDocValues()) {\n        return new UniqueMultiDvSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      } else {\n        return new UniqueMultivaluedSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      }\n    } else {\n      if (sf.getType().getNumberType() != null) {\n        // always use hll here since we don't know how many values there are?\n        return new NumericAcc(fcontext, getArg(), numSlots);\n      } else {\n        return new UniqueSinglevaluedSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      }\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"28288370235ed02234a64753cdbf0c6ec096304a","date":1498726817,"type":3,"author":"Karl Wright","isMerge":true,"pathNew":"solr/core/src/java/org/apache/solr/search/facet/HLLAgg#createSlotAcc(FacetContext,int,int).mjava","pathOld":"solr/core/src/java/org/apache/solr/search/facet/HLLAgg#createSlotAcc(FacetContext,int,int).mjava","sourceNew":"  @Override\n  public SlotAcc createSlotAcc(FacetContext fcontext, int numDocs, int numSlots) throws IOException {\n    SchemaField sf = fcontext.qcontext.searcher().getSchema().getField(getArg());\n    if (sf.multiValued() || sf.getType().multiValuedFieldCache()) {\n      if (sf.getType().isPointField()) {\n        return new SortedNumericAcc(fcontext, getArg(), numSlots);\n      } else if (sf.hasDocValues()) {\n        return new UniqueMultiDvSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      } else {\n        return new UniqueMultivaluedSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      }\n    } else {\n      if (sf.getType().getNumberType() != null) {\n        // always use hll here since we don't know how many values there are?\n        return new NumericAcc(fcontext, getArg(), numSlots);\n      } else {\n        return new UniqueSinglevaluedSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      }\n    }\n  }\n\n","sourceOld":"  @Override\n  public SlotAcc createSlotAcc(FacetContext fcontext, int numDocs, int numSlots) throws IOException {\n    SchemaField sf = fcontext.qcontext.searcher().getSchema().getField(getArg());\n    if (sf.multiValued() || sf.getType().multiValuedFieldCache()) {\n      if (sf.hasDocValues()) {\n        return new UniqueMultiDvSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      } else {\n        return new UniqueMultivaluedSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      }\n    } else {\n      if (sf.getType().getNumberType() != null) {\n        // always use hll here since we don't know how many values there are?\n        return new NumericAcc(fcontext, getArg(), numSlots);\n      } else {\n        return new UniqueSinglevaluedSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      }\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"1c841e27891873cab110ebeb89f124a8ec470176","date":1586527220,"type":5,"author":"Munendra S N","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/search/facet/HLLAgg#createSlotAcc(FacetContext,long,int).mjava","pathOld":"solr/core/src/java/org/apache/solr/search/facet/HLLAgg#createSlotAcc(FacetContext,int,int).mjava","sourceNew":"  @Override\n  public SlotAcc createSlotAcc(FacetContext fcontext, long numDocs, int numSlots) throws IOException {\n    SchemaField sf = fcontext.qcontext.searcher().getSchema().getField(getArg());\n    if (sf.multiValued() || sf.getType().multiValuedFieldCache()) {\n      if (sf.getType().isPointField()) {\n        return new SortedNumericAcc(fcontext, getArg(), numSlots);\n      } else if (sf.hasDocValues()) {\n        return new UniqueMultiDvSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      } else {\n        return new UniqueMultivaluedSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      }\n    } else {\n      if (sf.getType().getNumberType() != null) {\n        // always use hll here since we don't know how many values there are?\n        return new NumericAcc(fcontext, getArg(), numSlots);\n      } else {\n        return new UniqueSinglevaluedSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      }\n    }\n  }\n\n","sourceOld":"  @Override\n  public SlotAcc createSlotAcc(FacetContext fcontext, int numDocs, int numSlots) throws IOException {\n    SchemaField sf = fcontext.qcontext.searcher().getSchema().getField(getArg());\n    if (sf.multiValued() || sf.getType().multiValuedFieldCache()) {\n      if (sf.getType().isPointField()) {\n        return new SortedNumericAcc(fcontext, getArg(), numSlots);\n      } else if (sf.hasDocValues()) {\n        return new UniqueMultiDvSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      } else {\n        return new UniqueMultivaluedSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      }\n    } else {\n      if (sf.getType().getNumberType() != null) {\n        // always use hll here since we don't know how many values there are?\n        return new NumericAcc(fcontext, getArg(), numSlots);\n      } else {\n        return new UniqueSinglevaluedSlotAcc(fcontext, sf, numSlots, fcontext.isShard() ? factory : null);\n      }\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"1c841e27891873cab110ebeb89f124a8ec470176":["28288370235ed02234a64753cdbf0c6ec096304a"],"e9017cf144952056066919f1ebc7897ff9bd71b1":["3d81baa64023bbb9b43f6d929ee168b105940d30","dd30fbe31e14b6b22bdfd331cb2685137e9a9e86"],"3d81baa64023bbb9b43f6d929ee168b105940d30":["2ddd9456ddbc1edc62d5a14a84ad0e4fcd74a008"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"0138536655ed6adafa2e07c09cd3c9572112922f":["dd30fbe31e14b6b22bdfd331cb2685137e9a9e86"],"2ddd9456ddbc1edc62d5a14a84ad0e4fcd74a008":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"dd30fbe31e14b6b22bdfd331cb2685137e9a9e86":["3d81baa64023bbb9b43f6d929ee168b105940d30"],"28288370235ed02234a64753cdbf0c6ec096304a":["dd30fbe31e14b6b22bdfd331cb2685137e9a9e86","0138536655ed6adafa2e07c09cd3c9572112922f"],"2a3ed3f77cdd034e789d00d1ca8bb7054c9fb8e9":["e9017cf144952056066919f1ebc7897ff9bd71b1","0138536655ed6adafa2e07c09cd3c9572112922f"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["1c841e27891873cab110ebeb89f124a8ec470176"]},"commit2Childs":{"1c841e27891873cab110ebeb89f124a8ec470176":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"e9017cf144952056066919f1ebc7897ff9bd71b1":["2a3ed3f77cdd034e789d00d1ca8bb7054c9fb8e9"],"3d81baa64023bbb9b43f6d929ee168b105940d30":["e9017cf144952056066919f1ebc7897ff9bd71b1","dd30fbe31e14b6b22bdfd331cb2685137e9a9e86"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["2ddd9456ddbc1edc62d5a14a84ad0e4fcd74a008"],"0138536655ed6adafa2e07c09cd3c9572112922f":["28288370235ed02234a64753cdbf0c6ec096304a","2a3ed3f77cdd034e789d00d1ca8bb7054c9fb8e9"],"2ddd9456ddbc1edc62d5a14a84ad0e4fcd74a008":["3d81baa64023bbb9b43f6d929ee168b105940d30"],"dd30fbe31e14b6b22bdfd331cb2685137e9a9e86":["e9017cf144952056066919f1ebc7897ff9bd71b1","0138536655ed6adafa2e07c09cd3c9572112922f","28288370235ed02234a64753cdbf0c6ec096304a"],"28288370235ed02234a64753cdbf0c6ec096304a":["1c841e27891873cab110ebeb89f124a8ec470176"],"2a3ed3f77cdd034e789d00d1ca8bb7054c9fb8e9":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["2a3ed3f77cdd034e789d00d1ca8bb7054c9fb8e9","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}