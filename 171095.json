{"path":"lucene/core/src/test/org/apache/lucene/search/similarities/TestSimilarityBase#testBEB1().mjava","commits":[{"id":"3a119bbc8703c10faa329ec201c654b3a35a1e3e","date":1328644745,"type":1,"author":"Steven Rowe","isMerge":false,"pathNew":"lucene/core/src/test/org/apache/lucene/search/similarities/TestSimilarityBase#testBEB1().mjava","pathOld":"lucene/src/test/org/apache/lucene/search/similarities/TestSimilarityBase#testBEB1().mjava","sourceNew":"  /** Correctness test for the BEB1 DFR model. */\n  public void testBEB1() throws IOException {\n    SimilarityBase sim = new DFRSimilarity(\n        new BasicModelBE(), new AfterEffectB(), new NormalizationH1());\n    float tfn = FREQ * AVG_FIELD_LENGTH / DOC_LEN;  // 8.75\n    float b = (TOTAL_TERM_FREQ + 1 + 1) / ((DOC_FREQ + 1) * (tfn + 1));  // 0.67132866\n    double f = TOTAL_TERM_FREQ + 1 + tfn;\n    double n = f + NUMBER_OF_DOCUMENTS;\n    double n1 = n + f - 1;        // 258.5\n    double m1 = n + f - tfn - 2;  // 248.75\n    double n2 = f;                                      // 79.75\n    double m2 = f - tfn;                                // 71.0\n    float be = (float)(-SimilarityBase.log2(n - 1) -\n               SimilarityBase.log2(Math.E) +                   // -8.924494472554715\n               ((m1 + 0.5f) * SimilarityBase.log2(n1 / m1) +\n                (n1 - m1) * SimilarityBase.log2(n1)) -         // 91.9620374903885\n               ((m2 + 0.5f) * SimilarityBase.log2(n2 / m2) +\n                (n2 - m2) * SimilarityBase.log2(n2)));         // 67.26544321004599\n               // 15.7720995\n    float gold = b * be;                                       // 10.588263\n    correctnessTestCore(sim, gold);\n  }\n\n","sourceOld":"  /** Correctness test for the BEB1 DFR model. */\n  public void testBEB1() throws IOException {\n    SimilarityBase sim = new DFRSimilarity(\n        new BasicModelBE(), new AfterEffectB(), new NormalizationH1());\n    float tfn = FREQ * AVG_FIELD_LENGTH / DOC_LEN;  // 8.75\n    float b = (TOTAL_TERM_FREQ + 1 + 1) / ((DOC_FREQ + 1) * (tfn + 1));  // 0.67132866\n    double f = TOTAL_TERM_FREQ + 1 + tfn;\n    double n = f + NUMBER_OF_DOCUMENTS;\n    double n1 = n + f - 1;        // 258.5\n    double m1 = n + f - tfn - 2;  // 248.75\n    double n2 = f;                                      // 79.75\n    double m2 = f - tfn;                                // 71.0\n    float be = (float)(-SimilarityBase.log2(n - 1) -\n               SimilarityBase.log2(Math.E) +                   // -8.924494472554715\n               ((m1 + 0.5f) * SimilarityBase.log2(n1 / m1) +\n                (n1 - m1) * SimilarityBase.log2(n1)) -         // 91.9620374903885\n               ((m2 + 0.5f) * SimilarityBase.log2(n2 / m2) +\n                (n2 - m2) * SimilarityBase.log2(n2)));         // 67.26544321004599\n               // 15.7720995\n    float gold = b * be;                                       // 10.588263\n    correctnessTestCore(sim, gold);\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"83d379038462cf6dcf64cc9e9a49053c4bb78011","date":1512580797,"type":4,"author":"Adrien Grand","isMerge":false,"pathNew":"/dev/null","pathOld":"lucene/core/src/test/org/apache/lucene/search/similarities/TestSimilarityBase#testBEB1().mjava","sourceNew":null,"sourceOld":"  /** Correctness test for the BEB1 DFR model. */\n  public void testBEB1() throws IOException {\n    SimilarityBase sim = new DFRSimilarity(\n        new BasicModelBE(), new AfterEffectB(), new NormalizationH1());\n    float tfn = FREQ * AVG_FIELD_LENGTH / DOC_LEN;  // 8.75\n    float b = (TOTAL_TERM_FREQ + 1 + 1) / ((DOC_FREQ + 1) * (tfn + 1));  // 0.67132866\n    double f = TOTAL_TERM_FREQ + 1 + tfn;\n    double n = f + NUMBER_OF_DOCUMENTS;\n    double n1 = n + f - 1;        // 258.5\n    double m1 = n + f - tfn - 2;  // 248.75\n    double n2 = f;                                      // 79.75\n    double m2 = f - tfn;                                // 71.0\n    float be = (float)(-SimilarityBase.log2(n - 1) -\n               SimilarityBase.log2(Math.E) +                   // -8.924494472554715\n               ((m1 + 0.5f) * SimilarityBase.log2(n1 / m1) +\n                (n1 - m1) * SimilarityBase.log2(n1)) -         // 91.9620374903885\n               ((m2 + 0.5f) * SimilarityBase.log2(n2 / m2) +\n                (n2 - m2) * SimilarityBase.log2(n2)));         // 67.26544321004599\n               // 15.7720995\n    float gold = b * be;                                       // 10.588263\n    correctnessTestCore(sim, gold);\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"83d379038462cf6dcf64cc9e9a49053c4bb78011":["3a119bbc8703c10faa329ec201c654b3a35a1e3e"],"3a119bbc8703c10faa329ec201c654b3a35a1e3e":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["83d379038462cf6dcf64cc9e9a49053c4bb78011"]},"commit2Childs":{"83d379038462cf6dcf64cc9e9a49053c4bb78011":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"3a119bbc8703c10faa329ec201c654b3a35a1e3e":["83d379038462cf6dcf64cc9e9a49053c4bb78011"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["3a119bbc8703c10faa329ec201c654b3a35a1e3e"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}