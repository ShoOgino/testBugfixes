{"path":"src/test/org/apache/solr/update/DirectUpdateHandlerTest#testDeleteCommit().mjava","commits":[{"id":"c2c5b6c69b7a616e2efe0053dfc5e07b6d6f4b8d","date":1224067136,"type":0,"author":"Shalin Shekhar Mangar","isMerge":false,"pathNew":"src/test/org/apache/solr/update/DirectUpdateHandlerTest#testDeleteCommit().mjava","pathOld":"/dev/null","sourceNew":"  public void testDeleteCommit() throws Exception {\r\n    addSimpleDoc(\"A\");\r\n    addSimpleDoc(\"B\");\r\n\r\n    // commit \"A\", \"B\"\r\n    SolrCore core = h.getCore();\r\n    UpdateHandler updater = core.getUpdateHandler();\r\n    CommitUpdateCommand cmtCmd = new CommitUpdateCommand(false);\r\n    cmtCmd.waitSearcher = true;\r\n    updater.commit(cmtCmd);\r\n\r\n    // search - \"A\",\"B\" should be found.\r\n    Map<String,String> args = new HashMap<String, String>();\r\n    args.put( CommonParams.Q, \"id:A OR id:B\" );\r\n    args.put( \"indent\", \"true\" );\r\n    SolrQueryRequest req = new LocalSolrQueryRequest( core, new MapSolrParams( args) );\r\n    assertQ(\"\\\"A\\\" and \\\"B\\\" should be found.\", req\r\n            ,\"//*[@numFound='2']\"\r\n            ,\"//result/doc[1]/int[@name='id'][.='A']\"\r\n            ,\"//result/doc[2]/int[@name='id'][.='B']\"\r\n            );\r\n\r\n    // delete \"B\"\r\n    deleteSimpleDoc(\"B\");\r\n\r\n    // search - \"A\",\"B\" should be found.\r\n    assertQ(\"\\\"A\\\" and \\\"B\\\" should be found.\", req\r\n            ,\"//*[@numFound='2']\"\r\n            ,\"//result/doc[1]/int[@name='id'][.='A']\"\r\n            ,\"//result/doc[2]/int[@name='id'][.='B']\"\r\n            );\r\n \r\n    // commit\r\n    updater.commit(cmtCmd);\r\n    \r\n    // search - \"B\" should not be found.\r\n    assertQ(\"\\\"B\\\" should not be found.\", req\r\n        ,\"//*[@numFound='1']\"\r\n        ,\"//result/doc[1]/int[@name='id'][.='A']\"\r\n        );\r\n  }\r\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"3dd4ac4fa84a1b56111ca47b15965c5a06f255c7","date":1249520987,"type":3,"author":"Yonik Seeley","isMerge":false,"pathNew":"src/test/org/apache/solr/update/DirectUpdateHandlerTest#testDeleteCommit().mjava","pathOld":"src/test/org/apache/solr/update/DirectUpdateHandlerTest#testDeleteCommit().mjava","sourceNew":"  public void testDeleteCommit() throws Exception {\r\n    addSimpleDoc(\"A\");\r\n    addSimpleDoc(\"B\");\r\n\r\n    // commit \"A\", \"B\"\r\n    SolrCore core = h.getCore();\r\n    UpdateHandler updater = core.getUpdateHandler();\r\n    CommitUpdateCommand cmtCmd = new CommitUpdateCommand(false);\r\n    cmtCmd.waitSearcher = true;\r\n    updater.commit(cmtCmd);\r\n\r\n    // search - \"A\",\"B\" should be found.\r\n    Map<String,String> args = new HashMap<String, String>();\r\n    args.put( CommonParams.Q, \"id:A OR id:B\" );\r\n    args.put( \"indent\", \"true\" );\r\n    SolrQueryRequest req = new LocalSolrQueryRequest( core, new MapSolrParams( args) );\r\n    assertQ(\"\\\"A\\\" and \\\"B\\\" should be found.\", req\r\n            ,\"//*[@numFound='2']\"\r\n            ,\"//result/doc[1]/str[@name='id'][.='A']\"\r\n            ,\"//result/doc[2]/str[@name='id'][.='B']\"\r\n            );\r\n\r\n    // delete \"B\"\r\n    deleteSimpleDoc(\"B\");\r\n\r\n    // search - \"A\",\"B\" should be found.\r\n    assertQ(\"\\\"A\\\" and \\\"B\\\" should be found.\", req\r\n            ,\"//*[@numFound='2']\"\r\n            ,\"//result/doc[1]/str[@name='id'][.='A']\"\r\n            ,\"//result/doc[2]/str[@name='id'][.='B']\"\r\n            );\r\n \r\n    // commit\r\n    updater.commit(cmtCmd);\r\n    \r\n    // search - \"B\" should not be found.\r\n    assertQ(\"\\\"B\\\" should not be found.\", req\r\n        ,\"//*[@numFound='1']\"\r\n        ,\"//result/doc[1]/str[@name='id'][.='A']\"\r\n        );\r\n  }\r\n\n","sourceOld":"  public void testDeleteCommit() throws Exception {\r\n    addSimpleDoc(\"A\");\r\n    addSimpleDoc(\"B\");\r\n\r\n    // commit \"A\", \"B\"\r\n    SolrCore core = h.getCore();\r\n    UpdateHandler updater = core.getUpdateHandler();\r\n    CommitUpdateCommand cmtCmd = new CommitUpdateCommand(false);\r\n    cmtCmd.waitSearcher = true;\r\n    updater.commit(cmtCmd);\r\n\r\n    // search - \"A\",\"B\" should be found.\r\n    Map<String,String> args = new HashMap<String, String>();\r\n    args.put( CommonParams.Q, \"id:A OR id:B\" );\r\n    args.put( \"indent\", \"true\" );\r\n    SolrQueryRequest req = new LocalSolrQueryRequest( core, new MapSolrParams( args) );\r\n    assertQ(\"\\\"A\\\" and \\\"B\\\" should be found.\", req\r\n            ,\"//*[@numFound='2']\"\r\n            ,\"//result/doc[1]/int[@name='id'][.='A']\"\r\n            ,\"//result/doc[2]/int[@name='id'][.='B']\"\r\n            );\r\n\r\n    // delete \"B\"\r\n    deleteSimpleDoc(\"B\");\r\n\r\n    // search - \"A\",\"B\" should be found.\r\n    assertQ(\"\\\"A\\\" and \\\"B\\\" should be found.\", req\r\n            ,\"//*[@numFound='2']\"\r\n            ,\"//result/doc[1]/int[@name='id'][.='A']\"\r\n            ,\"//result/doc[2]/int[@name='id'][.='B']\"\r\n            );\r\n \r\n    // commit\r\n    updater.commit(cmtCmd);\r\n    \r\n    // search - \"B\" should not be found.\r\n    assertQ(\"\\\"B\\\" should not be found.\", req\r\n        ,\"//*[@numFound='1']\"\r\n        ,\"//result/doc[1]/int[@name='id'][.='A']\"\r\n        );\r\n  }\r\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"8744ad19f47109f36428849641ad30f090aa279e","date":1255357510,"type":3,"author":"Koji Sekiguchi","isMerge":false,"pathNew":"src/test/org/apache/solr/update/DirectUpdateHandlerTest#testDeleteCommit().mjava","pathOld":"src/test/org/apache/solr/update/DirectUpdateHandlerTest#testDeleteCommit().mjava","sourceNew":"  public void testDeleteCommit() throws Exception {\n    addSimpleDoc(\"A\");\n    addSimpleDoc(\"B\");\n\n    // commit \"A\", \"B\"\n    SolrCore core = h.getCore();\n    UpdateHandler updater = core.getUpdateHandler();\n    CommitUpdateCommand cmtCmd = new CommitUpdateCommand(false);\n    cmtCmd.waitSearcher = true;\n    updater.commit(cmtCmd);\n\n    // search - \"A\",\"B\" should be found.\n    Map<String,String> args = new HashMap<String, String>();\n    args.put( CommonParams.Q, \"id:A OR id:B\" );\n    args.put( \"indent\", \"true\" );\n    SolrQueryRequest req = new LocalSolrQueryRequest( core, new MapSolrParams( args) );\n    assertQ(\"\\\"A\\\" and \\\"B\\\" should be found.\", req\n            ,\"//*[@numFound='2']\"\n            ,\"//result/doc[1]/str[@name='id'][.='A']\"\n            ,\"//result/doc[2]/str[@name='id'][.='B']\"\n            );\n\n    // delete \"B\"\n    deleteSimpleDoc(\"B\");\n\n    // search - \"A\",\"B\" should be found.\n    assertQ(\"\\\"A\\\" and \\\"B\\\" should be found.\", req\n            ,\"//*[@numFound='2']\"\n            ,\"//result/doc[1]/str[@name='id'][.='A']\"\n            ,\"//result/doc[2]/str[@name='id'][.='B']\"\n            );\n \n    // commit\n    updater.commit(cmtCmd);\n    \n    // search - \"B\" should not be found.\n    assertQ(\"\\\"B\\\" should not be found.\", req\n        ,\"//*[@numFound='1']\"\n        ,\"//result/doc[1]/str[@name='id'][.='A']\"\n        );\n  }\n\n","sourceOld":"  public void testDeleteCommit() throws Exception {\r\n    addSimpleDoc(\"A\");\r\n    addSimpleDoc(\"B\");\r\n\r\n    // commit \"A\", \"B\"\r\n    SolrCore core = h.getCore();\r\n    UpdateHandler updater = core.getUpdateHandler();\r\n    CommitUpdateCommand cmtCmd = new CommitUpdateCommand(false);\r\n    cmtCmd.waitSearcher = true;\r\n    updater.commit(cmtCmd);\r\n\r\n    // search - \"A\",\"B\" should be found.\r\n    Map<String,String> args = new HashMap<String, String>();\r\n    args.put( CommonParams.Q, \"id:A OR id:B\" );\r\n    args.put( \"indent\", \"true\" );\r\n    SolrQueryRequest req = new LocalSolrQueryRequest( core, new MapSolrParams( args) );\r\n    assertQ(\"\\\"A\\\" and \\\"B\\\" should be found.\", req\r\n            ,\"//*[@numFound='2']\"\r\n            ,\"//result/doc[1]/str[@name='id'][.='A']\"\r\n            ,\"//result/doc[2]/str[@name='id'][.='B']\"\r\n            );\r\n\r\n    // delete \"B\"\r\n    deleteSimpleDoc(\"B\");\r\n\r\n    // search - \"A\",\"B\" should be found.\r\n    assertQ(\"\\\"A\\\" and \\\"B\\\" should be found.\", req\r\n            ,\"//*[@numFound='2']\"\r\n            ,\"//result/doc[1]/str[@name='id'][.='A']\"\r\n            ,\"//result/doc[2]/str[@name='id'][.='B']\"\r\n            );\r\n \r\n    // commit\r\n    updater.commit(cmtCmd);\r\n    \r\n    // search - \"B\" should not be found.\r\n    assertQ(\"\\\"B\\\" should not be found.\", req\r\n        ,\"//*[@numFound='1']\"\r\n        ,\"//result/doc[1]/str[@name='id'][.='A']\"\r\n        );\r\n  }\r\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"ad94625fb8d088209f46650c8097196fec67f00c","date":1453508319,"type":5,"author":"Dawid Weiss","isMerge":false,"pathNew":"solr/src/test/org/apache/solr/update/DirectUpdateHandlerTest#testDeleteCommit().mjava","pathOld":"src/test/org/apache/solr/update/DirectUpdateHandlerTest#testDeleteCommit().mjava","sourceNew":"  public void testDeleteCommit() throws Exception {\n    addSimpleDoc(\"A\");\n    addSimpleDoc(\"B\");\n\n    // commit \"A\", \"B\"\n    SolrCore core = h.getCore();\n    UpdateHandler updater = core.getUpdateHandler();\n    CommitUpdateCommand cmtCmd = new CommitUpdateCommand(false);\n    cmtCmd.waitSearcher = true;\n    updater.commit(cmtCmd);\n\n    // search - \"A\",\"B\" should be found.\n    Map<String,String> args = new HashMap<String, String>();\n    args.put( CommonParams.Q, \"id:A OR id:B\" );\n    args.put( \"indent\", \"true\" );\n    SolrQueryRequest req = new LocalSolrQueryRequest( core, new MapSolrParams( args) );\n    assertQ(\"\\\"A\\\" and \\\"B\\\" should be found.\", req\n            ,\"//*[@numFound='2']\"\n            ,\"//result/doc[1]/str[@name='id'][.='A']\"\n            ,\"//result/doc[2]/str[@name='id'][.='B']\"\n            );\n\n    // delete \"B\"\n    deleteSimpleDoc(\"B\");\n\n    // search - \"A\",\"B\" should be found.\n    assertQ(\"\\\"A\\\" and \\\"B\\\" should be found.\", req\n            ,\"//*[@numFound='2']\"\n            ,\"//result/doc[1]/str[@name='id'][.='A']\"\n            ,\"//result/doc[2]/str[@name='id'][.='B']\"\n            );\n \n    // commit\n    updater.commit(cmtCmd);\n    \n    // search - \"B\" should not be found.\n    assertQ(\"\\\"B\\\" should not be found.\", req\n        ,\"//*[@numFound='1']\"\n        ,\"//result/doc[1]/str[@name='id'][.='A']\"\n        );\n  }\n\n","sourceOld":"  public void testDeleteCommit() throws Exception {\n    addSimpleDoc(\"A\");\n    addSimpleDoc(\"B\");\n\n    // commit \"A\", \"B\"\n    SolrCore core = h.getCore();\n    UpdateHandler updater = core.getUpdateHandler();\n    CommitUpdateCommand cmtCmd = new CommitUpdateCommand(false);\n    cmtCmd.waitSearcher = true;\n    updater.commit(cmtCmd);\n\n    // search - \"A\",\"B\" should be found.\n    Map<String,String> args = new HashMap<String, String>();\n    args.put( CommonParams.Q, \"id:A OR id:B\" );\n    args.put( \"indent\", \"true\" );\n    SolrQueryRequest req = new LocalSolrQueryRequest( core, new MapSolrParams( args) );\n    assertQ(\"\\\"A\\\" and \\\"B\\\" should be found.\", req\n            ,\"//*[@numFound='2']\"\n            ,\"//result/doc[1]/str[@name='id'][.='A']\"\n            ,\"//result/doc[2]/str[@name='id'][.='B']\"\n            );\n\n    // delete \"B\"\n    deleteSimpleDoc(\"B\");\n\n    // search - \"A\",\"B\" should be found.\n    assertQ(\"\\\"A\\\" and \\\"B\\\" should be found.\", req\n            ,\"//*[@numFound='2']\"\n            ,\"//result/doc[1]/str[@name='id'][.='A']\"\n            ,\"//result/doc[2]/str[@name='id'][.='B']\"\n            );\n \n    // commit\n    updater.commit(cmtCmd);\n    \n    // search - \"B\" should not be found.\n    assertQ(\"\\\"B\\\" should not be found.\", req\n        ,\"//*[@numFound='1']\"\n        ,\"//result/doc[1]/str[@name='id'][.='A']\"\n        );\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"c2c5b6c69b7a616e2efe0053dfc5e07b6d6f4b8d":["3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b"],"3dd4ac4fa84a1b56111ca47b15965c5a06f255c7":["c2c5b6c69b7a616e2efe0053dfc5e07b6d6f4b8d"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b":[],"8744ad19f47109f36428849641ad30f090aa279e":["3dd4ac4fa84a1b56111ca47b15965c5a06f255c7"],"ad94625fb8d088209f46650c8097196fec67f00c":["8744ad19f47109f36428849641ad30f090aa279e"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"]},"commit2Childs":{"c2c5b6c69b7a616e2efe0053dfc5e07b6d6f4b8d":["3dd4ac4fa84a1b56111ca47b15965c5a06f255c7"],"3dd4ac4fa84a1b56111ca47b15965c5a06f255c7":["8744ad19f47109f36428849641ad30f090aa279e"],"3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b":["c2c5b6c69b7a616e2efe0053dfc5e07b6d6f4b8d"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"8744ad19f47109f36428849641ad30f090aa279e":["ad94625fb8d088209f46650c8097196fec67f00c"],"ad94625fb8d088209f46650c8097196fec67f00c":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["ad94625fb8d088209f46650c8097196fec67f00c","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b","a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}