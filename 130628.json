{"path":"solr/core/src/test/org/apache/solr/handler/component/DistributedExpandComponentTest#doTest().mjava","commits":[{"id":"469904587e47b677b125b4bb303304e1ef04e961","date":1393861559,"type":0,"author":"Joel Bernstein","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/handler/component/DistributedExpandComponentTest#doTest().mjava","pathOld":"/dev/null","sourceNew":"  @Override\n  public void doTest() throws Exception {\n    del(\"*:*\");\n\n    index_specific(0,\"id\",\"1\", \"term_s\", \"YYYY\", \"group_s\", \"group1\", \"test_ti\", \"5\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(0,\"id\",\"2\", \"term_s\", \"YYYY\", \"group_s\", \"group1\", \"test_ti\", \"50\", \"test_tl\", \"100\", \"test_tf\", \"200\");\n    index_specific(1,\"id\",\"5\", \"term_s\", \"YYYY\", \"group_s\", \"group2\", \"test_ti\", \"4\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"6\", \"term_s\", \"YYYY\", \"group_s\", \"group2\", \"test_ti\", \"10\", \"test_tl\", \"100\", \"test_tf\", \"200\");\n    index_specific(0,\"id\",\"7\", \"term_s\", \"YYYY\", \"group_s\", \"group1\", \"test_ti\", \"1\",  \"test_tl\", \"100000\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"8\", \"term_s\", \"YYYY\", \"group_s\", \"group2\", \"test_ti\", \"2\",  \"test_tl\", \"100000\", \"test_tf\", \"200\");\n    index_specific(2,\"id\",\"9\", \"term_s\", \"YYYY\", \"group_s\", \"group3\", \"test_ti\", \"1000\", \"test_tl\", \"1005\", \"test_tf\", \"3000\");\n    index_specific(2, \"id\", \"10\", \"term_s\", \"YYYY\", \"group_s\", \"group3\", \"test_ti\", \"1500\", \"test_tl\", \"1001\", \"test_tf\", \"3200\");\n    index_specific(2,\"id\", \"11\",  \"term_s\", \"YYYY\", \"group_s\", \"group3\", \"test_ti\", \"1300\", \"test_tl\", \"1002\", \"test_tf\", \"3300\");\n    index_specific(1,\"id\",\"12\", \"term_s\", \"YYYY\", \"group_s\", \"group4\", \"test_ti\", \"15\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"13\", \"term_s\", \"YYYY\", \"group_s\", \"group4\", \"test_ti\", \"16\",  \"test_tl\", \"9\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"14\", \"term_s\", \"YYYY\", \"group_s\", \"group4\", \"test_ti\", \"1\",  \"test_tl\", \"20\", \"test_tf\", \"2000\");\n\n\n    commit();\n\n\n    handle.put(\"explain\", SKIPVAL);\n    handle.put(\"QTime\", SKIPVAL);\n    handle.put(\"timestamp\", SKIPVAL);\n    handle.put(\"score\", SKIPVAL);\n    handle.put(\"wt\", SKIP);\n    handle.put(\"distrib\", SKIP);\n    handle.put(\"shards.qt\", SKIP);\n    handle.put(\"shards\", SKIP);\n    handle.put(\"q\", SKIP);\n    handle.put(\"maxScore\", SKIPVAL);\n    handle.put(\"_version_\", SKIP);\n\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"fl\",\"*,score\");\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"fl\",\"*,score\");\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test no expand results\n    query(\"q\", \"test_ti:5\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test zero results\n    query(\"q\", \"test_ti:5434343\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n\n    //First basic test case.\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=group_s}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n\n    setDistributedParams(params);\n    QueryResponse rsp = queryServer(params);\n    Map<String, SolrDocumentList> results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 2, results, \"1.0\", \"7.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 2, results, \"5.0\", \"8.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 2, results, \"11.0\", \"9.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 2, results, \"12.0\", \"14.0\");\n\n\n    //Test expand.sort\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=group_s}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n    params.add(\"expand.sort\", \"test_tl desc\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 2, results, \"7.0\", \"1.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 2, results, \"8.0\", \"5.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 2, results, \"9.0\", \"11.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 2, results, \"14.0\", \"12.0\");\n\n\n    //Test expand.rows\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=group_s}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n    params.add(\"expand.sort\", \"test_tl desc\");\n    params.add(\"expand.rows\", \"1\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 1, results, \"7.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 1, results, \"8.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 1, results, \"9.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 1, results, \"14.0\");\n\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":["4cd5fb664641d53f375acae565b2358e6cd309a2","072f211dfa8387028bb978d128c35bf9a450bbbf"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"0c92f8a8bfce9513f91cce0590834ca5333c64e6","date":1396388225,"type":3,"author":"Joel Bernstein","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/handler/component/DistributedExpandComponentTest#doTest().mjava","pathOld":"solr/core/src/test/org/apache/solr/handler/component/DistributedExpandComponentTest#doTest().mjava","sourceNew":"  @Override\n  public void doTest() throws Exception {\n    del(\"*:*\");\n\n    index_specific(0,\"id\",\"1\", \"term_s\", \"YYYY\", \"group_s\", \"group1\", \"test_ti\", \"5\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(0,\"id\",\"2\", \"term_s\", \"YYYY\", \"group_s\", \"group1\", \"test_ti\", \"50\", \"test_tl\", \"100\", \"test_tf\", \"200\");\n    index_specific(1,\"id\",\"5\", \"term_s\", \"YYYY\", \"group_s\", \"group2\", \"test_ti\", \"4\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"6\", \"term_s\", \"YYYY\", \"group_s\", \"group2\", \"test_ti\", \"10\", \"test_tl\", \"100\", \"test_tf\", \"200\");\n    index_specific(0,\"id\",\"7\", \"term_s\", \"YYYY\", \"group_s\", \"group1\", \"test_ti\", \"1\",  \"test_tl\", \"100000\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"8\", \"term_s\", \"YYYY\", \"group_s\", \"group2\", \"test_ti\", \"2\",  \"test_tl\", \"100000\", \"test_tf\", \"200\");\n    index_specific(2,\"id\",\"9\", \"term_s\", \"YYYY\", \"group_s\", \"group3\", \"test_ti\", \"1000\", \"test_tl\", \"1005\", \"test_tf\", \"3000\");\n    index_specific(2, \"id\", \"10\", \"term_s\", \"YYYY\", \"group_s\", \"group3\", \"test_ti\", \"1500\", \"test_tl\", \"1001\", \"test_tf\", \"3200\");\n    index_specific(2,\"id\", \"11\",  \"term_s\", \"YYYY\", \"group_s\", \"group3\", \"test_ti\", \"1300\", \"test_tl\", \"1002\", \"test_tf\", \"3300\");\n    index_specific(1,\"id\",\"12\", \"term_s\", \"YYYY\", \"group_s\", \"group4\", \"test_ti\", \"15\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"13\", \"term_s\", \"YYYY\", \"group_s\", \"group4\", \"test_ti\", \"16\",  \"test_tl\", \"9\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"14\", \"term_s\", \"YYYY\", \"group_s\", \"group4\", \"test_ti\", \"1\",  \"test_tl\", \"20\", \"test_tf\", \"2000\");\n\n\n    commit();\n\n\n    handle.put(\"explain\", SKIPVAL);\n    handle.put(\"QTime\", SKIPVAL);\n    handle.put(\"timestamp\", SKIPVAL);\n    handle.put(\"score\", SKIPVAL);\n    handle.put(\"wt\", SKIP);\n    handle.put(\"distrib\", SKIP);\n    handle.put(\"shards.qt\", SKIP);\n    handle.put(\"shards\", SKIP);\n    handle.put(\"q\", SKIP);\n    handle.put(\"maxScore\", SKIPVAL);\n    handle.put(\"_version_\", SKIP);\n\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"fl\",\"*,score\");\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"fl\",\"*,score\");\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test no expand results\n    query(\"q\", \"test_ti:5\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test zero results\n    query(\"q\", \"test_ti:5434343\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test page 2\n    query(\"q\", \"*:*\", \"start\",\"1\", \"rows\", \"1\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"fl\",\"*,score\");\n\n\n    //First basic test case.\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=group_s}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n\n    setDistributedParams(params);\n    QueryResponse rsp = queryServer(params);\n    Map<String, SolrDocumentList> results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 2, results, \"1.0\", \"7.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 2, results, \"5.0\", \"8.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 2, results, \"11.0\", \"9.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 2, results, \"12.0\", \"14.0\");\n\n\n    //Test expand.sort\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=group_s}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n    params.add(\"expand.sort\", \"test_tl desc\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 2, results, \"7.0\", \"1.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 2, results, \"8.0\", \"5.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 2, results, \"9.0\", \"11.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 2, results, \"14.0\", \"12.0\");\n\n\n    //Test expand.rows\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=group_s}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n    params.add(\"expand.sort\", \"test_tl desc\");\n    params.add(\"expand.rows\", \"1\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 1, results, \"7.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 1, results, \"8.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 1, results, \"9.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 1, results, \"14.0\");\n\n  }\n\n","sourceOld":"  @Override\n  public void doTest() throws Exception {\n    del(\"*:*\");\n\n    index_specific(0,\"id\",\"1\", \"term_s\", \"YYYY\", \"group_s\", \"group1\", \"test_ti\", \"5\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(0,\"id\",\"2\", \"term_s\", \"YYYY\", \"group_s\", \"group1\", \"test_ti\", \"50\", \"test_tl\", \"100\", \"test_tf\", \"200\");\n    index_specific(1,\"id\",\"5\", \"term_s\", \"YYYY\", \"group_s\", \"group2\", \"test_ti\", \"4\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"6\", \"term_s\", \"YYYY\", \"group_s\", \"group2\", \"test_ti\", \"10\", \"test_tl\", \"100\", \"test_tf\", \"200\");\n    index_specific(0,\"id\",\"7\", \"term_s\", \"YYYY\", \"group_s\", \"group1\", \"test_ti\", \"1\",  \"test_tl\", \"100000\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"8\", \"term_s\", \"YYYY\", \"group_s\", \"group2\", \"test_ti\", \"2\",  \"test_tl\", \"100000\", \"test_tf\", \"200\");\n    index_specific(2,\"id\",\"9\", \"term_s\", \"YYYY\", \"group_s\", \"group3\", \"test_ti\", \"1000\", \"test_tl\", \"1005\", \"test_tf\", \"3000\");\n    index_specific(2, \"id\", \"10\", \"term_s\", \"YYYY\", \"group_s\", \"group3\", \"test_ti\", \"1500\", \"test_tl\", \"1001\", \"test_tf\", \"3200\");\n    index_specific(2,\"id\", \"11\",  \"term_s\", \"YYYY\", \"group_s\", \"group3\", \"test_ti\", \"1300\", \"test_tl\", \"1002\", \"test_tf\", \"3300\");\n    index_specific(1,\"id\",\"12\", \"term_s\", \"YYYY\", \"group_s\", \"group4\", \"test_ti\", \"15\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"13\", \"term_s\", \"YYYY\", \"group_s\", \"group4\", \"test_ti\", \"16\",  \"test_tl\", \"9\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"14\", \"term_s\", \"YYYY\", \"group_s\", \"group4\", \"test_ti\", \"1\",  \"test_tl\", \"20\", \"test_tf\", \"2000\");\n\n\n    commit();\n\n\n    handle.put(\"explain\", SKIPVAL);\n    handle.put(\"QTime\", SKIPVAL);\n    handle.put(\"timestamp\", SKIPVAL);\n    handle.put(\"score\", SKIPVAL);\n    handle.put(\"wt\", SKIP);\n    handle.put(\"distrib\", SKIP);\n    handle.put(\"shards.qt\", SKIP);\n    handle.put(\"shards\", SKIP);\n    handle.put(\"q\", SKIP);\n    handle.put(\"maxScore\", SKIPVAL);\n    handle.put(\"_version_\", SKIP);\n\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"fl\",\"*,score\");\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"fl\",\"*,score\");\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test no expand results\n    query(\"q\", \"test_ti:5\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test zero results\n    query(\"q\", \"test_ti:5434343\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n\n    //First basic test case.\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=group_s}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n\n    setDistributedParams(params);\n    QueryResponse rsp = queryServer(params);\n    Map<String, SolrDocumentList> results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 2, results, \"1.0\", \"7.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 2, results, \"5.0\", \"8.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 2, results, \"11.0\", \"9.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 2, results, \"12.0\", \"14.0\");\n\n\n    //Test expand.sort\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=group_s}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n    params.add(\"expand.sort\", \"test_tl desc\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 2, results, \"7.0\", \"1.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 2, results, \"8.0\", \"5.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 2, results, \"9.0\", \"11.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 2, results, \"14.0\", \"12.0\");\n\n\n    //Test expand.rows\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=group_s}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n    params.add(\"expand.sort\", \"test_tl desc\");\n    params.add(\"expand.rows\", \"1\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 1, results, \"7.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 1, results, \"8.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 1, results, \"9.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 1, results, \"14.0\");\n\n  }\n\n","bugFix":null,"bugIntro":["4cd5fb664641d53f375acae565b2358e6cd309a2"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"5eb2511ababf862ea11e10761c70ee560cd84510","date":1396607225,"type":3,"author":"Dawid Weiss","isMerge":true,"pathNew":"solr/core/src/test/org/apache/solr/handler/component/DistributedExpandComponentTest#doTest().mjava","pathOld":"solr/core/src/test/org/apache/solr/handler/component/DistributedExpandComponentTest#doTest().mjava","sourceNew":"  @Override\n  public void doTest() throws Exception {\n    del(\"*:*\");\n\n    index_specific(0,\"id\",\"1\", \"term_s\", \"YYYY\", \"group_s\", \"group1\", \"test_ti\", \"5\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(0,\"id\",\"2\", \"term_s\", \"YYYY\", \"group_s\", \"group1\", \"test_ti\", \"50\", \"test_tl\", \"100\", \"test_tf\", \"200\");\n    index_specific(1,\"id\",\"5\", \"term_s\", \"YYYY\", \"group_s\", \"group2\", \"test_ti\", \"4\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"6\", \"term_s\", \"YYYY\", \"group_s\", \"group2\", \"test_ti\", \"10\", \"test_tl\", \"100\", \"test_tf\", \"200\");\n    index_specific(0,\"id\",\"7\", \"term_s\", \"YYYY\", \"group_s\", \"group1\", \"test_ti\", \"1\",  \"test_tl\", \"100000\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"8\", \"term_s\", \"YYYY\", \"group_s\", \"group2\", \"test_ti\", \"2\",  \"test_tl\", \"100000\", \"test_tf\", \"200\");\n    index_specific(2,\"id\",\"9\", \"term_s\", \"YYYY\", \"group_s\", \"group3\", \"test_ti\", \"1000\", \"test_tl\", \"1005\", \"test_tf\", \"3000\");\n    index_specific(2, \"id\", \"10\", \"term_s\", \"YYYY\", \"group_s\", \"group3\", \"test_ti\", \"1500\", \"test_tl\", \"1001\", \"test_tf\", \"3200\");\n    index_specific(2,\"id\", \"11\",  \"term_s\", \"YYYY\", \"group_s\", \"group3\", \"test_ti\", \"1300\", \"test_tl\", \"1002\", \"test_tf\", \"3300\");\n    index_specific(1,\"id\",\"12\", \"term_s\", \"YYYY\", \"group_s\", \"group4\", \"test_ti\", \"15\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"13\", \"term_s\", \"YYYY\", \"group_s\", \"group4\", \"test_ti\", \"16\",  \"test_tl\", \"9\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"14\", \"term_s\", \"YYYY\", \"group_s\", \"group4\", \"test_ti\", \"1\",  \"test_tl\", \"20\", \"test_tf\", \"2000\");\n\n\n    commit();\n\n\n    handle.put(\"explain\", SKIPVAL);\n    handle.put(\"QTime\", SKIPVAL);\n    handle.put(\"timestamp\", SKIPVAL);\n    handle.put(\"score\", SKIPVAL);\n    handle.put(\"wt\", SKIP);\n    handle.put(\"distrib\", SKIP);\n    handle.put(\"shards.qt\", SKIP);\n    handle.put(\"shards\", SKIP);\n    handle.put(\"q\", SKIP);\n    handle.put(\"maxScore\", SKIPVAL);\n    handle.put(\"_version_\", SKIP);\n\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"fl\",\"*,score\");\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"fl\",\"*,score\");\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test no expand results\n    query(\"q\", \"test_ti:5\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test zero results\n    query(\"q\", \"test_ti:5434343\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test page 2\n    query(\"q\", \"*:*\", \"start\",\"1\", \"rows\", \"1\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"fl\",\"*,score\");\n\n\n    //First basic test case.\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=group_s}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n\n    setDistributedParams(params);\n    QueryResponse rsp = queryServer(params);\n    Map<String, SolrDocumentList> results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 2, results, \"1.0\", \"7.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 2, results, \"5.0\", \"8.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 2, results, \"11.0\", \"9.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 2, results, \"12.0\", \"14.0\");\n\n\n    //Test expand.sort\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=group_s}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n    params.add(\"expand.sort\", \"test_tl desc\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 2, results, \"7.0\", \"1.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 2, results, \"8.0\", \"5.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 2, results, \"9.0\", \"11.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 2, results, \"14.0\", \"12.0\");\n\n\n    //Test expand.rows\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=group_s}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n    params.add(\"expand.sort\", \"test_tl desc\");\n    params.add(\"expand.rows\", \"1\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 1, results, \"7.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 1, results, \"8.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 1, results, \"9.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 1, results, \"14.0\");\n\n  }\n\n","sourceOld":"  @Override\n  public void doTest() throws Exception {\n    del(\"*:*\");\n\n    index_specific(0,\"id\",\"1\", \"term_s\", \"YYYY\", \"group_s\", \"group1\", \"test_ti\", \"5\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(0,\"id\",\"2\", \"term_s\", \"YYYY\", \"group_s\", \"group1\", \"test_ti\", \"50\", \"test_tl\", \"100\", \"test_tf\", \"200\");\n    index_specific(1,\"id\",\"5\", \"term_s\", \"YYYY\", \"group_s\", \"group2\", \"test_ti\", \"4\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"6\", \"term_s\", \"YYYY\", \"group_s\", \"group2\", \"test_ti\", \"10\", \"test_tl\", \"100\", \"test_tf\", \"200\");\n    index_specific(0,\"id\",\"7\", \"term_s\", \"YYYY\", \"group_s\", \"group1\", \"test_ti\", \"1\",  \"test_tl\", \"100000\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"8\", \"term_s\", \"YYYY\", \"group_s\", \"group2\", \"test_ti\", \"2\",  \"test_tl\", \"100000\", \"test_tf\", \"200\");\n    index_specific(2,\"id\",\"9\", \"term_s\", \"YYYY\", \"group_s\", \"group3\", \"test_ti\", \"1000\", \"test_tl\", \"1005\", \"test_tf\", \"3000\");\n    index_specific(2, \"id\", \"10\", \"term_s\", \"YYYY\", \"group_s\", \"group3\", \"test_ti\", \"1500\", \"test_tl\", \"1001\", \"test_tf\", \"3200\");\n    index_specific(2,\"id\", \"11\",  \"term_s\", \"YYYY\", \"group_s\", \"group3\", \"test_ti\", \"1300\", \"test_tl\", \"1002\", \"test_tf\", \"3300\");\n    index_specific(1,\"id\",\"12\", \"term_s\", \"YYYY\", \"group_s\", \"group4\", \"test_ti\", \"15\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"13\", \"term_s\", \"YYYY\", \"group_s\", \"group4\", \"test_ti\", \"16\",  \"test_tl\", \"9\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"14\", \"term_s\", \"YYYY\", \"group_s\", \"group4\", \"test_ti\", \"1\",  \"test_tl\", \"20\", \"test_tf\", \"2000\");\n\n\n    commit();\n\n\n    handle.put(\"explain\", SKIPVAL);\n    handle.put(\"QTime\", SKIPVAL);\n    handle.put(\"timestamp\", SKIPVAL);\n    handle.put(\"score\", SKIPVAL);\n    handle.put(\"wt\", SKIP);\n    handle.put(\"distrib\", SKIP);\n    handle.put(\"shards.qt\", SKIP);\n    handle.put(\"shards\", SKIP);\n    handle.put(\"q\", SKIP);\n    handle.put(\"maxScore\", SKIPVAL);\n    handle.put(\"_version_\", SKIP);\n\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"fl\",\"*,score\");\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"fl\",\"*,score\");\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test no expand results\n    query(\"q\", \"test_ti:5\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test zero results\n    query(\"q\", \"test_ti:5434343\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n\n    //First basic test case.\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=group_s}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n\n    setDistributedParams(params);\n    QueryResponse rsp = queryServer(params);\n    Map<String, SolrDocumentList> results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 2, results, \"1.0\", \"7.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 2, results, \"5.0\", \"8.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 2, results, \"11.0\", \"9.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 2, results, \"12.0\", \"14.0\");\n\n\n    //Test expand.sort\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=group_s}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n    params.add(\"expand.sort\", \"test_tl desc\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 2, results, \"7.0\", \"1.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 2, results, \"8.0\", \"5.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 2, results, \"9.0\", \"11.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 2, results, \"14.0\", \"12.0\");\n\n\n    //Test expand.rows\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=group_s}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n    params.add(\"expand.sort\", \"test_tl desc\");\n    params.add(\"expand.rows\", \"1\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 1, results, \"7.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 1, results, \"8.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 1, results, \"9.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 1, results, \"14.0\");\n\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"072f211dfa8387028bb978d128c35bf9a450bbbf","date":1406041363,"type":3,"author":"Mark Robert Miller","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/handler/component/DistributedExpandComponentTest#doTest().mjava","pathOld":"solr/core/src/test/org/apache/solr/handler/component/DistributedExpandComponentTest#doTest().mjava","sourceNew":"  @Override\n  public void doTest() throws Exception {\n    del(\"*:*\");\n\n    index_specific(0,\"id\",\"1\", \"term_s\", \"YYYY\", \"group_s\", \"group1\", \"test_ti\", \"5\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(0,\"id\",\"2\", \"term_s\", \"YYYY\", \"group_s\", \"group1\", \"test_ti\", \"50\", \"test_tl\", \"100\", \"test_tf\", \"200\");\n    index_specific(1,\"id\",\"5\", \"term_s\", \"YYYY\", \"group_s\", \"group2\", \"test_ti\", \"4\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"6\", \"term_s\", \"YYYY\", \"group_s\", \"group2\", \"test_ti\", \"10\", \"test_tl\", \"100\", \"test_tf\", \"200\");\n    index_specific(0,\"id\",\"7\", \"term_s\", \"YYYY\", \"group_s\", \"group1\", \"test_ti\", \"1\",  \"test_tl\", \"100000\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"8\", \"term_s\", \"YYYY\", \"group_s\", \"group2\", \"test_ti\", \"2\",  \"test_tl\", \"100000\", \"test_tf\", \"200\");\n    index_specific(2,\"id\",\"9\", \"term_s\", \"YYYY\", \"group_s\", \"group3\", \"test_ti\", \"1000\", \"test_tl\", \"1005\", \"test_tf\", \"3000\");\n    index_specific(2, \"id\", \"10\", \"term_s\", \"YYYY\", \"group_s\", \"group3\", \"test_ti\", \"1500\", \"test_tl\", \"1001\", \"test_tf\", \"3200\");\n    index_specific(2,\"id\", \"11\",  \"term_s\", \"YYYY\", \"group_s\", \"group3\", \"test_ti\", \"1300\", \"test_tl\", \"1002\", \"test_tf\", \"3300\");\n    index_specific(1,\"id\",\"12\", \"term_s\", \"YYYY\", \"group_s\", \"group4\", \"test_ti\", \"15\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"13\", \"term_s\", \"YYYY\", \"group_s\", \"group4\", \"test_ti\", \"16\",  \"test_tl\", \"9\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"14\", \"term_s\", \"YYYY\", \"group_s\", \"group4\", \"test_ti\", \"1\",  \"test_tl\", \"20\", \"test_tf\", \"2000\");\n\n\n    commit();\n\n\n    handle.put(\"explain\", SKIPVAL);\n    handle.put(\"timestamp\", SKIPVAL);\n    handle.put(\"score\", SKIPVAL);\n    handle.put(\"wt\", SKIP);\n    handle.put(\"distrib\", SKIP);\n    handle.put(\"shards.qt\", SKIP);\n    handle.put(\"shards\", SKIP);\n    handle.put(\"q\", SKIP);\n    handle.put(\"maxScore\", SKIPVAL);\n    handle.put(\"_version_\", SKIP);\n\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"fl\",\"*,score\");\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"fl\",\"*,score\");\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test no expand results\n    query(\"q\", \"test_ti:5\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test zero results\n    query(\"q\", \"test_ti:5434343\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test page 2\n    query(\"q\", \"*:*\", \"start\",\"1\", \"rows\", \"1\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"fl\",\"*,score\");\n\n\n    //First basic test case.\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=group_s}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n\n    setDistributedParams(params);\n    QueryResponse rsp = queryServer(params);\n    Map<String, SolrDocumentList> results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 2, results, \"1.0\", \"7.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 2, results, \"5.0\", \"8.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 2, results, \"11.0\", \"9.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 2, results, \"12.0\", \"14.0\");\n\n\n    //Test expand.sort\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=group_s}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n    params.add(\"expand.sort\", \"test_tl desc\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 2, results, \"7.0\", \"1.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 2, results, \"8.0\", \"5.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 2, results, \"9.0\", \"11.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 2, results, \"14.0\", \"12.0\");\n\n\n    //Test expand.rows\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=group_s}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n    params.add(\"expand.sort\", \"test_tl desc\");\n    params.add(\"expand.rows\", \"1\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 1, results, \"7.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 1, results, \"8.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 1, results, \"9.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 1, results, \"14.0\");\n\n  }\n\n","sourceOld":"  @Override\n  public void doTest() throws Exception {\n    del(\"*:*\");\n\n    index_specific(0,\"id\",\"1\", \"term_s\", \"YYYY\", \"group_s\", \"group1\", \"test_ti\", \"5\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(0,\"id\",\"2\", \"term_s\", \"YYYY\", \"group_s\", \"group1\", \"test_ti\", \"50\", \"test_tl\", \"100\", \"test_tf\", \"200\");\n    index_specific(1,\"id\",\"5\", \"term_s\", \"YYYY\", \"group_s\", \"group2\", \"test_ti\", \"4\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"6\", \"term_s\", \"YYYY\", \"group_s\", \"group2\", \"test_ti\", \"10\", \"test_tl\", \"100\", \"test_tf\", \"200\");\n    index_specific(0,\"id\",\"7\", \"term_s\", \"YYYY\", \"group_s\", \"group1\", \"test_ti\", \"1\",  \"test_tl\", \"100000\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"8\", \"term_s\", \"YYYY\", \"group_s\", \"group2\", \"test_ti\", \"2\",  \"test_tl\", \"100000\", \"test_tf\", \"200\");\n    index_specific(2,\"id\",\"9\", \"term_s\", \"YYYY\", \"group_s\", \"group3\", \"test_ti\", \"1000\", \"test_tl\", \"1005\", \"test_tf\", \"3000\");\n    index_specific(2, \"id\", \"10\", \"term_s\", \"YYYY\", \"group_s\", \"group3\", \"test_ti\", \"1500\", \"test_tl\", \"1001\", \"test_tf\", \"3200\");\n    index_specific(2,\"id\", \"11\",  \"term_s\", \"YYYY\", \"group_s\", \"group3\", \"test_ti\", \"1300\", \"test_tl\", \"1002\", \"test_tf\", \"3300\");\n    index_specific(1,\"id\",\"12\", \"term_s\", \"YYYY\", \"group_s\", \"group4\", \"test_ti\", \"15\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"13\", \"term_s\", \"YYYY\", \"group_s\", \"group4\", \"test_ti\", \"16\",  \"test_tl\", \"9\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"14\", \"term_s\", \"YYYY\", \"group_s\", \"group4\", \"test_ti\", \"1\",  \"test_tl\", \"20\", \"test_tf\", \"2000\");\n\n\n    commit();\n\n\n    handle.put(\"explain\", SKIPVAL);\n    handle.put(\"QTime\", SKIPVAL);\n    handle.put(\"timestamp\", SKIPVAL);\n    handle.put(\"score\", SKIPVAL);\n    handle.put(\"wt\", SKIP);\n    handle.put(\"distrib\", SKIP);\n    handle.put(\"shards.qt\", SKIP);\n    handle.put(\"shards\", SKIP);\n    handle.put(\"q\", SKIP);\n    handle.put(\"maxScore\", SKIPVAL);\n    handle.put(\"_version_\", SKIP);\n\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"fl\",\"*,score\");\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"fl\",\"*,score\");\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test no expand results\n    query(\"q\", \"test_ti:5\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test zero results\n    query(\"q\", \"test_ti:5434343\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test page 2\n    query(\"q\", \"*:*\", \"start\",\"1\", \"rows\", \"1\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"fl\",\"*,score\");\n\n\n    //First basic test case.\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=group_s}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n\n    setDistributedParams(params);\n    QueryResponse rsp = queryServer(params);\n    Map<String, SolrDocumentList> results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 2, results, \"1.0\", \"7.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 2, results, \"5.0\", \"8.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 2, results, \"11.0\", \"9.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 2, results, \"12.0\", \"14.0\");\n\n\n    //Test expand.sort\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=group_s}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n    params.add(\"expand.sort\", \"test_tl desc\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 2, results, \"7.0\", \"1.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 2, results, \"8.0\", \"5.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 2, results, \"9.0\", \"11.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 2, results, \"14.0\", \"12.0\");\n\n\n    //Test expand.rows\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=group_s}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n    params.add(\"expand.sort\", \"test_tl desc\");\n    params.add(\"expand.rows\", \"1\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 1, results, \"7.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 1, results, \"8.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 1, results, \"9.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 1, results, \"14.0\");\n\n  }\n\n","bugFix":["469904587e47b677b125b4bb303304e1ef04e961"],"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"4cd5fb664641d53f375acae565b2358e6cd309a2","date":1418429100,"type":3,"author":"Shalin Shekhar Mangar","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/handler/component/DistributedExpandComponentTest#doTest().mjava","pathOld":"solr/core/src/test/org/apache/solr/handler/component/DistributedExpandComponentTest#doTest().mjava","sourceNew":"  @Override\n  public void doTest() throws Exception {\n    final String group = (random().nextBoolean() ? \"group_s\" : \"group_s_dv\");\n    \n    del(\"*:*\");\n\n    index_specific(0,\"id\",\"1\", \"term_s\", \"YYYY\", group, \"group1\", \"test_ti\", \"5\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(0,\"id\",\"2\", \"term_s\", \"YYYY\", group, \"group1\", \"test_ti\", \"50\", \"test_tl\", \"100\", \"test_tf\", \"200\");\n    index_specific(1,\"id\",\"5\", \"term_s\", \"YYYY\", group, \"group2\", \"test_ti\", \"4\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"6\", \"term_s\", \"YYYY\", group, \"group2\", \"test_ti\", \"10\", \"test_tl\", \"100\", \"test_tf\", \"200\");\n    index_specific(0,\"id\",\"7\", \"term_s\", \"YYYY\", group, \"group1\", \"test_ti\", \"1\",  \"test_tl\", \"100000\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"8\", \"term_s\", \"YYYY\", group, \"group2\", \"test_ti\", \"2\",  \"test_tl\", \"100000\", \"test_tf\", \"200\");\n    index_specific(2,\"id\",\"9\", \"term_s\", \"YYYY\", group, \"group3\", \"test_ti\", \"1000\", \"test_tl\", \"1005\", \"test_tf\", \"3000\");\n    index_specific(2, \"id\", \"10\", \"term_s\", \"YYYY\", group, \"group3\", \"test_ti\", \"1500\", \"test_tl\", \"1001\", \"test_tf\", \"3200\");\n    index_specific(2,\"id\", \"11\",  \"term_s\", \"YYYY\", group, \"group3\", \"test_ti\", \"1300\", \"test_tl\", \"1002\", \"test_tf\", \"3300\");\n    index_specific(1,\"id\",\"12\", \"term_s\", \"YYYY\", group, \"group4\", \"test_ti\", \"15\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"13\", \"term_s\", \"YYYY\", group, \"group4\", \"test_ti\", \"16\",  \"test_tl\", \"9\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"14\", \"term_s\", \"YYYY\", group, \"group4\", \"test_ti\", \"1\",  \"test_tl\", \"20\", \"test_tf\", \"2000\");\n\n\n    commit();\n\n\n    handle.put(\"explain\", SKIPVAL);\n    handle.put(\"timestamp\", SKIPVAL);\n    handle.put(\"score\", SKIPVAL);\n    handle.put(\"wt\", SKIP);\n    handle.put(\"distrib\", SKIP);\n    handle.put(\"shards.qt\", SKIP);\n    handle.put(\"shards\", SKIP);\n    handle.put(\"q\", SKIP);\n    handle.put(\"maxScore\", SKIPVAL);\n    handle.put(\"_version_\", SKIP);\n\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=\"+group+\"}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"fl\",\"*,score\");\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=\"+group+\"}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"fl\",\"*,score\");\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=\"+group+\"}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test no expand results\n    query(\"q\", \"test_ti:5\", \"fq\", \"{!collapse field=\"+group+\"}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test zero results\n    query(\"q\", \"test_ti:5434343\", \"fq\", \"{!collapse field=\"+group+\"}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test page 2\n    query(\"q\", \"*:*\", \"start\",\"1\", \"rows\", \"1\", \"fq\", \"{!collapse field=\"+group+\"}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"fl\",\"*,score\");\n\n\n    //First basic test case.\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=\"+group+\"}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n\n    setDistributedParams(params);\n    QueryResponse rsp = queryServer(params);\n    Map<String, SolrDocumentList> results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 2, results, \"1.0\", \"7.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 2, results, \"5.0\", \"8.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 2, results, \"11.0\", \"9.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 2, results, \"12.0\", \"14.0\");\n\n\n    //Test expand.sort\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=\"+group+\"}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n    params.add(\"expand.sort\", \"test_tl desc\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 2, results, \"7.0\", \"1.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 2, results, \"8.0\", \"5.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 2, results, \"9.0\", \"11.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 2, results, \"14.0\", \"12.0\");\n\n\n    //Test expand.rows\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=\"+group+\"}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n    params.add(\"expand.sort\", \"test_tl desc\");\n    params.add(\"expand.rows\", \"1\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 1, results, \"7.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 1, results, \"8.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 1, results, \"9.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 1, results, \"14.0\");\n\n\n    //Test key-only fl\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=\"+group+\"}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n    params.add(\"fl\", \"id\");\n\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 2, results, \"1.0\", \"7.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 2, results, \"5.0\", \"8.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 2, results, \"11.0\", \"9.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 2, results, \"12.0\", \"14.0\");\n\n    //Test distrib.singlePass true\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=\"+group+\"}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n    params.add(\"distrib.singlePass\", \"true\");\n\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 2, results, \"1.0\", \"7.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 2, results, \"5.0\", \"8.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 2, results, \"11.0\", \"9.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 2, results, \"12.0\", \"14.0\");\n\n  }\n\n","sourceOld":"  @Override\n  public void doTest() throws Exception {\n    del(\"*:*\");\n\n    index_specific(0,\"id\",\"1\", \"term_s\", \"YYYY\", \"group_s\", \"group1\", \"test_ti\", \"5\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(0,\"id\",\"2\", \"term_s\", \"YYYY\", \"group_s\", \"group1\", \"test_ti\", \"50\", \"test_tl\", \"100\", \"test_tf\", \"200\");\n    index_specific(1,\"id\",\"5\", \"term_s\", \"YYYY\", \"group_s\", \"group2\", \"test_ti\", \"4\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"6\", \"term_s\", \"YYYY\", \"group_s\", \"group2\", \"test_ti\", \"10\", \"test_tl\", \"100\", \"test_tf\", \"200\");\n    index_specific(0,\"id\",\"7\", \"term_s\", \"YYYY\", \"group_s\", \"group1\", \"test_ti\", \"1\",  \"test_tl\", \"100000\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"8\", \"term_s\", \"YYYY\", \"group_s\", \"group2\", \"test_ti\", \"2\",  \"test_tl\", \"100000\", \"test_tf\", \"200\");\n    index_specific(2,\"id\",\"9\", \"term_s\", \"YYYY\", \"group_s\", \"group3\", \"test_ti\", \"1000\", \"test_tl\", \"1005\", \"test_tf\", \"3000\");\n    index_specific(2, \"id\", \"10\", \"term_s\", \"YYYY\", \"group_s\", \"group3\", \"test_ti\", \"1500\", \"test_tl\", \"1001\", \"test_tf\", \"3200\");\n    index_specific(2,\"id\", \"11\",  \"term_s\", \"YYYY\", \"group_s\", \"group3\", \"test_ti\", \"1300\", \"test_tl\", \"1002\", \"test_tf\", \"3300\");\n    index_specific(1,\"id\",\"12\", \"term_s\", \"YYYY\", \"group_s\", \"group4\", \"test_ti\", \"15\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"13\", \"term_s\", \"YYYY\", \"group_s\", \"group4\", \"test_ti\", \"16\",  \"test_tl\", \"9\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"14\", \"term_s\", \"YYYY\", \"group_s\", \"group4\", \"test_ti\", \"1\",  \"test_tl\", \"20\", \"test_tf\", \"2000\");\n\n\n    commit();\n\n\n    handle.put(\"explain\", SKIPVAL);\n    handle.put(\"timestamp\", SKIPVAL);\n    handle.put(\"score\", SKIPVAL);\n    handle.put(\"wt\", SKIP);\n    handle.put(\"distrib\", SKIP);\n    handle.put(\"shards.qt\", SKIP);\n    handle.put(\"shards\", SKIP);\n    handle.put(\"q\", SKIP);\n    handle.put(\"maxScore\", SKIPVAL);\n    handle.put(\"_version_\", SKIP);\n\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"fl\",\"*,score\");\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"fl\",\"*,score\");\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test no expand results\n    query(\"q\", \"test_ti:5\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test zero results\n    query(\"q\", \"test_ti:5434343\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test page 2\n    query(\"q\", \"*:*\", \"start\",\"1\", \"rows\", \"1\", \"fq\", \"{!collapse field=group_s}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"fl\",\"*,score\");\n\n\n    //First basic test case.\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=group_s}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n\n    setDistributedParams(params);\n    QueryResponse rsp = queryServer(params);\n    Map<String, SolrDocumentList> results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 2, results, \"1.0\", \"7.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 2, results, \"5.0\", \"8.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 2, results, \"11.0\", \"9.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 2, results, \"12.0\", \"14.0\");\n\n\n    //Test expand.sort\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=group_s}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n    params.add(\"expand.sort\", \"test_tl desc\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 2, results, \"7.0\", \"1.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 2, results, \"8.0\", \"5.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 2, results, \"9.0\", \"11.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 2, results, \"14.0\", \"12.0\");\n\n\n    //Test expand.rows\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=group_s}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n    params.add(\"expand.sort\", \"test_tl desc\");\n    params.add(\"expand.rows\", \"1\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 1, results, \"7.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 1, results, \"8.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 1, results, \"9.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 1, results, \"14.0\");\n\n  }\n\n","bugFix":["469904587e47b677b125b4bb303304e1ef04e961","0c92f8a8bfce9513f91cce0590834ca5333c64e6"],"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"abb23fcc2461782ab204e61213240feb77d355aa","date":1422029612,"type":5,"author":"Erick Erickson","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/handler/component/DistributedExpandComponentTest#test().mjava","pathOld":"solr/core/src/test/org/apache/solr/handler/component/DistributedExpandComponentTest#doTest().mjava","sourceNew":"  @Test\n  @ShardsFixed(num = 3)\n  public void test() throws Exception {\n    final String group = (random().nextBoolean() ? \"group_s\" : \"group_s_dv\");\n    \n    del(\"*:*\");\n\n    index_specific(0,\"id\",\"1\", \"term_s\", \"YYYY\", group, \"group1\", \"test_ti\", \"5\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(0,\"id\",\"2\", \"term_s\", \"YYYY\", group, \"group1\", \"test_ti\", \"50\", \"test_tl\", \"100\", \"test_tf\", \"200\");\n    index_specific(1,\"id\",\"5\", \"term_s\", \"YYYY\", group, \"group2\", \"test_ti\", \"4\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"6\", \"term_s\", \"YYYY\", group, \"group2\", \"test_ti\", \"10\", \"test_tl\", \"100\", \"test_tf\", \"200\");\n    index_specific(0,\"id\",\"7\", \"term_s\", \"YYYY\", group, \"group1\", \"test_ti\", \"1\",  \"test_tl\", \"100000\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"8\", \"term_s\", \"YYYY\", group, \"group2\", \"test_ti\", \"2\",  \"test_tl\", \"100000\", \"test_tf\", \"200\");\n    index_specific(2,\"id\",\"9\", \"term_s\", \"YYYY\", group, \"group3\", \"test_ti\", \"1000\", \"test_tl\", \"1005\", \"test_tf\", \"3000\");\n    index_specific(2, \"id\", \"10\", \"term_s\", \"YYYY\", group, \"group3\", \"test_ti\", \"1500\", \"test_tl\", \"1001\", \"test_tf\", \"3200\");\n    index_specific(2,\"id\", \"11\",  \"term_s\", \"YYYY\", group, \"group3\", \"test_ti\", \"1300\", \"test_tl\", \"1002\", \"test_tf\", \"3300\");\n    index_specific(1,\"id\",\"12\", \"term_s\", \"YYYY\", group, \"group4\", \"test_ti\", \"15\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"13\", \"term_s\", \"YYYY\", group, \"group4\", \"test_ti\", \"16\",  \"test_tl\", \"9\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"14\", \"term_s\", \"YYYY\", group, \"group4\", \"test_ti\", \"1\",  \"test_tl\", \"20\", \"test_tf\", \"2000\");\n\n\n    commit();\n\n\n    handle.put(\"explain\", SKIPVAL);\n    handle.put(\"timestamp\", SKIPVAL);\n    handle.put(\"score\", SKIPVAL);\n    handle.put(\"wt\", SKIP);\n    handle.put(\"distrib\", SKIP);\n    handle.put(\"shards.qt\", SKIP);\n    handle.put(\"shards\", SKIP);\n    handle.put(\"q\", SKIP);\n    handle.put(\"maxScore\", SKIPVAL);\n    handle.put(\"_version_\", SKIP);\n\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=\"+group+\"}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"fl\",\"*,score\");\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=\"+group+\"}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"fl\",\"*,score\");\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=\"+group+\"}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test no expand results\n    query(\"q\", \"test_ti:5\", \"fq\", \"{!collapse field=\"+group+\"}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test zero results\n    query(\"q\", \"test_ti:5434343\", \"fq\", \"{!collapse field=\"+group+\"}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test page 2\n    query(\"q\", \"*:*\", \"start\",\"1\", \"rows\", \"1\", \"fq\", \"{!collapse field=\"+group+\"}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"fl\",\"*,score\");\n\n\n    //First basic test case.\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=\"+group+\"}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n\n    setDistributedParams(params);\n    QueryResponse rsp = queryServer(params);\n    Map<String, SolrDocumentList> results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 2, results, \"1.0\", \"7.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 2, results, \"5.0\", \"8.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 2, results, \"11.0\", \"9.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 2, results, \"12.0\", \"14.0\");\n\n\n    //Test expand.sort\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=\"+group+\"}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n    params.add(\"expand.sort\", \"test_tl desc\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 2, results, \"7.0\", \"1.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 2, results, \"8.0\", \"5.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 2, results, \"9.0\", \"11.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 2, results, \"14.0\", \"12.0\");\n\n\n    //Test expand.rows\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=\"+group+\"}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n    params.add(\"expand.sort\", \"test_tl desc\");\n    params.add(\"expand.rows\", \"1\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 1, results, \"7.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 1, results, \"8.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 1, results, \"9.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 1, results, \"14.0\");\n\n\n    //Test key-only fl\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=\"+group+\"}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n    params.add(\"fl\", \"id\");\n\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 2, results, \"1.0\", \"7.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 2, results, \"5.0\", \"8.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 2, results, \"11.0\", \"9.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 2, results, \"12.0\", \"14.0\");\n\n    //Test distrib.singlePass true\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=\"+group+\"}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n    params.add(\"distrib.singlePass\", \"true\");\n\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 2, results, \"1.0\", \"7.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 2, results, \"5.0\", \"8.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 2, results, \"11.0\", \"9.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 2, results, \"12.0\", \"14.0\");\n\n  }\n\n","sourceOld":"  @Override\n  public void doTest() throws Exception {\n    final String group = (random().nextBoolean() ? \"group_s\" : \"group_s_dv\");\n    \n    del(\"*:*\");\n\n    index_specific(0,\"id\",\"1\", \"term_s\", \"YYYY\", group, \"group1\", \"test_ti\", \"5\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(0,\"id\",\"2\", \"term_s\", \"YYYY\", group, \"group1\", \"test_ti\", \"50\", \"test_tl\", \"100\", \"test_tf\", \"200\");\n    index_specific(1,\"id\",\"5\", \"term_s\", \"YYYY\", group, \"group2\", \"test_ti\", \"4\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"6\", \"term_s\", \"YYYY\", group, \"group2\", \"test_ti\", \"10\", \"test_tl\", \"100\", \"test_tf\", \"200\");\n    index_specific(0,\"id\",\"7\", \"term_s\", \"YYYY\", group, \"group1\", \"test_ti\", \"1\",  \"test_tl\", \"100000\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"8\", \"term_s\", \"YYYY\", group, \"group2\", \"test_ti\", \"2\",  \"test_tl\", \"100000\", \"test_tf\", \"200\");\n    index_specific(2,\"id\",\"9\", \"term_s\", \"YYYY\", group, \"group3\", \"test_ti\", \"1000\", \"test_tl\", \"1005\", \"test_tf\", \"3000\");\n    index_specific(2, \"id\", \"10\", \"term_s\", \"YYYY\", group, \"group3\", \"test_ti\", \"1500\", \"test_tl\", \"1001\", \"test_tf\", \"3200\");\n    index_specific(2,\"id\", \"11\",  \"term_s\", \"YYYY\", group, \"group3\", \"test_ti\", \"1300\", \"test_tl\", \"1002\", \"test_tf\", \"3300\");\n    index_specific(1,\"id\",\"12\", \"term_s\", \"YYYY\", group, \"group4\", \"test_ti\", \"15\",  \"test_tl\", \"10\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"13\", \"term_s\", \"YYYY\", group, \"group4\", \"test_ti\", \"16\",  \"test_tl\", \"9\", \"test_tf\", \"2000\");\n    index_specific(1,\"id\",\"14\", \"term_s\", \"YYYY\", group, \"group4\", \"test_ti\", \"1\",  \"test_tl\", \"20\", \"test_tf\", \"2000\");\n\n\n    commit();\n\n\n    handle.put(\"explain\", SKIPVAL);\n    handle.put(\"timestamp\", SKIPVAL);\n    handle.put(\"score\", SKIPVAL);\n    handle.put(\"wt\", SKIP);\n    handle.put(\"distrib\", SKIP);\n    handle.put(\"shards.qt\", SKIP);\n    handle.put(\"shards\", SKIP);\n    handle.put(\"q\", SKIP);\n    handle.put(\"maxScore\", SKIPVAL);\n    handle.put(\"_version_\", SKIP);\n\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=\"+group+\"}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"fl\",\"*,score\");\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=\"+group+\"}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"fl\",\"*,score\");\n    query(\"q\", \"*:*\", \"fq\", \"{!collapse field=\"+group+\"}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test no expand results\n    query(\"q\", \"test_ti:5\", \"fq\", \"{!collapse field=\"+group+\"}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test zero results\n    query(\"q\", \"test_ti:5434343\", \"fq\", \"{!collapse field=\"+group+\"}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"expand.sort\", \"test_tl desc\", \"expand.rows\", \"1\", \"fl\",\"*,score\");\n    //Test page 2\n    query(\"q\", \"*:*\", \"start\",\"1\", \"rows\", \"1\", \"fq\", \"{!collapse field=\"+group+\"}\", \"defType\", \"edismax\", \"bf\", \"field(test_ti)\", \"expand\", \"true\", \"fl\",\"*,score\");\n\n\n    //First basic test case.\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=\"+group+\"}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n\n    setDistributedParams(params);\n    QueryResponse rsp = queryServer(params);\n    Map<String, SolrDocumentList> results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 2, results, \"1.0\", \"7.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 2, results, \"5.0\", \"8.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 2, results, \"11.0\", \"9.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 2, results, \"12.0\", \"14.0\");\n\n\n    //Test expand.sort\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=\"+group+\"}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n    params.add(\"expand.sort\", \"test_tl desc\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 2, results, \"7.0\", \"1.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 2, results, \"8.0\", \"5.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 2, results, \"9.0\", \"11.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 2, results, \"14.0\", \"12.0\");\n\n\n    //Test expand.rows\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=\"+group+\"}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n    params.add(\"expand.sort\", \"test_tl desc\");\n    params.add(\"expand.rows\", \"1\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 1, results, \"7.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 1, results, \"8.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 1, results, \"9.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 1, results, \"14.0\");\n\n\n    //Test key-only fl\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=\"+group+\"}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n    params.add(\"fl\", \"id\");\n\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 2, results, \"1.0\", \"7.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 2, results, \"5.0\", \"8.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 2, results, \"11.0\", \"9.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 2, results, \"12.0\", \"14.0\");\n\n    //Test distrib.singlePass true\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!collapse field=\"+group+\"}\");\n    params.add(\"defType\", \"edismax\");\n    params.add(\"bf\", \"field(test_ti)\");\n    params.add(\"expand\", \"true\");\n    params.add(\"distrib.singlePass\", \"true\");\n\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    results = rsp.getExpandedResults();\n    assertExpandGroups(results, \"group1\",\"group2\", \"group3\", \"group4\");\n    assertExpandGroupCountAndOrder(\"group1\", 2, results, \"1.0\", \"7.0\");\n    assertExpandGroupCountAndOrder(\"group2\", 2, results, \"5.0\", \"8.0\");\n    assertExpandGroupCountAndOrder(\"group3\", 2, results, \"11.0\", \"9.0\");\n    assertExpandGroupCountAndOrder(\"group4\", 2, results, \"12.0\", \"14.0\");\n\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"5eb2511ababf862ea11e10761c70ee560cd84510":["469904587e47b677b125b4bb303304e1ef04e961","0c92f8a8bfce9513f91cce0590834ca5333c64e6"],"4cd5fb664641d53f375acae565b2358e6cd309a2":["072f211dfa8387028bb978d128c35bf9a450bbbf"],"072f211dfa8387028bb978d128c35bf9a450bbbf":["0c92f8a8bfce9513f91cce0590834ca5333c64e6"],"0c92f8a8bfce9513f91cce0590834ca5333c64e6":["469904587e47b677b125b4bb303304e1ef04e961"],"abb23fcc2461782ab204e61213240feb77d355aa":["4cd5fb664641d53f375acae565b2358e6cd309a2"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["abb23fcc2461782ab204e61213240feb77d355aa"],"469904587e47b677b125b4bb303304e1ef04e961":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"]},"commit2Childs":{"5eb2511ababf862ea11e10761c70ee560cd84510":[],"4cd5fb664641d53f375acae565b2358e6cd309a2":["abb23fcc2461782ab204e61213240feb77d355aa"],"072f211dfa8387028bb978d128c35bf9a450bbbf":["4cd5fb664641d53f375acae565b2358e6cd309a2"],"0c92f8a8bfce9513f91cce0590834ca5333c64e6":["5eb2511ababf862ea11e10761c70ee560cd84510","072f211dfa8387028bb978d128c35bf9a450bbbf"],"abb23fcc2461782ab204e61213240feb77d355aa":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["469904587e47b677b125b4bb303304e1ef04e961"],"469904587e47b677b125b4bb303304e1ef04e961":["5eb2511ababf862ea11e10761c70ee560cd84510","0c92f8a8bfce9513f91cce0590834ca5333c64e6"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["5eb2511ababf862ea11e10761c70ee560cd84510","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}