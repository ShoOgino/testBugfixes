{"path":"lucene/core/src/test/org/apache/lucene/search/TestMultiTermQueryRewrites#checkMaxClauseLimitation(MultiTermQuery.RewriteMethod).mjava","commits":[{"id":"3a119bbc8703c10faa329ec201c654b3a35a1e3e","date":1328644745,"type":1,"author":"Steven Rowe","isMerge":false,"pathNew":"lucene/core/src/test/org/apache/lucene/search/TestMultiTermQueryRewrites#checkMaxClauseLimitation(MultiTermQuery.RewriteMethod).mjava","pathOld":"lucene/src/test/org/apache/lucene/search/TestMultiTermQueryRewrites#checkMaxClauseLimitation(MultiTermQuery.RewriteMethod).mjava","sourceNew":"  private void checkMaxClauseLimitation(MultiTermQuery.RewriteMethod method) throws Exception {\n    int savedMaxClauseCount = BooleanQuery.getMaxClauseCount();\n    BooleanQuery.setMaxClauseCount(3);\n    \n    final MultiTermQuery mtq = TermRangeQuery.newStringRange(\"data\", \"2\", \"7\", true, true);\n    mtq.setRewriteMethod(method);\n    try {\n      multiSearcherDupls.rewrite(mtq);\n      fail(\"Should throw BooleanQuery.TooManyClauses\");\n    } catch (BooleanQuery.TooManyClauses e) {\n      //  Maybe remove this assert in later versions, when internal API changes:\n      assertEquals(\"Should throw BooleanQuery.TooManyClauses with a stacktrace containing checkMaxClauseCount()\",\n        \"checkMaxClauseCount\", e.getStackTrace()[0].getMethodName());\n    } finally {\n      BooleanQuery.setMaxClauseCount(savedMaxClauseCount);\n    }\n  }\n\n","sourceOld":"  private void checkMaxClauseLimitation(MultiTermQuery.RewriteMethod method) throws Exception {\n    int savedMaxClauseCount = BooleanQuery.getMaxClauseCount();\n    BooleanQuery.setMaxClauseCount(3);\n    \n    final MultiTermQuery mtq = TermRangeQuery.newStringRange(\"data\", \"2\", \"7\", true, true);\n    mtq.setRewriteMethod(method);\n    try {\n      multiSearcherDupls.rewrite(mtq);\n      fail(\"Should throw BooleanQuery.TooManyClauses\");\n    } catch (BooleanQuery.TooManyClauses e) {\n      //  Maybe remove this assert in later versions, when internal API changes:\n      assertEquals(\"Should throw BooleanQuery.TooManyClauses with a stacktrace containing checkMaxClauseCount()\",\n        \"checkMaxClauseCount\", e.getStackTrace()[0].getMethodName());\n    } finally {\n      BooleanQuery.setMaxClauseCount(savedMaxClauseCount);\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"05fe562aa248790944d43cdd478f512572835ba0","date":1455901667,"type":3,"author":"Robert Muir","isMerge":false,"pathNew":"lucene/core/src/test/org/apache/lucene/search/TestMultiTermQueryRewrites#checkMaxClauseLimitation(MultiTermQuery.RewriteMethod).mjava","pathOld":"lucene/core/src/test/org/apache/lucene/search/TestMultiTermQueryRewrites#checkMaxClauseLimitation(MultiTermQuery.RewriteMethod).mjava","sourceNew":"  private void checkMaxClauseLimitation(MultiTermQuery.RewriteMethod method) throws Exception {\n    int savedMaxClauseCount = BooleanQuery.getMaxClauseCount();\n    BooleanQuery.setMaxClauseCount(3);\n    \n    final MultiTermQuery mtq = TermRangeQuery.newStringRange(\"data\", \"2\", \"7\", true, true);\n    mtq.setRewriteMethod(method);\n    try {\n      BooleanQuery.TooManyClauses expected = expectThrows(BooleanQuery.TooManyClauses.class, () -> {\n        multiSearcherDupls.rewrite(mtq);\n      });\n      //  Maybe remove this assert in later versions, when internal API changes:\n      assertEquals(\"Should throw BooleanQuery.TooManyClauses with a stacktrace containing checkMaxClauseCount()\",\n        \"checkMaxClauseCount\", expected.getStackTrace()[0].getMethodName());\n    } finally {\n      BooleanQuery.setMaxClauseCount(savedMaxClauseCount);\n    }\n  }\n\n","sourceOld":"  private void checkMaxClauseLimitation(MultiTermQuery.RewriteMethod method) throws Exception {\n    int savedMaxClauseCount = BooleanQuery.getMaxClauseCount();\n    BooleanQuery.setMaxClauseCount(3);\n    \n    final MultiTermQuery mtq = TermRangeQuery.newStringRange(\"data\", \"2\", \"7\", true, true);\n    mtq.setRewriteMethod(method);\n    try {\n      multiSearcherDupls.rewrite(mtq);\n      fail(\"Should throw BooleanQuery.TooManyClauses\");\n    } catch (BooleanQuery.TooManyClauses e) {\n      //  Maybe remove this assert in later versions, when internal API changes:\n      assertEquals(\"Should throw BooleanQuery.TooManyClauses with a stacktrace containing checkMaxClauseCount()\",\n        \"checkMaxClauseCount\", e.getStackTrace()[0].getMethodName());\n    } finally {\n      BooleanQuery.setMaxClauseCount(savedMaxClauseCount);\n    }\n  }\n\n","bugFix":["101117eb159dcdbcaa90405b08170aab248e5b2c"],"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"36c70eb3b44de4355a7168b762cadc0f1cf194bc","date":1561542955,"type":3,"author":"Alan Woodward","isMerge":false,"pathNew":"lucene/core/src/test/org/apache/lucene/search/TestMultiTermQueryRewrites#checkMaxClauseLimitation(MultiTermQuery.RewriteMethod).mjava","pathOld":"lucene/core/src/test/org/apache/lucene/search/TestMultiTermQueryRewrites#checkMaxClauseLimitation(MultiTermQuery.RewriteMethod).mjava","sourceNew":"  private void checkMaxClauseLimitation(MultiTermQuery.RewriteMethod method) throws Exception {\n    int savedMaxClauseCount = IndexSearcher.getMaxClauseCount();\n    IndexSearcher.setMaxClauseCount(3);\n    \n    final MultiTermQuery mtq = TermRangeQuery.newStringRange(\"data\", \"2\", \"7\", true, true);\n    mtq.setRewriteMethod(method);\n    try {\n      IndexSearcher.TooManyClauses expected = expectThrows(IndexSearcher.TooManyClauses.class, () -> {\n        multiSearcherDupls.rewrite(mtq);\n      });\n      //  Maybe remove this assert in later versions, when internal API changes:\n      assertEquals(\"Should throw BooleanQuery.TooManyClauses with a stacktrace containing checkMaxClauseCount()\",\n        \"checkMaxClauseCount\", expected.getStackTrace()[0].getMethodName());\n    } finally {\n      IndexSearcher.setMaxClauseCount(savedMaxClauseCount);\n    }\n  }\n\n","sourceOld":"  private void checkMaxClauseLimitation(MultiTermQuery.RewriteMethod method) throws Exception {\n    int savedMaxClauseCount = BooleanQuery.getMaxClauseCount();\n    BooleanQuery.setMaxClauseCount(3);\n    \n    final MultiTermQuery mtq = TermRangeQuery.newStringRange(\"data\", \"2\", \"7\", true, true);\n    mtq.setRewriteMethod(method);\n    try {\n      BooleanQuery.TooManyClauses expected = expectThrows(BooleanQuery.TooManyClauses.class, () -> {\n        multiSearcherDupls.rewrite(mtq);\n      });\n      //  Maybe remove this assert in later versions, when internal API changes:\n      assertEquals(\"Should throw BooleanQuery.TooManyClauses with a stacktrace containing checkMaxClauseCount()\",\n        \"checkMaxClauseCount\", expected.getStackTrace()[0].getMethodName());\n    } finally {\n      BooleanQuery.setMaxClauseCount(savedMaxClauseCount);\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"3a119bbc8703c10faa329ec201c654b3a35a1e3e":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"05fe562aa248790944d43cdd478f512572835ba0":["3a119bbc8703c10faa329ec201c654b3a35a1e3e"],"36c70eb3b44de4355a7168b762cadc0f1cf194bc":["05fe562aa248790944d43cdd478f512572835ba0"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["36c70eb3b44de4355a7168b762cadc0f1cf194bc"]},"commit2Childs":{"3a119bbc8703c10faa329ec201c654b3a35a1e3e":["05fe562aa248790944d43cdd478f512572835ba0"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["3a119bbc8703c10faa329ec201c654b3a35a1e3e"],"05fe562aa248790944d43cdd478f512572835ba0":["36c70eb3b44de4355a7168b762cadc0f1cf194bc"],"36c70eb3b44de4355a7168b762cadc0f1cf194bc":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}