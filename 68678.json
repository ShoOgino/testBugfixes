{"path":"solr/core/src/test/org/apache/solr/handler/component/SuggestComponentContextFilterQueryTest#testContextFilterOK().mjava","commits":[{"id":"de1635ba58109b4c7c7da50f4dad433333258904","date":1444503719,"type":0,"author":"Jan HÃ¸ydahl","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/handler/component/SuggestComponentContextFilterQueryTest#testContextFilterOK().mjava","pathOld":"/dev/null","sourceNew":"  public void testContextFilterOK() throws Exception {\n    //No filtering\n    assertQ(req(\"qt\", rh,\n            SuggesterParams.SUGGEST_BUILD, \"true\",\n            SuggesterParams.SUGGEST_DICT, \"suggest_blended_infix_suggester\",\n            SuggesterParams.SUGGEST_Q, \"examp\"),\n        \"//lst[@name='suggest']/lst[@name='suggest_blended_infix_suggester']/lst[@name='examp']/int[@name='numFound'][.='3']\",\n        \"//lst[@name='suggest']/lst[@name='suggest_blended_infix_suggester']/lst[@name='examp']/arr[@name='suggestions']/lst[1]/str[@name='term'][.='example with ctx4 at 50 using my_contexts_s']\",\n        \"//lst[@name='suggest']/lst[@name='suggest_blended_infix_suggester']/lst[@name='examp']/arr[@name='suggestions']/lst[2]/str[@name='term'][.='example with ctx2 and ctx3 at 45']\",\n        \"//lst[@name='suggest']/lst[@name='suggest_blended_infix_suggester']/lst[@name='examp']/arr[@name='suggestions']/lst[3]/str[@name='term'][.='example with ctx1 at 40']\"\n    );\n\n    //TermQuery\n    assertQ(req(\"qt\", rh,\n            SuggesterParams.SUGGEST_BUILD, \"true\",\n            SuggesterParams.SUGGEST_DICT, \"suggest_blended_infix_suggester\",\n            SuggesterParams.SUGGEST_CONTEXT_FILTER_QUERY, \"ctx1\",\n            SuggesterParams.SUGGEST_Q, \"examp\"),\n        \"//lst[@name='suggest']/lst[@name='suggest_blended_infix_suggester']/lst[@name='examp']/int[@name='numFound'][.='1']\",\n        \"//lst[@name='suggest']/lst[@name='suggest_blended_infix_suggester']/lst[@name='examp']/arr[@name='suggestions']/lst[1]/str[@name='term'][.='example with ctx1 at 40']\"\n    );\n\n    //OR BooleanQuery\n    assertQ(req(\"qt\", rh,\n            SuggesterParams.SUGGEST_BUILD, \"true\",\n            SuggesterParams.SUGGEST_DICT, \"suggest_blended_infix_suggester\",\n            SuggesterParams.SUGGEST_CONTEXT_FILTER_QUERY, \"ctx1 OR CTX2\",\n            SuggesterParams.SUGGEST_Q, \"examp\"),\n        \"//lst[@name='suggest']/lst[@name='suggest_blended_infix_suggester']/lst[@name='examp']/int[@name='numFound'][.='2']\",\n        \"//lst[@name='suggest']/lst[@name='suggest_blended_infix_suggester']/lst[@name='examp']/arr[@name='suggestions']/lst[1]/str[@name='term'][.='example with ctx2 and ctx3 at 45']\",\n        \"//lst[@name='suggest']/lst[@name='suggest_blended_infix_suggester']/lst[@name='examp']/arr[@name='suggestions']/lst[2]/str[@name='term'][.='example with ctx1 at 40']\"\n    );\n\n    //AND BooleanQuery\n    assertQ(req(\"qt\", rh,\n            SuggesterParams.SUGGEST_BUILD, \"true\",\n            SuggesterParams.SUGGEST_DICT, \"suggest_blended_infix_suggester\",\n            SuggesterParams.SUGGEST_CONTEXT_FILTER_QUERY, \"CTX2 AND CTX3\",\n            SuggesterParams.SUGGEST_Q, \"examp\"),\n        \"//lst[@name='suggest']/lst[@name='suggest_blended_infix_suggester']/lst[@name='examp']/int[@name='numFound'][.='1']\",\n        \"//lst[@name='suggest']/lst[@name='suggest_blended_infix_suggester']/lst[@name='examp']/arr[@name='suggestions']/lst[1]/str[@name='term'][.='example with ctx2 and ctx3 at 45']\");\n\n\n    //PrefixQuery\n    assertQ(req(\"qt\", rh,\n            SuggesterParams.SUGGEST_BUILD, \"true\",\n            SuggesterParams.SUGGEST_DICT, \"suggest_blended_infix_suggester\",\n            SuggesterParams.SUGGEST_CONTEXT_FILTER_QUERY, \"ctx*\",\n            SuggesterParams.SUGGEST_Q, \"examp\"),\n        \"//lst[@name='suggest']/lst[@name='suggest_blended_infix_suggester']/lst[@name='examp']/int[@name='numFound'][.='1']\",\n        \"//lst[@name='suggest']/lst[@name='suggest_blended_infix_suggester']/lst[@name='examp']/arr[@name='suggestions']/lst[1]/str[@name='term'][.='example with ctx1 at 40']\"\n    );\n\n    //RangeQuery\n    assertQ(req(\"qt\", rh,\n            SuggesterParams.SUGGEST_BUILD, \"true\",\n            SuggesterParams.SUGGEST_DICT, \"suggest_blended_infix_suggester\",\n            SuggesterParams.SUGGEST_CONTEXT_FILTER_QUERY, \"[* TO *]\",\n            SuggesterParams.SUGGEST_Q, \"examp\"),\n        \"//lst[@name='suggest']/lst[@name='suggest_blended_infix_suggester']/lst[@name='examp']/int[@name='numFound'][.='2']\",\n        \"//lst[@name='suggest']/lst[@name='suggest_blended_infix_suggester']/lst[@name='examp']/arr[@name='suggestions']/lst[1]/str[@name='term'][.='example with ctx2 and ctx3 at 45']\",\n        \"//lst[@name='suggest']/lst[@name='suggest_blended_infix_suggester']/lst[@name='examp']/arr[@name='suggestions']/lst[2]/str[@name='term'][.='example with ctx1 at 40']\"\n    );\n\n    //WildcardQuery\n    assertQ(req(\"qt\", rh,\n            SuggesterParams.SUGGEST_BUILD, \"true\",\n            SuggesterParams.SUGGEST_DICT, \"suggest_blended_infix_suggester\",\n            SuggesterParams.SUGGEST_CONTEXT_FILTER_QUERY, \"c*1\",\n            SuggesterParams.SUGGEST_Q, \"examp\"),\n        \"//lst[@name='suggest']/lst[@name='suggest_blended_infix_suggester']/lst[@name='examp']/int[@name='numFound'][.='1']\",\n        \"//lst[@name='suggest']/lst[@name='suggest_blended_infix_suggester']/lst[@name='examp']/arr[@name='suggestions']/lst[1]/str[@name='term'][.='example with ctx1 at 40']\");\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"de1635ba58109b4c7c7da50f4dad433333258904":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["de1635ba58109b4c7c7da50f4dad433333258904"]},"commit2Childs":{"de1635ba58109b4c7c7da50f4dad433333258904":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["de1635ba58109b4c7c7da50f4dad433333258904"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}