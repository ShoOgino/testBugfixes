{"path":"solr/core/src/test/org/apache/solr/cloud/TestConfigSetsAPI#zip(File,File).mjava","commits":[{"id":"917e62f3497c83634a13edd833e8e21dd6cc6496","date":1490728467,"type":0,"author":"Ishan Chattopadhyaya","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/TestConfigSetsAPI#zip(File,File).mjava","pathOld":"/dev/null","sourceNew":"  private static void zip(File directory, File zipfile) throws IOException {\n    URI base = directory.toURI();\n    Deque<File> queue = new LinkedList<File>();\n    queue.push(directory);\n    OutputStream out = new FileOutputStream(zipfile);\n    ZipOutputStream zout = new ZipOutputStream(out);\n    try {\n      while (!queue.isEmpty()) {\n        directory = queue.pop();\n        for (File kid : directory.listFiles()) {\n          String name = base.relativize(kid.toURI()).getPath();\n          if (kid.isDirectory()) {\n            queue.push(kid);\n            name = name.endsWith(\"/\") ? name : name + \"/\";\n            zout.putNextEntry(new ZipEntry(name));\n          } else {\n            zout.putNextEntry(new ZipEntry(name));\n\n            InputStream in = new FileInputStream(kid);\n            try {\n              byte[] buffer = new byte[1024];\n              while (true) {\n                int readCount = in.read(buffer);\n                if (readCount < 0) {\n                  break;\n                }\n                zout.write(buffer, 0, readCount);\n              }\n            } finally {\n              in.close();\n            }\n\n            zout.closeEntry();\n          }\n        }\n      }\n    } finally {\n      zout.close();\n    }\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"3732e34f27916e98704736cc6924a34fffca249a","date":1490873946,"type":0,"author":"Ishan Chattopadhyaya","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/TestConfigSetsAPI#zip(File,File).mjava","pathOld":"/dev/null","sourceNew":"  private static void zip(File directory, File zipfile) throws IOException {\n    URI base = directory.toURI();\n    Deque<File> queue = new LinkedList<File>();\n    queue.push(directory);\n    OutputStream out = new FileOutputStream(zipfile);\n    ZipOutputStream zout = new ZipOutputStream(out);\n    try {\n      while (!queue.isEmpty()) {\n        directory = queue.pop();\n        for (File kid : directory.listFiles()) {\n          String name = base.relativize(kid.toURI()).getPath();\n          if (kid.isDirectory()) {\n            queue.push(kid);\n            name = name.endsWith(\"/\") ? name : name + \"/\";\n            zout.putNextEntry(new ZipEntry(name));\n          } else {\n            zout.putNextEntry(new ZipEntry(name));\n\n            InputStream in = new FileInputStream(kid);\n            try {\n              byte[] buffer = new byte[1024];\n              while (true) {\n                int readCount = in.read(buffer);\n                if (readCount < 0) {\n                  break;\n                }\n                zout.write(buffer, 0, readCount);\n              }\n            } finally {\n              in.close();\n            }\n\n            zout.closeEntry();\n          }\n        }\n      }\n    } finally {\n      zout.close();\n    }\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"917e62f3497c83634a13edd833e8e21dd6cc6496":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"3732e34f27916e98704736cc6924a34fffca249a":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["917e62f3497c83634a13edd833e8e21dd6cc6496"]},"commit2Childs":{"917e62f3497c83634a13edd833e8e21dd6cc6496":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["917e62f3497c83634a13edd833e8e21dd6cc6496","3732e34f27916e98704736cc6924a34fffca249a"],"3732e34f27916e98704736cc6924a34fffca249a":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["3732e34f27916e98704736cc6924a34fffca249a","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}