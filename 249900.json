{"path":"solr/core/src/test/org/apache/solr/request/macro/TestMacroExpander#testUnbalanced().mjava","commits":[{"id":"b603d25269568087504c2caeb6f72834699ffdbd","date":1600804019,"type":0,"author":"David Smiley","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/request/macro/TestMacroExpander#testUnbalanced().mjava","pathOld":"/dev/null","sourceNew":"  @Test\n  public void testUnbalanced() { // SOLR-13181\n    final Map<String, String[]> request = Collections.singletonMap(\"answer\", new String[]{ \"42\" });\n    final MacroExpander meSkipOnMissingParams = new MacroExpander(request);\n    final MacroExpander meFailOnMissingParams = new MacroExpander(request, true);\n    assertEquals(\"${noClose\", meSkipOnMissingParams.expand(\"${noClose\"));\n    assertEquals(\"42 ${noClose\", meSkipOnMissingParams.expand(\"${answer} ${noClose\"));\n    assertEquals(\"42 ${noClose fooBar\", meSkipOnMissingParams.expand(\"${answer} ${noClose fooBar\"));\n    assertNull(meFailOnMissingParams.expand(\"${noClose\"));\n    assertNull(meFailOnMissingParams.expand(\"${answer} ${noClose\"));\n    assertNull(meFailOnMissingParams.expand(\"${answer} ${noClose fooBar\"));\n\n    assertEquals(\"${${b}}\", meSkipOnMissingParams.expand(\"${${b}}\"));\n    assertNull(meFailOnMissingParams.expand(\"${${b}}\"));\n\n    // Does not register as a syntax failure, although may subjectively look like it.\n    //   Consequently, the expression is replaced with nothing in default mode.\n    //   It'd be nice if there was a mode to leave un-resolved macros as-is when they don't resolve.\n    assertEquals(\"preamble \", meSkipOnMissingParams.expand(\"preamble ${exp${bad}\"));\n    assertNull(meFailOnMissingParams.expand(\"preamble ${exp${bad}\"));\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"b603d25269568087504c2caeb6f72834699ffdbd":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["b603d25269568087504c2caeb6f72834699ffdbd"]},"commit2Childs":{"b603d25269568087504c2caeb6f72834699ffdbd":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["b603d25269568087504c2caeb6f72834699ffdbd"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}