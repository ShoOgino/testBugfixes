{"path":"lucene/queries/src/test/org/apache/lucene/queries/intervals/TestIntervals#checkVisits(IntervalsSource,int,String...).mjava","commits":[{"id":"ed67e557f509069144486ee34fd0275a6dcbe991","date":1574418540,"type":0,"author":"Alan Woodward","isMerge":false,"pathNew":"lucene/queries/src/test/org/apache/lucene/queries/intervals/TestIntervals#checkVisits(IntervalsSource,int,String...).mjava","pathOld":"/dev/null","sourceNew":"  private void checkVisits(IntervalsSource source, int expectedVisitCount, String... expectedTerms) {\n    Set<String> actualTerms = new HashSet<>();\n    int[] visitedSources = new int[1];\n    source.visit(\"field\", new QueryVisitor() {\n      @Override\n      public void consumeTerms(Query query, Term... terms) {\n        visitedSources[0]++;\n        actualTerms.addAll(Arrays.stream(terms).map(Term::text).collect(Collectors.toList()));\n      }\n\n      @Override\n      public void visitLeaf(Query query) {\n        visitedSources[0]++;\n        super.visitLeaf(query);\n      }\n\n      @Override\n      public QueryVisitor getSubVisitor(BooleanClause.Occur occur, Query parent) {\n        visitedSources[0]++;\n        return super.getSubVisitor(occur, parent);\n      }\n    });\n\n    Set<String> expectedSet = new HashSet<>(Arrays.asList(expectedTerms));\n    expectedSet.removeAll(actualTerms);\n    actualTerms.removeAll(Arrays.asList(expectedTerms));\n    assertEquals(expectedVisitCount, visitedSources[0]);\n    assertTrue(\"Unexpected terms collected: \" + actualTerms, actualTerms.isEmpty());\n    assertTrue(\"Missing expected terms: \" + expectedSet, expectedSet.isEmpty());\n\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"ed67e557f509069144486ee34fd0275a6dcbe991":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["ed67e557f509069144486ee34fd0275a6dcbe991"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["ed67e557f509069144486ee34fd0275a6dcbe991"],"ed67e557f509069144486ee34fd0275a6dcbe991":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}