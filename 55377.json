{"path":"solr/core/src/test/org/apache/solr/schema/RequiredFieldsTest#testAddMultipleDocumentsWithErrors().mjava","commits":[{"id":"c903c3d15906a3da96b8c0c2fb704491005fdbdb","date":1453508227,"type":1,"author":"Dawid Weiss","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/schema/RequiredFieldsTest#testAddMultipleDocumentsWithErrors().mjava","pathOld":"solr/src/test/org/apache/solr/schema/RequiredFieldsTest#testAddMultipleDocumentsWithErrors().mjava","sourceNew":"  @Test\n  public void testAddMultipleDocumentsWithErrors() {\n    //Add three documents at once to make sure the baseline succeeds\n    assertU(\"adding 3 documents\",\n      \"<add>\" +doc(\"id\", \"601\", \"name\", \"multiad one\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n      doc(\"id\", \"602\", \"name\", \"multiad two\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        doc(\"id\", \"603\", \"name\", \"multiad three\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        \"</add>\");\n    assertU(commit());\n\n    // Check that they are in the index\n    assertQ(\"should find three\", req(\"name:multiad\") ,\"//result[@numFound=3]\" );\n    \n    // Add three documents at once, with the middle one missing a field that has a default\n    assertU(\"adding 3 docs, with 2nd one missing a field that has a default value\",\n      \"<add>\" +doc(\"id\", \"601\", \"name\", \"nosubject batch one\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n      doc(\"id\", \"602\", \"name\", \"nosubject batch two\", \"field_t\", \"what's inside?\") +\n        doc(\"id\", \"603\", \"name\", \"nosubject batch three\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        \"</add>\");\n    assertU(commit());\n    \n    // Since the missing field had a devault value,\n    // All three should have made it into the index\n    assertQ(\"should find three\", req(\"name:nosubject\") ,\"//result[@numFound=3]\" );\n    \n\n    // Add three documents at once, with the middle with a bad field definition,\n    // to establish the baselinie behavior for errors in a multi-ad submission\n    assertFailedU(\"adding 3 documents, with 2nd one with undefined field\",\n          \"<add>\" +doc(\"id\", \"801\", \"name\", \"baddef batch one\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n          doc(\"id\", \"802\", \"name\", \"baddef batch two\", \"missing_field_ignore_exception\", \"garbage\") +\n            doc(\"id\", \"803\", \"name\", \"baddef batch three\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n            \"</add>\");\n    assertU(commit());    \n\n    // Check that only docs before the error should be in the index\n    assertQ(\"should find one\", req(\"name:baddef\") ,\"//result[@numFound=1]\" );\n\n    ignoreException(\"missing required field\");\n    // Add three documents at once, with the middle one missing a required field that has no default\n    assertFailedU(\"adding 3 docs, with 2nd one missing required field\",\n      \"<add>\" +doc(\"id\", \"701\", \"name\", \"noname batch one\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n      doc(\"id\", \"702\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        doc(\"id\", \"703\", \"name\", \"noname batch batch three\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        \"</add>\");\n    resetExceptionIgnores();\n\n    assertU(commit());\n\n    // Check that only docs before the error should be in the index\n    assertQ(\"should find one\", req(\"name:noname\") ,\"//result[@numFound=1]\" );\n  }  \n\n","sourceOld":"  @Test\n  public void testAddMultipleDocumentsWithErrors() {\n    //Add three documents at once to make sure the baseline succeeds\n    assertU(\"adding 3 documents\",\n      \"<add>\" +doc(\"id\", \"601\", \"name\", \"multiad one\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n      doc(\"id\", \"602\", \"name\", \"multiad two\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        doc(\"id\", \"603\", \"name\", \"multiad three\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        \"</add>\");\n    assertU(commit());\n\n    // Check that they are in the index\n    assertQ(\"should find three\", req(\"name:multiad\") ,\"//result[@numFound=3]\" );\n    \n    // Add three documents at once, with the middle one missing a field that has a default\n    assertU(\"adding 3 docs, with 2nd one missing a field that has a default value\",\n      \"<add>\" +doc(\"id\", \"601\", \"name\", \"nosubject batch one\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n      doc(\"id\", \"602\", \"name\", \"nosubject batch two\", \"field_t\", \"what's inside?\") +\n        doc(\"id\", \"603\", \"name\", \"nosubject batch three\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        \"</add>\");\n    assertU(commit());\n    \n    // Since the missing field had a devault value,\n    // All three should have made it into the index\n    assertQ(\"should find three\", req(\"name:nosubject\") ,\"//result[@numFound=3]\" );\n    \n\n    // Add three documents at once, with the middle with a bad field definition,\n    // to establish the baselinie behavior for errors in a multi-ad submission\n    assertFailedU(\"adding 3 documents, with 2nd one with undefined field\",\n          \"<add>\" +doc(\"id\", \"801\", \"name\", \"baddef batch one\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n          doc(\"id\", \"802\", \"name\", \"baddef batch two\", \"missing_field_ignore_exception\", \"garbage\") +\n            doc(\"id\", \"803\", \"name\", \"baddef batch three\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n            \"</add>\");\n    assertU(commit());    \n\n    // Check that only docs before the error should be in the index\n    assertQ(\"should find one\", req(\"name:baddef\") ,\"//result[@numFound=1]\" );\n\n    ignoreException(\"missing required field\");\n    // Add three documents at once, with the middle one missing a required field that has no default\n    assertFailedU(\"adding 3 docs, with 2nd one missing required field\",\n      \"<add>\" +doc(\"id\", \"701\", \"name\", \"noname batch one\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n      doc(\"id\", \"702\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        doc(\"id\", \"703\", \"name\", \"noname batch batch three\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        \"</add>\");\n    resetExceptionIgnores();\n\n    assertU(commit());\n\n    // Check that only docs before the error should be in the index\n    assertQ(\"should find one\", req(\"name:noname\") ,\"//result[@numFound=1]\" );\n  }  \n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"a258fbb26824fd104ed795e5d9033d2d040049ee","date":1453508252,"type":1,"author":"Dawid Weiss","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/schema/RequiredFieldsTest#testAddMultipleDocumentsWithErrors().mjava","pathOld":"solr/src/test/org/apache/solr/schema/RequiredFieldsTest#testAddMultipleDocumentsWithErrors().mjava","sourceNew":"  @Test\n  public void testAddMultipleDocumentsWithErrors() {\n    //Add three documents at once to make sure the baseline succeeds\n    assertU(\"adding 3 documents\",\n      \"<add>\" +doc(\"id\", \"601\", \"name\", \"multiad one\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n      doc(\"id\", \"602\", \"name\", \"multiad two\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        doc(\"id\", \"603\", \"name\", \"multiad three\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        \"</add>\");\n    assertU(commit());\n\n    // Check that they are in the index\n    assertQ(\"should find three\", req(\"name:multiad\") ,\"//result[@numFound=3]\" );\n    \n    // Add three documents at once, with the middle one missing a field that has a default\n    assertU(\"adding 3 docs, with 2nd one missing a field that has a default value\",\n      \"<add>\" +doc(\"id\", \"601\", \"name\", \"nosubject batch one\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n      doc(\"id\", \"602\", \"name\", \"nosubject batch two\", \"field_t\", \"what's inside?\") +\n        doc(\"id\", \"603\", \"name\", \"nosubject batch three\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        \"</add>\");\n    assertU(commit());\n    \n    // Since the missing field had a devault value,\n    // All three should have made it into the index\n    assertQ(\"should find three\", req(\"name:nosubject\") ,\"//result[@numFound=3]\" );\n    \n\n    // Add three documents at once, with the middle with a bad field definition,\n    // to establish the baselinie behavior for errors in a multi-ad submission\n    assertFailedU(\"adding 3 documents, with 2nd one with undefined field\",\n          \"<add>\" +doc(\"id\", \"801\", \"name\", \"baddef batch one\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n          doc(\"id\", \"802\", \"name\", \"baddef batch two\", \"missing_field_ignore_exception\", \"garbage\") +\n            doc(\"id\", \"803\", \"name\", \"baddef batch three\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n            \"</add>\");\n    assertU(commit());    \n\n    // Check that only docs before the error should be in the index\n    assertQ(\"should find one\", req(\"name:baddef\") ,\"//result[@numFound=1]\" );\n\n    ignoreException(\"missing required field\");\n    // Add three documents at once, with the middle one missing a required field that has no default\n    assertFailedU(\"adding 3 docs, with 2nd one missing required field\",\n      \"<add>\" +doc(\"id\", \"701\", \"name\", \"noname batch one\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n      doc(\"id\", \"702\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        doc(\"id\", \"703\", \"name\", \"noname batch batch three\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        \"</add>\");\n    resetExceptionIgnores();\n\n    assertU(commit());\n\n    // Check that only docs before the error should be in the index\n    assertQ(\"should find one\", req(\"name:noname\") ,\"//result[@numFound=1]\" );\n  }  \n\n","sourceOld":"  @Test\n  public void testAddMultipleDocumentsWithErrors() {\n    //Add three documents at once to make sure the baseline succeeds\n    assertU(\"adding 3 documents\",\n      \"<add>\" +doc(\"id\", \"601\", \"name\", \"multiad one\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n      doc(\"id\", \"602\", \"name\", \"multiad two\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        doc(\"id\", \"603\", \"name\", \"multiad three\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        \"</add>\");\n    assertU(commit());\n\n    // Check that they are in the index\n    assertQ(\"should find three\", req(\"name:multiad\") ,\"//result[@numFound=3]\" );\n    \n    // Add three documents at once, with the middle one missing a field that has a default\n    assertU(\"adding 3 docs, with 2nd one missing a field that has a default value\",\n      \"<add>\" +doc(\"id\", \"601\", \"name\", \"nosubject batch one\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n      doc(\"id\", \"602\", \"name\", \"nosubject batch two\", \"field_t\", \"what's inside?\") +\n        doc(\"id\", \"603\", \"name\", \"nosubject batch three\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        \"</add>\");\n    assertU(commit());\n    \n    // Since the missing field had a devault value,\n    // All three should have made it into the index\n    assertQ(\"should find three\", req(\"name:nosubject\") ,\"//result[@numFound=3]\" );\n    \n\n    // Add three documents at once, with the middle with a bad field definition,\n    // to establish the baselinie behavior for errors in a multi-ad submission\n    assertFailedU(\"adding 3 documents, with 2nd one with undefined field\",\n          \"<add>\" +doc(\"id\", \"801\", \"name\", \"baddef batch one\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n          doc(\"id\", \"802\", \"name\", \"baddef batch two\", \"missing_field_ignore_exception\", \"garbage\") +\n            doc(\"id\", \"803\", \"name\", \"baddef batch three\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n            \"</add>\");\n    assertU(commit());    \n\n    // Check that only docs before the error should be in the index\n    assertQ(\"should find one\", req(\"name:baddef\") ,\"//result[@numFound=1]\" );\n\n    ignoreException(\"missing required field\");\n    // Add three documents at once, with the middle one missing a required field that has no default\n    assertFailedU(\"adding 3 docs, with 2nd one missing required field\",\n      \"<add>\" +doc(\"id\", \"701\", \"name\", \"noname batch one\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n      doc(\"id\", \"702\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        doc(\"id\", \"703\", \"name\", \"noname batch batch three\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        \"</add>\");\n    resetExceptionIgnores();\n\n    assertU(commit());\n\n    // Check that only docs before the error should be in the index\n    assertQ(\"should find one\", req(\"name:noname\") ,\"//result[@numFound=1]\" );\n  }  \n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"c26f00b574427b55127e869b935845554afde1fa","date":1310252513,"type":1,"author":"Steven Rowe","isMerge":true,"pathNew":"solr/core/src/test/org/apache/solr/schema/RequiredFieldsTest#testAddMultipleDocumentsWithErrors().mjava","pathOld":"solr/src/test/org/apache/solr/schema/RequiredFieldsTest#testAddMultipleDocumentsWithErrors().mjava","sourceNew":"  @Test\n  public void testAddMultipleDocumentsWithErrors() {\n    //Add three documents at once to make sure the baseline succeeds\n    assertU(\"adding 3 documents\",\n      \"<add>\" +doc(\"id\", \"601\", \"name\", \"multiad one\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n      doc(\"id\", \"602\", \"name\", \"multiad two\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        doc(\"id\", \"603\", \"name\", \"multiad three\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        \"</add>\");\n    assertU(commit());\n\n    // Check that they are in the index\n    assertQ(\"should find three\", req(\"name:multiad\") ,\"//result[@numFound=3]\" );\n    \n    // Add three documents at once, with the middle one missing a field that has a default\n    assertU(\"adding 3 docs, with 2nd one missing a field that has a default value\",\n      \"<add>\" +doc(\"id\", \"601\", \"name\", \"nosubject batch one\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n      doc(\"id\", \"602\", \"name\", \"nosubject batch two\", \"field_t\", \"what's inside?\") +\n        doc(\"id\", \"603\", \"name\", \"nosubject batch three\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        \"</add>\");\n    assertU(commit());\n    \n    // Since the missing field had a devault value,\n    // All three should have made it into the index\n    assertQ(\"should find three\", req(\"name:nosubject\") ,\"//result[@numFound=3]\" );\n    \n\n    // Add three documents at once, with the middle with a bad field definition,\n    // to establish the baselinie behavior for errors in a multi-ad submission\n    assertFailedU(\"adding 3 documents, with 2nd one with undefined field\",\n          \"<add>\" +doc(\"id\", \"801\", \"name\", \"baddef batch one\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n          doc(\"id\", \"802\", \"name\", \"baddef batch two\", \"missing_field_ignore_exception\", \"garbage\") +\n            doc(\"id\", \"803\", \"name\", \"baddef batch three\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n            \"</add>\");\n    assertU(commit());    \n\n    // Check that only docs before the error should be in the index\n    assertQ(\"should find one\", req(\"name:baddef\") ,\"//result[@numFound=1]\" );\n\n    ignoreException(\"missing required field\");\n    // Add three documents at once, with the middle one missing a required field that has no default\n    assertFailedU(\"adding 3 docs, with 2nd one missing required field\",\n      \"<add>\" +doc(\"id\", \"701\", \"name\", \"noname batch one\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n      doc(\"id\", \"702\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        doc(\"id\", \"703\", \"name\", \"noname batch batch three\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        \"</add>\");\n    resetExceptionIgnores();\n\n    assertU(commit());\n\n    // Check that only docs before the error should be in the index\n    assertQ(\"should find one\", req(\"name:noname\") ,\"//result[@numFound=1]\" );\n  }  \n\n","sourceOld":"  @Test\n  public void testAddMultipleDocumentsWithErrors() {\n    //Add three documents at once to make sure the baseline succeeds\n    assertU(\"adding 3 documents\",\n      \"<add>\" +doc(\"id\", \"601\", \"name\", \"multiad one\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n      doc(\"id\", \"602\", \"name\", \"multiad two\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        doc(\"id\", \"603\", \"name\", \"multiad three\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        \"</add>\");\n    assertU(commit());\n\n    // Check that they are in the index\n    assertQ(\"should find three\", req(\"name:multiad\") ,\"//result[@numFound=3]\" );\n    \n    // Add three documents at once, with the middle one missing a field that has a default\n    assertU(\"adding 3 docs, with 2nd one missing a field that has a default value\",\n      \"<add>\" +doc(\"id\", \"601\", \"name\", \"nosubject batch one\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n      doc(\"id\", \"602\", \"name\", \"nosubject batch two\", \"field_t\", \"what's inside?\") +\n        doc(\"id\", \"603\", \"name\", \"nosubject batch three\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        \"</add>\");\n    assertU(commit());\n    \n    // Since the missing field had a devault value,\n    // All three should have made it into the index\n    assertQ(\"should find three\", req(\"name:nosubject\") ,\"//result[@numFound=3]\" );\n    \n\n    // Add three documents at once, with the middle with a bad field definition,\n    // to establish the baselinie behavior for errors in a multi-ad submission\n    assertFailedU(\"adding 3 documents, with 2nd one with undefined field\",\n          \"<add>\" +doc(\"id\", \"801\", \"name\", \"baddef batch one\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n          doc(\"id\", \"802\", \"name\", \"baddef batch two\", \"missing_field_ignore_exception\", \"garbage\") +\n            doc(\"id\", \"803\", \"name\", \"baddef batch three\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n            \"</add>\");\n    assertU(commit());    \n\n    // Check that only docs before the error should be in the index\n    assertQ(\"should find one\", req(\"name:baddef\") ,\"//result[@numFound=1]\" );\n\n    ignoreException(\"missing required field\");\n    // Add three documents at once, with the middle one missing a required field that has no default\n    assertFailedU(\"adding 3 docs, with 2nd one missing required field\",\n      \"<add>\" +doc(\"id\", \"701\", \"name\", \"noname batch one\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n      doc(\"id\", \"702\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        doc(\"id\", \"703\", \"name\", \"noname batch batch three\", \"field_t\", \"what's inside?\", \"subject\", \"info\") +\n        \"</add>\");\n    resetExceptionIgnores();\n\n    assertU(commit());\n\n    // Check that only docs before the error should be in the index\n    assertQ(\"should find one\", req(\"name:noname\") ,\"//result[@numFound=1]\" );\n  }  \n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"c903c3d15906a3da96b8c0c2fb704491005fdbdb":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"c26f00b574427b55127e869b935845554afde1fa":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","c903c3d15906a3da96b8c0c2fb704491005fdbdb"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"a258fbb26824fd104ed795e5d9033d2d040049ee":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["c26f00b574427b55127e869b935845554afde1fa"]},"commit2Childs":{"c903c3d15906a3da96b8c0c2fb704491005fdbdb":["c26f00b574427b55127e869b935845554afde1fa"],"c26f00b574427b55127e869b935845554afde1fa":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["c903c3d15906a3da96b8c0c2fb704491005fdbdb","c26f00b574427b55127e869b935845554afde1fa","a258fbb26824fd104ed795e5d9033d2d040049ee"],"a258fbb26824fd104ed795e5d9033d2d040049ee":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["a258fbb26824fd104ed795e5d9033d2d040049ee","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}