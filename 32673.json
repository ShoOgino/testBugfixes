{"path":"lucene/queries/src/test/org/apache/lucene/queries/mlt/TestMoreLikeThis#testSeedDocumentMap_minTermFrequencySetMltFieldSet_shouldBuildQueryAccordingToCorrectTermFrequenciesAndField().mjava","commits":[{"id":"303eba9db32cde4e6fbc4e51a44361ef1c302e6c","date":1553596029,"type":0,"author":"Tommaso Teofili","isMerge":false,"pathNew":"lucene/queries/src/test/org/apache/lucene/queries/mlt/TestMoreLikeThis#testSeedDocumentMap_minTermFrequencySetMltFieldSet_shouldBuildQueryAccordingToCorrectTermFrequenciesAndField().mjava","pathOld":"/dev/null","sourceNew":"  public void testSeedDocumentMap_minTermFrequencySetMltFieldSet_shouldBuildQueryAccordingToCorrectTermFrequenciesAndField() throws Exception {\n    mlt.setMinTermFreq(3);\n\n    String mltField = \"text\";\n    mlt.setFieldNames(new String[]{mltField});\n\n    Map<String, Collection<Object>> seedDocument = new HashMap<>();\n    String sampleField2 = \"text2\";\n    String textValue1 = \"apache apache lucene lucene\";\n    String textValue2 = \"apache2 apache2 lucene2 lucene2 lucene2\";\n    seedDocument.put(mltField, Arrays.asList(textValue1));\n    seedDocument.put(sampleField2, Arrays.asList(textValue2));\n\n    BooleanQuery query = (BooleanQuery) mlt.like(seedDocument);\n    Collection<BooleanClause> clauses = query.clauses();\n\n    HashSet<Term> unexpectedTerms = new HashSet<>();\n    unexpectedTerms.add(new Term(mltField, \"apache\"));//Term Frequency < Minimum Accepted Term Frequency\n    unexpectedTerms.add(new Term(mltField, \"lucene\"));//Term Frequency < Minimum Accepted Term Frequency\n    unexpectedTerms.add(new Term(mltField, \"apache2\"));//Term Frequency < Minimum Accepted Term Frequency\n    unexpectedTerms.add(new Term(mltField, \"lucene2\"));//Wrong Field\n\n    //None of the Not Expected terms is in the query\n    for (BooleanClause clause : clauses) {\n      Term term = ((TermQuery) clause.getQuery()).getTerm();\n      assertFalse(\"Unexpected term '\" + term + \"' found in query terms\", unexpectedTerms.contains(term));\n    }\n\n    assertEquals(\"Expected 0 clauses only!\", 0, clauses.size());\n\n    analyzer.close();\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"303eba9db32cde4e6fbc4e51a44361ef1c302e6c":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["303eba9db32cde4e6fbc4e51a44361ef1c302e6c"]},"commit2Childs":{"303eba9db32cde4e6fbc4e51a44361ef1c302e6c":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["303eba9db32cde4e6fbc4e51a44361ef1c302e6c"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}