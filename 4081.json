{"path":"lucene/test-framework/src/java/org/apache/lucene/util/TestUtil#[T]_checkReadOnly(Collection[T]).mjava","commits":[{"id":"8ba6ae8e3c153347cbb605024ca7550f5c91b178","date":1420215916,"type":0,"author":"Adrien Grand","isMerge":false,"pathNew":"lucene/test-framework/src/java/org/apache/lucene/util/TestUtil#[T]_checkReadOnly(Collection[T]).mjava","pathOld":"/dev/null","sourceNew":"  /**\n   * Checks that the provided collection is read-only.\n   * @see #checkIterator(Iterator)\n   */\n  public static <T> void checkReadOnly(Collection<T> coll) {\n    int size = 0;\n    for (Iterator<?> it = coll.iterator(); it.hasNext(); ) {\n      it.next();\n      size += 1;\n    }\n    if (size != coll.size()) {\n      throw new AssertionError(\"broken collection, reported size is \"\n          + coll.size() + \" but iterator has \" + size + \" elements: \" + coll);\n    }\n\n    if (coll.isEmpty() == false) {\n      try {\n        coll.remove(coll.iterator().next());\n        throw new AssertionError(\"broken collection (supports remove): \" + coll);\n      } catch (UnsupportedOperationException e) {\n        // ok\n      }\n    }\n\n    try {\n      coll.add(null);\n      throw new AssertionError(\"broken collection (supports add): \" + coll);\n    } catch (UnsupportedOperationException e) {\n      // ok\n    }\n\n    try {\n      coll.addAll(Collections.singleton(null));\n      throw new AssertionError(\"broken collection (supports addAll): \" + coll);\n    } catch (UnsupportedOperationException e) {\n      // ok\n    }\n\n    checkIterator(coll.iterator());\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"8ba6ae8e3c153347cbb605024ca7550f5c91b178":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["8ba6ae8e3c153347cbb605024ca7550f5c91b178"]},"commit2Childs":{"8ba6ae8e3c153347cbb605024ca7550f5c91b178":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["8ba6ae8e3c153347cbb605024ca7550f5c91b178"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}