{"path":"lucene/queryparser/src/test/org/apache/lucene/queryparser/classic/TestQueryParser#testOperatorsAndMultiWordSynonyms().mjava","commits":[{"id":"138a352a6d4e54824d0275bc7aa1b784e78c81fe","date":1467756222,"type":0,"author":"Steve Rowe","isMerge":false,"pathNew":"lucene/queryparser/src/test/org/apache/lucene/queryparser/classic/TestQueryParser#testOperatorsAndMultiWordSynonyms().mjava","pathOld":"/dev/null","sourceNew":"  // TODO: Move to QueryParserTestBase once standard flexible parser gets this capability\n  public void testOperatorsAndMultiWordSynonyms() throws Exception {\n    Analyzer a = new MockSynonymAnalyzer();\n\n    boolean oldSplitOnWhitespace = splitOnWhitespace;\n    splitOnWhitespace = false;\n\n    // Operators should interrupt multiword analysis of adjacent words if they associate\n    assertQueryEquals(\"+guinea pig\", a, \"+guinea pig\");\n    assertQueryEquals(\"-guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"!guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea* pig\", a, \"guinea* pig\");\n    assertQueryEquals(\"guinea? pig\", a, \"guinea? pig\");\n    assertQueryEquals(\"guinea~2 pig\", a, \"guinea~2 pig\");\n    assertQueryEquals(\"guinea^2 pig\", a, \"(guinea)^2.0 pig\");\n\n    assertQueryEquals(\"guinea +pig\", a, \"guinea +pig\");\n    assertQueryEquals(\"guinea -pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea !pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea pig*\", a, \"guinea pig*\");\n    assertQueryEquals(\"guinea pig?\", a, \"guinea pig?\");\n    assertQueryEquals(\"guinea pig~2\", a, \"guinea pig~2\");\n    assertQueryEquals(\"guinea pig^2\", a, \"guinea (pig)^2.0\");\n\n    assertQueryEquals(\"field:guinea pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea field:pig\", a, \"guinea pig\");\n\n    assertQueryEquals(\"NOT guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea NOT pig\", a, \"guinea -pig\");\n\n    assertQueryEquals(\"guinea pig AND dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs AND guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n    assertQueryEquals(\"guinea pig && dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs && guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n\n    assertQueryEquals(\"guinea pig OR dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs OR guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n    assertQueryEquals(\"guinea pig || dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs || guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n\n    assertQueryEquals(\"\\\"guinea\\\" pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea \\\"pig\\\"\", a, \"guinea pig\");\n\n    assertQueryEquals(\"(guinea) pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea (pig)\", a, \"guinea pig\");\n\n    assertQueryEquals(\"/guinea/ pig\", a, \"/guinea/ pig\");\n    assertQueryEquals(\"guinea /pig/\", a, \"guinea /pig/\");\n\n    // Operators should not interrupt multiword analysis if not don't associate\n    assertQueryEquals(\"(guinea pig)\", a, \"Synonym(cavy guinea) pig\");\n    assertQueryEquals(\"+(guinea pig)\", a, \"+(Synonym(cavy guinea) pig)\");\n    assertQueryEquals(\"-(guinea pig)\", a, \"-(Synonym(cavy guinea) pig)\");\n    assertQueryEquals(\"!(guinea pig)\", a, \"-(Synonym(cavy guinea) pig)\");\n    assertQueryEquals(\"NOT (guinea pig)\", a, \"-(Synonym(cavy guinea) pig)\");\n    assertQueryEquals(\"(guinea pig)^2\", a, \"(Synonym(cavy guinea) pig)^2.0\");\n\n    assertQueryEquals(\"field:(guinea pig)\", a, \"Synonym(cavy guinea) pig\");\n\n    assertQueryEquals(\"+small guinea pig\", a, \"+small Synonym(cavy guinea) pig\");\n    assertQueryEquals(\"-small guinea pig\", a, \"-small Synonym(cavy guinea) pig\");\n    assertQueryEquals(\"!small guinea pig\", a, \"-small Synonym(cavy guinea) pig\");\n    assertQueryEquals(\"NOT small guinea pig\", a, \"-small Synonym(cavy guinea) pig\");\n    assertQueryEquals(\"small* guinea pig\", a, \"small* Synonym(cavy guinea) pig\");\n    assertQueryEquals(\"small? guinea pig\", a, \"small? Synonym(cavy guinea) pig\");\n    assertQueryEquals(\"\\\"small\\\" guinea pig\", a, \"small Synonym(cavy guinea) pig\");\n\n    assertQueryEquals(\"guinea pig +running\", a, \"Synonym(cavy guinea) pig +running\");\n    assertQueryEquals(\"guinea pig -running\", a, \"Synonym(cavy guinea) pig -running\");\n    assertQueryEquals(\"guinea pig !running\", a, \"Synonym(cavy guinea) pig -running\");\n    assertQueryEquals(\"guinea pig NOT running\", a, \"Synonym(cavy guinea) pig -running\");\n    assertQueryEquals(\"guinea pig running*\", a, \"Synonym(cavy guinea) pig running*\");\n    assertQueryEquals(\"guinea pig running?\", a, \"Synonym(cavy guinea) pig running?\");\n    assertQueryEquals(\"guinea pig \\\"running\\\"\", a, \"Synonym(cavy guinea) pig running\");\n\n    assertQueryEquals(\"\\\"guinea pig\\\"~2\", a, \"\\\"(guinea cavy) pig\\\"~2\");\n\n    assertQueryEquals(\"field:\\\"guinea pig\\\"\", a, \"\\\"(guinea cavy) pig\\\"\");\n\n    splitOnWhitespace = oldSplitOnWhitespace;\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"4cce5816ef15a48a0bc11e5d400497ee4301dd3b","date":1476991456,"type":0,"author":"Kevin Risden","isMerge":true,"pathNew":"lucene/queryparser/src/test/org/apache/lucene/queryparser/classic/TestQueryParser#testOperatorsAndMultiWordSynonyms().mjava","pathOld":"/dev/null","sourceNew":"  // TODO: Move to QueryParserTestBase once standard flexible parser gets this capability\n  public void testOperatorsAndMultiWordSynonyms() throws Exception {\n    Analyzer a = new MockSynonymAnalyzer();\n\n    boolean oldSplitOnWhitespace = splitOnWhitespace;\n    splitOnWhitespace = false;\n\n    // Operators should interrupt multiword analysis of adjacent words if they associate\n    assertQueryEquals(\"+guinea pig\", a, \"+guinea pig\");\n    assertQueryEquals(\"-guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"!guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea* pig\", a, \"guinea* pig\");\n    assertQueryEquals(\"guinea? pig\", a, \"guinea? pig\");\n    assertQueryEquals(\"guinea~2 pig\", a, \"guinea~2 pig\");\n    assertQueryEquals(\"guinea^2 pig\", a, \"(guinea)^2.0 pig\");\n\n    assertQueryEquals(\"guinea +pig\", a, \"guinea +pig\");\n    assertQueryEquals(\"guinea -pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea !pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea pig*\", a, \"guinea pig*\");\n    assertQueryEquals(\"guinea pig?\", a, \"guinea pig?\");\n    assertQueryEquals(\"guinea pig~2\", a, \"guinea pig~2\");\n    assertQueryEquals(\"guinea pig^2\", a, \"guinea (pig)^2.0\");\n\n    assertQueryEquals(\"field:guinea pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea field:pig\", a, \"guinea pig\");\n\n    assertQueryEquals(\"NOT guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea NOT pig\", a, \"guinea -pig\");\n\n    assertQueryEquals(\"guinea pig AND dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs AND guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n    assertQueryEquals(\"guinea pig && dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs && guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n\n    assertQueryEquals(\"guinea pig OR dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs OR guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n    assertQueryEquals(\"guinea pig || dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs || guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n\n    assertQueryEquals(\"\\\"guinea\\\" pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea \\\"pig\\\"\", a, \"guinea pig\");\n\n    assertQueryEquals(\"(guinea) pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea (pig)\", a, \"guinea pig\");\n\n    assertQueryEquals(\"/guinea/ pig\", a, \"/guinea/ pig\");\n    assertQueryEquals(\"guinea /pig/\", a, \"guinea /pig/\");\n\n    // Operators should not interrupt multiword analysis if not don't associate\n    assertQueryEquals(\"(guinea pig)\", a, \"Synonym(cavy guinea) pig\");\n    assertQueryEquals(\"+(guinea pig)\", a, \"+(Synonym(cavy guinea) pig)\");\n    assertQueryEquals(\"-(guinea pig)\", a, \"-(Synonym(cavy guinea) pig)\");\n    assertQueryEquals(\"!(guinea pig)\", a, \"-(Synonym(cavy guinea) pig)\");\n    assertQueryEquals(\"NOT (guinea pig)\", a, \"-(Synonym(cavy guinea) pig)\");\n    assertQueryEquals(\"(guinea pig)^2\", a, \"(Synonym(cavy guinea) pig)^2.0\");\n\n    assertQueryEquals(\"field:(guinea pig)\", a, \"Synonym(cavy guinea) pig\");\n\n    assertQueryEquals(\"+small guinea pig\", a, \"+small Synonym(cavy guinea) pig\");\n    assertQueryEquals(\"-small guinea pig\", a, \"-small Synonym(cavy guinea) pig\");\n    assertQueryEquals(\"!small guinea pig\", a, \"-small Synonym(cavy guinea) pig\");\n    assertQueryEquals(\"NOT small guinea pig\", a, \"-small Synonym(cavy guinea) pig\");\n    assertQueryEquals(\"small* guinea pig\", a, \"small* Synonym(cavy guinea) pig\");\n    assertQueryEquals(\"small? guinea pig\", a, \"small? Synonym(cavy guinea) pig\");\n    assertQueryEquals(\"\\\"small\\\" guinea pig\", a, \"small Synonym(cavy guinea) pig\");\n\n    assertQueryEquals(\"guinea pig +running\", a, \"Synonym(cavy guinea) pig +running\");\n    assertQueryEquals(\"guinea pig -running\", a, \"Synonym(cavy guinea) pig -running\");\n    assertQueryEquals(\"guinea pig !running\", a, \"Synonym(cavy guinea) pig -running\");\n    assertQueryEquals(\"guinea pig NOT running\", a, \"Synonym(cavy guinea) pig -running\");\n    assertQueryEquals(\"guinea pig running*\", a, \"Synonym(cavy guinea) pig running*\");\n    assertQueryEquals(\"guinea pig running?\", a, \"Synonym(cavy guinea) pig running?\");\n    assertQueryEquals(\"guinea pig \\\"running\\\"\", a, \"Synonym(cavy guinea) pig running\");\n\n    assertQueryEquals(\"\\\"guinea pig\\\"~2\", a, \"\\\"(guinea cavy) pig\\\"~2\");\n\n    assertQueryEquals(\"field:\\\"guinea pig\\\"\", a, \"\\\"(guinea cavy) pig\\\"\");\n\n    splitOnWhitespace = oldSplitOnWhitespace;\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"e52c30617998e1bc2a946cc226f52e9b35162b1e","date":1483438353,"type":3,"author":"Matt Weber","isMerge":false,"pathNew":"lucene/queryparser/src/test/org/apache/lucene/queryparser/classic/TestQueryParser#testOperatorsAndMultiWordSynonyms().mjava","pathOld":"lucene/queryparser/src/test/org/apache/lucene/queryparser/classic/TestQueryParser#testOperatorsAndMultiWordSynonyms().mjava","sourceNew":"  // TODO: Move to QueryParserTestBase once standard flexible parser gets this capability\n  public void testOperatorsAndMultiWordSynonyms() throws Exception {\n    Analyzer a = new MockSynonymAnalyzer();\n\n    boolean oldSplitOnWhitespace = splitOnWhitespace;\n    splitOnWhitespace = false;\n\n    // Operators should interrupt multiword analysis of adjacent words if they associate\n    assertQueryEquals(\"+guinea pig\", a, \"+guinea pig\");\n    assertQueryEquals(\"-guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"!guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea* pig\", a, \"guinea* pig\");\n    assertQueryEquals(\"guinea? pig\", a, \"guinea? pig\");\n    assertQueryEquals(\"guinea~2 pig\", a, \"guinea~2 pig\");\n    assertQueryEquals(\"guinea^2 pig\", a, \"(guinea)^2.0 pig\");\n\n    assertQueryEquals(\"guinea +pig\", a, \"guinea +pig\");\n    assertQueryEquals(\"guinea -pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea !pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea pig*\", a, \"guinea pig*\");\n    assertQueryEquals(\"guinea pig?\", a, \"guinea pig?\");\n    assertQueryEquals(\"guinea pig~2\", a, \"guinea pig~2\");\n    assertQueryEquals(\"guinea pig^2\", a, \"guinea (pig)^2.0\");\n\n    assertQueryEquals(\"field:guinea pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea field:pig\", a, \"guinea pig\");\n\n    assertQueryEquals(\"NOT guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea NOT pig\", a, \"guinea -pig\");\n\n    assertQueryEquals(\"guinea pig AND dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs AND guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n    assertQueryEquals(\"guinea pig && dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs && guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n\n    assertQueryEquals(\"guinea pig OR dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs OR guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n    assertQueryEquals(\"guinea pig || dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs || guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n\n    assertQueryEquals(\"\\\"guinea\\\" pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea \\\"pig\\\"\", a, \"guinea pig\");\n\n    assertQueryEquals(\"(guinea) pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea (pig)\", a, \"guinea pig\");\n\n    assertQueryEquals(\"/guinea/ pig\", a, \"/guinea/ pig\");\n    assertQueryEquals(\"guinea /pig/\", a, \"guinea /pig/\");\n\n    // Operators should not interrupt multiword analysis if not don't associate\n    assertQueryEquals(\"(guinea pig)\", a, \"Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"+(guinea pig)\", a, \"+Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"-(guinea pig)\", a, \"-Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"!(guinea pig)\", a, \"-Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"NOT (guinea pig)\", a, \"-Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"(guinea pig)^2\", a, \"(Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false))^2.0\");\n\n    assertQueryEquals(\"field:(guinea pig)\", a, \"Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n\n    assertQueryEquals(\"+small guinea pig\", a, \"+small Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"-small guinea pig\", a, \"-small Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"!small guinea pig\", a, \"-small Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"NOT small guinea pig\", a, \"-small Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"small* guinea pig\", a, \"small* Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"small? guinea pig\", a, \"small? Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"\\\"small\\\" guinea pig\", a, \"small Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n\n    assertQueryEquals(\"guinea pig +running\", a, \"Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false) +running\");\n    assertQueryEquals(\"guinea pig -running\", a, \"Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false) -running\");\n    assertQueryEquals(\"guinea pig !running\", a, \"Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false) -running\");\n    assertQueryEquals(\"guinea pig NOT running\", a, \"Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false) -running\");\n    assertQueryEquals(\"guinea pig running*\", a, \"Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false) running*\");\n    assertQueryEquals(\"guinea pig running?\", a, \"Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false) running?\");\n    assertQueryEquals(\"guinea pig \\\"running\\\"\", a, \"Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false) running\");\n\n    assertQueryEquals(\"\\\"guinea pig\\\"~2\", a, \"Graph(field:\\\"guinea pig\\\"~2, field:cavy, hasBoolean=false, hasPhrase=true)\");\n\n    assertQueryEquals(\"field:\\\"guinea pig\\\"\", a, \"Graph(field:\\\"guinea pig\\\", field:cavy, hasBoolean=false, hasPhrase=true)\");\n\n    splitOnWhitespace = oldSplitOnWhitespace;\n  }\n\n","sourceOld":"  // TODO: Move to QueryParserTestBase once standard flexible parser gets this capability\n  public void testOperatorsAndMultiWordSynonyms() throws Exception {\n    Analyzer a = new MockSynonymAnalyzer();\n\n    boolean oldSplitOnWhitespace = splitOnWhitespace;\n    splitOnWhitespace = false;\n\n    // Operators should interrupt multiword analysis of adjacent words if they associate\n    assertQueryEquals(\"+guinea pig\", a, \"+guinea pig\");\n    assertQueryEquals(\"-guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"!guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea* pig\", a, \"guinea* pig\");\n    assertQueryEquals(\"guinea? pig\", a, \"guinea? pig\");\n    assertQueryEquals(\"guinea~2 pig\", a, \"guinea~2 pig\");\n    assertQueryEquals(\"guinea^2 pig\", a, \"(guinea)^2.0 pig\");\n\n    assertQueryEquals(\"guinea +pig\", a, \"guinea +pig\");\n    assertQueryEquals(\"guinea -pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea !pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea pig*\", a, \"guinea pig*\");\n    assertQueryEquals(\"guinea pig?\", a, \"guinea pig?\");\n    assertQueryEquals(\"guinea pig~2\", a, \"guinea pig~2\");\n    assertQueryEquals(\"guinea pig^2\", a, \"guinea (pig)^2.0\");\n\n    assertQueryEquals(\"field:guinea pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea field:pig\", a, \"guinea pig\");\n\n    assertQueryEquals(\"NOT guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea NOT pig\", a, \"guinea -pig\");\n\n    assertQueryEquals(\"guinea pig AND dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs AND guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n    assertQueryEquals(\"guinea pig && dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs && guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n\n    assertQueryEquals(\"guinea pig OR dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs OR guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n    assertQueryEquals(\"guinea pig || dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs || guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n\n    assertQueryEquals(\"\\\"guinea\\\" pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea \\\"pig\\\"\", a, \"guinea pig\");\n\n    assertQueryEquals(\"(guinea) pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea (pig)\", a, \"guinea pig\");\n\n    assertQueryEquals(\"/guinea/ pig\", a, \"/guinea/ pig\");\n    assertQueryEquals(\"guinea /pig/\", a, \"guinea /pig/\");\n\n    // Operators should not interrupt multiword analysis if not don't associate\n    assertQueryEquals(\"(guinea pig)\", a, \"Synonym(cavy guinea) pig\");\n    assertQueryEquals(\"+(guinea pig)\", a, \"+(Synonym(cavy guinea) pig)\");\n    assertQueryEquals(\"-(guinea pig)\", a, \"-(Synonym(cavy guinea) pig)\");\n    assertQueryEquals(\"!(guinea pig)\", a, \"-(Synonym(cavy guinea) pig)\");\n    assertQueryEquals(\"NOT (guinea pig)\", a, \"-(Synonym(cavy guinea) pig)\");\n    assertQueryEquals(\"(guinea pig)^2\", a, \"(Synonym(cavy guinea) pig)^2.0\");\n\n    assertQueryEquals(\"field:(guinea pig)\", a, \"Synonym(cavy guinea) pig\");\n\n    assertQueryEquals(\"+small guinea pig\", a, \"+small Synonym(cavy guinea) pig\");\n    assertQueryEquals(\"-small guinea pig\", a, \"-small Synonym(cavy guinea) pig\");\n    assertQueryEquals(\"!small guinea pig\", a, \"-small Synonym(cavy guinea) pig\");\n    assertQueryEquals(\"NOT small guinea pig\", a, \"-small Synonym(cavy guinea) pig\");\n    assertQueryEquals(\"small* guinea pig\", a, \"small* Synonym(cavy guinea) pig\");\n    assertQueryEquals(\"small? guinea pig\", a, \"small? Synonym(cavy guinea) pig\");\n    assertQueryEquals(\"\\\"small\\\" guinea pig\", a, \"small Synonym(cavy guinea) pig\");\n\n    assertQueryEquals(\"guinea pig +running\", a, \"Synonym(cavy guinea) pig +running\");\n    assertQueryEquals(\"guinea pig -running\", a, \"Synonym(cavy guinea) pig -running\");\n    assertQueryEquals(\"guinea pig !running\", a, \"Synonym(cavy guinea) pig -running\");\n    assertQueryEquals(\"guinea pig NOT running\", a, \"Synonym(cavy guinea) pig -running\");\n    assertQueryEquals(\"guinea pig running*\", a, \"Synonym(cavy guinea) pig running*\");\n    assertQueryEquals(\"guinea pig running?\", a, \"Synonym(cavy guinea) pig running?\");\n    assertQueryEquals(\"guinea pig \\\"running\\\"\", a, \"Synonym(cavy guinea) pig running\");\n\n    assertQueryEquals(\"\\\"guinea pig\\\"~2\", a, \"\\\"(guinea cavy) pig\\\"~2\");\n\n    assertQueryEquals(\"field:\\\"guinea pig\\\"\", a, \"\\\"(guinea cavy) pig\\\"\");\n\n    splitOnWhitespace = oldSplitOnWhitespace;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"f03e4bed5023ec3ef93a771b8888cae991cf448d","date":1483469262,"type":3,"author":"Kevin Risden","isMerge":true,"pathNew":"lucene/queryparser/src/test/org/apache/lucene/queryparser/classic/TestQueryParser#testOperatorsAndMultiWordSynonyms().mjava","pathOld":"lucene/queryparser/src/test/org/apache/lucene/queryparser/classic/TestQueryParser#testOperatorsAndMultiWordSynonyms().mjava","sourceNew":"  // TODO: Move to QueryParserTestBase once standard flexible parser gets this capability\n  public void testOperatorsAndMultiWordSynonyms() throws Exception {\n    Analyzer a = new MockSynonymAnalyzer();\n\n    boolean oldSplitOnWhitespace = splitOnWhitespace;\n    splitOnWhitespace = false;\n\n    // Operators should interrupt multiword analysis of adjacent words if they associate\n    assertQueryEquals(\"+guinea pig\", a, \"+guinea pig\");\n    assertQueryEquals(\"-guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"!guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea* pig\", a, \"guinea* pig\");\n    assertQueryEquals(\"guinea? pig\", a, \"guinea? pig\");\n    assertQueryEquals(\"guinea~2 pig\", a, \"guinea~2 pig\");\n    assertQueryEquals(\"guinea^2 pig\", a, \"(guinea)^2.0 pig\");\n\n    assertQueryEquals(\"guinea +pig\", a, \"guinea +pig\");\n    assertQueryEquals(\"guinea -pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea !pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea pig*\", a, \"guinea pig*\");\n    assertQueryEquals(\"guinea pig?\", a, \"guinea pig?\");\n    assertQueryEquals(\"guinea pig~2\", a, \"guinea pig~2\");\n    assertQueryEquals(\"guinea pig^2\", a, \"guinea (pig)^2.0\");\n\n    assertQueryEquals(\"field:guinea pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea field:pig\", a, \"guinea pig\");\n\n    assertQueryEquals(\"NOT guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea NOT pig\", a, \"guinea -pig\");\n\n    assertQueryEquals(\"guinea pig AND dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs AND guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n    assertQueryEquals(\"guinea pig && dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs && guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n\n    assertQueryEquals(\"guinea pig OR dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs OR guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n    assertQueryEquals(\"guinea pig || dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs || guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n\n    assertQueryEquals(\"\\\"guinea\\\" pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea \\\"pig\\\"\", a, \"guinea pig\");\n\n    assertQueryEquals(\"(guinea) pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea (pig)\", a, \"guinea pig\");\n\n    assertQueryEquals(\"/guinea/ pig\", a, \"/guinea/ pig\");\n    assertQueryEquals(\"guinea /pig/\", a, \"guinea /pig/\");\n\n    // Operators should not interrupt multiword analysis if not don't associate\n    assertQueryEquals(\"(guinea pig)\", a, \"Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"+(guinea pig)\", a, \"+Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"-(guinea pig)\", a, \"-Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"!(guinea pig)\", a, \"-Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"NOT (guinea pig)\", a, \"-Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"(guinea pig)^2\", a, \"(Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false))^2.0\");\n\n    assertQueryEquals(\"field:(guinea pig)\", a, \"Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n\n    assertQueryEquals(\"+small guinea pig\", a, \"+small Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"-small guinea pig\", a, \"-small Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"!small guinea pig\", a, \"-small Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"NOT small guinea pig\", a, \"-small Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"small* guinea pig\", a, \"small* Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"small? guinea pig\", a, \"small? Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"\\\"small\\\" guinea pig\", a, \"small Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n\n    assertQueryEquals(\"guinea pig +running\", a, \"Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false) +running\");\n    assertQueryEquals(\"guinea pig -running\", a, \"Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false) -running\");\n    assertQueryEquals(\"guinea pig !running\", a, \"Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false) -running\");\n    assertQueryEquals(\"guinea pig NOT running\", a, \"Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false) -running\");\n    assertQueryEquals(\"guinea pig running*\", a, \"Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false) running*\");\n    assertQueryEquals(\"guinea pig running?\", a, \"Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false) running?\");\n    assertQueryEquals(\"guinea pig \\\"running\\\"\", a, \"Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false) running\");\n\n    assertQueryEquals(\"\\\"guinea pig\\\"~2\", a, \"Graph(field:\\\"guinea pig\\\"~2, field:cavy, hasBoolean=false, hasPhrase=true)\");\n\n    assertQueryEquals(\"field:\\\"guinea pig\\\"\", a, \"Graph(field:\\\"guinea pig\\\", field:cavy, hasBoolean=false, hasPhrase=true)\");\n\n    splitOnWhitespace = oldSplitOnWhitespace;\n  }\n\n","sourceOld":"  // TODO: Move to QueryParserTestBase once standard flexible parser gets this capability\n  public void testOperatorsAndMultiWordSynonyms() throws Exception {\n    Analyzer a = new MockSynonymAnalyzer();\n\n    boolean oldSplitOnWhitespace = splitOnWhitespace;\n    splitOnWhitespace = false;\n\n    // Operators should interrupt multiword analysis of adjacent words if they associate\n    assertQueryEquals(\"+guinea pig\", a, \"+guinea pig\");\n    assertQueryEquals(\"-guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"!guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea* pig\", a, \"guinea* pig\");\n    assertQueryEquals(\"guinea? pig\", a, \"guinea? pig\");\n    assertQueryEquals(\"guinea~2 pig\", a, \"guinea~2 pig\");\n    assertQueryEquals(\"guinea^2 pig\", a, \"(guinea)^2.0 pig\");\n\n    assertQueryEquals(\"guinea +pig\", a, \"guinea +pig\");\n    assertQueryEquals(\"guinea -pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea !pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea pig*\", a, \"guinea pig*\");\n    assertQueryEquals(\"guinea pig?\", a, \"guinea pig?\");\n    assertQueryEquals(\"guinea pig~2\", a, \"guinea pig~2\");\n    assertQueryEquals(\"guinea pig^2\", a, \"guinea (pig)^2.0\");\n\n    assertQueryEquals(\"field:guinea pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea field:pig\", a, \"guinea pig\");\n\n    assertQueryEquals(\"NOT guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea NOT pig\", a, \"guinea -pig\");\n\n    assertQueryEquals(\"guinea pig AND dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs AND guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n    assertQueryEquals(\"guinea pig && dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs && guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n\n    assertQueryEquals(\"guinea pig OR dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs OR guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n    assertQueryEquals(\"guinea pig || dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs || guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n\n    assertQueryEquals(\"\\\"guinea\\\" pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea \\\"pig\\\"\", a, \"guinea pig\");\n\n    assertQueryEquals(\"(guinea) pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea (pig)\", a, \"guinea pig\");\n\n    assertQueryEquals(\"/guinea/ pig\", a, \"/guinea/ pig\");\n    assertQueryEquals(\"guinea /pig/\", a, \"guinea /pig/\");\n\n    // Operators should not interrupt multiword analysis if not don't associate\n    assertQueryEquals(\"(guinea pig)\", a, \"Synonym(cavy guinea) pig\");\n    assertQueryEquals(\"+(guinea pig)\", a, \"+(Synonym(cavy guinea) pig)\");\n    assertQueryEquals(\"-(guinea pig)\", a, \"-(Synonym(cavy guinea) pig)\");\n    assertQueryEquals(\"!(guinea pig)\", a, \"-(Synonym(cavy guinea) pig)\");\n    assertQueryEquals(\"NOT (guinea pig)\", a, \"-(Synonym(cavy guinea) pig)\");\n    assertQueryEquals(\"(guinea pig)^2\", a, \"(Synonym(cavy guinea) pig)^2.0\");\n\n    assertQueryEquals(\"field:(guinea pig)\", a, \"Synonym(cavy guinea) pig\");\n\n    assertQueryEquals(\"+small guinea pig\", a, \"+small Synonym(cavy guinea) pig\");\n    assertQueryEquals(\"-small guinea pig\", a, \"-small Synonym(cavy guinea) pig\");\n    assertQueryEquals(\"!small guinea pig\", a, \"-small Synonym(cavy guinea) pig\");\n    assertQueryEquals(\"NOT small guinea pig\", a, \"-small Synonym(cavy guinea) pig\");\n    assertQueryEquals(\"small* guinea pig\", a, \"small* Synonym(cavy guinea) pig\");\n    assertQueryEquals(\"small? guinea pig\", a, \"small? Synonym(cavy guinea) pig\");\n    assertQueryEquals(\"\\\"small\\\" guinea pig\", a, \"small Synonym(cavy guinea) pig\");\n\n    assertQueryEquals(\"guinea pig +running\", a, \"Synonym(cavy guinea) pig +running\");\n    assertQueryEquals(\"guinea pig -running\", a, \"Synonym(cavy guinea) pig -running\");\n    assertQueryEquals(\"guinea pig !running\", a, \"Synonym(cavy guinea) pig -running\");\n    assertQueryEquals(\"guinea pig NOT running\", a, \"Synonym(cavy guinea) pig -running\");\n    assertQueryEquals(\"guinea pig running*\", a, \"Synonym(cavy guinea) pig running*\");\n    assertQueryEquals(\"guinea pig running?\", a, \"Synonym(cavy guinea) pig running?\");\n    assertQueryEquals(\"guinea pig \\\"running\\\"\", a, \"Synonym(cavy guinea) pig running\");\n\n    assertQueryEquals(\"\\\"guinea pig\\\"~2\", a, \"\\\"(guinea cavy) pig\\\"~2\");\n\n    assertQueryEquals(\"field:\\\"guinea pig\\\"\", a, \"\\\"(guinea cavy) pig\\\"\");\n\n    splitOnWhitespace = oldSplitOnWhitespace;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"7e0d75d7d3cda2b33e79d0eb0e716169cebec4db","date":1486463279,"type":3,"author":"Jim Ferenczi","isMerge":false,"pathNew":"lucene/queryparser/src/test/org/apache/lucene/queryparser/classic/TestQueryParser#testOperatorsAndMultiWordSynonyms().mjava","pathOld":"lucene/queryparser/src/test/org/apache/lucene/queryparser/classic/TestQueryParser#testOperatorsAndMultiWordSynonyms().mjava","sourceNew":"  // TODO: Move to QueryParserTestBase once standard flexible parser gets this capability\n  public void testOperatorsAndMultiWordSynonyms() throws Exception {\n    Analyzer a = new MockSynonymAnalyzer();\n\n    boolean oldSplitOnWhitespace = splitOnWhitespace;\n    splitOnWhitespace = false;\n\n    // Operators should interrupt multiword analysis of adjacent words if they associate\n    assertQueryEquals(\"+guinea pig\", a, \"+guinea pig\");\n    assertQueryEquals(\"-guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"!guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea* pig\", a, \"guinea* pig\");\n    assertQueryEquals(\"guinea? pig\", a, \"guinea? pig\");\n    assertQueryEquals(\"guinea~2 pig\", a, \"guinea~2 pig\");\n    assertQueryEquals(\"guinea^2 pig\", a, \"(guinea)^2.0 pig\");\n\n    assertQueryEquals(\"guinea +pig\", a, \"guinea +pig\");\n    assertQueryEquals(\"guinea -pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea !pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea pig*\", a, \"guinea pig*\");\n    assertQueryEquals(\"guinea pig?\", a, \"guinea pig?\");\n    assertQueryEquals(\"guinea pig~2\", a, \"guinea pig~2\");\n    assertQueryEquals(\"guinea pig^2\", a, \"guinea (pig)^2.0\");\n\n    assertQueryEquals(\"field:guinea pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea field:pig\", a, \"guinea pig\");\n\n    assertQueryEquals(\"NOT guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea NOT pig\", a, \"guinea -pig\");\n\n    assertQueryEquals(\"guinea pig AND dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs AND guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n    assertQueryEquals(\"guinea pig && dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs && guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n\n    assertQueryEquals(\"guinea pig OR dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs OR guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n    assertQueryEquals(\"guinea pig || dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs || guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n\n    assertQueryEquals(\"\\\"guinea\\\" pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea \\\"pig\\\"\", a, \"guinea pig\");\n\n    assertQueryEquals(\"(guinea) pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea (pig)\", a, \"guinea pig\");\n\n    assertQueryEquals(\"/guinea/ pig\", a, \"/guinea/ pig\");\n    assertQueryEquals(\"guinea /pig/\", a, \"guinea /pig/\");\n\n    // Operators should not interrupt multiword analysis if not don't associate\n    assertQueryEquals(\"(guinea pig)\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"+(guinea pig)\", a, \"+Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"-(guinea pig)\", a, \"-Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"!(guinea pig)\", a, \"-Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"NOT (guinea pig)\", a, \"-Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"(guinea pig)^2\", a, \"(Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false))^2.0\");\n\n    assertQueryEquals(\"field:(guinea pig)\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n\n    assertQueryEquals(\"+small guinea pig\", a, \"+small Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"-small guinea pig\", a, \"-small Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"!small guinea pig\", a, \"-small Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"NOT small guinea pig\", a, \"-small Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"small* guinea pig\", a, \"small* Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"small? guinea pig\", a, \"small? Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"\\\"small\\\" guinea pig\", a, \"small Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n\n    assertQueryEquals(\"guinea pig +running\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false) +running\");\n    assertQueryEquals(\"guinea pig -running\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false) -running\");\n    assertQueryEquals(\"guinea pig !running\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false) -running\");\n    assertQueryEquals(\"guinea pig NOT running\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false) -running\");\n    assertQueryEquals(\"guinea pig running*\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false) running*\");\n    assertQueryEquals(\"guinea pig running?\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false) running?\");\n    assertQueryEquals(\"guinea pig \\\"running\\\"\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false) running\");\n\n    assertQueryEquals(\"\\\"guinea pig\\\"~2\", a, \"Graph(field:\\\"guinea pig\\\"~2, field:cavy, hasBoolean=false, hasPhrase=true)\");\n\n    assertQueryEquals(\"field:\\\"guinea pig\\\"\", a, \"Graph(field:\\\"guinea pig\\\", field:cavy, hasBoolean=false, hasPhrase=true)\");\n\n    splitOnWhitespace = oldSplitOnWhitespace;\n  }\n\n","sourceOld":"  // TODO: Move to QueryParserTestBase once standard flexible parser gets this capability\n  public void testOperatorsAndMultiWordSynonyms() throws Exception {\n    Analyzer a = new MockSynonymAnalyzer();\n\n    boolean oldSplitOnWhitespace = splitOnWhitespace;\n    splitOnWhitespace = false;\n\n    // Operators should interrupt multiword analysis of adjacent words if they associate\n    assertQueryEquals(\"+guinea pig\", a, \"+guinea pig\");\n    assertQueryEquals(\"-guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"!guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea* pig\", a, \"guinea* pig\");\n    assertQueryEquals(\"guinea? pig\", a, \"guinea? pig\");\n    assertQueryEquals(\"guinea~2 pig\", a, \"guinea~2 pig\");\n    assertQueryEquals(\"guinea^2 pig\", a, \"(guinea)^2.0 pig\");\n\n    assertQueryEquals(\"guinea +pig\", a, \"guinea +pig\");\n    assertQueryEquals(\"guinea -pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea !pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea pig*\", a, \"guinea pig*\");\n    assertQueryEquals(\"guinea pig?\", a, \"guinea pig?\");\n    assertQueryEquals(\"guinea pig~2\", a, \"guinea pig~2\");\n    assertQueryEquals(\"guinea pig^2\", a, \"guinea (pig)^2.0\");\n\n    assertQueryEquals(\"field:guinea pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea field:pig\", a, \"guinea pig\");\n\n    assertQueryEquals(\"NOT guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea NOT pig\", a, \"guinea -pig\");\n\n    assertQueryEquals(\"guinea pig AND dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs AND guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n    assertQueryEquals(\"guinea pig && dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs && guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n\n    assertQueryEquals(\"guinea pig OR dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs OR guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n    assertQueryEquals(\"guinea pig || dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs || guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n\n    assertQueryEquals(\"\\\"guinea\\\" pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea \\\"pig\\\"\", a, \"guinea pig\");\n\n    assertQueryEquals(\"(guinea) pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea (pig)\", a, \"guinea pig\");\n\n    assertQueryEquals(\"/guinea/ pig\", a, \"/guinea/ pig\");\n    assertQueryEquals(\"guinea /pig/\", a, \"guinea /pig/\");\n\n    // Operators should not interrupt multiword analysis if not don't associate\n    assertQueryEquals(\"(guinea pig)\", a, \"Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"+(guinea pig)\", a, \"+Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"-(guinea pig)\", a, \"-Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"!(guinea pig)\", a, \"-Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"NOT (guinea pig)\", a, \"-Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"(guinea pig)^2\", a, \"(Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false))^2.0\");\n\n    assertQueryEquals(\"field:(guinea pig)\", a, \"Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n\n    assertQueryEquals(\"+small guinea pig\", a, \"+small Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"-small guinea pig\", a, \"-small Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"!small guinea pig\", a, \"-small Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"NOT small guinea pig\", a, \"-small Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"small* guinea pig\", a, \"small* Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"small? guinea pig\", a, \"small? Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"\\\"small\\\" guinea pig\", a, \"small Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n\n    assertQueryEquals(\"guinea pig +running\", a, \"Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false) +running\");\n    assertQueryEquals(\"guinea pig -running\", a, \"Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false) -running\");\n    assertQueryEquals(\"guinea pig !running\", a, \"Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false) -running\");\n    assertQueryEquals(\"guinea pig NOT running\", a, \"Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false) -running\");\n    assertQueryEquals(\"guinea pig running*\", a, \"Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false) running*\");\n    assertQueryEquals(\"guinea pig running?\", a, \"Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false) running?\");\n    assertQueryEquals(\"guinea pig \\\"running\\\"\", a, \"Graph(field:guinea field:pig, field:cavy, hasBoolean=true, hasPhrase=false) running\");\n\n    assertQueryEquals(\"\\\"guinea pig\\\"~2\", a, \"Graph(field:\\\"guinea pig\\\"~2, field:cavy, hasBoolean=false, hasPhrase=true)\");\n\n    assertQueryEquals(\"field:\\\"guinea pig\\\"\", a, \"Graph(field:\\\"guinea pig\\\", field:cavy, hasBoolean=false, hasPhrase=true)\");\n\n    splitOnWhitespace = oldSplitOnWhitespace;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"d79fd791e91f49ce8026885d7b8ac62bee4c8126","date":1487768721,"type":3,"author":"Jim Ferenczi","isMerge":false,"pathNew":"lucene/queryparser/src/test/org/apache/lucene/queryparser/classic/TestQueryParser#testOperatorsAndMultiWordSynonyms().mjava","pathOld":"lucene/queryparser/src/test/org/apache/lucene/queryparser/classic/TestQueryParser#testOperatorsAndMultiWordSynonyms().mjava","sourceNew":"  // TODO: Move to QueryParserTestBase once standard flexible parser gets this capability\n  public void testOperatorsAndMultiWordSynonyms() throws Exception {\n    Analyzer a = new MockSynonymAnalyzer();\n\n    boolean oldSplitOnWhitespace = splitOnWhitespace;\n    splitOnWhitespace = false;\n\n    // Operators should interrupt multiword analysis of adjacent words if they associate\n    assertQueryEquals(\"+guinea pig\", a, \"+guinea pig\");\n    assertQueryEquals(\"-guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"!guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea* pig\", a, \"guinea* pig\");\n    assertQueryEquals(\"guinea? pig\", a, \"guinea? pig\");\n    assertQueryEquals(\"guinea~2 pig\", a, \"guinea~2 pig\");\n    assertQueryEquals(\"guinea^2 pig\", a, \"(guinea)^2.0 pig\");\n\n    assertQueryEquals(\"guinea +pig\", a, \"guinea +pig\");\n    assertQueryEquals(\"guinea -pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea !pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea pig*\", a, \"guinea pig*\");\n    assertQueryEquals(\"guinea pig?\", a, \"guinea pig?\");\n    assertQueryEquals(\"guinea pig~2\", a, \"guinea pig~2\");\n    assertQueryEquals(\"guinea pig^2\", a, \"guinea (pig)^2.0\");\n\n    assertQueryEquals(\"field:guinea pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea field:pig\", a, \"guinea pig\");\n\n    assertQueryEquals(\"NOT guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea NOT pig\", a, \"guinea -pig\");\n\n    assertQueryEquals(\"guinea pig AND dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs AND guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n    assertQueryEquals(\"guinea pig && dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs && guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n\n    assertQueryEquals(\"guinea pig OR dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs OR guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n    assertQueryEquals(\"guinea pig || dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs || guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n\n    assertQueryEquals(\"\\\"guinea\\\" pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea \\\"pig\\\"\", a, \"guinea pig\");\n\n    assertQueryEquals(\"(guinea) pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea (pig)\", a, \"guinea pig\");\n\n    assertQueryEquals(\"/guinea/ pig\", a, \"/guinea/ pig\");\n    assertQueryEquals(\"guinea /pig/\", a, \"guinea /pig/\");\n\n    // Operators should not interrupt multiword analysis if not don't associate\n    assertQueryEquals(\"(guinea pig)\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"+(guinea pig)\", a, \"+Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"-(guinea pig)\", a, \"-Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"!(guinea pig)\", a, \"-Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"NOT (guinea pig)\", a, \"-Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"(guinea pig)^2\", a, \"(Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false))^2.0\");\n\n    assertQueryEquals(\"field:(guinea pig)\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n\n    assertQueryEquals(\"+small guinea pig\", a, \"+small Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"-small guinea pig\", a, \"-small Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"!small guinea pig\", a, \"-small Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"NOT small guinea pig\", a, \"-small Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"small* guinea pig\", a, \"small* Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"small? guinea pig\", a, \"small? Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"\\\"small\\\" guinea pig\", a, \"small Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n\n    assertQueryEquals(\"guinea pig +running\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false) +running\");\n    assertQueryEquals(\"guinea pig -running\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false) -running\");\n    assertQueryEquals(\"guinea pig !running\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false) -running\");\n    assertQueryEquals(\"guinea pig NOT running\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false) -running\");\n    assertQueryEquals(\"guinea pig running*\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false) running*\");\n    assertQueryEquals(\"guinea pig running?\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false) running?\");\n    assertQueryEquals(\"guinea pig \\\"running\\\"\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false) running\");\n\n    assertQueryEquals(\"\\\"guinea pig\\\"~2\", a, \"spanOr([spanNear([guinea, pig], 0, true), cavy])\");\n\n    assertQueryEquals(\"field:\\\"guinea pig\\\"\", a, \"spanOr([spanNear([guinea, pig], 0, true), cavy])\");\n\n    splitOnWhitespace = oldSplitOnWhitespace;\n  }\n\n","sourceOld":"  // TODO: Move to QueryParserTestBase once standard flexible parser gets this capability\n  public void testOperatorsAndMultiWordSynonyms() throws Exception {\n    Analyzer a = new MockSynonymAnalyzer();\n\n    boolean oldSplitOnWhitespace = splitOnWhitespace;\n    splitOnWhitespace = false;\n\n    // Operators should interrupt multiword analysis of adjacent words if they associate\n    assertQueryEquals(\"+guinea pig\", a, \"+guinea pig\");\n    assertQueryEquals(\"-guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"!guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea* pig\", a, \"guinea* pig\");\n    assertQueryEquals(\"guinea? pig\", a, \"guinea? pig\");\n    assertQueryEquals(\"guinea~2 pig\", a, \"guinea~2 pig\");\n    assertQueryEquals(\"guinea^2 pig\", a, \"(guinea)^2.0 pig\");\n\n    assertQueryEquals(\"guinea +pig\", a, \"guinea +pig\");\n    assertQueryEquals(\"guinea -pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea !pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea pig*\", a, \"guinea pig*\");\n    assertQueryEquals(\"guinea pig?\", a, \"guinea pig?\");\n    assertQueryEquals(\"guinea pig~2\", a, \"guinea pig~2\");\n    assertQueryEquals(\"guinea pig^2\", a, \"guinea (pig)^2.0\");\n\n    assertQueryEquals(\"field:guinea pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea field:pig\", a, \"guinea pig\");\n\n    assertQueryEquals(\"NOT guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea NOT pig\", a, \"guinea -pig\");\n\n    assertQueryEquals(\"guinea pig AND dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs AND guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n    assertQueryEquals(\"guinea pig && dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs && guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n\n    assertQueryEquals(\"guinea pig OR dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs OR guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n    assertQueryEquals(\"guinea pig || dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs || guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n\n    assertQueryEquals(\"\\\"guinea\\\" pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea \\\"pig\\\"\", a, \"guinea pig\");\n\n    assertQueryEquals(\"(guinea) pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea (pig)\", a, \"guinea pig\");\n\n    assertQueryEquals(\"/guinea/ pig\", a, \"/guinea/ pig\");\n    assertQueryEquals(\"guinea /pig/\", a, \"guinea /pig/\");\n\n    // Operators should not interrupt multiword analysis if not don't associate\n    assertQueryEquals(\"(guinea pig)\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"+(guinea pig)\", a, \"+Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"-(guinea pig)\", a, \"-Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"!(guinea pig)\", a, \"-Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"NOT (guinea pig)\", a, \"-Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"(guinea pig)^2\", a, \"(Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false))^2.0\");\n\n    assertQueryEquals(\"field:(guinea pig)\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n\n    assertQueryEquals(\"+small guinea pig\", a, \"+small Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"-small guinea pig\", a, \"-small Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"!small guinea pig\", a, \"-small Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"NOT small guinea pig\", a, \"-small Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"small* guinea pig\", a, \"small* Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"small? guinea pig\", a, \"small? Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"\\\"small\\\" guinea pig\", a, \"small Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n\n    assertQueryEquals(\"guinea pig +running\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false) +running\");\n    assertQueryEquals(\"guinea pig -running\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false) -running\");\n    assertQueryEquals(\"guinea pig !running\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false) -running\");\n    assertQueryEquals(\"guinea pig NOT running\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false) -running\");\n    assertQueryEquals(\"guinea pig running*\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false) running*\");\n    assertQueryEquals(\"guinea pig running?\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false) running?\");\n    assertQueryEquals(\"guinea pig \\\"running\\\"\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false) running\");\n\n    assertQueryEquals(\"\\\"guinea pig\\\"~2\", a, \"Graph(field:\\\"guinea pig\\\"~2, field:cavy, hasBoolean=false, hasPhrase=true)\");\n\n    assertQueryEquals(\"field:\\\"guinea pig\\\"\", a, \"Graph(field:\\\"guinea pig\\\", field:cavy, hasBoolean=false, hasPhrase=true)\");\n\n    splitOnWhitespace = oldSplitOnWhitespace;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"b4408f3223cc4586cae91dc945fefb692e411d6d","date":1487771345,"type":3,"author":"Jim Ferenczi","isMerge":false,"pathNew":"lucene/queryparser/src/test/org/apache/lucene/queryparser/classic/TestQueryParser#testOperatorsAndMultiWordSynonyms().mjava","pathOld":"lucene/queryparser/src/test/org/apache/lucene/queryparser/classic/TestQueryParser#testOperatorsAndMultiWordSynonyms().mjava","sourceNew":"  // TODO: Move to QueryParserTestBase once standard flexible parser gets this capability\n  public void testOperatorsAndMultiWordSynonyms() throws Exception {\n    Analyzer a = new MockSynonymAnalyzer();\n\n    boolean oldSplitOnWhitespace = splitOnWhitespace;\n    splitOnWhitespace = false;\n\n    // Operators should interrupt multiword analysis of adjacent words if they associate\n    assertQueryEquals(\"+guinea pig\", a, \"+guinea pig\");\n    assertQueryEquals(\"-guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"!guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea* pig\", a, \"guinea* pig\");\n    assertQueryEquals(\"guinea? pig\", a, \"guinea? pig\");\n    assertQueryEquals(\"guinea~2 pig\", a, \"guinea~2 pig\");\n    assertQueryEquals(\"guinea^2 pig\", a, \"(guinea)^2.0 pig\");\n\n    assertQueryEquals(\"guinea +pig\", a, \"guinea +pig\");\n    assertQueryEquals(\"guinea -pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea !pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea pig*\", a, \"guinea pig*\");\n    assertQueryEquals(\"guinea pig?\", a, \"guinea pig?\");\n    assertQueryEquals(\"guinea pig~2\", a, \"guinea pig~2\");\n    assertQueryEquals(\"guinea pig^2\", a, \"guinea (pig)^2.0\");\n\n    assertQueryEquals(\"field:guinea pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea field:pig\", a, \"guinea pig\");\n\n    assertQueryEquals(\"NOT guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea NOT pig\", a, \"guinea -pig\");\n\n    assertQueryEquals(\"guinea pig AND dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs AND guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n    assertQueryEquals(\"guinea pig && dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs && guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n\n    assertQueryEquals(\"guinea pig OR dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs OR guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n    assertQueryEquals(\"guinea pig || dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs || guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n\n    assertQueryEquals(\"\\\"guinea\\\" pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea \\\"pig\\\"\", a, \"guinea pig\");\n\n    assertQueryEquals(\"(guinea) pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea (pig)\", a, \"guinea pig\");\n\n    assertQueryEquals(\"/guinea/ pig\", a, \"/guinea/ pig\");\n    assertQueryEquals(\"guinea /pig/\", a, \"guinea /pig/\");\n\n    // Operators should not interrupt multiword analysis if not don't associate\n    assertQueryEquals(\"(guinea pig)\", a, \"(+guinea +pig) cavy\");\n    assertQueryEquals(\"+(guinea pig)\", a, \"+((+guinea +pig) cavy)\");\n    assertQueryEquals(\"-(guinea pig)\", a, \"-((+guinea +pig) cavy)\");\n    assertQueryEquals(\"!(guinea pig)\", a, \"-((+guinea +pig) cavy)\");\n    assertQueryEquals(\"NOT (guinea pig)\", a, \"-((+guinea +pig) cavy)\");\n    assertQueryEquals(\"(guinea pig)^2\", a, \"((+guinea +pig) cavy)^2.0\");\n\n    assertQueryEquals(\"field:(guinea pig)\", a, \"(+guinea +pig) cavy\");\n\n    assertQueryEquals(\"+small guinea pig\", a, \"+small (+guinea +pig) cavy\");\n    assertQueryEquals(\"-small guinea pig\", a, \"-small (+guinea +pig) cavy\");\n    assertQueryEquals(\"!small guinea pig\", a, \"-small (+guinea +pig) cavy\");\n    assertQueryEquals(\"NOT small guinea pig\", a, \"-small (+guinea +pig) cavy\");\n    assertQueryEquals(\"small* guinea pig\", a, \"small* (+guinea +pig) cavy\");\n    assertQueryEquals(\"small? guinea pig\", a, \"small? (+guinea +pig) cavy\");\n    assertQueryEquals(\"\\\"small\\\" guinea pig\", a, \"small (+guinea +pig) cavy\");\n\n    assertQueryEquals(\"guinea pig +running\", a, \"(+guinea +pig) cavy +running\");\n    assertQueryEquals(\"guinea pig -running\", a, \"(+guinea +pig) cavy -running\");\n    assertQueryEquals(\"guinea pig !running\", a, \"(+guinea +pig) cavy -running\");\n    assertQueryEquals(\"guinea pig NOT running\", a, \"(+guinea +pig) cavy -running\");\n    assertQueryEquals(\"guinea pig running*\", a, \"(+guinea +pig) cavy running*\");\n    assertQueryEquals(\"guinea pig running?\", a, \"(+guinea +pig) cavy running?\");\n    assertQueryEquals(\"guinea pig \\\"running\\\"\", a, \"(+guinea +pig) cavy running\");\n\n    assertQueryEquals(\"\\\"guinea pig\\\"~2\", a, \"spanOr([spanNear([guinea, pig], 0, true), cavy])\");\n\n    assertQueryEquals(\"field:\\\"guinea pig\\\"\", a, \"spanOr([spanNear([guinea, pig], 0, true), cavy])\");\n\n    splitOnWhitespace = oldSplitOnWhitespace;\n  }\n\n","sourceOld":"  // TODO: Move to QueryParserTestBase once standard flexible parser gets this capability\n  public void testOperatorsAndMultiWordSynonyms() throws Exception {\n    Analyzer a = new MockSynonymAnalyzer();\n\n    boolean oldSplitOnWhitespace = splitOnWhitespace;\n    splitOnWhitespace = false;\n\n    // Operators should interrupt multiword analysis of adjacent words if they associate\n    assertQueryEquals(\"+guinea pig\", a, \"+guinea pig\");\n    assertQueryEquals(\"-guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"!guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea* pig\", a, \"guinea* pig\");\n    assertQueryEquals(\"guinea? pig\", a, \"guinea? pig\");\n    assertQueryEquals(\"guinea~2 pig\", a, \"guinea~2 pig\");\n    assertQueryEquals(\"guinea^2 pig\", a, \"(guinea)^2.0 pig\");\n\n    assertQueryEquals(\"guinea +pig\", a, \"guinea +pig\");\n    assertQueryEquals(\"guinea -pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea !pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea pig*\", a, \"guinea pig*\");\n    assertQueryEquals(\"guinea pig?\", a, \"guinea pig?\");\n    assertQueryEquals(\"guinea pig~2\", a, \"guinea pig~2\");\n    assertQueryEquals(\"guinea pig^2\", a, \"guinea (pig)^2.0\");\n\n    assertQueryEquals(\"field:guinea pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea field:pig\", a, \"guinea pig\");\n\n    assertQueryEquals(\"NOT guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea NOT pig\", a, \"guinea -pig\");\n\n    assertQueryEquals(\"guinea pig AND dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs AND guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n    assertQueryEquals(\"guinea pig && dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs && guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n\n    assertQueryEquals(\"guinea pig OR dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs OR guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n    assertQueryEquals(\"guinea pig || dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs || guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n\n    assertQueryEquals(\"\\\"guinea\\\" pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea \\\"pig\\\"\", a, \"guinea pig\");\n\n    assertQueryEquals(\"(guinea) pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea (pig)\", a, \"guinea pig\");\n\n    assertQueryEquals(\"/guinea/ pig\", a, \"/guinea/ pig\");\n    assertQueryEquals(\"guinea /pig/\", a, \"guinea /pig/\");\n\n    // Operators should not interrupt multiword analysis if not don't associate\n    assertQueryEquals(\"(guinea pig)\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"+(guinea pig)\", a, \"+Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"-(guinea pig)\", a, \"-Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"!(guinea pig)\", a, \"-Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"NOT (guinea pig)\", a, \"-Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"(guinea pig)^2\", a, \"(Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false))^2.0\");\n\n    assertQueryEquals(\"field:(guinea pig)\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n\n    assertQueryEquals(\"+small guinea pig\", a, \"+small Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"-small guinea pig\", a, \"-small Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"!small guinea pig\", a, \"-small Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"NOT small guinea pig\", a, \"-small Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"small* guinea pig\", a, \"small* Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"small? guinea pig\", a, \"small? Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n    assertQueryEquals(\"\\\"small\\\" guinea pig\", a, \"small Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false)\");\n\n    assertQueryEquals(\"guinea pig +running\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false) +running\");\n    assertQueryEquals(\"guinea pig -running\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false) -running\");\n    assertQueryEquals(\"guinea pig !running\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false) -running\");\n    assertQueryEquals(\"guinea pig NOT running\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false) -running\");\n    assertQueryEquals(\"guinea pig running*\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false) running*\");\n    assertQueryEquals(\"guinea pig running?\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false) running?\");\n    assertQueryEquals(\"guinea pig \\\"running\\\"\", a, \"Graph(+field:guinea +field:pig, field:cavy, hasBoolean=true, hasPhrase=false) running\");\n\n    assertQueryEquals(\"\\\"guinea pig\\\"~2\", a, \"spanOr([spanNear([guinea, pig], 0, true), cavy])\");\n\n    assertQueryEquals(\"field:\\\"guinea pig\\\"\", a, \"spanOr([spanNear([guinea, pig], 0, true), cavy])\");\n\n    splitOnWhitespace = oldSplitOnWhitespace;\n  }\n\n","bugFix":null,"bugIntro":["8d5f9da379ac10a8ebcbf30e00314c561652932b"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"8d5f9da379ac10a8ebcbf30e00314c561652932b","date":1497616966,"type":3,"author":"Jim Ferenczi","isMerge":false,"pathNew":"lucene/queryparser/src/test/org/apache/lucene/queryparser/classic/TestQueryParser#testOperatorsAndMultiWordSynonyms().mjava","pathOld":"lucene/queryparser/src/test/org/apache/lucene/queryparser/classic/TestQueryParser#testOperatorsAndMultiWordSynonyms().mjava","sourceNew":"  // TODO: Move to QueryParserTestBase once standard flexible parser gets this capability\n  public void testOperatorsAndMultiWordSynonyms() throws Exception {\n    Analyzer a = new MockSynonymAnalyzer();\n\n    boolean oldSplitOnWhitespace = splitOnWhitespace;\n    splitOnWhitespace = false;\n\n    // Operators should interrupt multiword analysis of adjacent words if they associate\n    assertQueryEquals(\"+guinea pig\", a, \"+guinea pig\");\n    assertQueryEquals(\"-guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"!guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea* pig\", a, \"guinea* pig\");\n    assertQueryEquals(\"guinea? pig\", a, \"guinea? pig\");\n    assertQueryEquals(\"guinea~2 pig\", a, \"guinea~2 pig\");\n    assertQueryEquals(\"guinea^2 pig\", a, \"(guinea)^2.0 pig\");\n\n    assertQueryEquals(\"guinea +pig\", a, \"guinea +pig\");\n    assertQueryEquals(\"guinea -pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea !pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea pig*\", a, \"guinea pig*\");\n    assertQueryEquals(\"guinea pig?\", a, \"guinea pig?\");\n    assertQueryEquals(\"guinea pig~2\", a, \"guinea pig~2\");\n    assertQueryEquals(\"guinea pig^2\", a, \"guinea (pig)^2.0\");\n\n    assertQueryEquals(\"field:guinea pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea field:pig\", a, \"guinea pig\");\n\n    assertQueryEquals(\"NOT guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea NOT pig\", a, \"guinea -pig\");\n\n    assertQueryEquals(\"guinea pig AND dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs AND guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n    assertQueryEquals(\"guinea pig && dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs && guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n\n    assertQueryEquals(\"guinea pig OR dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs OR guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n    assertQueryEquals(\"guinea pig || dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs || guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n\n    assertQueryEquals(\"\\\"guinea\\\" pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea \\\"pig\\\"\", a, \"guinea pig\");\n\n    assertQueryEquals(\"(guinea) pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea (pig)\", a, \"guinea pig\");\n\n    assertQueryEquals(\"/guinea/ pig\", a, \"/guinea/ pig\");\n    assertQueryEquals(\"guinea /pig/\", a, \"guinea /pig/\");\n\n    // Operators should not interrupt multiword analysis if not don't associate\n    assertQueryEquals(\"(guinea pig)\", a, \"((+guinea +pig) cavy)\");\n    assertQueryEquals(\"+(guinea pig)\", a, \"+(((+guinea +pig) cavy))\");\n    assertQueryEquals(\"-(guinea pig)\", a, \"-(((+guinea +pig) cavy))\");\n    assertQueryEquals(\"!(guinea pig)\", a, \"-(((+guinea +pig) cavy))\");\n    assertQueryEquals(\"NOT (guinea pig)\", a, \"-(((+guinea +pig) cavy))\");\n    assertQueryEquals(\"(guinea pig)^2\", a, \"(((+guinea +pig) cavy))^2.0\");\n\n    assertQueryEquals(\"field:(guinea pig)\", a, \"((+guinea +pig) cavy)\");\n\n    assertQueryEquals(\"+small guinea pig\", a, \"+small ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"-small guinea pig\", a, \"-small ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"!small guinea pig\", a, \"-small ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"NOT small guinea pig\", a, \"-small ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"small* guinea pig\", a, \"small* ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"small? guinea pig\", a, \"small? ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"\\\"small\\\" guinea pig\", a, \"small ((+guinea +pig) cavy)\");\n\n    assertQueryEquals(\"guinea pig +running\", a, \"((+guinea +pig) cavy) +running\");\n    assertQueryEquals(\"guinea pig -running\", a, \"((+guinea +pig) cavy) -running\");\n    assertQueryEquals(\"guinea pig !running\", a, \"((+guinea +pig) cavy) -running\");\n    assertQueryEquals(\"guinea pig NOT running\", a, \"((+guinea +pig) cavy) -running\");\n    assertQueryEquals(\"guinea pig running*\", a, \"((+guinea +pig) cavy) running*\");\n    assertQueryEquals(\"guinea pig running?\", a, \"((+guinea +pig) cavy) running?\");\n    assertQueryEquals(\"guinea pig \\\"running\\\"\", a, \"((+guinea +pig) cavy) running\");\n\n    assertQueryEquals(\"\\\"guinea pig\\\"~2\", a, \"spanOr([spanNear([guinea, pig], 0, true), cavy])\");\n\n    assertQueryEquals(\"field:\\\"guinea pig\\\"\", a, \"spanOr([spanNear([guinea, pig], 0, true), cavy])\");\n\n    splitOnWhitespace = oldSplitOnWhitespace;\n  }\n\n","sourceOld":"  // TODO: Move to QueryParserTestBase once standard flexible parser gets this capability\n  public void testOperatorsAndMultiWordSynonyms() throws Exception {\n    Analyzer a = new MockSynonymAnalyzer();\n\n    boolean oldSplitOnWhitespace = splitOnWhitespace;\n    splitOnWhitespace = false;\n\n    // Operators should interrupt multiword analysis of adjacent words if they associate\n    assertQueryEquals(\"+guinea pig\", a, \"+guinea pig\");\n    assertQueryEquals(\"-guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"!guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea* pig\", a, \"guinea* pig\");\n    assertQueryEquals(\"guinea? pig\", a, \"guinea? pig\");\n    assertQueryEquals(\"guinea~2 pig\", a, \"guinea~2 pig\");\n    assertQueryEquals(\"guinea^2 pig\", a, \"(guinea)^2.0 pig\");\n\n    assertQueryEquals(\"guinea +pig\", a, \"guinea +pig\");\n    assertQueryEquals(\"guinea -pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea !pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea pig*\", a, \"guinea pig*\");\n    assertQueryEquals(\"guinea pig?\", a, \"guinea pig?\");\n    assertQueryEquals(\"guinea pig~2\", a, \"guinea pig~2\");\n    assertQueryEquals(\"guinea pig^2\", a, \"guinea (pig)^2.0\");\n\n    assertQueryEquals(\"field:guinea pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea field:pig\", a, \"guinea pig\");\n\n    assertQueryEquals(\"NOT guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea NOT pig\", a, \"guinea -pig\");\n\n    assertQueryEquals(\"guinea pig AND dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs AND guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n    assertQueryEquals(\"guinea pig && dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs && guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n\n    assertQueryEquals(\"guinea pig OR dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs OR guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n    assertQueryEquals(\"guinea pig || dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs || guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n\n    assertQueryEquals(\"\\\"guinea\\\" pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea \\\"pig\\\"\", a, \"guinea pig\");\n\n    assertQueryEquals(\"(guinea) pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea (pig)\", a, \"guinea pig\");\n\n    assertQueryEquals(\"/guinea/ pig\", a, \"/guinea/ pig\");\n    assertQueryEquals(\"guinea /pig/\", a, \"guinea /pig/\");\n\n    // Operators should not interrupt multiword analysis if not don't associate\n    assertQueryEquals(\"(guinea pig)\", a, \"(+guinea +pig) cavy\");\n    assertQueryEquals(\"+(guinea pig)\", a, \"+((+guinea +pig) cavy)\");\n    assertQueryEquals(\"-(guinea pig)\", a, \"-((+guinea +pig) cavy)\");\n    assertQueryEquals(\"!(guinea pig)\", a, \"-((+guinea +pig) cavy)\");\n    assertQueryEquals(\"NOT (guinea pig)\", a, \"-((+guinea +pig) cavy)\");\n    assertQueryEquals(\"(guinea pig)^2\", a, \"((+guinea +pig) cavy)^2.0\");\n\n    assertQueryEquals(\"field:(guinea pig)\", a, \"(+guinea +pig) cavy\");\n\n    assertQueryEquals(\"+small guinea pig\", a, \"+small (+guinea +pig) cavy\");\n    assertQueryEquals(\"-small guinea pig\", a, \"-small (+guinea +pig) cavy\");\n    assertQueryEquals(\"!small guinea pig\", a, \"-small (+guinea +pig) cavy\");\n    assertQueryEquals(\"NOT small guinea pig\", a, \"-small (+guinea +pig) cavy\");\n    assertQueryEquals(\"small* guinea pig\", a, \"small* (+guinea +pig) cavy\");\n    assertQueryEquals(\"small? guinea pig\", a, \"small? (+guinea +pig) cavy\");\n    assertQueryEquals(\"\\\"small\\\" guinea pig\", a, \"small (+guinea +pig) cavy\");\n\n    assertQueryEquals(\"guinea pig +running\", a, \"(+guinea +pig) cavy +running\");\n    assertQueryEquals(\"guinea pig -running\", a, \"(+guinea +pig) cavy -running\");\n    assertQueryEquals(\"guinea pig !running\", a, \"(+guinea +pig) cavy -running\");\n    assertQueryEquals(\"guinea pig NOT running\", a, \"(+guinea +pig) cavy -running\");\n    assertQueryEquals(\"guinea pig running*\", a, \"(+guinea +pig) cavy running*\");\n    assertQueryEquals(\"guinea pig running?\", a, \"(+guinea +pig) cavy running?\");\n    assertQueryEquals(\"guinea pig \\\"running\\\"\", a, \"(+guinea +pig) cavy running\");\n\n    assertQueryEquals(\"\\\"guinea pig\\\"~2\", a, \"spanOr([spanNear([guinea, pig], 0, true), cavy])\");\n\n    assertQueryEquals(\"field:\\\"guinea pig\\\"\", a, \"spanOr([spanNear([guinea, pig], 0, true), cavy])\");\n\n    splitOnWhitespace = oldSplitOnWhitespace;\n  }\n\n","bugFix":["b4408f3223cc4586cae91dc945fefb692e411d6d"],"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"2a3ed3f77cdd034e789d00d1ca8bb7054c9fb8e9","date":1498028748,"type":3,"author":"Shalin Shekhar Mangar","isMerge":true,"pathNew":"lucene/queryparser/src/test/org/apache/lucene/queryparser/classic/TestQueryParser#testOperatorsAndMultiWordSynonyms().mjava","pathOld":"lucene/queryparser/src/test/org/apache/lucene/queryparser/classic/TestQueryParser#testOperatorsAndMultiWordSynonyms().mjava","sourceNew":"  // TODO: Move to QueryParserTestBase once standard flexible parser gets this capability\n  public void testOperatorsAndMultiWordSynonyms() throws Exception {\n    Analyzer a = new MockSynonymAnalyzer();\n\n    boolean oldSplitOnWhitespace = splitOnWhitespace;\n    splitOnWhitespace = false;\n\n    // Operators should interrupt multiword analysis of adjacent words if they associate\n    assertQueryEquals(\"+guinea pig\", a, \"+guinea pig\");\n    assertQueryEquals(\"-guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"!guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea* pig\", a, \"guinea* pig\");\n    assertQueryEquals(\"guinea? pig\", a, \"guinea? pig\");\n    assertQueryEquals(\"guinea~2 pig\", a, \"guinea~2 pig\");\n    assertQueryEquals(\"guinea^2 pig\", a, \"(guinea)^2.0 pig\");\n\n    assertQueryEquals(\"guinea +pig\", a, \"guinea +pig\");\n    assertQueryEquals(\"guinea -pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea !pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea pig*\", a, \"guinea pig*\");\n    assertQueryEquals(\"guinea pig?\", a, \"guinea pig?\");\n    assertQueryEquals(\"guinea pig~2\", a, \"guinea pig~2\");\n    assertQueryEquals(\"guinea pig^2\", a, \"guinea (pig)^2.0\");\n\n    assertQueryEquals(\"field:guinea pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea field:pig\", a, \"guinea pig\");\n\n    assertQueryEquals(\"NOT guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea NOT pig\", a, \"guinea -pig\");\n\n    assertQueryEquals(\"guinea pig AND dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs AND guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n    assertQueryEquals(\"guinea pig && dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs && guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n\n    assertQueryEquals(\"guinea pig OR dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs OR guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n    assertQueryEquals(\"guinea pig || dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs || guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n\n    assertQueryEquals(\"\\\"guinea\\\" pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea \\\"pig\\\"\", a, \"guinea pig\");\n\n    assertQueryEquals(\"(guinea) pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea (pig)\", a, \"guinea pig\");\n\n    assertQueryEquals(\"/guinea/ pig\", a, \"/guinea/ pig\");\n    assertQueryEquals(\"guinea /pig/\", a, \"guinea /pig/\");\n\n    // Operators should not interrupt multiword analysis if not don't associate\n    assertQueryEquals(\"(guinea pig)\", a, \"((+guinea +pig) cavy)\");\n    assertQueryEquals(\"+(guinea pig)\", a, \"+(((+guinea +pig) cavy))\");\n    assertQueryEquals(\"-(guinea pig)\", a, \"-(((+guinea +pig) cavy))\");\n    assertQueryEquals(\"!(guinea pig)\", a, \"-(((+guinea +pig) cavy))\");\n    assertQueryEquals(\"NOT (guinea pig)\", a, \"-(((+guinea +pig) cavy))\");\n    assertQueryEquals(\"(guinea pig)^2\", a, \"(((+guinea +pig) cavy))^2.0\");\n\n    assertQueryEquals(\"field:(guinea pig)\", a, \"((+guinea +pig) cavy)\");\n\n    assertQueryEquals(\"+small guinea pig\", a, \"+small ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"-small guinea pig\", a, \"-small ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"!small guinea pig\", a, \"-small ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"NOT small guinea pig\", a, \"-small ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"small* guinea pig\", a, \"small* ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"small? guinea pig\", a, \"small? ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"\\\"small\\\" guinea pig\", a, \"small ((+guinea +pig) cavy)\");\n\n    assertQueryEquals(\"guinea pig +running\", a, \"((+guinea +pig) cavy) +running\");\n    assertQueryEquals(\"guinea pig -running\", a, \"((+guinea +pig) cavy) -running\");\n    assertQueryEquals(\"guinea pig !running\", a, \"((+guinea +pig) cavy) -running\");\n    assertQueryEquals(\"guinea pig NOT running\", a, \"((+guinea +pig) cavy) -running\");\n    assertQueryEquals(\"guinea pig running*\", a, \"((+guinea +pig) cavy) running*\");\n    assertQueryEquals(\"guinea pig running?\", a, \"((+guinea +pig) cavy) running?\");\n    assertQueryEquals(\"guinea pig \\\"running\\\"\", a, \"((+guinea +pig) cavy) running\");\n\n    assertQueryEquals(\"\\\"guinea pig\\\"~2\", a, \"spanOr([spanNear([guinea, pig], 0, true), cavy])\");\n\n    assertQueryEquals(\"field:\\\"guinea pig\\\"\", a, \"spanOr([spanNear([guinea, pig], 0, true), cavy])\");\n\n    splitOnWhitespace = oldSplitOnWhitespace;\n  }\n\n","sourceOld":"  // TODO: Move to QueryParserTestBase once standard flexible parser gets this capability\n  public void testOperatorsAndMultiWordSynonyms() throws Exception {\n    Analyzer a = new MockSynonymAnalyzer();\n\n    boolean oldSplitOnWhitespace = splitOnWhitespace;\n    splitOnWhitespace = false;\n\n    // Operators should interrupt multiword analysis of adjacent words if they associate\n    assertQueryEquals(\"+guinea pig\", a, \"+guinea pig\");\n    assertQueryEquals(\"-guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"!guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea* pig\", a, \"guinea* pig\");\n    assertQueryEquals(\"guinea? pig\", a, \"guinea? pig\");\n    assertQueryEquals(\"guinea~2 pig\", a, \"guinea~2 pig\");\n    assertQueryEquals(\"guinea^2 pig\", a, \"(guinea)^2.0 pig\");\n\n    assertQueryEquals(\"guinea +pig\", a, \"guinea +pig\");\n    assertQueryEquals(\"guinea -pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea !pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea pig*\", a, \"guinea pig*\");\n    assertQueryEquals(\"guinea pig?\", a, \"guinea pig?\");\n    assertQueryEquals(\"guinea pig~2\", a, \"guinea pig~2\");\n    assertQueryEquals(\"guinea pig^2\", a, \"guinea (pig)^2.0\");\n\n    assertQueryEquals(\"field:guinea pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea field:pig\", a, \"guinea pig\");\n\n    assertQueryEquals(\"NOT guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea NOT pig\", a, \"guinea -pig\");\n\n    assertQueryEquals(\"guinea pig AND dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs AND guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n    assertQueryEquals(\"guinea pig && dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs && guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n\n    assertQueryEquals(\"guinea pig OR dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs OR guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n    assertQueryEquals(\"guinea pig || dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs || guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n\n    assertQueryEquals(\"\\\"guinea\\\" pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea \\\"pig\\\"\", a, \"guinea pig\");\n\n    assertQueryEquals(\"(guinea) pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea (pig)\", a, \"guinea pig\");\n\n    assertQueryEquals(\"/guinea/ pig\", a, \"/guinea/ pig\");\n    assertQueryEquals(\"guinea /pig/\", a, \"guinea /pig/\");\n\n    // Operators should not interrupt multiword analysis if not don't associate\n    assertQueryEquals(\"(guinea pig)\", a, \"(+guinea +pig) cavy\");\n    assertQueryEquals(\"+(guinea pig)\", a, \"+((+guinea +pig) cavy)\");\n    assertQueryEquals(\"-(guinea pig)\", a, \"-((+guinea +pig) cavy)\");\n    assertQueryEquals(\"!(guinea pig)\", a, \"-((+guinea +pig) cavy)\");\n    assertQueryEquals(\"NOT (guinea pig)\", a, \"-((+guinea +pig) cavy)\");\n    assertQueryEquals(\"(guinea pig)^2\", a, \"((+guinea +pig) cavy)^2.0\");\n\n    assertQueryEquals(\"field:(guinea pig)\", a, \"(+guinea +pig) cavy\");\n\n    assertQueryEquals(\"+small guinea pig\", a, \"+small (+guinea +pig) cavy\");\n    assertQueryEquals(\"-small guinea pig\", a, \"-small (+guinea +pig) cavy\");\n    assertQueryEquals(\"!small guinea pig\", a, \"-small (+guinea +pig) cavy\");\n    assertQueryEquals(\"NOT small guinea pig\", a, \"-small (+guinea +pig) cavy\");\n    assertQueryEquals(\"small* guinea pig\", a, \"small* (+guinea +pig) cavy\");\n    assertQueryEquals(\"small? guinea pig\", a, \"small? (+guinea +pig) cavy\");\n    assertQueryEquals(\"\\\"small\\\" guinea pig\", a, \"small (+guinea +pig) cavy\");\n\n    assertQueryEquals(\"guinea pig +running\", a, \"(+guinea +pig) cavy +running\");\n    assertQueryEquals(\"guinea pig -running\", a, \"(+guinea +pig) cavy -running\");\n    assertQueryEquals(\"guinea pig !running\", a, \"(+guinea +pig) cavy -running\");\n    assertQueryEquals(\"guinea pig NOT running\", a, \"(+guinea +pig) cavy -running\");\n    assertQueryEquals(\"guinea pig running*\", a, \"(+guinea +pig) cavy running*\");\n    assertQueryEquals(\"guinea pig running?\", a, \"(+guinea +pig) cavy running?\");\n    assertQueryEquals(\"guinea pig \\\"running\\\"\", a, \"(+guinea +pig) cavy running\");\n\n    assertQueryEquals(\"\\\"guinea pig\\\"~2\", a, \"spanOr([spanNear([guinea, pig], 0, true), cavy])\");\n\n    assertQueryEquals(\"field:\\\"guinea pig\\\"\", a, \"spanOr([spanNear([guinea, pig], 0, true), cavy])\");\n\n    splitOnWhitespace = oldSplitOnWhitespace;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"28288370235ed02234a64753cdbf0c6ec096304a","date":1498726817,"type":3,"author":"Karl Wright","isMerge":true,"pathNew":"lucene/queryparser/src/test/org/apache/lucene/queryparser/classic/TestQueryParser#testOperatorsAndMultiWordSynonyms().mjava","pathOld":"lucene/queryparser/src/test/org/apache/lucene/queryparser/classic/TestQueryParser#testOperatorsAndMultiWordSynonyms().mjava","sourceNew":"  // TODO: Move to QueryParserTestBase once standard flexible parser gets this capability\n  public void testOperatorsAndMultiWordSynonyms() throws Exception {\n    Analyzer a = new MockSynonymAnalyzer();\n\n    boolean oldSplitOnWhitespace = splitOnWhitespace;\n    splitOnWhitespace = false;\n\n    // Operators should interrupt multiword analysis of adjacent words if they associate\n    assertQueryEquals(\"+guinea pig\", a, \"+guinea pig\");\n    assertQueryEquals(\"-guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"!guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea* pig\", a, \"guinea* pig\");\n    assertQueryEquals(\"guinea? pig\", a, \"guinea? pig\");\n    assertQueryEquals(\"guinea~2 pig\", a, \"guinea~2 pig\");\n    assertQueryEquals(\"guinea^2 pig\", a, \"(guinea)^2.0 pig\");\n\n    assertQueryEquals(\"guinea +pig\", a, \"guinea +pig\");\n    assertQueryEquals(\"guinea -pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea !pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea pig*\", a, \"guinea pig*\");\n    assertQueryEquals(\"guinea pig?\", a, \"guinea pig?\");\n    assertQueryEquals(\"guinea pig~2\", a, \"guinea pig~2\");\n    assertQueryEquals(\"guinea pig^2\", a, \"guinea (pig)^2.0\");\n\n    assertQueryEquals(\"field:guinea pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea field:pig\", a, \"guinea pig\");\n\n    assertQueryEquals(\"NOT guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea NOT pig\", a, \"guinea -pig\");\n\n    assertQueryEquals(\"guinea pig AND dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs AND guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n    assertQueryEquals(\"guinea pig && dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs && guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n\n    assertQueryEquals(\"guinea pig OR dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs OR guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n    assertQueryEquals(\"guinea pig || dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs || guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n\n    assertQueryEquals(\"\\\"guinea\\\" pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea \\\"pig\\\"\", a, \"guinea pig\");\n\n    assertQueryEquals(\"(guinea) pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea (pig)\", a, \"guinea pig\");\n\n    assertQueryEquals(\"/guinea/ pig\", a, \"/guinea/ pig\");\n    assertQueryEquals(\"guinea /pig/\", a, \"guinea /pig/\");\n\n    // Operators should not interrupt multiword analysis if not don't associate\n    assertQueryEquals(\"(guinea pig)\", a, \"((+guinea +pig) cavy)\");\n    assertQueryEquals(\"+(guinea pig)\", a, \"+(((+guinea +pig) cavy))\");\n    assertQueryEquals(\"-(guinea pig)\", a, \"-(((+guinea +pig) cavy))\");\n    assertQueryEquals(\"!(guinea pig)\", a, \"-(((+guinea +pig) cavy))\");\n    assertQueryEquals(\"NOT (guinea pig)\", a, \"-(((+guinea +pig) cavy))\");\n    assertQueryEquals(\"(guinea pig)^2\", a, \"(((+guinea +pig) cavy))^2.0\");\n\n    assertQueryEquals(\"field:(guinea pig)\", a, \"((+guinea +pig) cavy)\");\n\n    assertQueryEquals(\"+small guinea pig\", a, \"+small ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"-small guinea pig\", a, \"-small ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"!small guinea pig\", a, \"-small ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"NOT small guinea pig\", a, \"-small ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"small* guinea pig\", a, \"small* ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"small? guinea pig\", a, \"small? ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"\\\"small\\\" guinea pig\", a, \"small ((+guinea +pig) cavy)\");\n\n    assertQueryEquals(\"guinea pig +running\", a, \"((+guinea +pig) cavy) +running\");\n    assertQueryEquals(\"guinea pig -running\", a, \"((+guinea +pig) cavy) -running\");\n    assertQueryEquals(\"guinea pig !running\", a, \"((+guinea +pig) cavy) -running\");\n    assertQueryEquals(\"guinea pig NOT running\", a, \"((+guinea +pig) cavy) -running\");\n    assertQueryEquals(\"guinea pig running*\", a, \"((+guinea +pig) cavy) running*\");\n    assertQueryEquals(\"guinea pig running?\", a, \"((+guinea +pig) cavy) running?\");\n    assertQueryEquals(\"guinea pig \\\"running\\\"\", a, \"((+guinea +pig) cavy) running\");\n\n    assertQueryEquals(\"\\\"guinea pig\\\"~2\", a, \"spanOr([spanNear([guinea, pig], 0, true), cavy])\");\n\n    assertQueryEquals(\"field:\\\"guinea pig\\\"\", a, \"spanOr([spanNear([guinea, pig], 0, true), cavy])\");\n\n    splitOnWhitespace = oldSplitOnWhitespace;\n  }\n\n","sourceOld":"  // TODO: Move to QueryParserTestBase once standard flexible parser gets this capability\n  public void testOperatorsAndMultiWordSynonyms() throws Exception {\n    Analyzer a = new MockSynonymAnalyzer();\n\n    boolean oldSplitOnWhitespace = splitOnWhitespace;\n    splitOnWhitespace = false;\n\n    // Operators should interrupt multiword analysis of adjacent words if they associate\n    assertQueryEquals(\"+guinea pig\", a, \"+guinea pig\");\n    assertQueryEquals(\"-guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"!guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea* pig\", a, \"guinea* pig\");\n    assertQueryEquals(\"guinea? pig\", a, \"guinea? pig\");\n    assertQueryEquals(\"guinea~2 pig\", a, \"guinea~2 pig\");\n    assertQueryEquals(\"guinea^2 pig\", a, \"(guinea)^2.0 pig\");\n\n    assertQueryEquals(\"guinea +pig\", a, \"guinea +pig\");\n    assertQueryEquals(\"guinea -pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea !pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea pig*\", a, \"guinea pig*\");\n    assertQueryEquals(\"guinea pig?\", a, \"guinea pig?\");\n    assertQueryEquals(\"guinea pig~2\", a, \"guinea pig~2\");\n    assertQueryEquals(\"guinea pig^2\", a, \"guinea (pig)^2.0\");\n\n    assertQueryEquals(\"field:guinea pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea field:pig\", a, \"guinea pig\");\n\n    assertQueryEquals(\"NOT guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea NOT pig\", a, \"guinea -pig\");\n\n    assertQueryEquals(\"guinea pig AND dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs AND guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n    assertQueryEquals(\"guinea pig && dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs && guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n\n    assertQueryEquals(\"guinea pig OR dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs OR guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n    assertQueryEquals(\"guinea pig || dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs || guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n\n    assertQueryEquals(\"\\\"guinea\\\" pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea \\\"pig\\\"\", a, \"guinea pig\");\n\n    assertQueryEquals(\"(guinea) pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea (pig)\", a, \"guinea pig\");\n\n    assertQueryEquals(\"/guinea/ pig\", a, \"/guinea/ pig\");\n    assertQueryEquals(\"guinea /pig/\", a, \"guinea /pig/\");\n\n    // Operators should not interrupt multiword analysis if not don't associate\n    assertQueryEquals(\"(guinea pig)\", a, \"(+guinea +pig) cavy\");\n    assertQueryEquals(\"+(guinea pig)\", a, \"+((+guinea +pig) cavy)\");\n    assertQueryEquals(\"-(guinea pig)\", a, \"-((+guinea +pig) cavy)\");\n    assertQueryEquals(\"!(guinea pig)\", a, \"-((+guinea +pig) cavy)\");\n    assertQueryEquals(\"NOT (guinea pig)\", a, \"-((+guinea +pig) cavy)\");\n    assertQueryEquals(\"(guinea pig)^2\", a, \"((+guinea +pig) cavy)^2.0\");\n\n    assertQueryEquals(\"field:(guinea pig)\", a, \"(+guinea +pig) cavy\");\n\n    assertQueryEquals(\"+small guinea pig\", a, \"+small (+guinea +pig) cavy\");\n    assertQueryEquals(\"-small guinea pig\", a, \"-small (+guinea +pig) cavy\");\n    assertQueryEquals(\"!small guinea pig\", a, \"-small (+guinea +pig) cavy\");\n    assertQueryEquals(\"NOT small guinea pig\", a, \"-small (+guinea +pig) cavy\");\n    assertQueryEquals(\"small* guinea pig\", a, \"small* (+guinea +pig) cavy\");\n    assertQueryEquals(\"small? guinea pig\", a, \"small? (+guinea +pig) cavy\");\n    assertQueryEquals(\"\\\"small\\\" guinea pig\", a, \"small (+guinea +pig) cavy\");\n\n    assertQueryEquals(\"guinea pig +running\", a, \"(+guinea +pig) cavy +running\");\n    assertQueryEquals(\"guinea pig -running\", a, \"(+guinea +pig) cavy -running\");\n    assertQueryEquals(\"guinea pig !running\", a, \"(+guinea +pig) cavy -running\");\n    assertQueryEquals(\"guinea pig NOT running\", a, \"(+guinea +pig) cavy -running\");\n    assertQueryEquals(\"guinea pig running*\", a, \"(+guinea +pig) cavy running*\");\n    assertQueryEquals(\"guinea pig running?\", a, \"(+guinea +pig) cavy running?\");\n    assertQueryEquals(\"guinea pig \\\"running\\\"\", a, \"(+guinea +pig) cavy running\");\n\n    assertQueryEquals(\"\\\"guinea pig\\\"~2\", a, \"spanOr([spanNear([guinea, pig], 0, true), cavy])\");\n\n    assertQueryEquals(\"field:\\\"guinea pig\\\"\", a, \"spanOr([spanNear([guinea, pig], 0, true), cavy])\");\n\n    splitOnWhitespace = oldSplitOnWhitespace;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"02bf300ae49caa47cd23550d69d6683a61ad89cb","date":1582727554,"type":3,"author":"Alan Woodward","isMerge":false,"pathNew":"lucene/queryparser/src/test/org/apache/lucene/queryparser/classic/TestQueryParser#testOperatorsAndMultiWordSynonyms().mjava","pathOld":"lucene/queryparser/src/test/org/apache/lucene/queryparser/classic/TestQueryParser#testOperatorsAndMultiWordSynonyms().mjava","sourceNew":"  // TODO: Move to QueryParserTestBase once standard flexible parser gets this capability\n  public void testOperatorsAndMultiWordSynonyms() throws Exception {\n    Analyzer a = new MockSynonymAnalyzer();\n\n    boolean oldSplitOnWhitespace = splitOnWhitespace;\n    splitOnWhitespace = false;\n\n    // Operators should interrupt multiword analysis of adjacent words if they associate\n    assertQueryEquals(\"+guinea pig\", a, \"+guinea pig\");\n    assertQueryEquals(\"-guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"!guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea* pig\", a, \"guinea* pig\");\n    assertQueryEquals(\"guinea? pig\", a, \"guinea? pig\");\n    assertQueryEquals(\"guinea~2 pig\", a, \"guinea~2 pig\");\n    assertQueryEquals(\"guinea^2 pig\", a, \"(guinea)^2.0 pig\");\n\n    assertQueryEquals(\"guinea +pig\", a, \"guinea +pig\");\n    assertQueryEquals(\"guinea -pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea !pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea pig*\", a, \"guinea pig*\");\n    assertQueryEquals(\"guinea pig?\", a, \"guinea pig?\");\n    assertQueryEquals(\"guinea pig~2\", a, \"guinea pig~2\");\n    assertQueryEquals(\"guinea pig^2\", a, \"guinea (pig)^2.0\");\n\n    assertQueryEquals(\"field:guinea pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea field:pig\", a, \"guinea pig\");\n\n    assertQueryEquals(\"NOT guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea NOT pig\", a, \"guinea -pig\");\n\n    assertQueryEquals(\"guinea pig AND dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs AND guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n    assertQueryEquals(\"guinea pig && dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs && guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n\n    assertQueryEquals(\"guinea pig OR dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs OR guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n    assertQueryEquals(\"guinea pig || dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs || guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n\n    assertQueryEquals(\"\\\"guinea\\\" pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea \\\"pig\\\"\", a, \"guinea pig\");\n\n    assertQueryEquals(\"(guinea) pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea (pig)\", a, \"guinea pig\");\n\n    assertQueryEquals(\"/guinea/ pig\", a, \"/guinea/ pig\");\n    assertQueryEquals(\"guinea /pig/\", a, \"guinea /pig/\");\n\n    // Operators should not interrupt multiword analysis if not don't associate\n    assertQueryEquals(\"(guinea pig)\", a, \"((+guinea +pig) cavy)\");\n    assertQueryEquals(\"+(guinea pig)\", a, \"+(((+guinea +pig) cavy))\");\n    assertQueryEquals(\"-(guinea pig)\", a, \"-(((+guinea +pig) cavy))\");\n    assertQueryEquals(\"!(guinea pig)\", a, \"-(((+guinea +pig) cavy))\");\n    assertQueryEquals(\"NOT (guinea pig)\", a, \"-(((+guinea +pig) cavy))\");\n    assertQueryEquals(\"(guinea pig)^2\", a, \"(((+guinea +pig) cavy))^2.0\");\n\n    assertQueryEquals(\"field:(guinea pig)\", a, \"((+guinea +pig) cavy)\");\n\n    assertQueryEquals(\"+small guinea pig\", a, \"+small ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"-small guinea pig\", a, \"-small ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"!small guinea pig\", a, \"-small ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"NOT small guinea pig\", a, \"-small ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"small* guinea pig\", a, \"small* ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"small? guinea pig\", a, \"small? ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"\\\"small\\\" guinea pig\", a, \"small ((+guinea +pig) cavy)\");\n\n    assertQueryEquals(\"guinea pig +running\", a, \"((+guinea +pig) cavy) +running\");\n    assertQueryEquals(\"guinea pig -running\", a, \"((+guinea +pig) cavy) -running\");\n    assertQueryEquals(\"guinea pig !running\", a, \"((+guinea +pig) cavy) -running\");\n    assertQueryEquals(\"guinea pig NOT running\", a, \"((+guinea +pig) cavy) -running\");\n    assertQueryEquals(\"guinea pig running*\", a, \"((+guinea +pig) cavy) running*\");\n    assertQueryEquals(\"guinea pig running?\", a, \"((+guinea +pig) cavy) running?\");\n    assertQueryEquals(\"guinea pig \\\"running\\\"\", a, \"((+guinea +pig) cavy) running\");\n\n    assertQueryEquals(\"\\\"guinea pig\\\"~2\", a, \"\\\"guinea pig\\\" cavy\");\n\n    assertQueryEquals(\"field:\\\"guinea pig\\\"\", a, \"\\\"guinea pig\\\" cavy\");\n\n    splitOnWhitespace = oldSplitOnWhitespace;\n  }\n\n","sourceOld":"  // TODO: Move to QueryParserTestBase once standard flexible parser gets this capability\n  public void testOperatorsAndMultiWordSynonyms() throws Exception {\n    Analyzer a = new MockSynonymAnalyzer();\n\n    boolean oldSplitOnWhitespace = splitOnWhitespace;\n    splitOnWhitespace = false;\n\n    // Operators should interrupt multiword analysis of adjacent words if they associate\n    assertQueryEquals(\"+guinea pig\", a, \"+guinea pig\");\n    assertQueryEquals(\"-guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"!guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea* pig\", a, \"guinea* pig\");\n    assertQueryEquals(\"guinea? pig\", a, \"guinea? pig\");\n    assertQueryEquals(\"guinea~2 pig\", a, \"guinea~2 pig\");\n    assertQueryEquals(\"guinea^2 pig\", a, \"(guinea)^2.0 pig\");\n\n    assertQueryEquals(\"guinea +pig\", a, \"guinea +pig\");\n    assertQueryEquals(\"guinea -pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea !pig\", a, \"guinea -pig\");\n    assertQueryEquals(\"guinea pig*\", a, \"guinea pig*\");\n    assertQueryEquals(\"guinea pig?\", a, \"guinea pig?\");\n    assertQueryEquals(\"guinea pig~2\", a, \"guinea pig~2\");\n    assertQueryEquals(\"guinea pig^2\", a, \"guinea (pig)^2.0\");\n\n    assertQueryEquals(\"field:guinea pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea field:pig\", a, \"guinea pig\");\n\n    assertQueryEquals(\"NOT guinea pig\", a, \"-guinea pig\");\n    assertQueryEquals(\"guinea NOT pig\", a, \"guinea -pig\");\n\n    assertQueryEquals(\"guinea pig AND dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs AND guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n    assertQueryEquals(\"guinea pig && dogs\", a, \"guinea +pig +Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs && guinea pig\", a, \"+Synonym(dog dogs) +guinea pig\");\n\n    assertQueryEquals(\"guinea pig OR dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs OR guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n    assertQueryEquals(\"guinea pig || dogs\", a, \"guinea pig Synonym(dog dogs)\");\n    assertQueryEquals(\"dogs || guinea pig\", a, \"Synonym(dog dogs) guinea pig\");\n\n    assertQueryEquals(\"\\\"guinea\\\" pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea \\\"pig\\\"\", a, \"guinea pig\");\n\n    assertQueryEquals(\"(guinea) pig\", a, \"guinea pig\");\n    assertQueryEquals(\"guinea (pig)\", a, \"guinea pig\");\n\n    assertQueryEquals(\"/guinea/ pig\", a, \"/guinea/ pig\");\n    assertQueryEquals(\"guinea /pig/\", a, \"guinea /pig/\");\n\n    // Operators should not interrupt multiword analysis if not don't associate\n    assertQueryEquals(\"(guinea pig)\", a, \"((+guinea +pig) cavy)\");\n    assertQueryEquals(\"+(guinea pig)\", a, \"+(((+guinea +pig) cavy))\");\n    assertQueryEquals(\"-(guinea pig)\", a, \"-(((+guinea +pig) cavy))\");\n    assertQueryEquals(\"!(guinea pig)\", a, \"-(((+guinea +pig) cavy))\");\n    assertQueryEquals(\"NOT (guinea pig)\", a, \"-(((+guinea +pig) cavy))\");\n    assertQueryEquals(\"(guinea pig)^2\", a, \"(((+guinea +pig) cavy))^2.0\");\n\n    assertQueryEquals(\"field:(guinea pig)\", a, \"((+guinea +pig) cavy)\");\n\n    assertQueryEquals(\"+small guinea pig\", a, \"+small ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"-small guinea pig\", a, \"-small ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"!small guinea pig\", a, \"-small ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"NOT small guinea pig\", a, \"-small ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"small* guinea pig\", a, \"small* ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"small? guinea pig\", a, \"small? ((+guinea +pig) cavy)\");\n    assertQueryEquals(\"\\\"small\\\" guinea pig\", a, \"small ((+guinea +pig) cavy)\");\n\n    assertQueryEquals(\"guinea pig +running\", a, \"((+guinea +pig) cavy) +running\");\n    assertQueryEquals(\"guinea pig -running\", a, \"((+guinea +pig) cavy) -running\");\n    assertQueryEquals(\"guinea pig !running\", a, \"((+guinea +pig) cavy) -running\");\n    assertQueryEquals(\"guinea pig NOT running\", a, \"((+guinea +pig) cavy) -running\");\n    assertQueryEquals(\"guinea pig running*\", a, \"((+guinea +pig) cavy) running*\");\n    assertQueryEquals(\"guinea pig running?\", a, \"((+guinea +pig) cavy) running?\");\n    assertQueryEquals(\"guinea pig \\\"running\\\"\", a, \"((+guinea +pig) cavy) running\");\n\n    assertQueryEquals(\"\\\"guinea pig\\\"~2\", a, \"spanOr([spanNear([guinea, pig], 0, true), cavy])\");\n\n    assertQueryEquals(\"field:\\\"guinea pig\\\"\", a, \"spanOr([spanNear([guinea, pig], 0, true), cavy])\");\n\n    splitOnWhitespace = oldSplitOnWhitespace;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"02bf300ae49caa47cd23550d69d6683a61ad89cb":["28288370235ed02234a64753cdbf0c6ec096304a"],"e52c30617998e1bc2a946cc226f52e9b35162b1e":["138a352a6d4e54824d0275bc7aa1b784e78c81fe"],"138a352a6d4e54824d0275bc7aa1b784e78c81fe":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"28288370235ed02234a64753cdbf0c6ec096304a":["b4408f3223cc4586cae91dc945fefb692e411d6d","8d5f9da379ac10a8ebcbf30e00314c561652932b"],"4cce5816ef15a48a0bc11e5d400497ee4301dd3b":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","138a352a6d4e54824d0275bc7aa1b784e78c81fe"],"7e0d75d7d3cda2b33e79d0eb0e716169cebec4db":["e52c30617998e1bc2a946cc226f52e9b35162b1e"],"f03e4bed5023ec3ef93a771b8888cae991cf448d":["4cce5816ef15a48a0bc11e5d400497ee4301dd3b","e52c30617998e1bc2a946cc226f52e9b35162b1e"],"8d5f9da379ac10a8ebcbf30e00314c561652932b":["b4408f3223cc4586cae91dc945fefb692e411d6d"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"b4408f3223cc4586cae91dc945fefb692e411d6d":["d79fd791e91f49ce8026885d7b8ac62bee4c8126"],"d79fd791e91f49ce8026885d7b8ac62bee4c8126":["7e0d75d7d3cda2b33e79d0eb0e716169cebec4db"],"2a3ed3f77cdd034e789d00d1ca8bb7054c9fb8e9":["b4408f3223cc4586cae91dc945fefb692e411d6d","8d5f9da379ac10a8ebcbf30e00314c561652932b"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["02bf300ae49caa47cd23550d69d6683a61ad89cb"]},"commit2Childs":{"02bf300ae49caa47cd23550d69d6683a61ad89cb":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"e52c30617998e1bc2a946cc226f52e9b35162b1e":["7e0d75d7d3cda2b33e79d0eb0e716169cebec4db","f03e4bed5023ec3ef93a771b8888cae991cf448d"],"138a352a6d4e54824d0275bc7aa1b784e78c81fe":["e52c30617998e1bc2a946cc226f52e9b35162b1e","4cce5816ef15a48a0bc11e5d400497ee4301dd3b"],"28288370235ed02234a64753cdbf0c6ec096304a":["02bf300ae49caa47cd23550d69d6683a61ad89cb"],"4cce5816ef15a48a0bc11e5d400497ee4301dd3b":["f03e4bed5023ec3ef93a771b8888cae991cf448d"],"7e0d75d7d3cda2b33e79d0eb0e716169cebec4db":["d79fd791e91f49ce8026885d7b8ac62bee4c8126"],"f03e4bed5023ec3ef93a771b8888cae991cf448d":[],"8d5f9da379ac10a8ebcbf30e00314c561652932b":["28288370235ed02234a64753cdbf0c6ec096304a","2a3ed3f77cdd034e789d00d1ca8bb7054c9fb8e9"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["138a352a6d4e54824d0275bc7aa1b784e78c81fe","4cce5816ef15a48a0bc11e5d400497ee4301dd3b"],"b4408f3223cc4586cae91dc945fefb692e411d6d":["28288370235ed02234a64753cdbf0c6ec096304a","8d5f9da379ac10a8ebcbf30e00314c561652932b","2a3ed3f77cdd034e789d00d1ca8bb7054c9fb8e9"],"d79fd791e91f49ce8026885d7b8ac62bee4c8126":["b4408f3223cc4586cae91dc945fefb692e411d6d"],"2a3ed3f77cdd034e789d00d1ca8bb7054c9fb8e9":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["f03e4bed5023ec3ef93a771b8888cae991cf448d","2a3ed3f77cdd034e789d00d1ca8bb7054c9fb8e9","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}