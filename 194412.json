{"path":"solr/contrib/dataimporthandler/src/test/org/apache/solr/handler/dataimport/AbstractDIHJdbcTestCase#generateConfig().mjava","commits":[{"id":"baf341ad3a1a8fb73fb37091af85f8aef0398367","date":1352222680,"type":0,"author":"James Dyer","isMerge":false,"pathNew":"solr/contrib/dataimporthandler/src/test/org/apache/solr/handler/dataimport/AbstractDIHJdbcTestCase#generateConfig().mjava","pathOld":"/dev/null","sourceNew":"  protected String generateConfig() {\n     StringBuilder sb = new StringBuilder();\n     sb.append(\"<dataConfig> \\n\");\n     sb.append(\"<dataSource name=''hsqldb'' driver=''org.hsqldb.jdbcDriver'' url=''jdbc:hsqldb:mem:.'' /> \\n\");\n     sb.append(\"<document name=''TestSqlEntityProcessor''> \\n\");     \n     sb.append(\"<entity name=''People'' \");\n     sb.append(\"pk=''\" + (random().nextBoolean() ? \"ID\" : \"People.ID\") + \"'' \");\n     sb.append(\"processor=''SqlEntityProcessor'' dataSource=''hsqldb'' \");\n     sb.append(rootTransformerName !=null ? \"transformer=''\" + rootTransformerName + \"'' \" : \"\");\n     sb.append(\"query=''SELECT ID, NAME, COUNTRY_CODE FROM PEOPLE WHERE DELETED != 'Y' '' \");\n     sb.append(deltaQueriesPersonTable());\n     sb.append(\"> \\n\");\n     \n     sb.append(\"<field column=''NAME'' name=''NAME_mult_s'' /> \\n\");\n     sb.append(\"<field column=''COUNTRY_CODE'' name=''COUNTRY_CODES_mult_s'' /> \\n\");\n     \n     if(countryEntity) {\n       sb.append(\"<entity name=''Countries'' \");\n       sb.append(\"pk=''\" + (random().nextBoolean() ? \"CODE\" : \"Countries.CODE\") + \"'' \");\n       sb.append(\"dataSource=''hsqldb'' \");\n       sb.append(countryTransformer ? \"transformer=''AddAColumnTransformer'' \" +\n               \"newColumnName=''countryAdded_s'' newColumnValue=''country_added'' \" : \"\");\n       if(countryCached) {\n         sb.append(random().nextBoolean() ? \n             \"processor=''SqlEntityProcessor'' cacheImpl=''SortedMapBackedCache'' \" : \n             \"processor=''CachedSqlEntityProcessor'' \"\n         );\n         if(useSimpleCaches) {\n           sb.append(\"query=''SELECT CODE, COUNTRY_NAME FROM COUNTRIES WHERE DELETED != 'Y' AND CODE='${People.COUNTRY_CODE}' ''>\\n\");\n         } else {\n           sb.append(random().nextBoolean() ? \n               \"cacheKey=''CODE'' cacheLookup=''People.COUNTRY_CODE'' \" :\n               \"where=''CODE=People.COUNTRY_CODE'' \"\n           );\n           sb.append(\"query=''SELECT CODE, COUNTRY_NAME FROM COUNTRIES'' \");\n           sb.append(\"> \\n\");\n         }\n       } else {\n         sb.append(\"processor=''SqlEntityProcessor'' query=''SELECT CODE, COUNTRY_NAME FROM COUNTRIES WHERE DELETED != 'Y' AND CODE='${People.COUNTRY_CODE}' '' \");\n         sb.append(deltaQueriesCountryTable());         \n         sb.append(\"> \\n\");\n       }\n       sb.append(\"<field column=''CODE'' name=''COUNTRY_CODE_s'' /> \\n\");\n       sb.append(\"<field column=''COUNTRY_NAME'' name=''COUNTRY_NAME_s'' /> \\n\");\n       sb.append(\"</entity> \\n\");\n     }\n     if(sportsEntity) {\n       sb.append(\"<entity name=''Sports'' dataSource=''hsqldb'' \"\n           + (sportsTransformer ? \"transformer=''AddAColumnTransformer'' \" +\n               \"newColumnName=''sportsAdded_s'' newColumnValue=''sport_added'' \" : \"\"));\n       if(sportsCached) {\n         sb.append(random().nextBoolean() ? \n             \"processor=''SqlEntityProcessor'' cacheImpl=''SortedMapBackedCache'' \" : \n             \"processor=''CachedSqlEntityProcessor'' \"\n         );\n          if(useSimpleCaches) {\n           sb.append(\"query=''SELECT ID, SPORT_NAME FROM PEOPLE_SPORTS WHERE DELETED != 'Y' AND PERSON_ID='${People.ID}' ORDER BY ID'' \");\n         } else {\n           sb.append(random().nextBoolean() ? \n               \"cacheKey=''PERSON_ID'' cacheLookup=''People.ID'' \" : \n               \"where=''PERSON_ID=People.ID'' \" \n           );\n           sb.append(\"query=''SELECT ID, PERSON_ID, SPORT_NAME FROM PEOPLE_SPORTS ORDER BY ID'' \");\n         }\n       } else {\n         sb.append(\"processor=''SqlEntityProcessor'' query=''SELECT ID, SPORT_NAME FROM PEOPLE_SPORTS WHERE DELETED != 'Y' AND PERSON_ID='${People.ID}' ORDER BY ID'' \");\n       }\n       sb.append(\"> \\n\");\n       sb.append(\"<field column=''SPORT_NAME'' name=''SPORT_NAME_mult_s'' /> \\n\");\n       sb.append(\"<field column=''id'' name=''SPORT_ID_mult_s'' /> \\n\");\n       sb.append(\"</entity> \\n\");\n     }     \n     \n     sb.append(\"</entity> \\n\");\n     sb.append(\"</document> \\n\");\n     sb.append(\"</dataConfig> \\n\");\n     String config = sb.toString().replaceAll(\"[']{2}\", \"\\\"\");\n     log.debug(config);\n     return config;\n   } \n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"78bba2225c30df6990ac27a75743069e928ef81d","date":1352741580,"type":3,"author":"James Dyer","isMerge":false,"pathNew":"solr/contrib/dataimporthandler/src/test/org/apache/solr/handler/dataimport/AbstractDIHJdbcTestCase#generateConfig().mjava","pathOld":"solr/contrib/dataimporthandler/src/test/org/apache/solr/handler/dataimport/AbstractDIHJdbcTestCase#generateConfig().mjava","sourceNew":"  protected String generateConfig() {\n    String ds = null;\n    if (dbToUse == Database.DERBY) {\n      ds = \"derby\";\n    } else if (dbToUse == Database.HSQLDB) {\n      ds = \"hsqldb\";\n    } else {\n      throw new AssertionError(\"Invalid database to use: \" + dbToUse);\n    }\n    StringBuilder sb = new StringBuilder();\n    sb.append(\"<dataConfig> \\n\");\n    sb.append(\"<dataSource name=''hsqldb'' driver=''org.hsqldb.jdbcDriver'' url=''jdbc:hsqldb:mem:.'' /> \\n\");\n    sb.append(\"<dataSource name=''derby'' driver=''org.apache.derby.jdbc.EmbeddedDriver'' url=''jdbc:derby:memory:derbyDB;'' /> \\n\");\n    sb.append(\"<document name=''TestSqlEntityProcessor''> \\n\");\n    sb.append(\"<entity name=''People'' \");\n    sb.append(\"pk=''\" + (random().nextBoolean() ? \"ID\" : \"People.ID\") + \"'' \");\n    sb.append(\"processor=''SqlEntityProcessor'' \");\n    sb.append(\"dataSource=''\" + ds + \"'' \");\n    sb.append(rootTransformerName != null ? \"transformer=''\" + rootTransformerName + \"'' \" : \"\");\n    sb.append(\"query=''SELECT ID, NAME, COUNTRY_CODE FROM PEOPLE WHERE DELETED != 'Y' '' \");\n    sb.append(deltaQueriesPersonTable());\n    sb.append(\"> \\n\");\n    \n    sb.append(\"<field column=''NAME'' name=''NAME_mult_s'' /> \\n\");\n    sb.append(\"<field column=''COUNTRY_CODE'' name=''COUNTRY_CODES_mult_s'' /> \\n\");\n    \n    if (countryEntity) {\n      sb.append(\"<entity name=''Countries'' \");\n      sb.append(\"pk=''\" + (random().nextBoolean() ? \"CODE\" : \"Countries.CODE\")\n          + \"'' \");\n      sb.append(\"dataSource=''\" + ds + \"'' \");\n      sb.append(countryTransformer ? \"transformer=''AddAColumnTransformer'' \"\n          + \"newColumnName=''countryAdded_s'' newColumnValue=''country_added'' \"\n          : \"\");\n      if (countryCached) {\n        sb.append(random().nextBoolean() ? \"processor=''SqlEntityProcessor'' cacheImpl=''SortedMapBackedCache'' \"\n            : \"processor=''CachedSqlEntityProcessor'' \");\n        if (useSimpleCaches) {\n          sb.append(\"query=''SELECT CODE, COUNTRY_NAME FROM COUNTRIES WHERE DELETED != 'Y' AND CODE='${People.COUNTRY_CODE}' ''>\\n\");\n        } else {\n          sb.append(random().nextBoolean() ? \"cacheKey=''CODE'' cacheLookup=''People.COUNTRY_CODE'' \"\n              : \"where=''CODE=People.COUNTRY_CODE'' \");\n          sb.append(\"query=''SELECT CODE, COUNTRY_NAME FROM COUNTRIES'' \");\n          sb.append(\"> \\n\");\n        }\n      } else {\n        sb.append(\"processor=''SqlEntityProcessor'' query=''SELECT CODE, COUNTRY_NAME FROM COUNTRIES WHERE DELETED != 'Y' AND CODE='${People.COUNTRY_CODE}' '' \");\n        sb.append(deltaQueriesCountryTable());\n        sb.append(\"> \\n\");\n      }\n      sb.append(\"<field column=''CODE'' name=''COUNTRY_CODE_s'' /> \\n\");\n      sb.append(\"<field column=''COUNTRY_NAME'' name=''COUNTRY_NAME_s'' /> \\n\");\n      sb.append(\"</entity> \\n\");\n    }\n    if (sportsEntity) {\n      sb.append(\"<entity name=''Sports'' \");\n      sb.append(\"dataSource=''\" + ds + \"'' \");\n      sb.append(sportsTransformer ? \"transformer=''AddAColumnTransformer'' \"\n              + \"newColumnName=''sportsAdded_s'' newColumnValue=''sport_added'' \"\n              : \"\");\n      if (sportsCached) {\n        sb.append(random().nextBoolean() ? \"processor=''SqlEntityProcessor'' cacheImpl=''SortedMapBackedCache'' \"\n            : \"processor=''CachedSqlEntityProcessor'' \");\n        if (useSimpleCaches) {\n          sb.append(\"query=''SELECT ID, SPORT_NAME FROM PEOPLE_SPORTS WHERE DELETED != 'Y' AND PERSON_ID=${People.ID} ORDER BY ID'' \");\n        } else {\n          sb.append(random().nextBoolean() ? \"cacheKey=''PERSON_ID'' cacheLookup=''People.ID'' \"\n              : \"where=''PERSON_ID=People.ID'' \");\n          sb.append(\"query=''SELECT ID, PERSON_ID, SPORT_NAME FROM PEOPLE_SPORTS ORDER BY ID'' \");\n        }\n      } else {\n        sb.append(\"processor=''SqlEntityProcessor'' query=''SELECT ID, SPORT_NAME FROM PEOPLE_SPORTS WHERE DELETED != 'Y' AND PERSON_ID=${People.ID} ORDER BY ID'' \");\n      }\n      sb.append(\"> \\n\");\n      sb.append(\"<field column=''SPORT_NAME'' name=''SPORT_NAME_mult_s'' /> \\n\");\n      sb.append(\"<field column=''id'' name=''SPORT_ID_mult_s'' /> \\n\");\n      sb.append(\"</entity> \\n\");\n    }\n    \n    sb.append(\"</entity> \\n\");\n    sb.append(\"</document> \\n\");\n    sb.append(\"</dataConfig> \\n\");\n    String config = sb.toString().replaceAll(\"[']{2}\", \"\\\"\");\n    log.debug(config);\n    return config;\n  }\n\n","sourceOld":"  protected String generateConfig() {\n     StringBuilder sb = new StringBuilder();\n     sb.append(\"<dataConfig> \\n\");\n     sb.append(\"<dataSource name=''hsqldb'' driver=''org.hsqldb.jdbcDriver'' url=''jdbc:hsqldb:mem:.'' /> \\n\");\n     sb.append(\"<document name=''TestSqlEntityProcessor''> \\n\");     \n     sb.append(\"<entity name=''People'' \");\n     sb.append(\"pk=''\" + (random().nextBoolean() ? \"ID\" : \"People.ID\") + \"'' \");\n     sb.append(\"processor=''SqlEntityProcessor'' dataSource=''hsqldb'' \");\n     sb.append(rootTransformerName !=null ? \"transformer=''\" + rootTransformerName + \"'' \" : \"\");\n     sb.append(\"query=''SELECT ID, NAME, COUNTRY_CODE FROM PEOPLE WHERE DELETED != 'Y' '' \");\n     sb.append(deltaQueriesPersonTable());\n     sb.append(\"> \\n\");\n     \n     sb.append(\"<field column=''NAME'' name=''NAME_mult_s'' /> \\n\");\n     sb.append(\"<field column=''COUNTRY_CODE'' name=''COUNTRY_CODES_mult_s'' /> \\n\");\n     \n     if(countryEntity) {\n       sb.append(\"<entity name=''Countries'' \");\n       sb.append(\"pk=''\" + (random().nextBoolean() ? \"CODE\" : \"Countries.CODE\") + \"'' \");\n       sb.append(\"dataSource=''hsqldb'' \");\n       sb.append(countryTransformer ? \"transformer=''AddAColumnTransformer'' \" +\n               \"newColumnName=''countryAdded_s'' newColumnValue=''country_added'' \" : \"\");\n       if(countryCached) {\n         sb.append(random().nextBoolean() ? \n             \"processor=''SqlEntityProcessor'' cacheImpl=''SortedMapBackedCache'' \" : \n             \"processor=''CachedSqlEntityProcessor'' \"\n         );\n         if(useSimpleCaches) {\n           sb.append(\"query=''SELECT CODE, COUNTRY_NAME FROM COUNTRIES WHERE DELETED != 'Y' AND CODE='${People.COUNTRY_CODE}' ''>\\n\");\n         } else {\n           sb.append(random().nextBoolean() ? \n               \"cacheKey=''CODE'' cacheLookup=''People.COUNTRY_CODE'' \" :\n               \"where=''CODE=People.COUNTRY_CODE'' \"\n           );\n           sb.append(\"query=''SELECT CODE, COUNTRY_NAME FROM COUNTRIES'' \");\n           sb.append(\"> \\n\");\n         }\n       } else {\n         sb.append(\"processor=''SqlEntityProcessor'' query=''SELECT CODE, COUNTRY_NAME FROM COUNTRIES WHERE DELETED != 'Y' AND CODE='${People.COUNTRY_CODE}' '' \");\n         sb.append(deltaQueriesCountryTable());         \n         sb.append(\"> \\n\");\n       }\n       sb.append(\"<field column=''CODE'' name=''COUNTRY_CODE_s'' /> \\n\");\n       sb.append(\"<field column=''COUNTRY_NAME'' name=''COUNTRY_NAME_s'' /> \\n\");\n       sb.append(\"</entity> \\n\");\n     }\n     if(sportsEntity) {\n       sb.append(\"<entity name=''Sports'' dataSource=''hsqldb'' \"\n           + (sportsTransformer ? \"transformer=''AddAColumnTransformer'' \" +\n               \"newColumnName=''sportsAdded_s'' newColumnValue=''sport_added'' \" : \"\"));\n       if(sportsCached) {\n         sb.append(random().nextBoolean() ? \n             \"processor=''SqlEntityProcessor'' cacheImpl=''SortedMapBackedCache'' \" : \n             \"processor=''CachedSqlEntityProcessor'' \"\n         );\n          if(useSimpleCaches) {\n           sb.append(\"query=''SELECT ID, SPORT_NAME FROM PEOPLE_SPORTS WHERE DELETED != 'Y' AND PERSON_ID='${People.ID}' ORDER BY ID'' \");\n         } else {\n           sb.append(random().nextBoolean() ? \n               \"cacheKey=''PERSON_ID'' cacheLookup=''People.ID'' \" : \n               \"where=''PERSON_ID=People.ID'' \" \n           );\n           sb.append(\"query=''SELECT ID, PERSON_ID, SPORT_NAME FROM PEOPLE_SPORTS ORDER BY ID'' \");\n         }\n       } else {\n         sb.append(\"processor=''SqlEntityProcessor'' query=''SELECT ID, SPORT_NAME FROM PEOPLE_SPORTS WHERE DELETED != 'Y' AND PERSON_ID='${People.ID}' ORDER BY ID'' \");\n       }\n       sb.append(\"> \\n\");\n       sb.append(\"<field column=''SPORT_NAME'' name=''SPORT_NAME_mult_s'' /> \\n\");\n       sb.append(\"<field column=''id'' name=''SPORT_ID_mult_s'' /> \\n\");\n       sb.append(\"</entity> \\n\");\n     }     \n     \n     sb.append(\"</entity> \\n\");\n     sb.append(\"</document> \\n\");\n     sb.append(\"</dataConfig> \\n\");\n     String config = sb.toString().replaceAll(\"[']{2}\", \"\\\"\");\n     log.debug(config);\n     return config;\n   } \n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"b4804614e0358954d5d9f51128fcf3cd79e6e25b","date":1352831451,"type":3,"author":"James Dyer","isMerge":false,"pathNew":"solr/contrib/dataimporthandler/src/test/org/apache/solr/handler/dataimport/AbstractDIHJdbcTestCase#generateConfig().mjava","pathOld":"solr/contrib/dataimporthandler/src/test/org/apache/solr/handler/dataimport/AbstractDIHJdbcTestCase#generateConfig().mjava","sourceNew":"  protected abstract String generateConfig();\n\n","sourceOld":"  protected String generateConfig() {\n    String ds = null;\n    if (dbToUse == Database.DERBY) {\n      ds = \"derby\";\n    } else if (dbToUse == Database.HSQLDB) {\n      ds = \"hsqldb\";\n    } else {\n      throw new AssertionError(\"Invalid database to use: \" + dbToUse);\n    }\n    StringBuilder sb = new StringBuilder();\n    sb.append(\"<dataConfig> \\n\");\n    sb.append(\"<dataSource name=''hsqldb'' driver=''org.hsqldb.jdbcDriver'' url=''jdbc:hsqldb:mem:.'' /> \\n\");\n    sb.append(\"<dataSource name=''derby'' driver=''org.apache.derby.jdbc.EmbeddedDriver'' url=''jdbc:derby:memory:derbyDB;'' /> \\n\");\n    sb.append(\"<document name=''TestSqlEntityProcessor''> \\n\");\n    sb.append(\"<entity name=''People'' \");\n    sb.append(\"pk=''\" + (random().nextBoolean() ? \"ID\" : \"People.ID\") + \"'' \");\n    sb.append(\"processor=''SqlEntityProcessor'' \");\n    sb.append(\"dataSource=''\" + ds + \"'' \");\n    sb.append(rootTransformerName != null ? \"transformer=''\" + rootTransformerName + \"'' \" : \"\");\n    sb.append(\"query=''SELECT ID, NAME, COUNTRY_CODE FROM PEOPLE WHERE DELETED != 'Y' '' \");\n    sb.append(deltaQueriesPersonTable());\n    sb.append(\"> \\n\");\n    \n    sb.append(\"<field column=''NAME'' name=''NAME_mult_s'' /> \\n\");\n    sb.append(\"<field column=''COUNTRY_CODE'' name=''COUNTRY_CODES_mult_s'' /> \\n\");\n    \n    if (countryEntity) {\n      sb.append(\"<entity name=''Countries'' \");\n      sb.append(\"pk=''\" + (random().nextBoolean() ? \"CODE\" : \"Countries.CODE\")\n          + \"'' \");\n      sb.append(\"dataSource=''\" + ds + \"'' \");\n      sb.append(countryTransformer ? \"transformer=''AddAColumnTransformer'' \"\n          + \"newColumnName=''countryAdded_s'' newColumnValue=''country_added'' \"\n          : \"\");\n      if (countryCached) {\n        sb.append(random().nextBoolean() ? \"processor=''SqlEntityProcessor'' cacheImpl=''SortedMapBackedCache'' \"\n            : \"processor=''CachedSqlEntityProcessor'' \");\n        if (useSimpleCaches) {\n          sb.append(\"query=''SELECT CODE, COUNTRY_NAME FROM COUNTRIES WHERE DELETED != 'Y' AND CODE='${People.COUNTRY_CODE}' ''>\\n\");\n        } else {\n          sb.append(random().nextBoolean() ? \"cacheKey=''CODE'' cacheLookup=''People.COUNTRY_CODE'' \"\n              : \"where=''CODE=People.COUNTRY_CODE'' \");\n          sb.append(\"query=''SELECT CODE, COUNTRY_NAME FROM COUNTRIES'' \");\n          sb.append(\"> \\n\");\n        }\n      } else {\n        sb.append(\"processor=''SqlEntityProcessor'' query=''SELECT CODE, COUNTRY_NAME FROM COUNTRIES WHERE DELETED != 'Y' AND CODE='${People.COUNTRY_CODE}' '' \");\n        sb.append(deltaQueriesCountryTable());\n        sb.append(\"> \\n\");\n      }\n      sb.append(\"<field column=''CODE'' name=''COUNTRY_CODE_s'' /> \\n\");\n      sb.append(\"<field column=''COUNTRY_NAME'' name=''COUNTRY_NAME_s'' /> \\n\");\n      sb.append(\"</entity> \\n\");\n    }\n    if (sportsEntity) {\n      sb.append(\"<entity name=''Sports'' \");\n      sb.append(\"dataSource=''\" + ds + \"'' \");\n      sb.append(sportsTransformer ? \"transformer=''AddAColumnTransformer'' \"\n              + \"newColumnName=''sportsAdded_s'' newColumnValue=''sport_added'' \"\n              : \"\");\n      if (sportsCached) {\n        sb.append(random().nextBoolean() ? \"processor=''SqlEntityProcessor'' cacheImpl=''SortedMapBackedCache'' \"\n            : \"processor=''CachedSqlEntityProcessor'' \");\n        if (useSimpleCaches) {\n          sb.append(\"query=''SELECT ID, SPORT_NAME FROM PEOPLE_SPORTS WHERE DELETED != 'Y' AND PERSON_ID=${People.ID} ORDER BY ID'' \");\n        } else {\n          sb.append(random().nextBoolean() ? \"cacheKey=''PERSON_ID'' cacheLookup=''People.ID'' \"\n              : \"where=''PERSON_ID=People.ID'' \");\n          sb.append(\"query=''SELECT ID, PERSON_ID, SPORT_NAME FROM PEOPLE_SPORTS ORDER BY ID'' \");\n        }\n      } else {\n        sb.append(\"processor=''SqlEntityProcessor'' query=''SELECT ID, SPORT_NAME FROM PEOPLE_SPORTS WHERE DELETED != 'Y' AND PERSON_ID=${People.ID} ORDER BY ID'' \");\n      }\n      sb.append(\"> \\n\");\n      sb.append(\"<field column=''SPORT_NAME'' name=''SPORT_NAME_mult_s'' /> \\n\");\n      sb.append(\"<field column=''id'' name=''SPORT_ID_mult_s'' /> \\n\");\n      sb.append(\"</entity> \\n\");\n    }\n    \n    sb.append(\"</entity> \\n\");\n    sb.append(\"</document> \\n\");\n    sb.append(\"</dataConfig> \\n\");\n    String config = sb.toString().replaceAll(\"[']{2}\", \"\\\"\");\n    log.debug(config);\n    return config;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"407687e67faf6e1f02a211ca078d8e3eed631027","date":1355157407,"type":3,"author":"Robert Muir","isMerge":true,"pathNew":"solr/contrib/dataimporthandler/src/test/org/apache/solr/handler/dataimport/AbstractDIHJdbcTestCase#generateConfig().mjava","pathOld":"solr/contrib/dataimporthandler/src/test/org/apache/solr/handler/dataimport/AbstractDIHJdbcTestCase#generateConfig().mjava","sourceNew":"  protected abstract String generateConfig();\n\n","sourceOld":"  protected String generateConfig() {\n     StringBuilder sb = new StringBuilder();\n     sb.append(\"<dataConfig> \\n\");\n     sb.append(\"<dataSource name=''hsqldb'' driver=''org.hsqldb.jdbcDriver'' url=''jdbc:hsqldb:mem:.'' /> \\n\");\n     sb.append(\"<document name=''TestSqlEntityProcessor''> \\n\");     \n     sb.append(\"<entity name=''People'' \");\n     sb.append(\"pk=''\" + (random().nextBoolean() ? \"ID\" : \"People.ID\") + \"'' \");\n     sb.append(\"processor=''SqlEntityProcessor'' dataSource=''hsqldb'' \");\n     sb.append(rootTransformerName !=null ? \"transformer=''\" + rootTransformerName + \"'' \" : \"\");\n     sb.append(\"query=''SELECT ID, NAME, COUNTRY_CODE FROM PEOPLE WHERE DELETED != 'Y' '' \");\n     sb.append(deltaQueriesPersonTable());\n     sb.append(\"> \\n\");\n     \n     sb.append(\"<field column=''NAME'' name=''NAME_mult_s'' /> \\n\");\n     sb.append(\"<field column=''COUNTRY_CODE'' name=''COUNTRY_CODES_mult_s'' /> \\n\");\n     \n     if(countryEntity) {\n       sb.append(\"<entity name=''Countries'' \");\n       sb.append(\"pk=''\" + (random().nextBoolean() ? \"CODE\" : \"Countries.CODE\") + \"'' \");\n       sb.append(\"dataSource=''hsqldb'' \");\n       sb.append(countryTransformer ? \"transformer=''AddAColumnTransformer'' \" +\n               \"newColumnName=''countryAdded_s'' newColumnValue=''country_added'' \" : \"\");\n       if(countryCached) {\n         sb.append(random().nextBoolean() ? \n             \"processor=''SqlEntityProcessor'' cacheImpl=''SortedMapBackedCache'' \" : \n             \"processor=''CachedSqlEntityProcessor'' \"\n         );\n         if(useSimpleCaches) {\n           sb.append(\"query=''SELECT CODE, COUNTRY_NAME FROM COUNTRIES WHERE DELETED != 'Y' AND CODE='${People.COUNTRY_CODE}' ''>\\n\");\n         } else {\n           sb.append(random().nextBoolean() ? \n               \"cacheKey=''CODE'' cacheLookup=''People.COUNTRY_CODE'' \" :\n               \"where=''CODE=People.COUNTRY_CODE'' \"\n           );\n           sb.append(\"query=''SELECT CODE, COUNTRY_NAME FROM COUNTRIES'' \");\n           sb.append(\"> \\n\");\n         }\n       } else {\n         sb.append(\"processor=''SqlEntityProcessor'' query=''SELECT CODE, COUNTRY_NAME FROM COUNTRIES WHERE DELETED != 'Y' AND CODE='${People.COUNTRY_CODE}' '' \");\n         sb.append(deltaQueriesCountryTable());         \n         sb.append(\"> \\n\");\n       }\n       sb.append(\"<field column=''CODE'' name=''COUNTRY_CODE_s'' /> \\n\");\n       sb.append(\"<field column=''COUNTRY_NAME'' name=''COUNTRY_NAME_s'' /> \\n\");\n       sb.append(\"</entity> \\n\");\n     }\n     if(sportsEntity) {\n       sb.append(\"<entity name=''Sports'' dataSource=''hsqldb'' \"\n           + (sportsTransformer ? \"transformer=''AddAColumnTransformer'' \" +\n               \"newColumnName=''sportsAdded_s'' newColumnValue=''sport_added'' \" : \"\"));\n       if(sportsCached) {\n         sb.append(random().nextBoolean() ? \n             \"processor=''SqlEntityProcessor'' cacheImpl=''SortedMapBackedCache'' \" : \n             \"processor=''CachedSqlEntityProcessor'' \"\n         );\n          if(useSimpleCaches) {\n           sb.append(\"query=''SELECT ID, SPORT_NAME FROM PEOPLE_SPORTS WHERE DELETED != 'Y' AND PERSON_ID='${People.ID}' ORDER BY ID'' \");\n         } else {\n           sb.append(random().nextBoolean() ? \n               \"cacheKey=''PERSON_ID'' cacheLookup=''People.ID'' \" : \n               \"where=''PERSON_ID=People.ID'' \" \n           );\n           sb.append(\"query=''SELECT ID, PERSON_ID, SPORT_NAME FROM PEOPLE_SPORTS ORDER BY ID'' \");\n         }\n       } else {\n         sb.append(\"processor=''SqlEntityProcessor'' query=''SELECT ID, SPORT_NAME FROM PEOPLE_SPORTS WHERE DELETED != 'Y' AND PERSON_ID='${People.ID}' ORDER BY ID'' \");\n       }\n       sb.append(\"> \\n\");\n       sb.append(\"<field column=''SPORT_NAME'' name=''SPORT_NAME_mult_s'' /> \\n\");\n       sb.append(\"<field column=''id'' name=''SPORT_ID_mult_s'' /> \\n\");\n       sb.append(\"</entity> \\n\");\n     }     \n     \n     sb.append(\"</entity> \\n\");\n     sb.append(\"</document> \\n\");\n     sb.append(\"</dataConfig> \\n\");\n     String config = sb.toString().replaceAll(\"[']{2}\", \"\\\"\");\n     log.debug(config);\n     return config;\n   } \n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"d2c8f5c46c2501b61e2f55eb7ee59e6c5372290b","date":1598712724,"type":4,"author":"Alexandre Rafalovitch","isMerge":false,"pathNew":"/dev/null","pathOld":"solr/contrib/dataimporthandler/src/test/org/apache/solr/handler/dataimport/AbstractDIHJdbcTestCase#generateConfig().mjava","sourceNew":null,"sourceOld":"  protected abstract String generateConfig();\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"b4804614e0358954d5d9f51128fcf3cd79e6e25b":["78bba2225c30df6990ac27a75743069e928ef81d"],"d2c8f5c46c2501b61e2f55eb7ee59e6c5372290b":["b4804614e0358954d5d9f51128fcf3cd79e6e25b"],"78bba2225c30df6990ac27a75743069e928ef81d":["baf341ad3a1a8fb73fb37091af85f8aef0398367"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"407687e67faf6e1f02a211ca078d8e3eed631027":["baf341ad3a1a8fb73fb37091af85f8aef0398367","b4804614e0358954d5d9f51128fcf3cd79e6e25b"],"baf341ad3a1a8fb73fb37091af85f8aef0398367":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["d2c8f5c46c2501b61e2f55eb7ee59e6c5372290b"]},"commit2Childs":{"b4804614e0358954d5d9f51128fcf3cd79e6e25b":["d2c8f5c46c2501b61e2f55eb7ee59e6c5372290b","407687e67faf6e1f02a211ca078d8e3eed631027"],"78bba2225c30df6990ac27a75743069e928ef81d":["b4804614e0358954d5d9f51128fcf3cd79e6e25b"],"d2c8f5c46c2501b61e2f55eb7ee59e6c5372290b":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["baf341ad3a1a8fb73fb37091af85f8aef0398367"],"407687e67faf6e1f02a211ca078d8e3eed631027":[],"baf341ad3a1a8fb73fb37091af85f8aef0398367":["78bba2225c30df6990ac27a75743069e928ef81d","407687e67faf6e1f02a211ca078d8e3eed631027"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["407687e67faf6e1f02a211ca078d8e3eed631027","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}