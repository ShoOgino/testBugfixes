{"path":"lucene/test-framework/src/java/org/apache/lucene/util/LuceneTestCase#setUp().mjava","commits":[{"id":"3a119bbc8703c10faa329ec201c654b3a35a1e3e","date":1328644745,"type":1,"author":"Steven Rowe","isMerge":false,"pathNew":"lucene/test-framework/src/java/org/apache/lucene/util/LuceneTestCase#setUp().mjava","pathOld":"lucene/src/test-framework/java/org/apache/lucene/util/LuceneTestCase#setUp().mjava","sourceNew":"  @Before\n  public void setUp() throws Exception {\n    seed = \"random\".equals(TEST_SEED) ? seedRand.nextLong() : ThreeLongs.fromString(TEST_SEED).l2;\n    random.setSeed(seed);\n    State s = state; // capture test execution state\n    state = State.SETUP; // set the state for subsequent tests\n   \n    savedUncaughtExceptionHandler = Thread.getDefaultUncaughtExceptionHandler();\n    Thread.setDefaultUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler() {\n      public void uncaughtException(Thread t, Throwable e) {\n        // org.junit.internal.AssumptionViolatedException in older releases\n        // org.junit.Assume.AssumptionViolatedException in recent ones\n        if (e.getClass().getName().endsWith(\"AssumptionViolatedException\")) {\n          String where = \"<unknown>\";\n          for (StackTraceElement elem : e.getStackTrace()) {\n            if ( ! elem.getClassName().startsWith(\"org.junit\")) {\n              where = elem.toString();\n              break;\n            }\n          }\n          if (e.getCause() instanceof _TestIgnoredException)\n            e = e.getCause();\n          System.err.print(\"NOTE: Assume failed at \" + where + \" (ignored):\");\n          if (VERBOSE) {\n            System.err.println();\n            e.printStackTrace(System.err);\n          } else {\n            System.err.print(\" \");\n            System.err.println(e.getMessage());\n          }\n        } else {\n          testsFailed = true;\n          uncaughtExceptions.add(new UncaughtExceptionEntry(t, e));\n          if (savedUncaughtExceptionHandler != null)\n            savedUncaughtExceptionHandler.uncaughtException(t, e);\n        }\n      }\n    });\n\n    savedBoolMaxClauseCount = BooleanQuery.getMaxClauseCount();\n\n    if (!testsFailed) {\n      assertTrue(\"ensure your tearDown() calls super.tearDown()!!!\", (s == State.INITIAL || s == State.TEARDOWN));\n    }\n    \n    if (useNoMemoryExpensiveCodec) {\n      String defFormat = _TestUtil.getPostingsFormat(\"thisCodeMakesAbsolutelyNoSenseCanWeDeleteIt\");\n      // Stupid: assumeFalse in setUp() does not print any information, because\n      // TestWatchman does not watch test during setUp() - getName() is also not defined...\n      // => print info directly and use assume without message:\n      if (\"SimpleText\".equals(defFormat) || \"Memory\".equals(defFormat)) {\n        System.err.println(\"NOTE: A test method in \" + getClass().getSimpleName() + \" was ignored, as it uses too much memory with \" + defFormat + \".\");\n        Assume.assumeTrue(false);\n      }\n    }\n  }\n\n","sourceOld":"  @Before\n  public void setUp() throws Exception {\n    seed = \"random\".equals(TEST_SEED) ? seedRand.nextLong() : ThreeLongs.fromString(TEST_SEED).l2;\n    random.setSeed(seed);\n    State s = state; // capture test execution state\n    state = State.SETUP; // set the state for subsequent tests\n   \n    savedUncaughtExceptionHandler = Thread.getDefaultUncaughtExceptionHandler();\n    Thread.setDefaultUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler() {\n      public void uncaughtException(Thread t, Throwable e) {\n        // org.junit.internal.AssumptionViolatedException in older releases\n        // org.junit.Assume.AssumptionViolatedException in recent ones\n        if (e.getClass().getName().endsWith(\"AssumptionViolatedException\")) {\n          String where = \"<unknown>\";\n          for (StackTraceElement elem : e.getStackTrace()) {\n            if ( ! elem.getClassName().startsWith(\"org.junit\")) {\n              where = elem.toString();\n              break;\n            }\n          }\n          if (e.getCause() instanceof _TestIgnoredException)\n            e = e.getCause();\n          System.err.print(\"NOTE: Assume failed at \" + where + \" (ignored):\");\n          if (VERBOSE) {\n            System.err.println();\n            e.printStackTrace(System.err);\n          } else {\n            System.err.print(\" \");\n            System.err.println(e.getMessage());\n          }\n        } else {\n          testsFailed = true;\n          uncaughtExceptions.add(new UncaughtExceptionEntry(t, e));\n          if (savedUncaughtExceptionHandler != null)\n            savedUncaughtExceptionHandler.uncaughtException(t, e);\n        }\n      }\n    });\n\n    savedBoolMaxClauseCount = BooleanQuery.getMaxClauseCount();\n\n    if (!testsFailed) {\n      assertTrue(\"ensure your tearDown() calls super.tearDown()!!!\", (s == State.INITIAL || s == State.TEARDOWN));\n    }\n    \n    if (useNoMemoryExpensiveCodec) {\n      String defFormat = _TestUtil.getPostingsFormat(\"thisCodeMakesAbsolutelyNoSenseCanWeDeleteIt\");\n      // Stupid: assumeFalse in setUp() does not print any information, because\n      // TestWatchman does not watch test during setUp() - getName() is also not defined...\n      // => print info directly and use assume without message:\n      if (\"SimpleText\".equals(defFormat) || \"Memory\".equals(defFormat)) {\n        System.err.println(\"NOTE: A test method in \" + getClass().getSimpleName() + \" was ignored, as it uses too much memory with \" + defFormat + \".\");\n        Assume.assumeTrue(false);\n      }\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"1e6d0f38037e0125421d8e737992d511b5567b26","date":1329215236,"type":3,"author":"Dawid Weiss","isMerge":false,"pathNew":"lucene/test-framework/src/java/org/apache/lucene/util/LuceneTestCase#setUp().mjava","pathOld":"lucene/test-framework/src/java/org/apache/lucene/util/LuceneTestCase#setUp().mjava","sourceNew":"  /**\n   * For subclassing only. Overrides must call {@code super.setUp()}.\n   */\n  @Before\n  public void setUp() throws Exception {\n    setupCalled = true;\n  }\n\n","sourceOld":"  @Before\n  public void setUp() throws Exception {\n    seed = \"random\".equals(TEST_SEED) ? seedRand.nextLong() : ThreeLongs.fromString(TEST_SEED).l2;\n    random.setSeed(seed);\n    State s = state; // capture test execution state\n    state = State.SETUP; // set the state for subsequent tests\n   \n    savedUncaughtExceptionHandler = Thread.getDefaultUncaughtExceptionHandler();\n    Thread.setDefaultUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler() {\n      public void uncaughtException(Thread t, Throwable e) {\n        // org.junit.internal.AssumptionViolatedException in older releases\n        // org.junit.Assume.AssumptionViolatedException in recent ones\n        if (e.getClass().getName().endsWith(\"AssumptionViolatedException\")) {\n          String where = \"<unknown>\";\n          for (StackTraceElement elem : e.getStackTrace()) {\n            if ( ! elem.getClassName().startsWith(\"org.junit\")) {\n              where = elem.toString();\n              break;\n            }\n          }\n          if (e.getCause() instanceof _TestIgnoredException)\n            e = e.getCause();\n          System.err.print(\"NOTE: Assume failed at \" + where + \" (ignored):\");\n          if (VERBOSE) {\n            System.err.println();\n            e.printStackTrace(System.err);\n          } else {\n            System.err.print(\" \");\n            System.err.println(e.getMessage());\n          }\n        } else {\n          testsFailed = true;\n          uncaughtExceptions.add(new UncaughtExceptionEntry(t, e));\n          if (savedUncaughtExceptionHandler != null)\n            savedUncaughtExceptionHandler.uncaughtException(t, e);\n        }\n      }\n    });\n\n    savedBoolMaxClauseCount = BooleanQuery.getMaxClauseCount();\n\n    if (!testsFailed) {\n      assertTrue(\"ensure your tearDown() calls super.tearDown()!!!\", (s == State.INITIAL || s == State.TEARDOWN));\n    }\n    \n    if (useNoMemoryExpensiveCodec) {\n      String defFormat = _TestUtil.getPostingsFormat(\"thisCodeMakesAbsolutelyNoSenseCanWeDeleteIt\");\n      // Stupid: assumeFalse in setUp() does not print any information, because\n      // TestWatchman does not watch test during setUp() - getName() is also not defined...\n      // => print info directly and use assume without message:\n      if (\"SimpleText\".equals(defFormat) || \"Memory\".equals(defFormat)) {\n        System.err.println(\"NOTE: A test method in \" + getClass().getSimpleName() + \" was ignored, as it uses too much memory with \" + defFormat + \".\");\n        Assume.assumeTrue(false);\n      }\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"5da0b42730b6b99b31389ef94cb97384e83b9ede","date":1337107665,"type":3,"author":"Dawid Weiss","isMerge":false,"pathNew":"lucene/test-framework/src/java/org/apache/lucene/util/LuceneTestCase#setUp().mjava","pathOld":"lucene/test-framework/src/java/org/apache/lucene/util/LuceneTestCase#setUp().mjava","sourceNew":"  /**\n   * For subclasses to override. Overrides must call {@code super.setUp()}.\n   */\n  @Before\n  public void setUp() throws Exception {\n    parentChainCallRule.setupCalled = true;\n  }\n\n","sourceOld":"  /**\n   * For subclassing only. Overrides must call {@code super.setUp()}.\n   */\n  @Before\n  public void setUp() throws Exception {\n    setupCalled = true;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"1e6d0f38037e0125421d8e737992d511b5567b26":["3a119bbc8703c10faa329ec201c654b3a35a1e3e"],"5da0b42730b6b99b31389ef94cb97384e83b9ede":["1e6d0f38037e0125421d8e737992d511b5567b26"],"3a119bbc8703c10faa329ec201c654b3a35a1e3e":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["5da0b42730b6b99b31389ef94cb97384e83b9ede"]},"commit2Childs":{"1e6d0f38037e0125421d8e737992d511b5567b26":["5da0b42730b6b99b31389ef94cb97384e83b9ede"],"5da0b42730b6b99b31389ef94cb97384e83b9ede":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"3a119bbc8703c10faa329ec201c654b3a35a1e3e":["1e6d0f38037e0125421d8e737992d511b5567b26"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["3a119bbc8703c10faa329ec201c654b3a35a1e3e"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}