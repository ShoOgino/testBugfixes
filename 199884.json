{"path":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","commits":[{"id":"f366ce28775e2b8ea4e06355009471328711666d","date":1360551293,"type":0,"author":"Robert Muir","isMerge":false,"pathNew":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","pathOld":"/dev/null","sourceNew":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<Long>(data, PositiveIntOutputs.getSingleton(true));\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<Long>();\n    final Arc<Long> scratchArc = new Arc<Long>();\n    final IntsRef scratchInts = new IntsRef();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<Long>(fst); \n    return new SortedSetDocValues() {\n\n      @Override\n      public OrdIterator getOrds(int docID, OrdIterator reuse) {\n        final Lucene42OrdsIterator iterator;\n        if (reuse instanceof Lucene42OrdsIterator) {\n          iterator = (Lucene42OrdsIterator) reuse;\n        } else {\n          iterator = new Lucene42OrdsIterator(docToOrds);\n        }\n        iterator.reset(docID);\n        return iterator;\n      }\n\n      @Override\n      public void lookupOrd(long ord, BytesRef result) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          result.bytes = new byte[output.length];\n          result.offset = 0;\n          result.length = 0;\n          Util.toBytesRef(output, result);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n    };\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":["7dc6ea5fd38ce7aa8f36b3bac8b757da77f31d50"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"3fa20a3abac513546891f11898093eaf5828f7ab","date":1360558555,"type":3,"author":"Robert Muir","isMerge":false,"pathNew":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","pathOld":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","sourceNew":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<Long>(data, PositiveIntOutputs.getSingleton(true));\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<Long>();\n    final Arc<Long> scratchArc = new Arc<Long>();\n    final IntsRef scratchInts = new IntsRef();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<Long>(fst); \n    return new SortedSetDocValues() {\n\n      @Override\n      public OrdIterator getOrds(int docID, OrdIterator reuse) {\n        final Lucene42OrdsIterator iterator;\n        if (reuse instanceof Lucene42OrdsIterator) {\n          iterator = (Lucene42OrdsIterator) reuse;\n        } else {\n          iterator = new Lucene42OrdsIterator(docToOrds);\n        }\n        iterator.reset(docToOrds, docID);\n        return iterator;\n      }\n\n      @Override\n      public void lookupOrd(long ord, BytesRef result) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          result.bytes = new byte[output.length];\n          result.offset = 0;\n          result.length = 0;\n          Util.toBytesRef(output, result);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n    };\n  }\n\n","sourceOld":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<Long>(data, PositiveIntOutputs.getSingleton(true));\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<Long>();\n    final Arc<Long> scratchArc = new Arc<Long>();\n    final IntsRef scratchInts = new IntsRef();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<Long>(fst); \n    return new SortedSetDocValues() {\n\n      @Override\n      public OrdIterator getOrds(int docID, OrdIterator reuse) {\n        final Lucene42OrdsIterator iterator;\n        if (reuse instanceof Lucene42OrdsIterator) {\n          iterator = (Lucene42OrdsIterator) reuse;\n        } else {\n          iterator = new Lucene42OrdsIterator(docToOrds);\n        }\n        iterator.reset(docID);\n        return iterator;\n      }\n\n      @Override\n      public void lookupOrd(long ord, BytesRef result) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          result.bytes = new byte[output.length];\n          result.offset = 0;\n          result.length = 0;\n          Util.toBytesRef(output, result);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n    };\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"988e3f44fe797ee94a0135abfe27e5872b99844d","date":1360563792,"type":3,"author":"Robert Muir","isMerge":false,"pathNew":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","pathOld":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","sourceNew":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<Long>(data, PositiveIntOutputs.getSingleton(true));\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<Long>();\n    final Arc<Long> scratchArc = new Arc<Long>();\n    final IntsRef scratchInts = new IntsRef();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<Long>(fst); \n    final BytesRef ref = new BytesRef();\n    final ByteArrayDataInput input = new ByteArrayDataInput();\n    return new SortedSetDocValues() {\n      long currentOrd;\n\n      @Override\n      public long nextOrd() {\n        if (input.eof()) {\n          return NO_MORE_ORDS;\n        } else {\n          currentOrd += input.readVLong();\n          return currentOrd;\n        }\n      }\n      \n      @Override\n      public void setDocument(int docID) {\n        docToOrds.get(docID, ref);\n        input.reset(ref.bytes, ref.offset, ref.length);\n        currentOrd = 0;\n      }\n\n      @Override\n      public void lookupOrd(long ord, BytesRef result) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          result.bytes = new byte[output.length];\n          result.offset = 0;\n          result.length = 0;\n          Util.toBytesRef(output, result);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n    };\n  }\n\n","sourceOld":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<Long>(data, PositiveIntOutputs.getSingleton(true));\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<Long>();\n    final Arc<Long> scratchArc = new Arc<Long>();\n    final IntsRef scratchInts = new IntsRef();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<Long>(fst); \n    return new SortedSetDocValues() {\n\n      @Override\n      public OrdIterator getOrds(int docID, OrdIterator reuse) {\n        final Lucene42OrdsIterator iterator;\n        if (reuse instanceof Lucene42OrdsIterator) {\n          iterator = (Lucene42OrdsIterator) reuse;\n        } else {\n          iterator = new Lucene42OrdsIterator(docToOrds);\n        }\n        iterator.reset(docToOrds, docID);\n        return iterator;\n      }\n\n      @Override\n      public void lookupOrd(long ord, BytesRef result) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          result.bytes = new byte[output.length];\n          result.offset = 0;\n          result.length = 0;\n          Util.toBytesRef(output, result);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n    };\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"4c54a8d0edc6c5b7196804fa09a42a607b4aad35","date":1360633612,"type":3,"author":"Robert Muir","isMerge":false,"pathNew":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","pathOld":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","sourceNew":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    if (entry.numOrds == 0) {\n      return SortedSetDocValues.EMPTY; // empty FST!\n    }\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<Long>(data, PositiveIntOutputs.getSingleton(true));\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<Long>();\n    final Arc<Long> scratchArc = new Arc<Long>();\n    final IntsRef scratchInts = new IntsRef();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<Long>(fst); \n    final BytesRef ref = new BytesRef();\n    final ByteArrayDataInput input = new ByteArrayDataInput();\n    return new SortedSetDocValues() {\n      long currentOrd;\n\n      @Override\n      public long nextOrd() {\n        if (input.eof()) {\n          return NO_MORE_ORDS;\n        } else {\n          currentOrd += input.readVLong();\n          return currentOrd;\n        }\n      }\n      \n      @Override\n      public void setDocument(int docID) {\n        docToOrds.get(docID, ref);\n        input.reset(ref.bytes, ref.offset, ref.length);\n        currentOrd = 0;\n      }\n\n      @Override\n      public void lookupOrd(long ord, BytesRef result) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          result.bytes = new byte[output.length];\n          result.offset = 0;\n          result.length = 0;\n          Util.toBytesRef(output, result);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n    };\n  }\n\n","sourceOld":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<Long>(data, PositiveIntOutputs.getSingleton(true));\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<Long>();\n    final Arc<Long> scratchArc = new Arc<Long>();\n    final IntsRef scratchInts = new IntsRef();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<Long>(fst); \n    final BytesRef ref = new BytesRef();\n    final ByteArrayDataInput input = new ByteArrayDataInput();\n    return new SortedSetDocValues() {\n      long currentOrd;\n\n      @Override\n      public long nextOrd() {\n        if (input.eof()) {\n          return NO_MORE_ORDS;\n        } else {\n          currentOrd += input.readVLong();\n          return currentOrd;\n        }\n      }\n      \n      @Override\n      public void setDocument(int docID) {\n        docToOrds.get(docID, ref);\n        input.reset(ref.bytes, ref.offset, ref.length);\n        currentOrd = 0;\n      }\n\n      @Override\n      public void lookupOrd(long ord, BytesRef result) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          result.bytes = new byte[output.length];\n          result.offset = 0;\n          result.length = 0;\n          Util.toBytesRef(output, result);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n    };\n  }\n\n","bugFix":null,"bugIntro":["8429ddf2214f2bf8abcbb5484fefef6aaf5c417e"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"ddbb72a33557d2b5bc22ee95daf3281c43560502","date":1361334582,"type":0,"author":"Robert Muir","isMerge":true,"pathNew":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","pathOld":"/dev/null","sourceNew":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    if (entry.numOrds == 0) {\n      return SortedSetDocValues.EMPTY; // empty FST!\n    }\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<Long>(data, PositiveIntOutputs.getSingleton(true));\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<Long>();\n    final Arc<Long> scratchArc = new Arc<Long>();\n    final IntsRef scratchInts = new IntsRef();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<Long>(fst); \n    final BytesRef ref = new BytesRef();\n    final ByteArrayDataInput input = new ByteArrayDataInput();\n    return new SortedSetDocValues() {\n      long currentOrd;\n\n      @Override\n      public long nextOrd() {\n        if (input.eof()) {\n          return NO_MORE_ORDS;\n        } else {\n          currentOrd += input.readVLong();\n          return currentOrd;\n        }\n      }\n      \n      @Override\n      public void setDocument(int docID) {\n        docToOrds.get(docID, ref);\n        input.reset(ref.bytes, ref.offset, ref.length);\n        currentOrd = 0;\n      }\n\n      @Override\n      public void lookupOrd(long ord, BytesRef result) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          result.bytes = new byte[output.length];\n          result.offset = 0;\n          result.length = 0;\n          Util.toBytesRef(output, result);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n    };\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"7e129598ae448211d969dd7cdf2ad4558a0658a1","date":1362963550,"type":3,"author":"Robert Muir","isMerge":false,"pathNew":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","pathOld":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","sourceNew":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    if (entry.numOrds == 0) {\n      return SortedSetDocValues.EMPTY; // empty FST!\n    }\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<Long>(data, PositiveIntOutputs.getSingleton(true));\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<Long>();\n    final Arc<Long> scratchArc = new Arc<Long>();\n    final IntsRef scratchInts = new IntsRef();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<Long>(fst); \n    final BytesRef ref = new BytesRef();\n    final ByteArrayDataInput input = new ByteArrayDataInput();\n    return new SortedSetDocValues() {\n      long currentOrd;\n\n      @Override\n      public long nextOrd() {\n        if (input.eof()) {\n          return NO_MORE_ORDS;\n        } else {\n          currentOrd += input.readVLong();\n          return currentOrd;\n        }\n      }\n      \n      @Override\n      public void setDocument(int docID) {\n        docToOrds.get(docID, ref);\n        input.reset(ref.bytes, ref.offset, ref.length);\n        currentOrd = 0;\n      }\n\n      @Override\n      public void lookupOrd(long ord, BytesRef result) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          result.bytes = new byte[output.length];\n          result.offset = 0;\n          result.length = 0;\n          Util.toBytesRef(output, result);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n\n      @Override\n      public TermsEnum termsEnum() {\n        return new FSTTermsEnum(fst);\n      }\n    };\n  }\n\n","sourceOld":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    if (entry.numOrds == 0) {\n      return SortedSetDocValues.EMPTY; // empty FST!\n    }\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<Long>(data, PositiveIntOutputs.getSingleton(true));\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<Long>();\n    final Arc<Long> scratchArc = new Arc<Long>();\n    final IntsRef scratchInts = new IntsRef();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<Long>(fst); \n    final BytesRef ref = new BytesRef();\n    final ByteArrayDataInput input = new ByteArrayDataInput();\n    return new SortedSetDocValues() {\n      long currentOrd;\n\n      @Override\n      public long nextOrd() {\n        if (input.eof()) {\n          return NO_MORE_ORDS;\n        } else {\n          currentOrd += input.readVLong();\n          return currentOrd;\n        }\n      }\n      \n      @Override\n      public void setDocument(int docID) {\n        docToOrds.get(docID, ref);\n        input.reset(ref.bytes, ref.offset, ref.length);\n        currentOrd = 0;\n      }\n\n      @Override\n      public void lookupOrd(long ord, BytesRef result) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          result.bytes = new byte[output.length];\n          result.offset = 0;\n          result.length = 0;\n          Util.toBytesRef(output, result);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n    };\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"64e6baad25b7155a116cb0126b4e2a06b945a5c5","date":1362976847,"type":3,"author":"Robert Muir","isMerge":false,"pathNew":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","pathOld":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","sourceNew":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    if (entry.numOrds == 0) {\n      return SortedSetDocValues.EMPTY; // empty FST!\n    }\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<Long>(data, PositiveIntOutputs.getSingleton(true));\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<Long>();\n    final Arc<Long> scratchArc = new Arc<Long>();\n    final IntsRef scratchInts = new IntsRef();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<Long>(fst); \n    final BytesRef ref = new BytesRef();\n    final ByteArrayDataInput input = new ByteArrayDataInput();\n    return new SortedSetDocValues() {\n      long currentOrd;\n\n      @Override\n      public long nextOrd() {\n        if (input.eof()) {\n          return NO_MORE_ORDS;\n        } else {\n          currentOrd += input.readVLong();\n          return currentOrd;\n        }\n      }\n      \n      @Override\n      public void setDocument(int docID) {\n        docToOrds.get(docID, ref);\n        input.reset(ref.bytes, ref.offset, ref.length);\n        currentOrd = 0;\n      }\n\n      @Override\n      public void lookupOrd(long ord, BytesRef result) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          result.bytes = new byte[output.length];\n          result.offset = 0;\n          result.length = 0;\n          Util.toBytesRef(output, result);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n    };\n  }\n\n","sourceOld":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    if (entry.numOrds == 0) {\n      return SortedSetDocValues.EMPTY; // empty FST!\n    }\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<Long>(data, PositiveIntOutputs.getSingleton(true));\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<Long>();\n    final Arc<Long> scratchArc = new Arc<Long>();\n    final IntsRef scratchInts = new IntsRef();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<Long>(fst); \n    final BytesRef ref = new BytesRef();\n    final ByteArrayDataInput input = new ByteArrayDataInput();\n    return new SortedSetDocValues() {\n      long currentOrd;\n\n      @Override\n      public long nextOrd() {\n        if (input.eof()) {\n          return NO_MORE_ORDS;\n        } else {\n          currentOrd += input.readVLong();\n          return currentOrd;\n        }\n      }\n      \n      @Override\n      public void setDocument(int docID) {\n        docToOrds.get(docID, ref);\n        input.reset(ref.bytes, ref.offset, ref.length);\n        currentOrd = 0;\n      }\n\n      @Override\n      public void lookupOrd(long ord, BytesRef result) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          result.bytes = new byte[output.length];\n          result.offset = 0;\n          result.length = 0;\n          Util.toBytesRef(output, result);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n\n      @Override\n      public TermsEnum termsEnum() {\n        return new FSTTermsEnum(fst);\n      }\n    };\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"5c2b6033d1fc841b41dbf56c765ce3dc053ecba6","date":1363054647,"type":3,"author":"Robert Muir","isMerge":false,"pathNew":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","pathOld":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","sourceNew":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    if (entry.numOrds == 0) {\n      return SortedSetDocValues.EMPTY; // empty FST!\n    }\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<Long>(data, PositiveIntOutputs.getSingleton(true));\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<Long>();\n    final Arc<Long> scratchArc = new Arc<Long>();\n    final IntsRef scratchInts = new IntsRef();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<Long>(fst); \n    final BytesRef ref = new BytesRef();\n    final ByteArrayDataInput input = new ByteArrayDataInput();\n    return new SortedSetDocValues() {\n      long currentOrd;\n\n      @Override\n      public long nextOrd() {\n        if (input.eof()) {\n          return NO_MORE_ORDS;\n        } else {\n          currentOrd += input.readVLong();\n          return currentOrd;\n        }\n      }\n      \n      @Override\n      public void setDocument(int docID) {\n        docToOrds.get(docID, ref);\n        input.reset(ref.bytes, ref.offset, ref.length);\n        currentOrd = 0;\n      }\n\n      @Override\n      public void lookupOrd(long ord, BytesRef result) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          result.bytes = new byte[output.length];\n          result.offset = 0;\n          result.length = 0;\n          Util.toBytesRef(output, result);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n\n      @Override\n      public TermsEnum termsEnum() {\n        return new FSTTermsEnum(fst);\n      }\n    };\n  }\n\n","sourceOld":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    if (entry.numOrds == 0) {\n      return SortedSetDocValues.EMPTY; // empty FST!\n    }\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<Long>(data, PositiveIntOutputs.getSingleton(true));\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<Long>();\n    final Arc<Long> scratchArc = new Arc<Long>();\n    final IntsRef scratchInts = new IntsRef();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<Long>(fst); \n    final BytesRef ref = new BytesRef();\n    final ByteArrayDataInput input = new ByteArrayDataInput();\n    return new SortedSetDocValues() {\n      long currentOrd;\n\n      @Override\n      public long nextOrd() {\n        if (input.eof()) {\n          return NO_MORE_ORDS;\n        } else {\n          currentOrd += input.readVLong();\n          return currentOrd;\n        }\n      }\n      \n      @Override\n      public void setDocument(int docID) {\n        docToOrds.get(docID, ref);\n        input.reset(ref.bytes, ref.offset, ref.length);\n        currentOrd = 0;\n      }\n\n      @Override\n      public void lookupOrd(long ord, BytesRef result) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          result.bytes = new byte[output.length];\n          result.offset = 0;\n          result.length = 0;\n          Util.toBytesRef(output, result);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n    };\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"6b1e6a1c51433ebaa34dc0b76d7ab1876072be39","date":1370266419,"type":3,"author":"Michael McCandless","isMerge":false,"pathNew":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","pathOld":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","sourceNew":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    if (entry.numOrds == 0) {\n      return SortedSetDocValues.EMPTY; // empty FST!\n    }\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<Long>(data, PositiveIntOutputs.getSingleton());\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<Long>();\n    final Arc<Long> scratchArc = new Arc<Long>();\n    final IntsRef scratchInts = new IntsRef();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<Long>(fst); \n    final BytesRef ref = new BytesRef();\n    final ByteArrayDataInput input = new ByteArrayDataInput();\n    return new SortedSetDocValues() {\n      long currentOrd;\n\n      @Override\n      public long nextOrd() {\n        if (input.eof()) {\n          return NO_MORE_ORDS;\n        } else {\n          currentOrd += input.readVLong();\n          return currentOrd;\n        }\n      }\n      \n      @Override\n      public void setDocument(int docID) {\n        docToOrds.get(docID, ref);\n        input.reset(ref.bytes, ref.offset, ref.length);\n        currentOrd = 0;\n      }\n\n      @Override\n      public void lookupOrd(long ord, BytesRef result) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          result.bytes = new byte[output.length];\n          result.offset = 0;\n          result.length = 0;\n          Util.toBytesRef(output, result);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n\n      @Override\n      public TermsEnum termsEnum() {\n        return new FSTTermsEnum(fst);\n      }\n    };\n  }\n\n","sourceOld":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    if (entry.numOrds == 0) {\n      return SortedSetDocValues.EMPTY; // empty FST!\n    }\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<Long>(data, PositiveIntOutputs.getSingleton(true));\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<Long>();\n    final Arc<Long> scratchArc = new Arc<Long>();\n    final IntsRef scratchInts = new IntsRef();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<Long>(fst); \n    final BytesRef ref = new BytesRef();\n    final ByteArrayDataInput input = new ByteArrayDataInput();\n    return new SortedSetDocValues() {\n      long currentOrd;\n\n      @Override\n      public long nextOrd() {\n        if (input.eof()) {\n          return NO_MORE_ORDS;\n        } else {\n          currentOrd += input.readVLong();\n          return currentOrd;\n        }\n      }\n      \n      @Override\n      public void setDocument(int docID) {\n        docToOrds.get(docID, ref);\n        input.reset(ref.bytes, ref.offset, ref.length);\n        currentOrd = 0;\n      }\n\n      @Override\n      public void lookupOrd(long ord, BytesRef result) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          result.bytes = new byte[output.length];\n          result.offset = 0;\n          result.length = 0;\n          Util.toBytesRef(output, result);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n\n      @Override\n      public TermsEnum termsEnum() {\n        return new FSTTermsEnum(fst);\n      }\n    };\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"dac1db31006989ae24922811f00f909d30f1391d","date":1387560411,"type":3,"author":"Adrien Grand","isMerge":false,"pathNew":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","pathOld":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","sourceNew":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    if (entry.numOrds == 0) {\n      return SortedSetDocValues.EMPTY; // empty FST!\n    }\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<Long>(data, PositiveIntOutputs.getSingleton());\n        ramBytesUsed.addAndGet(instance.sizeInBytes());\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<Long>();\n    final Arc<Long> scratchArc = new Arc<Long>();\n    final IntsRef scratchInts = new IntsRef();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<Long>(fst); \n    final BytesRef ref = new BytesRef();\n    final ByteArrayDataInput input = new ByteArrayDataInput();\n    return new SortedSetDocValues() {\n      long currentOrd;\n\n      @Override\n      public long nextOrd() {\n        if (input.eof()) {\n          return NO_MORE_ORDS;\n        } else {\n          currentOrd += input.readVLong();\n          return currentOrd;\n        }\n      }\n      \n      @Override\n      public void setDocument(int docID) {\n        docToOrds.get(docID, ref);\n        input.reset(ref.bytes, ref.offset, ref.length);\n        currentOrd = 0;\n      }\n\n      @Override\n      public void lookupOrd(long ord, BytesRef result) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          result.bytes = new byte[output.length];\n          result.offset = 0;\n          result.length = 0;\n          Util.toBytesRef(output, result);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n\n      @Override\n      public TermsEnum termsEnum() {\n        return new FSTTermsEnum(fst);\n      }\n    };\n  }\n\n","sourceOld":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    if (entry.numOrds == 0) {\n      return SortedSetDocValues.EMPTY; // empty FST!\n    }\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<Long>(data, PositiveIntOutputs.getSingleton());\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<Long>();\n    final Arc<Long> scratchArc = new Arc<Long>();\n    final IntsRef scratchInts = new IntsRef();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<Long>(fst); \n    final BytesRef ref = new BytesRef();\n    final ByteArrayDataInput input = new ByteArrayDataInput();\n    return new SortedSetDocValues() {\n      long currentOrd;\n\n      @Override\n      public long nextOrd() {\n        if (input.eof()) {\n          return NO_MORE_ORDS;\n        } else {\n          currentOrd += input.readVLong();\n          return currentOrd;\n        }\n      }\n      \n      @Override\n      public void setDocument(int docID) {\n        docToOrds.get(docID, ref);\n        input.reset(ref.bytes, ref.offset, ref.length);\n        currentOrd = 0;\n      }\n\n      @Override\n      public void lookupOrd(long ord, BytesRef result) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          result.bytes = new byte[output.length];\n          result.offset = 0;\n          result.length = 0;\n          Util.toBytesRef(output, result);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n\n      @Override\n      public TermsEnum termsEnum() {\n        return new FSTTermsEnum(fst);\n      }\n    };\n  }\n\n","bugFix":null,"bugIntro":["8405d98acebb7e287bf7ac40e937ba05b8661285"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"634f330c54fd3f9f491d52036dc3f40b4f4d8934","date":1394635157,"type":3,"author":"Robert Muir","isMerge":false,"pathNew":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","pathOld":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","sourceNew":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    if (entry.numOrds == 0) {\n      return SortedSetDocValues.EMPTY; // empty FST!\n    }\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<>(data, PositiveIntOutputs.getSingleton());\n        ramBytesUsed.addAndGet(instance.sizeInBytes());\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<>();\n    final Arc<Long> scratchArc = new Arc<>();\n    final IntsRef scratchInts = new IntsRef();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<>(fst);\n    final BytesRef ref = new BytesRef();\n    final ByteArrayDataInput input = new ByteArrayDataInput();\n    return new SortedSetDocValues() {\n      long currentOrd;\n\n      @Override\n      public long nextOrd() {\n        if (input.eof()) {\n          return NO_MORE_ORDS;\n        } else {\n          currentOrd += input.readVLong();\n          return currentOrd;\n        }\n      }\n      \n      @Override\n      public void setDocument(int docID) {\n        docToOrds.get(docID, ref);\n        input.reset(ref.bytes, ref.offset, ref.length);\n        currentOrd = 0;\n      }\n\n      @Override\n      public void lookupOrd(long ord, BytesRef result) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          result.bytes = new byte[output.length];\n          result.offset = 0;\n          result.length = 0;\n          Util.toBytesRef(output, result);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n\n      @Override\n      public TermsEnum termsEnum() {\n        return new FSTTermsEnum(fst);\n      }\n    };\n  }\n\n","sourceOld":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    if (entry.numOrds == 0) {\n      return SortedSetDocValues.EMPTY; // empty FST!\n    }\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<Long>(data, PositiveIntOutputs.getSingleton());\n        ramBytesUsed.addAndGet(instance.sizeInBytes());\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<Long>();\n    final Arc<Long> scratchArc = new Arc<Long>();\n    final IntsRef scratchInts = new IntsRef();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<Long>(fst); \n    final BytesRef ref = new BytesRef();\n    final ByteArrayDataInput input = new ByteArrayDataInput();\n    return new SortedSetDocValues() {\n      long currentOrd;\n\n      @Override\n      public long nextOrd() {\n        if (input.eof()) {\n          return NO_MORE_ORDS;\n        } else {\n          currentOrd += input.readVLong();\n          return currentOrd;\n        }\n      }\n      \n      @Override\n      public void setDocument(int docID) {\n        docToOrds.get(docID, ref);\n        input.reset(ref.bytes, ref.offset, ref.length);\n        currentOrd = 0;\n      }\n\n      @Override\n      public void lookupOrd(long ord, BytesRef result) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          result.bytes = new byte[output.length];\n          result.offset = 0;\n          result.length = 0;\n          Util.toBytesRef(output, result);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n\n      @Override\n      public TermsEnum termsEnum() {\n        return new FSTTermsEnum(fst);\n      }\n    };\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"8429ddf2214f2bf8abcbb5484fefef6aaf5c417e","date":1397206443,"type":3,"author":"Robert Muir","isMerge":false,"pathNew":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","pathOld":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","sourceNew":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    if (entry.numOrds == 0) {\n      return DocValues.EMPTY_SORTED_SET; // empty FST!\n    }\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<>(data, PositiveIntOutputs.getSingleton());\n        ramBytesUsed.addAndGet(instance.sizeInBytes());\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<>();\n    final Arc<Long> scratchArc = new Arc<>();\n    final IntsRef scratchInts = new IntsRef();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<>(fst);\n    final BytesRef ref = new BytesRef();\n    final ByteArrayDataInput input = new ByteArrayDataInput();\n    return new SortedSetDocValues() {\n      long currentOrd;\n\n      @Override\n      public long nextOrd() {\n        if (input.eof()) {\n          return NO_MORE_ORDS;\n        } else {\n          currentOrd += input.readVLong();\n          return currentOrd;\n        }\n      }\n      \n      @Override\n      public void setDocument(int docID) {\n        docToOrds.get(docID, ref);\n        input.reset(ref.bytes, ref.offset, ref.length);\n        currentOrd = 0;\n      }\n\n      @Override\n      public void lookupOrd(long ord, BytesRef result) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          result.bytes = new byte[output.length];\n          result.offset = 0;\n          result.length = 0;\n          Util.toBytesRef(output, result);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n\n      @Override\n      public TermsEnum termsEnum() {\n        return new FSTTermsEnum(fst);\n      }\n    };\n  }\n\n","sourceOld":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    if (entry.numOrds == 0) {\n      return SortedSetDocValues.EMPTY; // empty FST!\n    }\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<>(data, PositiveIntOutputs.getSingleton());\n        ramBytesUsed.addAndGet(instance.sizeInBytes());\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<>();\n    final Arc<Long> scratchArc = new Arc<>();\n    final IntsRef scratchInts = new IntsRef();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<>(fst);\n    final BytesRef ref = new BytesRef();\n    final ByteArrayDataInput input = new ByteArrayDataInput();\n    return new SortedSetDocValues() {\n      long currentOrd;\n\n      @Override\n      public long nextOrd() {\n        if (input.eof()) {\n          return NO_MORE_ORDS;\n        } else {\n          currentOrd += input.readVLong();\n          return currentOrd;\n        }\n      }\n      \n      @Override\n      public void setDocument(int docID) {\n        docToOrds.get(docID, ref);\n        input.reset(ref.bytes, ref.offset, ref.length);\n        currentOrd = 0;\n      }\n\n      @Override\n      public void lookupOrd(long ord, BytesRef result) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          result.bytes = new byte[output.length];\n          result.offset = 0;\n          result.length = 0;\n          Util.toBytesRef(output, result);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n\n      @Override\n      public TermsEnum termsEnum() {\n        return new FSTTermsEnum(fst);\n      }\n    };\n  }\n\n","bugFix":["4c54a8d0edc6c5b7196804fa09a42a607b4aad35"],"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"8405d98acebb7e287bf7ac40e937ba05b8661285","date":1401433291,"type":3,"author":"Adrien Grand","isMerge":false,"pathNew":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","pathOld":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","sourceNew":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    if (entry.numOrds == 0) {\n      return DocValues.EMPTY_SORTED_SET; // empty FST!\n    }\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<>(data, PositiveIntOutputs.getSingleton());\n        ramBytesUsed.addAndGet(instance.ramBytesUsed());\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<>();\n    final Arc<Long> scratchArc = new Arc<>();\n    final IntsRef scratchInts = new IntsRef();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<>(fst);\n    final BytesRef ref = new BytesRef();\n    final ByteArrayDataInput input = new ByteArrayDataInput();\n    return new SortedSetDocValues() {\n      long currentOrd;\n\n      @Override\n      public long nextOrd() {\n        if (input.eof()) {\n          return NO_MORE_ORDS;\n        } else {\n          currentOrd += input.readVLong();\n          return currentOrd;\n        }\n      }\n      \n      @Override\n      public void setDocument(int docID) {\n        docToOrds.get(docID, ref);\n        input.reset(ref.bytes, ref.offset, ref.length);\n        currentOrd = 0;\n      }\n\n      @Override\n      public void lookupOrd(long ord, BytesRef result) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          result.bytes = new byte[output.length];\n          result.offset = 0;\n          result.length = 0;\n          Util.toBytesRef(output, result);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n\n      @Override\n      public TermsEnum termsEnum() {\n        return new FSTTermsEnum(fst);\n      }\n    };\n  }\n\n","sourceOld":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    if (entry.numOrds == 0) {\n      return DocValues.EMPTY_SORTED_SET; // empty FST!\n    }\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<>(data, PositiveIntOutputs.getSingleton());\n        ramBytesUsed.addAndGet(instance.sizeInBytes());\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<>();\n    final Arc<Long> scratchArc = new Arc<>();\n    final IntsRef scratchInts = new IntsRef();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<>(fst);\n    final BytesRef ref = new BytesRef();\n    final ByteArrayDataInput input = new ByteArrayDataInput();\n    return new SortedSetDocValues() {\n      long currentOrd;\n\n      @Override\n      public long nextOrd() {\n        if (input.eof()) {\n          return NO_MORE_ORDS;\n        } else {\n          currentOrd += input.readVLong();\n          return currentOrd;\n        }\n      }\n      \n      @Override\n      public void setDocument(int docID) {\n        docToOrds.get(docID, ref);\n        input.reset(ref.bytes, ref.offset, ref.length);\n        currentOrd = 0;\n      }\n\n      @Override\n      public void lookupOrd(long ord, BytesRef result) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          result.bytes = new byte[output.length];\n          result.offset = 0;\n          result.length = 0;\n          Util.toBytesRef(output, result);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n\n      @Override\n      public TermsEnum termsEnum() {\n        return new FSTTermsEnum(fst);\n      }\n    };\n  }\n\n","bugFix":["dac1db31006989ae24922811f00f909d30f1391d"],"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"53fc2f4c5ce4f2053be3d5f5d14d79129ebb4bbf","date":1401983689,"type":3,"author":"Robert Muir","isMerge":false,"pathNew":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","pathOld":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","sourceNew":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    if (entry.numOrds == 0) {\n      return DocValues.emptySortedSet(); // empty FST!\n    }\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<>(data, PositiveIntOutputs.getSingleton());\n        ramBytesUsed.addAndGet(instance.ramBytesUsed());\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<>();\n    final Arc<Long> scratchArc = new Arc<>();\n    final IntsRef scratchInts = new IntsRef();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<>(fst);\n    final ByteArrayDataInput input = new ByteArrayDataInput();\n    return new SortedSetDocValues() {\n      final BytesRef term = new BytesRef();\n      BytesRef ordsRef;\n      long currentOrd;\n\n      @Override\n      public long nextOrd() {\n        if (input.eof()) {\n          return NO_MORE_ORDS;\n        } else {\n          currentOrd += input.readVLong();\n          return currentOrd;\n        }\n      }\n      \n      @Override\n      public void setDocument(int docID) {\n        ordsRef = docToOrds.get(docID);\n        input.reset(ordsRef.bytes, ordsRef.offset, ordsRef.length);\n        currentOrd = 0;\n      }\n\n      @Override\n      public BytesRef lookupOrd(long ord) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          term.bytes = ArrayUtil.grow(term.bytes, output.length);\n          term.offset = 0;\n          term.length = 0;\n          return Util.toBytesRef(output, term);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n\n      @Override\n      public TermsEnum termsEnum() {\n        return new FSTTermsEnum(fst);\n      }\n    };\n  }\n\n","sourceOld":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    if (entry.numOrds == 0) {\n      return DocValues.EMPTY_SORTED_SET; // empty FST!\n    }\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<>(data, PositiveIntOutputs.getSingleton());\n        ramBytesUsed.addAndGet(instance.ramBytesUsed());\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<>();\n    final Arc<Long> scratchArc = new Arc<>();\n    final IntsRef scratchInts = new IntsRef();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<>(fst);\n    final BytesRef ref = new BytesRef();\n    final ByteArrayDataInput input = new ByteArrayDataInput();\n    return new SortedSetDocValues() {\n      long currentOrd;\n\n      @Override\n      public long nextOrd() {\n        if (input.eof()) {\n          return NO_MORE_ORDS;\n        } else {\n          currentOrd += input.readVLong();\n          return currentOrd;\n        }\n      }\n      \n      @Override\n      public void setDocument(int docID) {\n        docToOrds.get(docID, ref);\n        input.reset(ref.bytes, ref.offset, ref.length);\n        currentOrd = 0;\n      }\n\n      @Override\n      public void lookupOrd(long ord, BytesRef result) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          result.bytes = new byte[output.length];\n          result.offset = 0;\n          result.length = 0;\n          Util.toBytesRef(output, result);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n\n      @Override\n      public TermsEnum termsEnum() {\n        return new FSTTermsEnum(fst);\n      }\n    };\n  }\n\n","bugFix":null,"bugIntro":["7dc6ea5fd38ce7aa8f36b3bac8b757da77f31d50"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"7dc6ea5fd38ce7aa8f36b3bac8b757da77f31d50","date":1407854805,"type":3,"author":"Adrien Grand","isMerge":false,"pathNew":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","pathOld":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","sourceNew":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    if (entry.numOrds == 0) {\n      return DocValues.emptySortedSet(); // empty FST!\n    }\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<>(data, PositiveIntOutputs.getSingleton());\n        ramBytesUsed.addAndGet(instance.ramBytesUsed());\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<>();\n    final Arc<Long> scratchArc = new Arc<>();\n    final IntsRefBuilder scratchInts = new IntsRefBuilder();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<>(fst);\n    final ByteArrayDataInput input = new ByteArrayDataInput();\n    return new SortedSetDocValues() {\n      final BytesRefBuilder term = new BytesRefBuilder();\n      BytesRef ordsRef;\n      long currentOrd;\n\n      @Override\n      public long nextOrd() {\n        if (input.eof()) {\n          return NO_MORE_ORDS;\n        } else {\n          currentOrd += input.readVLong();\n          return currentOrd;\n        }\n      }\n      \n      @Override\n      public void setDocument(int docID) {\n        ordsRef = docToOrds.get(docID);\n        input.reset(ordsRef.bytes, ordsRef.offset, ordsRef.length);\n        currentOrd = 0;\n      }\n\n      @Override\n      public BytesRef lookupOrd(long ord) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          term.grow(output.length);\n          term.clear();\n          return Util.toBytesRef(output, term);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n\n      @Override\n      public TermsEnum termsEnum() {\n        return new FSTTermsEnum(fst);\n      }\n    };\n  }\n\n","sourceOld":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    if (entry.numOrds == 0) {\n      return DocValues.emptySortedSet(); // empty FST!\n    }\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<>(data, PositiveIntOutputs.getSingleton());\n        ramBytesUsed.addAndGet(instance.ramBytesUsed());\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<>();\n    final Arc<Long> scratchArc = new Arc<>();\n    final IntsRef scratchInts = new IntsRef();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<>(fst);\n    final ByteArrayDataInput input = new ByteArrayDataInput();\n    return new SortedSetDocValues() {\n      final BytesRef term = new BytesRef();\n      BytesRef ordsRef;\n      long currentOrd;\n\n      @Override\n      public long nextOrd() {\n        if (input.eof()) {\n          return NO_MORE_ORDS;\n        } else {\n          currentOrd += input.readVLong();\n          return currentOrd;\n        }\n      }\n      \n      @Override\n      public void setDocument(int docID) {\n        ordsRef = docToOrds.get(docID);\n        input.reset(ordsRef.bytes, ordsRef.offset, ordsRef.length);\n        currentOrd = 0;\n      }\n\n      @Override\n      public BytesRef lookupOrd(long ord) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          term.bytes = ArrayUtil.grow(term.bytes, output.length);\n          term.offset = 0;\n          term.length = 0;\n          return Util.toBytesRef(output, term);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n\n      @Override\n      public TermsEnum termsEnum() {\n        return new FSTTermsEnum(fst);\n      }\n    };\n  }\n\n","bugFix":["f366ce28775e2b8ea4e06355009471328711666d","53fc2f4c5ce4f2053be3d5f5d14d79129ebb4bbf"],"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"4cc45c615dbb82bf79d5f9550286098367874fbf","date":1409571423,"type":5,"author":"Adrien Grand","isMerge":false,"pathNew":"lucene/backward-codecs/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","pathOld":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","sourceNew":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    if (entry.numOrds == 0) {\n      return DocValues.emptySortedSet(); // empty FST!\n    }\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<>(data, PositiveIntOutputs.getSingleton());\n        ramBytesUsed.addAndGet(instance.ramBytesUsed());\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<>();\n    final Arc<Long> scratchArc = new Arc<>();\n    final IntsRefBuilder scratchInts = new IntsRefBuilder();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<>(fst);\n    final ByteArrayDataInput input = new ByteArrayDataInput();\n    return new SortedSetDocValues() {\n      final BytesRefBuilder term = new BytesRefBuilder();\n      BytesRef ordsRef;\n      long currentOrd;\n\n      @Override\n      public long nextOrd() {\n        if (input.eof()) {\n          return NO_MORE_ORDS;\n        } else {\n          currentOrd += input.readVLong();\n          return currentOrd;\n        }\n      }\n      \n      @Override\n      public void setDocument(int docID) {\n        ordsRef = docToOrds.get(docID);\n        input.reset(ordsRef.bytes, ordsRef.offset, ordsRef.length);\n        currentOrd = 0;\n      }\n\n      @Override\n      public BytesRef lookupOrd(long ord) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          term.grow(output.length);\n          term.clear();\n          return Util.toBytesRef(output, term);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n\n      @Override\n      public TermsEnum termsEnum() {\n        return new FSTTermsEnum(fst);\n      }\n    };\n  }\n\n","sourceOld":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    if (entry.numOrds == 0) {\n      return DocValues.emptySortedSet(); // empty FST!\n    }\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<>(data, PositiveIntOutputs.getSingleton());\n        ramBytesUsed.addAndGet(instance.ramBytesUsed());\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<>();\n    final Arc<Long> scratchArc = new Arc<>();\n    final IntsRefBuilder scratchInts = new IntsRefBuilder();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<>(fst);\n    final ByteArrayDataInput input = new ByteArrayDataInput();\n    return new SortedSetDocValues() {\n      final BytesRefBuilder term = new BytesRefBuilder();\n      BytesRef ordsRef;\n      long currentOrd;\n\n      @Override\n      public long nextOrd() {\n        if (input.eof()) {\n          return NO_MORE_ORDS;\n        } else {\n          currentOrd += input.readVLong();\n          return currentOrd;\n        }\n      }\n      \n      @Override\n      public void setDocument(int docID) {\n        ordsRef = docToOrds.get(docID);\n        input.reset(ordsRef.bytes, ordsRef.offset, ordsRef.length);\n        currentOrd = 0;\n      }\n\n      @Override\n      public BytesRef lookupOrd(long ord) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          term.grow(output.length);\n          term.clear();\n          return Util.toBytesRef(output, term);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n\n      @Override\n      public TermsEnum termsEnum() {\n        return new FSTTermsEnum(fst);\n      }\n    };\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"402ad3ddc9da7b70da1b167667a60ece6a1381fb","date":1409656478,"type":5,"author":"Robert Muir","isMerge":true,"pathNew":"lucene/backward-codecs/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","pathOld":"lucene/core/src/java/org/apache/lucene/codecs/lucene42/Lucene42DocValuesProducer#getSortedSet(FieldInfo).mjava","sourceNew":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    if (entry.numOrds == 0) {\n      return DocValues.emptySortedSet(); // empty FST!\n    }\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<>(data, PositiveIntOutputs.getSingleton());\n        ramBytesUsed.addAndGet(instance.ramBytesUsed());\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<>();\n    final Arc<Long> scratchArc = new Arc<>();\n    final IntsRefBuilder scratchInts = new IntsRefBuilder();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<>(fst);\n    final ByteArrayDataInput input = new ByteArrayDataInput();\n    return new SortedSetDocValues() {\n      final BytesRefBuilder term = new BytesRefBuilder();\n      BytesRef ordsRef;\n      long currentOrd;\n\n      @Override\n      public long nextOrd() {\n        if (input.eof()) {\n          return NO_MORE_ORDS;\n        } else {\n          currentOrd += input.readVLong();\n          return currentOrd;\n        }\n      }\n      \n      @Override\n      public void setDocument(int docID) {\n        ordsRef = docToOrds.get(docID);\n        input.reset(ordsRef.bytes, ordsRef.offset, ordsRef.length);\n        currentOrd = 0;\n      }\n\n      @Override\n      public BytesRef lookupOrd(long ord) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          term.grow(output.length);\n          term.clear();\n          return Util.toBytesRef(output, term);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n\n      @Override\n      public TermsEnum termsEnum() {\n        return new FSTTermsEnum(fst);\n      }\n    };\n  }\n\n","sourceOld":"  @Override\n  public SortedSetDocValues getSortedSet(FieldInfo field) throws IOException {\n    final FSTEntry entry = fsts.get(field.number);\n    if (entry.numOrds == 0) {\n      return DocValues.emptySortedSet(); // empty FST!\n    }\n    FST<Long> instance;\n    synchronized(this) {\n      instance = fstInstances.get(field.number);\n      if (instance == null) {\n        data.seek(entry.offset);\n        instance = new FST<>(data, PositiveIntOutputs.getSingleton());\n        ramBytesUsed.addAndGet(instance.ramBytesUsed());\n        fstInstances.put(field.number, instance);\n      }\n    }\n    final BinaryDocValues docToOrds = getBinary(field);\n    final FST<Long> fst = instance;\n    \n    // per-thread resources\n    final BytesReader in = fst.getBytesReader();\n    final Arc<Long> firstArc = new Arc<>();\n    final Arc<Long> scratchArc = new Arc<>();\n    final IntsRefBuilder scratchInts = new IntsRefBuilder();\n    final BytesRefFSTEnum<Long> fstEnum = new BytesRefFSTEnum<>(fst);\n    final ByteArrayDataInput input = new ByteArrayDataInput();\n    return new SortedSetDocValues() {\n      final BytesRefBuilder term = new BytesRefBuilder();\n      BytesRef ordsRef;\n      long currentOrd;\n\n      @Override\n      public long nextOrd() {\n        if (input.eof()) {\n          return NO_MORE_ORDS;\n        } else {\n          currentOrd += input.readVLong();\n          return currentOrd;\n        }\n      }\n      \n      @Override\n      public void setDocument(int docID) {\n        ordsRef = docToOrds.get(docID);\n        input.reset(ordsRef.bytes, ordsRef.offset, ordsRef.length);\n        currentOrd = 0;\n      }\n\n      @Override\n      public BytesRef lookupOrd(long ord) {\n        try {\n          in.setPosition(0);\n          fst.getFirstArc(firstArc);\n          IntsRef output = Util.getByOutput(fst, ord, in, firstArc, scratchArc, scratchInts);\n          term.grow(output.length);\n          term.clear();\n          return Util.toBytesRef(output, term);\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long lookupTerm(BytesRef key) {\n        try {\n          InputOutput<Long> o = fstEnum.seekCeil(key);\n          if (o == null) {\n            return -getValueCount()-1;\n          } else if (o.input.equals(key)) {\n            return o.output.intValue();\n          } else {\n            return -o.output-1;\n          }\n        } catch (IOException bogus) {\n          throw new RuntimeException(bogus);\n        }\n      }\n\n      @Override\n      public long getValueCount() {\n        return entry.numOrds;\n      }\n\n      @Override\n      public TermsEnum termsEnum() {\n        return new FSTTermsEnum(fst);\n      }\n    };\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"3fa20a3abac513546891f11898093eaf5828f7ab":["f366ce28775e2b8ea4e06355009471328711666d"],"634f330c54fd3f9f491d52036dc3f40b4f4d8934":["dac1db31006989ae24922811f00f909d30f1391d"],"8405d98acebb7e287bf7ac40e937ba05b8661285":["8429ddf2214f2bf8abcbb5484fefef6aaf5c417e"],"53fc2f4c5ce4f2053be3d5f5d14d79129ebb4bbf":["8405d98acebb7e287bf7ac40e937ba05b8661285"],"7dc6ea5fd38ce7aa8f36b3bac8b757da77f31d50":["53fc2f4c5ce4f2053be3d5f5d14d79129ebb4bbf"],"ddbb72a33557d2b5bc22ee95daf3281c43560502":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","4c54a8d0edc6c5b7196804fa09a42a607b4aad35"],"8429ddf2214f2bf8abcbb5484fefef6aaf5c417e":["634f330c54fd3f9f491d52036dc3f40b4f4d8934"],"6b1e6a1c51433ebaa34dc0b76d7ab1876072be39":["5c2b6033d1fc841b41dbf56c765ce3dc053ecba6"],"402ad3ddc9da7b70da1b167667a60ece6a1381fb":["7dc6ea5fd38ce7aa8f36b3bac8b757da77f31d50","4cc45c615dbb82bf79d5f9550286098367874fbf"],"5c2b6033d1fc841b41dbf56c765ce3dc053ecba6":["64e6baad25b7155a116cb0126b4e2a06b945a5c5"],"7e129598ae448211d969dd7cdf2ad4558a0658a1":["ddbb72a33557d2b5bc22ee95daf3281c43560502"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"4cc45c615dbb82bf79d5f9550286098367874fbf":["7dc6ea5fd38ce7aa8f36b3bac8b757da77f31d50"],"dac1db31006989ae24922811f00f909d30f1391d":["6b1e6a1c51433ebaa34dc0b76d7ab1876072be39"],"64e6baad25b7155a116cb0126b4e2a06b945a5c5":["7e129598ae448211d969dd7cdf2ad4558a0658a1"],"f366ce28775e2b8ea4e06355009471328711666d":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"4c54a8d0edc6c5b7196804fa09a42a607b4aad35":["988e3f44fe797ee94a0135abfe27e5872b99844d"],"988e3f44fe797ee94a0135abfe27e5872b99844d":["3fa20a3abac513546891f11898093eaf5828f7ab"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["402ad3ddc9da7b70da1b167667a60ece6a1381fb"]},"commit2Childs":{"3fa20a3abac513546891f11898093eaf5828f7ab":["988e3f44fe797ee94a0135abfe27e5872b99844d"],"634f330c54fd3f9f491d52036dc3f40b4f4d8934":["8429ddf2214f2bf8abcbb5484fefef6aaf5c417e"],"8405d98acebb7e287bf7ac40e937ba05b8661285":["53fc2f4c5ce4f2053be3d5f5d14d79129ebb4bbf"],"53fc2f4c5ce4f2053be3d5f5d14d79129ebb4bbf":["7dc6ea5fd38ce7aa8f36b3bac8b757da77f31d50"],"7dc6ea5fd38ce7aa8f36b3bac8b757da77f31d50":["402ad3ddc9da7b70da1b167667a60ece6a1381fb","4cc45c615dbb82bf79d5f9550286098367874fbf"],"ddbb72a33557d2b5bc22ee95daf3281c43560502":["7e129598ae448211d969dd7cdf2ad4558a0658a1"],"8429ddf2214f2bf8abcbb5484fefef6aaf5c417e":["8405d98acebb7e287bf7ac40e937ba05b8661285"],"6b1e6a1c51433ebaa34dc0b76d7ab1876072be39":["dac1db31006989ae24922811f00f909d30f1391d"],"402ad3ddc9da7b70da1b167667a60ece6a1381fb":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"5c2b6033d1fc841b41dbf56c765ce3dc053ecba6":["6b1e6a1c51433ebaa34dc0b76d7ab1876072be39"],"7e129598ae448211d969dd7cdf2ad4558a0658a1":["64e6baad25b7155a116cb0126b4e2a06b945a5c5"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["ddbb72a33557d2b5bc22ee95daf3281c43560502","f366ce28775e2b8ea4e06355009471328711666d"],"4cc45c615dbb82bf79d5f9550286098367874fbf":["402ad3ddc9da7b70da1b167667a60ece6a1381fb"],"dac1db31006989ae24922811f00f909d30f1391d":["634f330c54fd3f9f491d52036dc3f40b4f4d8934"],"f366ce28775e2b8ea4e06355009471328711666d":["3fa20a3abac513546891f11898093eaf5828f7ab"],"64e6baad25b7155a116cb0126b4e2a06b945a5c5":["5c2b6033d1fc841b41dbf56c765ce3dc053ecba6"],"4c54a8d0edc6c5b7196804fa09a42a607b4aad35":["ddbb72a33557d2b5bc22ee95daf3281c43560502"],"988e3f44fe797ee94a0135abfe27e5872b99844d":["4c54a8d0edc6c5b7196804fa09a42a607b4aad35"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}