{"path":"solr/core/src/java/org/apache/solr/handler/component/CloudReplicaSource#findReplicas(Builder,String,ClusterState,Slice).mjava","commits":[{"id":"cc28b46d62a8b91c8e90f9345612c4050eab98d4","date":1581344825,"type":0,"author":"Shalin Shekhar Mangar","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/handler/component/CloudReplicaSource#findReplicas(Builder,String,ClusterState,Slice).mjava","pathOld":"/dev/null","sourceNew":"  private List<String> findReplicas(Builder builder, String shardsParam, ClusterState clusterState, Slice slice) {\n    if (slice == null) {\n      // Treat this the same as \"all servers down\" for a slice, and let things continue\n      // if partial results are acceptable\n      return Collections.emptyList();\n    } else {\n      final Predicate<Replica> isShardLeader = new IsLeaderPredicate(builder.zkStateReader, clusterState, slice.getCollection(), slice.getName());\n      List<Replica> list = slice.getReplicas()\n          .stream()\n          .filter(replica -> replica.isActive(clusterState.getLiveNodes()))\n          .filter(replica -> !builder.onlyNrt || (replica.getType() == Replica.Type.NRT || (replica.getType() == Replica.Type.TLOG && isShardLeader.test(replica))))\n          .collect(Collectors.toList());\n      builder.replicaListTransformer.transform(list);\n      List<String> collect = list.stream().map(Replica::getCoreUrl).collect(Collectors.toList());\n      builder.hostChecker.checkWhitelist(clusterState, shardsParam, collect);\n      return collect;\n    }\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cc28b46d62a8b91c8e90f9345612c4050eab98d4":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["cc28b46d62a8b91c8e90f9345612c4050eab98d4"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["cc28b46d62a8b91c8e90f9345612c4050eab98d4"],"cc28b46d62a8b91c8e90f9345612c4050eab98d4":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}