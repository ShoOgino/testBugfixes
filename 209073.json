{"path":"solr/core/src/test/org/apache/solr/search/TestMultiWordSynonyms#testPf().mjava","commits":[{"id":"c7a49f8dc38a90fbd6c7edac0845981e0b0a7f21","date":1541431969,"type":0,"author":"Steve Rowe","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/search/TestMultiWordSynonyms#testPf().mjava","pathOld":"/dev/null","sourceNew":"  @Test\n  public void testPf() throws Exception {\n    // test phrase fields including pf2 pf3 and phrase slop\n    // same as edismax test, but \"bar\" is synonym for \"tropical cyclone\" here\n    assertU(adoc(\"id\", \"10\", \"text\", \"foo bar a b c\", \"boost_d\", \"1.0\"));\n    assertU(adoc(\"id\", \"11\", \"text\", \"foo a bar b c\", \"boost_d\", \"2.0\"));\n    assertU(adoc(\"id\", \"12\", \"text\", \"foo a b bar c\", \"boost_d\", \"3.0\"));\n    assertU(adoc(\"id\", \"13\", \"text\", \"foo a b c bar\", \"boost_d\", \"4.0\"));\n    assertU(commit());\n\n    assertQ(\"default order assumption wrong\",\n        req(\"q\", \"foo bar\",\n            \"qf\", \"text\",\n            \"bf\", \"boost_d\",\n            \"fl\", \"score,*\",\n            \"defType\", \"edismax\"),\n        \"//doc[1]/str[@name='id'][.='13']\",\n        \"//doc[2]/str[@name='id'][.='12']\",\n        \"//doc[3]/str[@name='id'][.='11']\",\n        \"//doc[4]/str[@name='id'][.='10']\");\n\n    assertQ(\"default order assumption wrong\",\n        req(\"q\", \"foo tropical cyclone\",\n            \"qf\", \"text\",\n            \"bf\", \"boost_d\",\n            \"fl\", \"score,*\",\n            \"defType\", \"edismax\"),\n        \"//doc[1]/str[@name='id'][.='13']\",\n        \"//doc[2]/str[@name='id'][.='12']\",\n        \"//doc[3]/str[@name='id'][.='11']\",\n        \"//doc[4]/str[@name='id'][.='10']\");\n\n    assertQ(\"pf not working\",\n        req(\"q\", \"foo bar\",\n            \"qf\", \"text\",\n            \"pf\", \"text^10\",\n            \"fl\", \"score,*\",\n            \"bf\", \"boost_d\",\n            \"defType\", \"edismax\"),\n        \"//doc[1]/str[@name='id'][.='10']\");\n\n    assertQ(\"pf not working\",\n        req(\"q\", \"foo tropical cyclone\",\n            \"qf\", \"text\",\n            \"pf\", \"text^10\",\n            \"fl\", \"score,*\",\n            \"bf\", \"boost_d\",\n            \"defType\", \"edismax\"),\n        \"//doc[1]/str[@name='id'][.='10']\");\n\n    assertQ(\"pf2 not working\",\n        req(\"q\", \"foo bar\",\n            \"qf\", \"text\",\n            \"pf2\", \"text^10\",\n            \"fl\", \"score,*\",\n            \"bf\", \"boost_d\",\n            \"defType\", \"edismax\"),\n        \"//doc[1]/str[@name='id'][.='10']\");\n\n    assertQ(\"pf3 not working\",\n        req(\"q\", \"a b bar\",\n            \"qf\", \"text\",\n            \"pf3\", \"text^10\",\n            \"fl\", \"score,*\",\n            \"bf\", \"boost_d\",\n            \"defType\", \"edismax\"),\n        \"//doc[1]/str[@name='id'][.='12']\");\n\n    assertQ(\"pf3 not working\",\n        req(\"q\", \"a b tropical cyclone\",\n            \"qf\", \"text\",\n            \"pf3\", \"text^10\",\n            \"fl\", \"score,*\",\n            \"bf\", \"boost_d\",\n            \"defType\", \"edismax\"),\n        \"//doc[1]/str[@name='id'][.='12']\");\n\n    assertQ(\"ps not working for pf2\",\n        req(\"q\", \"bar foo\",\n            \"qf\", \"text\",\n            \"pf2\", \"text^10\",\n            \"ps\", \"2\",\n            \"fl\", \"score,*\",\n            \"defType\", \"edismax\"),\n        \"//doc[1]/str[@name='id'][.='10']\");\n\n    assertQ(\"ps not working for pf2\",\n        req(\"q\", \"tropical cyclone foo\",\n            \"qf\", \"text\",\n            \"pf2\", \"text^10\",\n            \"ps\", \"2\",\n            \"fl\", \"score,*\",\n            \"defType\", \"edismax\"),\n        \"//doc[1]/str[@name='id'][.='10']\");\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["c7a49f8dc38a90fbd6c7edac0845981e0b0a7f21"],"c7a49f8dc38a90fbd6c7edac0845981e0b0a7f21":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["c7a49f8dc38a90fbd6c7edac0845981e0b0a7f21"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[],"c7a49f8dc38a90fbd6c7edac0845981e0b0a7f21":["cd5edd1f2b162a5cfa08efd17851a07373a96817"]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}