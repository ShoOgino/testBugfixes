{"path":"lucene/facet/src/java/org/apache/lucene/facet/taxonomy/FastTaxonomyFacetCounts#countAll(IndexReader).mjava","commits":[{"id":"4b8b2bc4b8b503cc0b5743b19445798c62069e4d","date":1477390943,"type":0,"author":"Mike McCandless","isMerge":false,"pathNew":"lucene/facet/src/java/org/apache/lucene/facet/taxonomy/FastTaxonomyFacetCounts#countAll(IndexReader).mjava","pathOld":"/dev/null","sourceNew":"  private final void countAll(IndexReader reader) throws IOException {\n    for(LeafReaderContext context : reader.leaves()) {\n      BinaryDocValues dv = context.reader().getBinaryDocValues(indexFieldName);\n      if (dv == null) { // this reader does not have DocValues for the requested category list\n        continue;\n      }\n\n      Bits liveDocs = context.reader().getLiveDocs();\n\n      for (int doc = dv.nextDoc(); doc != DocIdSetIterator.NO_MORE_DOCS; doc = dv.nextDoc()) {\n        if (liveDocs != null && liveDocs.get(doc) == false) {\n          continue;\n        }\n        final BytesRef bytesRef = dv.binaryValue();\n        byte[] bytes = bytesRef.bytes;\n        int end = bytesRef.offset + bytesRef.length;\n        int ord = 0;\n        int offset = bytesRef.offset;\n        int prev = 0;\n        while (offset < end) {\n          byte b = bytes[offset++];\n          if (b >= 0) {\n            prev = ord = ((ord << 7) | b) + prev;\n            ++values[ord];\n            ord = 0;\n          } else {\n            ord = (ord << 7) | (b & 0x7F);\n          }\n        }\n      }\n    }\n\n    rollup();\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"60b61628d1912768f51eccaa8ead5a5a32ab34c6","date":1477427681,"type":0,"author":"Noble Paul","isMerge":true,"pathNew":"lucene/facet/src/java/org/apache/lucene/facet/taxonomy/FastTaxonomyFacetCounts#countAll(IndexReader).mjava","pathOld":"/dev/null","sourceNew":"  private final void countAll(IndexReader reader) throws IOException {\n    for(LeafReaderContext context : reader.leaves()) {\n      BinaryDocValues dv = context.reader().getBinaryDocValues(indexFieldName);\n      if (dv == null) { // this reader does not have DocValues for the requested category list\n        continue;\n      }\n\n      Bits liveDocs = context.reader().getLiveDocs();\n\n      for (int doc = dv.nextDoc(); doc != DocIdSetIterator.NO_MORE_DOCS; doc = dv.nextDoc()) {\n        if (liveDocs != null && liveDocs.get(doc) == false) {\n          continue;\n        }\n        final BytesRef bytesRef = dv.binaryValue();\n        byte[] bytes = bytesRef.bytes;\n        int end = bytesRef.offset + bytesRef.length;\n        int ord = 0;\n        int offset = bytesRef.offset;\n        int prev = 0;\n        while (offset < end) {\n          byte b = bytes[offset++];\n          if (b >= 0) {\n            prev = ord = ((ord << 7) | b) + prev;\n            ++values[ord];\n            ord = 0;\n          } else {\n            ord = (ord << 7) | (b & 0x7F);\n          }\n        }\n      }\n    }\n\n    rollup();\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"80d0e6d59ae23f4a6f30eaf40bfb40742300287f","date":1477598926,"type":0,"author":"Kevin Risden","isMerge":true,"pathNew":"lucene/facet/src/java/org/apache/lucene/facet/taxonomy/FastTaxonomyFacetCounts#countAll(IndexReader).mjava","pathOld":"/dev/null","sourceNew":"  private final void countAll(IndexReader reader) throws IOException {\n    for(LeafReaderContext context : reader.leaves()) {\n      BinaryDocValues dv = context.reader().getBinaryDocValues(indexFieldName);\n      if (dv == null) { // this reader does not have DocValues for the requested category list\n        continue;\n      }\n\n      Bits liveDocs = context.reader().getLiveDocs();\n\n      for (int doc = dv.nextDoc(); doc != DocIdSetIterator.NO_MORE_DOCS; doc = dv.nextDoc()) {\n        if (liveDocs != null && liveDocs.get(doc) == false) {\n          continue;\n        }\n        final BytesRef bytesRef = dv.binaryValue();\n        byte[] bytes = bytesRef.bytes;\n        int end = bytesRef.offset + bytesRef.length;\n        int ord = 0;\n        int offset = bytesRef.offset;\n        int prev = 0;\n        while (offset < end) {\n          byte b = bytes[offset++];\n          if (b >= 0) {\n            prev = ord = ((ord << 7) | b) + prev;\n            ++values[ord];\n            ord = 0;\n          } else {\n            ord = (ord << 7) | (b & 0x7F);\n          }\n        }\n      }\n    }\n\n    rollup();\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"10b1c9af2d877ca8d718a359a4e5b285fe33b6f7","date":1509555533,"type":3,"author":"Mike McCandless","isMerge":false,"pathNew":"lucene/facet/src/java/org/apache/lucene/facet/taxonomy/FastTaxonomyFacetCounts#countAll(IndexReader).mjava","pathOld":"lucene/facet/src/java/org/apache/lucene/facet/taxonomy/FastTaxonomyFacetCounts#countAll(IndexReader).mjava","sourceNew":"  private final void countAll(IndexReader reader) throws IOException {\n    for(LeafReaderContext context : reader.leaves()) {\n      BinaryDocValues dv = context.reader().getBinaryDocValues(indexFieldName);\n      if (dv == null) { // this reader does not have DocValues for the requested category list\n        continue;\n      }\n\n      Bits liveDocs = context.reader().getLiveDocs();\n\n      for (int doc = dv.nextDoc(); doc != DocIdSetIterator.NO_MORE_DOCS; doc = dv.nextDoc()) {\n        if (liveDocs != null && liveDocs.get(doc) == false) {\n          continue;\n        }\n        final BytesRef bytesRef = dv.binaryValue();\n        byte[] bytes = bytesRef.bytes;\n        int end = bytesRef.offset + bytesRef.length;\n        int ord = 0;\n        int offset = bytesRef.offset;\n        int prev = 0;\n        while (offset < end) {\n          byte b = bytes[offset++];\n          if (b >= 0) {\n            prev = ord = ((ord << 7) | b) + prev;\n            increment(ord);\n            ord = 0;\n          } else {\n            ord = (ord << 7) | (b & 0x7F);\n          }\n        }\n      }\n    }\n\n    rollup();\n  }\n\n","sourceOld":"  private final void countAll(IndexReader reader) throws IOException {\n    for(LeafReaderContext context : reader.leaves()) {\n      BinaryDocValues dv = context.reader().getBinaryDocValues(indexFieldName);\n      if (dv == null) { // this reader does not have DocValues for the requested category list\n        continue;\n      }\n\n      Bits liveDocs = context.reader().getLiveDocs();\n\n      for (int doc = dv.nextDoc(); doc != DocIdSetIterator.NO_MORE_DOCS; doc = dv.nextDoc()) {\n        if (liveDocs != null && liveDocs.get(doc) == false) {\n          continue;\n        }\n        final BytesRef bytesRef = dv.binaryValue();\n        byte[] bytes = bytesRef.bytes;\n        int end = bytesRef.offset + bytesRef.length;\n        int ord = 0;\n        int offset = bytesRef.offset;\n        int prev = 0;\n        while (offset < end) {\n          byte b = bytes[offset++];\n          if (b >= 0) {\n            prev = ord = ((ord << 7) | b) + prev;\n            ++values[ord];\n            ord = 0;\n          } else {\n            ord = (ord << 7) | (b & 0x7F);\n          }\n        }\n      }\n    }\n\n    rollup();\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"60b61628d1912768f51eccaa8ead5a5a32ab34c6":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","4b8b2bc4b8b503cc0b5743b19445798c62069e4d"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"80d0e6d59ae23f4a6f30eaf40bfb40742300287f":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","60b61628d1912768f51eccaa8ead5a5a32ab34c6"],"4b8b2bc4b8b503cc0b5743b19445798c62069e4d":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["10b1c9af2d877ca8d718a359a4e5b285fe33b6f7"],"10b1c9af2d877ca8d718a359a4e5b285fe33b6f7":["60b61628d1912768f51eccaa8ead5a5a32ab34c6"]},"commit2Childs":{"60b61628d1912768f51eccaa8ead5a5a32ab34c6":["80d0e6d59ae23f4a6f30eaf40bfb40742300287f","10b1c9af2d877ca8d718a359a4e5b285fe33b6f7"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["60b61628d1912768f51eccaa8ead5a5a32ab34c6","80d0e6d59ae23f4a6f30eaf40bfb40742300287f","4b8b2bc4b8b503cc0b5743b19445798c62069e4d"],"80d0e6d59ae23f4a6f30eaf40bfb40742300287f":[],"4b8b2bc4b8b503cc0b5743b19445798c62069e4d":["60b61628d1912768f51eccaa8ead5a5a32ab34c6"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[],"10b1c9af2d877ca8d718a359a4e5b285fe33b6f7":["cd5edd1f2b162a5cfa08efd17851a07373a96817"]},"heads":["80d0e6d59ae23f4a6f30eaf40bfb40742300287f","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}