{"path":"lucene/src/java/org/apache/lucene/util/CodecUtil#checkHeader(IndexInput,String,int).mjava","commits":[{"id":"955c32f886db6f6356c9fcdea6b1f1cb4effda24","date":1270581567,"type":0,"author":"Uwe Schindler","isMerge":false,"pathNew":"lucene/src/java/org/apache/lucene/util/CodecUtil#checkHeader(IndexInput,String,int).mjava","pathOld":"/dev/null","sourceNew":"  public static int checkHeader(IndexInput in, String codec, int maxVersion)\n    throws IOException {\n\n    // Safety to guard against reading a bogus string:\n    final int actualHeader = in.readInt();\n    if (actualHeader != CODEC_MAGIC) {\n      throw new CorruptIndexException(\"codec header mismatch: actual header=\" + actualHeader + \" vs expected header=\" + CODEC_MAGIC);\n    }\n\n    final String actualCodec = in.readString();\n    if (!actualCodec.equals(codec)) {\n      throw new CorruptIndexException(\"codec mismatch: actual codec=\" + actualCodec + \" vs expected codec=\" + codec);\n    }\n\n    final int actualVersion = in.readInt();\n    if (actualVersion > maxVersion) {\n      throw new CorruptIndexException(\"version \" + actualVersion + \" is too new (expected <= version \" + maxVersion + \")\");\n    }\n\n    return actualVersion;\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":["5f6bd27530a2846413fe2d00030493c0e2d3a072","5f6bd27530a2846413fe2d00030493c0e2d3a072","5f6bd27530a2846413fe2d00030493c0e2d3a072","5f6bd27530a2846413fe2d00030493c0e2d3a072"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"0cd8367c3d48e4b63dee1895a261d4986c716bbb","date":1279637747,"type":5,"author":"Uwe Schindler","isMerge":false,"pathNew":"lucene/src/java/org/apache/lucene/util/CodecUtil#checkHeader(IndexInput,String,int,int).mjava","pathOld":"lucene/src/java/org/apache/lucene/util/CodecUtil#checkHeader(IndexInput,String,int).mjava","sourceNew":"  public static int checkHeader(IndexInput in, String codec, int minVersion, int maxVersion)\n    throws IOException {\n\n    // Safety to guard against reading a bogus string:\n    final int actualHeader = in.readInt();\n    if (actualHeader != CODEC_MAGIC) {\n      throw new CorruptIndexException(\"codec header mismatch: actual header=\" + actualHeader + \" vs expected header=\" + CODEC_MAGIC);\n    }\n\n    final String actualCodec = in.readString();\n    if (!actualCodec.equals(codec)) {\n      throw new CorruptIndexException(\"codec mismatch: actual codec=\" + actualCodec + \" vs expected codec=\" + codec);\n    }\n\n    final int actualVersion = in.readInt();\n    if (actualVersion < minVersion) {\n      throw new IndexFormatTooOldException(null, actualVersion, minVersion, maxVersion);\n    }\n    if (actualVersion > maxVersion) {\n      throw new IndexFormatTooNewException(null, actualVersion, minVersion, maxVersion);\n    }\n\n    return actualVersion;\n  }\n\n","sourceOld":"  public static int checkHeader(IndexInput in, String codec, int maxVersion)\n    throws IOException {\n\n    // Safety to guard against reading a bogus string:\n    final int actualHeader = in.readInt();\n    if (actualHeader != CODEC_MAGIC) {\n      throw new CorruptIndexException(\"codec header mismatch: actual header=\" + actualHeader + \" vs expected header=\" + CODEC_MAGIC);\n    }\n\n    final String actualCodec = in.readString();\n    if (!actualCodec.equals(codec)) {\n      throw new CorruptIndexException(\"codec mismatch: actual codec=\" + actualCodec + \" vs expected codec=\" + codec);\n    }\n\n    final int actualVersion = in.readInt();\n    if (actualVersion > maxVersion) {\n      throw new CorruptIndexException(\"version \" + actualVersion + \" is too new (expected <= version \" + maxVersion + \")\");\n    }\n\n    return actualVersion;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"5f4e87790277826a2aea119328600dfb07761f32","date":1279827275,"type":4,"author":"Michael Busch","isMerge":true,"pathNew":"/dev/null","pathOld":"lucene/src/java/org/apache/lucene/util/CodecUtil#checkHeader(IndexInput,String,int).mjava","sourceNew":null,"sourceOld":"  public static int checkHeader(IndexInput in, String codec, int maxVersion)\n    throws IOException {\n\n    // Safety to guard against reading a bogus string:\n    final int actualHeader = in.readInt();\n    if (actualHeader != CODEC_MAGIC) {\n      throw new CorruptIndexException(\"codec header mismatch: actual header=\" + actualHeader + \" vs expected header=\" + CODEC_MAGIC);\n    }\n\n    final String actualCodec = in.readString();\n    if (!actualCodec.equals(codec)) {\n      throw new CorruptIndexException(\"codec mismatch: actual codec=\" + actualCodec + \" vs expected codec=\" + codec);\n    }\n\n    final int actualVersion = in.readInt();\n    if (actualVersion > maxVersion) {\n      throw new CorruptIndexException(\"version \" + actualVersion + \" is too new (expected <= version \" + maxVersion + \")\");\n    }\n\n    return actualVersion;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"955c32f886db6f6356c9fcdea6b1f1cb4effda24":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"0cd8367c3d48e4b63dee1895a261d4986c716bbb":["955c32f886db6f6356c9fcdea6b1f1cb4effda24"],"5f4e87790277826a2aea119328600dfb07761f32":["955c32f886db6f6356c9fcdea6b1f1cb4effda24","0cd8367c3d48e4b63dee1895a261d4986c716bbb"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["0cd8367c3d48e4b63dee1895a261d4986c716bbb"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["955c32f886db6f6356c9fcdea6b1f1cb4effda24"],"955c32f886db6f6356c9fcdea6b1f1cb4effda24":["0cd8367c3d48e4b63dee1895a261d4986c716bbb","5f4e87790277826a2aea119328600dfb07761f32"],"0cd8367c3d48e4b63dee1895a261d4986c716bbb":["5f4e87790277826a2aea119328600dfb07761f32","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"5f4e87790277826a2aea119328600dfb07761f32":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["5f4e87790277826a2aea119328600dfb07761f32","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}