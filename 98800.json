{"path":"lucene/core/src/test/org/apache/lucene/index/TestParallelLeafReader#testWithDocValuesUpdates().mjava","commits":[{"id":"b213cb4b7b825687d73e7ec995c615eb0cf68305","date":1510236177,"type":0,"author":"Alan Woodward","isMerge":false,"pathNew":"lucene/core/src/test/org/apache/lucene/index/TestParallelLeafReader#testWithDocValuesUpdates().mjava","pathOld":"/dev/null","sourceNew":"  public void testWithDocValuesUpdates() throws Exception {\n    Directory dir1 = newDirectory();\n    IndexWriterConfig iwc1 = newIndexWriterConfig(new MockAnalyzer(random()));\n    IndexWriter w1 = new IndexWriter(dir1, iwc1);\n    Document d = new Document();\n    d.add(newTextField(\"name\", \"billy\", Field.Store.NO));\n    d.add(new NumericDocValuesField(\"age\", 21));\n    w1.addDocument(d);\n    w1.commit();\n    w1.updateNumericDocValue(new Term(\"name\", \"billy\"), \"age\", 22);\n    w1.close();\n\n    IndexReader r1 = DirectoryReader.open(dir1);\n    LeafReader lr = new ParallelLeafReader(false, getOnlyLeafReader(r1));\n\n    NumericDocValues dv = lr.getNumericDocValues(\"age\");\n    assertEquals(0, dv.nextDoc());\n    assertEquals(22, dv.longValue());\n\n    assertEquals(1, lr.getFieldInfos().fieldInfo(\"age\").getDocValuesGen());\n\n    IOUtils.close(lr, r1, dir1);\n\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"b213cb4b7b825687d73e7ec995c615eb0cf68305":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["b213cb4b7b825687d73e7ec995c615eb0cf68305"]},"commit2Childs":{"b213cb4b7b825687d73e7ec995c615eb0cf68305":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["b213cb4b7b825687d73e7ec995c615eb0cf68305"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}