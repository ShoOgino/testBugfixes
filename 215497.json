{"path":"solr/core/src/java/org/apache/solr/response/GeoJSONResponseWriter#write(Writer,SolrQueryRequest,SolrQueryResponse).mjava","commits":[{"id":"ba1c938737d199113ec96f0d8ce2c8791b61cd18","date":1458148009,"type":0,"author":"Ryan McKinley","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/response/GeoJSONResponseWriter#write(Writer,SolrQueryRequest,SolrQueryResponse).mjava","pathOld":"/dev/null","sourceNew":"  @Override\n  public void write(Writer writer, SolrQueryRequest req, SolrQueryResponse rsp) throws IOException {\n    \n    String geofield = req.getParams().get(FIELD, null);\n    if(geofield==null || geofield.length()==0) {\n      throw new SolrException(ErrorCode.BAD_REQUEST, \"GeoJSON.  Missing parameter: '\"+FIELD+\"'\");\n    }\n    \n    SchemaField sf = req.getSchema().getFieldOrNull(geofield);\n    if(sf==null) {\n      throw new SolrException(ErrorCode.BAD_REQUEST, \"GeoJSON.  Unknown field: '\"+FIELD+\"'=\"+geofield);\n    }\n    \n    SupportedFormats formats = null;\n    if(sf.getType() instanceof AbstractSpatialFieldType) {\n      SpatialContext ctx = ((AbstractSpatialFieldType)sf.getType()).getSpatialContext();\n      formats = ctx.getFormats();\n    }\n\n    JSONWriter w = new GeoJSONWriter(writer, req, rsp, \n        geofield,\n        formats); \n    \n    try {\n      w.writeResponse();\n    } finally {\n      w.close();\n    }\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"ba1c938737d199113ec96f0d8ce2c8791b61cd18":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["ba1c938737d199113ec96f0d8ce2c8791b61cd18"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["ba1c938737d199113ec96f0d8ce2c8791b61cd18"],"ba1c938737d199113ec96f0d8ce2c8791b61cd18":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}