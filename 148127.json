{"path":"lucene/core/src/java/org/apache/lucene/codecs/simpletext/SimpleTextSegmentInfosReader#readSegmentInfo(Directory,DataInput,BytesRef).mjava","commits":[{"id":"3a119bbc8703c10faa329ec201c654b3a35a1e3e","date":1328644745,"type":1,"author":"Steven Rowe","isMerge":false,"pathNew":"lucene/core/src/java/org/apache/lucene/codecs/simpletext/SimpleTextSegmentInfosReader#readSegmentInfo(Directory,DataInput,BytesRef).mjava","pathOld":"lucene/src/java/org/apache/lucene/codecs/simpletext/SimpleTextSegmentInfosReader#readSegmentInfo(Directory,DataInput,BytesRef).mjava","sourceNew":"  public SegmentInfo readSegmentInfo(Directory directory, DataInput input, BytesRef scratch) throws IOException {\n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NAME);\n    final String name = readString(SI_NAME.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_CODEC);\n    final Codec codec = Codec.forName(readString(SI_CODEC.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_VERSION);\n    final String version = readString(SI_VERSION.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DOCCOUNT);\n    final int docCount = Integer.parseInt(readString(SI_DOCCOUNT.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DELCOUNT);\n    final int delCount = Integer.parseInt(readString(SI_DELCOUNT.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_HASPROX);\n    final int hasProx = readTernary(SI_HASPROX.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_HASVECTORS);\n    final int hasVectors = readTernary(SI_HASVECTORS.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_USECOMPOUND);\n    final boolean isCompoundFile = Boolean.parseBoolean(readString(SI_USECOMPOUND.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSOFFSET);\n    final int dsOffset = Integer.parseInt(readString(SI_DSOFFSET.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSSEGMENT);\n    final String dsSegment = readString(SI_DSSEGMENT.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSCOMPOUND);\n    final boolean dsCompoundFile = Boolean.parseBoolean(readString(SI_DSCOMPOUND.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DELGEN);\n    final long delGen = Long.parseLong(readString(SI_DELGEN.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NUM_NORMGEN);\n    final int numNormGen = Integer.parseInt(readString(SI_NUM_NORMGEN.length, scratch));\n    final Map<Integer,Long> normGen;\n    if (numNormGen == 0) {\n      normGen = null;\n    } else {\n      normGen = new HashMap<Integer,Long>();\n      for (int i = 0; i < numNormGen; i++) {\n        SimpleTextUtil.readLine(input, scratch);\n        assert StringHelper.startsWith(scratch, SI_NORMGEN_KEY);\n        int key = Integer.parseInt(readString(SI_NORMGEN_KEY.length, scratch));\n        \n        SimpleTextUtil.readLine(input, scratch);\n        assert StringHelper.startsWith(scratch, SI_NORMGEN_VALUE);\n        long value = Long.parseLong(readString(SI_NORMGEN_VALUE.length, scratch));\n        normGen.put(key, value);\n      }\n    }\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NUM_DIAG);\n    int numDiag = Integer.parseInt(readString(SI_NUM_DIAG.length, scratch));\n    Map<String,String> diagnostics = new HashMap<String,String>();\n\n    for (int i = 0; i < numDiag; i++) {\n      SimpleTextUtil.readLine(input, scratch);\n      assert StringHelper.startsWith(scratch, SI_DIAG_KEY);\n      String key = readString(SI_DIAG_KEY.length, scratch);\n      \n      SimpleTextUtil.readLine(input, scratch);\n      assert StringHelper.startsWith(scratch, SI_DIAG_VALUE);\n      String value = readString(SI_DIAG_VALUE.length, scratch);\n      diagnostics.put(key, value);\n    }\n    \n    return new SegmentInfo(directory, version, name, docCount, delGen, dsOffset,\n        dsSegment, dsCompoundFile, normGen, isCompoundFile,\n        delCount, hasProx, codec, diagnostics, hasVectors);\n  }\n\n","sourceOld":"  public SegmentInfo readSegmentInfo(Directory directory, DataInput input, BytesRef scratch) throws IOException {\n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NAME);\n    final String name = readString(SI_NAME.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_CODEC);\n    final Codec codec = Codec.forName(readString(SI_CODEC.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_VERSION);\n    final String version = readString(SI_VERSION.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DOCCOUNT);\n    final int docCount = Integer.parseInt(readString(SI_DOCCOUNT.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DELCOUNT);\n    final int delCount = Integer.parseInt(readString(SI_DELCOUNT.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_HASPROX);\n    final int hasProx = readTernary(SI_HASPROX.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_HASVECTORS);\n    final int hasVectors = readTernary(SI_HASVECTORS.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_USECOMPOUND);\n    final boolean isCompoundFile = Boolean.parseBoolean(readString(SI_USECOMPOUND.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSOFFSET);\n    final int dsOffset = Integer.parseInt(readString(SI_DSOFFSET.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSSEGMENT);\n    final String dsSegment = readString(SI_DSSEGMENT.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSCOMPOUND);\n    final boolean dsCompoundFile = Boolean.parseBoolean(readString(SI_DSCOMPOUND.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DELGEN);\n    final long delGen = Long.parseLong(readString(SI_DELGEN.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NUM_NORMGEN);\n    final int numNormGen = Integer.parseInt(readString(SI_NUM_NORMGEN.length, scratch));\n    final Map<Integer,Long> normGen;\n    if (numNormGen == 0) {\n      normGen = null;\n    } else {\n      normGen = new HashMap<Integer,Long>();\n      for (int i = 0; i < numNormGen; i++) {\n        SimpleTextUtil.readLine(input, scratch);\n        assert StringHelper.startsWith(scratch, SI_NORMGEN_KEY);\n        int key = Integer.parseInt(readString(SI_NORMGEN_KEY.length, scratch));\n        \n        SimpleTextUtil.readLine(input, scratch);\n        assert StringHelper.startsWith(scratch, SI_NORMGEN_VALUE);\n        long value = Long.parseLong(readString(SI_NORMGEN_VALUE.length, scratch));\n        normGen.put(key, value);\n      }\n    }\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NUM_DIAG);\n    int numDiag = Integer.parseInt(readString(SI_NUM_DIAG.length, scratch));\n    Map<String,String> diagnostics = new HashMap<String,String>();\n\n    for (int i = 0; i < numDiag; i++) {\n      SimpleTextUtil.readLine(input, scratch);\n      assert StringHelper.startsWith(scratch, SI_DIAG_KEY);\n      String key = readString(SI_DIAG_KEY.length, scratch);\n      \n      SimpleTextUtil.readLine(input, scratch);\n      assert StringHelper.startsWith(scratch, SI_DIAG_VALUE);\n      String value = readString(SI_DIAG_VALUE.length, scratch);\n      diagnostics.put(key, value);\n    }\n    \n    return new SegmentInfo(directory, version, name, docCount, delGen, dsOffset,\n        dsSegment, dsCompoundFile, normGen, isCompoundFile,\n        delCount, hasProx, codec, diagnostics, hasVectors);\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"d2dee33619431ada2a7a07f5fe2dbd94bac6a460","date":1337274029,"type":3,"author":"Michael McCandless","isMerge":false,"pathNew":"lucene/core/src/java/org/apache/lucene/codecs/simpletext/SimpleTextSegmentInfosReader#readSegmentInfo(Directory,DataInput,BytesRef).mjava","pathOld":"lucene/core/src/java/org/apache/lucene/codecs/simpletext/SimpleTextSegmentInfosReader#readSegmentInfo(Directory,DataInput,BytesRef).mjava","sourceNew":"  public SegmentInfo readSegmentInfo(Directory directory, DataInput input, BytesRef scratch) throws IOException {\n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NAME);\n    final String name = readString(SI_NAME.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_CODEC);\n    final Codec codec = Codec.forName(readString(SI_CODEC.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_VERSION);\n    final String version = readString(SI_VERSION.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DOCCOUNT);\n    final int docCount = Integer.parseInt(readString(SI_DOCCOUNT.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DELCOUNT);\n    final int delCount = Integer.parseInt(readString(SI_DELCOUNT.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_HASPROX);\n    final boolean hasProx = Boolean.parseBoolean(readString(SI_HASPROX.length, scratch));\n\n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_HASVECTORS);\n    final boolean hasVectors = Boolean.parseBoolean(readString(SI_HASVECTORS.length, scratch));\n\n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_HASDOCVALUES);\n    final boolean hasDocValues = Boolean.parseBoolean(readString(SI_HASDOCVALUES.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_HASNORMS);\n    final boolean hasNorms = Boolean.parseBoolean(readString(SI_HASNORMS.length, scratch));\n\n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_HASFREQS);\n    final boolean hasFreqs = Boolean.parseBoolean(readString(SI_HASFREQS.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_USECOMPOUND);\n    final boolean isCompoundFile = Boolean.parseBoolean(readString(SI_USECOMPOUND.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSOFFSET);\n    final int dsOffset = Integer.parseInt(readString(SI_DSOFFSET.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSSEGMENT);\n    final String dsSegment = readString(SI_DSSEGMENT.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSCOMPOUND);\n    final boolean dsCompoundFile = Boolean.parseBoolean(readString(SI_DSCOMPOUND.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DELGEN);\n    final long delGen = Long.parseLong(readString(SI_DELGEN.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NUM_NORMGEN);\n    final int numNormGen = Integer.parseInt(readString(SI_NUM_NORMGEN.length, scratch));\n    final Map<Integer,Long> normGen;\n    if (numNormGen == 0) {\n      normGen = null;\n    } else {\n      normGen = new HashMap<Integer,Long>();\n      for (int i = 0; i < numNormGen; i++) {\n        SimpleTextUtil.readLine(input, scratch);\n        assert StringHelper.startsWith(scratch, SI_NORMGEN_KEY);\n        int key = Integer.parseInt(readString(SI_NORMGEN_KEY.length, scratch));\n        \n        SimpleTextUtil.readLine(input, scratch);\n        assert StringHelper.startsWith(scratch, SI_NORMGEN_VALUE);\n        long value = Long.parseLong(readString(SI_NORMGEN_VALUE.length, scratch));\n        normGen.put(key, value);\n      }\n    }\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NUM_DIAG);\n    int numDiag = Integer.parseInt(readString(SI_NUM_DIAG.length, scratch));\n    Map<String,String> diagnostics = new HashMap<String,String>();\n\n    for (int i = 0; i < numDiag; i++) {\n      SimpleTextUtil.readLine(input, scratch);\n      assert StringHelper.startsWith(scratch, SI_DIAG_KEY);\n      String key = readString(SI_DIAG_KEY.length, scratch);\n      \n      SimpleTextUtil.readLine(input, scratch);\n      assert StringHelper.startsWith(scratch, SI_DIAG_VALUE);\n      String value = readString(SI_DIAG_VALUE.length, scratch);\n      diagnostics.put(key, value);\n    }\n    \n    return new SegmentInfo(directory, version, name, docCount, delGen, dsOffset,\n        dsSegment, dsCompoundFile, normGen, isCompoundFile,\n        delCount, hasProx, codec, diagnostics, hasVectors, hasDocValues, hasNorms, hasFreqs);\n  }\n\n","sourceOld":"  public SegmentInfo readSegmentInfo(Directory directory, DataInput input, BytesRef scratch) throws IOException {\n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NAME);\n    final String name = readString(SI_NAME.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_CODEC);\n    final Codec codec = Codec.forName(readString(SI_CODEC.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_VERSION);\n    final String version = readString(SI_VERSION.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DOCCOUNT);\n    final int docCount = Integer.parseInt(readString(SI_DOCCOUNT.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DELCOUNT);\n    final int delCount = Integer.parseInt(readString(SI_DELCOUNT.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_HASPROX);\n    final int hasProx = readTernary(SI_HASPROX.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_HASVECTORS);\n    final int hasVectors = readTernary(SI_HASVECTORS.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_USECOMPOUND);\n    final boolean isCompoundFile = Boolean.parseBoolean(readString(SI_USECOMPOUND.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSOFFSET);\n    final int dsOffset = Integer.parseInt(readString(SI_DSOFFSET.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSSEGMENT);\n    final String dsSegment = readString(SI_DSSEGMENT.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSCOMPOUND);\n    final boolean dsCompoundFile = Boolean.parseBoolean(readString(SI_DSCOMPOUND.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DELGEN);\n    final long delGen = Long.parseLong(readString(SI_DELGEN.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NUM_NORMGEN);\n    final int numNormGen = Integer.parseInt(readString(SI_NUM_NORMGEN.length, scratch));\n    final Map<Integer,Long> normGen;\n    if (numNormGen == 0) {\n      normGen = null;\n    } else {\n      normGen = new HashMap<Integer,Long>();\n      for (int i = 0; i < numNormGen; i++) {\n        SimpleTextUtil.readLine(input, scratch);\n        assert StringHelper.startsWith(scratch, SI_NORMGEN_KEY);\n        int key = Integer.parseInt(readString(SI_NORMGEN_KEY.length, scratch));\n        \n        SimpleTextUtil.readLine(input, scratch);\n        assert StringHelper.startsWith(scratch, SI_NORMGEN_VALUE);\n        long value = Long.parseLong(readString(SI_NORMGEN_VALUE.length, scratch));\n        normGen.put(key, value);\n      }\n    }\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NUM_DIAG);\n    int numDiag = Integer.parseInt(readString(SI_NUM_DIAG.length, scratch));\n    Map<String,String> diagnostics = new HashMap<String,String>();\n\n    for (int i = 0; i < numDiag; i++) {\n      SimpleTextUtil.readLine(input, scratch);\n      assert StringHelper.startsWith(scratch, SI_DIAG_KEY);\n      String key = readString(SI_DIAG_KEY.length, scratch);\n      \n      SimpleTextUtil.readLine(input, scratch);\n      assert StringHelper.startsWith(scratch, SI_DIAG_VALUE);\n      String value = readString(SI_DIAG_VALUE.length, scratch);\n      diagnostics.put(key, value);\n    }\n    \n    return new SegmentInfo(directory, version, name, docCount, delGen, dsOffset,\n        dsSegment, dsCompoundFile, normGen, isCompoundFile,\n        delCount, hasProx, codec, diagnostics, hasVectors);\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"fc834f3412d287003cc04691da380b69ab983239","date":1337276089,"type":3,"author":"Michael McCandless","isMerge":false,"pathNew":"lucene/core/src/java/org/apache/lucene/codecs/simpletext/SimpleTextSegmentInfosReader#readSegmentInfo(Directory,DataInput,BytesRef).mjava","pathOld":"lucene/core/src/java/org/apache/lucene/codecs/simpletext/SimpleTextSegmentInfosReader#readSegmentInfo(Directory,DataInput,BytesRef).mjava","sourceNew":"  public SegmentInfo readSegmentInfo(Directory directory, DataInput input, BytesRef scratch) throws IOException {\n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NAME);\n    final String name = readString(SI_NAME.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_CODEC);\n    final Codec codec = Codec.forName(readString(SI_CODEC.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_VERSION);\n    final String version = readString(SI_VERSION.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DOCCOUNT);\n    final int docCount = Integer.parseInt(readString(SI_DOCCOUNT.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DELCOUNT);\n    final int delCount = Integer.parseInt(readString(SI_DELCOUNT.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_HASPROX);\n    final boolean hasProx = Boolean.parseBoolean(readString(SI_HASPROX.length, scratch));\n\n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_HASVECTORS);\n    final boolean hasVectors = Boolean.parseBoolean(readString(SI_HASVECTORS.length, scratch));\n\n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_USECOMPOUND);\n    final boolean isCompoundFile = Boolean.parseBoolean(readString(SI_USECOMPOUND.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSOFFSET);\n    final int dsOffset = Integer.parseInt(readString(SI_DSOFFSET.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSSEGMENT);\n    final String dsSegment = readString(SI_DSSEGMENT.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSCOMPOUND);\n    final boolean dsCompoundFile = Boolean.parseBoolean(readString(SI_DSCOMPOUND.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DELGEN);\n    final long delGen = Long.parseLong(readString(SI_DELGEN.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NUM_NORMGEN);\n    final int numNormGen = Integer.parseInt(readString(SI_NUM_NORMGEN.length, scratch));\n    final Map<Integer,Long> normGen;\n    if (numNormGen == 0) {\n      normGen = null;\n    } else {\n      normGen = new HashMap<Integer,Long>();\n      for (int i = 0; i < numNormGen; i++) {\n        SimpleTextUtil.readLine(input, scratch);\n        assert StringHelper.startsWith(scratch, SI_NORMGEN_KEY);\n        int key = Integer.parseInt(readString(SI_NORMGEN_KEY.length, scratch));\n        \n        SimpleTextUtil.readLine(input, scratch);\n        assert StringHelper.startsWith(scratch, SI_NORMGEN_VALUE);\n        long value = Long.parseLong(readString(SI_NORMGEN_VALUE.length, scratch));\n        normGen.put(key, value);\n      }\n    }\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NUM_DIAG);\n    int numDiag = Integer.parseInt(readString(SI_NUM_DIAG.length, scratch));\n    Map<String,String> diagnostics = new HashMap<String,String>();\n\n    for (int i = 0; i < numDiag; i++) {\n      SimpleTextUtil.readLine(input, scratch);\n      assert StringHelper.startsWith(scratch, SI_DIAG_KEY);\n      String key = readString(SI_DIAG_KEY.length, scratch);\n      \n      SimpleTextUtil.readLine(input, scratch);\n      assert StringHelper.startsWith(scratch, SI_DIAG_VALUE);\n      String value = readString(SI_DIAG_VALUE.length, scratch);\n      diagnostics.put(key, value);\n    }\n    \n    return new SegmentInfo(directory, version, name, docCount, delGen, dsOffset,\n        dsSegment, dsCompoundFile, normGen, isCompoundFile,\n        delCount, hasProx, codec, diagnostics, hasVectors);\n  }\n\n","sourceOld":"  public SegmentInfo readSegmentInfo(Directory directory, DataInput input, BytesRef scratch) throws IOException {\n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NAME);\n    final String name = readString(SI_NAME.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_CODEC);\n    final Codec codec = Codec.forName(readString(SI_CODEC.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_VERSION);\n    final String version = readString(SI_VERSION.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DOCCOUNT);\n    final int docCount = Integer.parseInt(readString(SI_DOCCOUNT.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DELCOUNT);\n    final int delCount = Integer.parseInt(readString(SI_DELCOUNT.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_HASPROX);\n    final boolean hasProx = Boolean.parseBoolean(readString(SI_HASPROX.length, scratch));\n\n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_HASVECTORS);\n    final boolean hasVectors = Boolean.parseBoolean(readString(SI_HASVECTORS.length, scratch));\n\n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_HASDOCVALUES);\n    final boolean hasDocValues = Boolean.parseBoolean(readString(SI_HASDOCVALUES.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_HASNORMS);\n    final boolean hasNorms = Boolean.parseBoolean(readString(SI_HASNORMS.length, scratch));\n\n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_HASFREQS);\n    final boolean hasFreqs = Boolean.parseBoolean(readString(SI_HASFREQS.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_USECOMPOUND);\n    final boolean isCompoundFile = Boolean.parseBoolean(readString(SI_USECOMPOUND.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSOFFSET);\n    final int dsOffset = Integer.parseInt(readString(SI_DSOFFSET.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSSEGMENT);\n    final String dsSegment = readString(SI_DSSEGMENT.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSCOMPOUND);\n    final boolean dsCompoundFile = Boolean.parseBoolean(readString(SI_DSCOMPOUND.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DELGEN);\n    final long delGen = Long.parseLong(readString(SI_DELGEN.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NUM_NORMGEN);\n    final int numNormGen = Integer.parseInt(readString(SI_NUM_NORMGEN.length, scratch));\n    final Map<Integer,Long> normGen;\n    if (numNormGen == 0) {\n      normGen = null;\n    } else {\n      normGen = new HashMap<Integer,Long>();\n      for (int i = 0; i < numNormGen; i++) {\n        SimpleTextUtil.readLine(input, scratch);\n        assert StringHelper.startsWith(scratch, SI_NORMGEN_KEY);\n        int key = Integer.parseInt(readString(SI_NORMGEN_KEY.length, scratch));\n        \n        SimpleTextUtil.readLine(input, scratch);\n        assert StringHelper.startsWith(scratch, SI_NORMGEN_VALUE);\n        long value = Long.parseLong(readString(SI_NORMGEN_VALUE.length, scratch));\n        normGen.put(key, value);\n      }\n    }\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NUM_DIAG);\n    int numDiag = Integer.parseInt(readString(SI_NUM_DIAG.length, scratch));\n    Map<String,String> diagnostics = new HashMap<String,String>();\n\n    for (int i = 0; i < numDiag; i++) {\n      SimpleTextUtil.readLine(input, scratch);\n      assert StringHelper.startsWith(scratch, SI_DIAG_KEY);\n      String key = readString(SI_DIAG_KEY.length, scratch);\n      \n      SimpleTextUtil.readLine(input, scratch);\n      assert StringHelper.startsWith(scratch, SI_DIAG_VALUE);\n      String value = readString(SI_DIAG_VALUE.length, scratch);\n      diagnostics.put(key, value);\n    }\n    \n    return new SegmentInfo(directory, version, name, docCount, delGen, dsOffset,\n        dsSegment, dsCompoundFile, normGen, isCompoundFile,\n        delCount, hasProx, codec, diagnostics, hasVectors, hasDocValues, hasNorms, hasFreqs);\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"4a8b14bc4241c302311422d5c6f7627f8febb86e","date":1337291675,"type":3,"author":"Michael McCandless","isMerge":false,"pathNew":"lucene/core/src/java/org/apache/lucene/codecs/simpletext/SimpleTextSegmentInfosReader#readSegmentInfo(Directory,DataInput,BytesRef).mjava","pathOld":"lucene/core/src/java/org/apache/lucene/codecs/simpletext/SimpleTextSegmentInfosReader#readSegmentInfo(Directory,DataInput,BytesRef).mjava","sourceNew":"  public SegmentInfo readSegmentInfo(Directory directory, DataInput input, BytesRef scratch) throws IOException {\n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NAME);\n    final String name = readString(SI_NAME.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_CODEC);\n    final Codec codec = Codec.forName(readString(SI_CODEC.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_VERSION);\n    final String version = readString(SI_VERSION.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DOCCOUNT);\n    final int docCount = Integer.parseInt(readString(SI_DOCCOUNT.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DELCOUNT);\n    final int delCount = Integer.parseInt(readString(SI_DELCOUNT.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_HASPROX);\n    final boolean hasProx = Boolean.parseBoolean(readString(SI_HASPROX.length, scratch));\n\n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_USECOMPOUND);\n    final boolean isCompoundFile = Boolean.parseBoolean(readString(SI_USECOMPOUND.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSOFFSET);\n    final int dsOffset = Integer.parseInt(readString(SI_DSOFFSET.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSSEGMENT);\n    final String dsSegment = readString(SI_DSSEGMENT.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSCOMPOUND);\n    final boolean dsCompoundFile = Boolean.parseBoolean(readString(SI_DSCOMPOUND.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DELGEN);\n    final long delGen = Long.parseLong(readString(SI_DELGEN.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NUM_NORMGEN);\n    final int numNormGen = Integer.parseInt(readString(SI_NUM_NORMGEN.length, scratch));\n    final Map<Integer,Long> normGen;\n    if (numNormGen == 0) {\n      normGen = null;\n    } else {\n      normGen = new HashMap<Integer,Long>();\n      for (int i = 0; i < numNormGen; i++) {\n        SimpleTextUtil.readLine(input, scratch);\n        assert StringHelper.startsWith(scratch, SI_NORMGEN_KEY);\n        int key = Integer.parseInt(readString(SI_NORMGEN_KEY.length, scratch));\n        \n        SimpleTextUtil.readLine(input, scratch);\n        assert StringHelper.startsWith(scratch, SI_NORMGEN_VALUE);\n        long value = Long.parseLong(readString(SI_NORMGEN_VALUE.length, scratch));\n        normGen.put(key, value);\n      }\n    }\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NUM_DIAG);\n    int numDiag = Integer.parseInt(readString(SI_NUM_DIAG.length, scratch));\n    Map<String,String> diagnostics = new HashMap<String,String>();\n\n    for (int i = 0; i < numDiag; i++) {\n      SimpleTextUtil.readLine(input, scratch);\n      assert StringHelper.startsWith(scratch, SI_DIAG_KEY);\n      String key = readString(SI_DIAG_KEY.length, scratch);\n      \n      SimpleTextUtil.readLine(input, scratch);\n      assert StringHelper.startsWith(scratch, SI_DIAG_VALUE);\n      String value = readString(SI_DIAG_VALUE.length, scratch);\n      diagnostics.put(key, value);\n    }\n    \n    return new SegmentInfo(directory, version, name, docCount, delGen, dsOffset,\n        dsSegment, dsCompoundFile, normGen, isCompoundFile,\n        delCount, hasProx, codec, diagnostics);\n  }\n\n","sourceOld":"  public SegmentInfo readSegmentInfo(Directory directory, DataInput input, BytesRef scratch) throws IOException {\n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NAME);\n    final String name = readString(SI_NAME.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_CODEC);\n    final Codec codec = Codec.forName(readString(SI_CODEC.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_VERSION);\n    final String version = readString(SI_VERSION.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DOCCOUNT);\n    final int docCount = Integer.parseInt(readString(SI_DOCCOUNT.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DELCOUNT);\n    final int delCount = Integer.parseInt(readString(SI_DELCOUNT.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_HASPROX);\n    final boolean hasProx = Boolean.parseBoolean(readString(SI_HASPROX.length, scratch));\n\n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_HASVECTORS);\n    final boolean hasVectors = Boolean.parseBoolean(readString(SI_HASVECTORS.length, scratch));\n\n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_USECOMPOUND);\n    final boolean isCompoundFile = Boolean.parseBoolean(readString(SI_USECOMPOUND.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSOFFSET);\n    final int dsOffset = Integer.parseInt(readString(SI_DSOFFSET.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSSEGMENT);\n    final String dsSegment = readString(SI_DSSEGMENT.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSCOMPOUND);\n    final boolean dsCompoundFile = Boolean.parseBoolean(readString(SI_DSCOMPOUND.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DELGEN);\n    final long delGen = Long.parseLong(readString(SI_DELGEN.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NUM_NORMGEN);\n    final int numNormGen = Integer.parseInt(readString(SI_NUM_NORMGEN.length, scratch));\n    final Map<Integer,Long> normGen;\n    if (numNormGen == 0) {\n      normGen = null;\n    } else {\n      normGen = new HashMap<Integer,Long>();\n      for (int i = 0; i < numNormGen; i++) {\n        SimpleTextUtil.readLine(input, scratch);\n        assert StringHelper.startsWith(scratch, SI_NORMGEN_KEY);\n        int key = Integer.parseInt(readString(SI_NORMGEN_KEY.length, scratch));\n        \n        SimpleTextUtil.readLine(input, scratch);\n        assert StringHelper.startsWith(scratch, SI_NORMGEN_VALUE);\n        long value = Long.parseLong(readString(SI_NORMGEN_VALUE.length, scratch));\n        normGen.put(key, value);\n      }\n    }\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NUM_DIAG);\n    int numDiag = Integer.parseInt(readString(SI_NUM_DIAG.length, scratch));\n    Map<String,String> diagnostics = new HashMap<String,String>();\n\n    for (int i = 0; i < numDiag; i++) {\n      SimpleTextUtil.readLine(input, scratch);\n      assert StringHelper.startsWith(scratch, SI_DIAG_KEY);\n      String key = readString(SI_DIAG_KEY.length, scratch);\n      \n      SimpleTextUtil.readLine(input, scratch);\n      assert StringHelper.startsWith(scratch, SI_DIAG_VALUE);\n      String value = readString(SI_DIAG_VALUE.length, scratch);\n      diagnostics.put(key, value);\n    }\n    \n    return new SegmentInfo(directory, version, name, docCount, delGen, dsOffset,\n        dsSegment, dsCompoundFile, normGen, isCompoundFile,\n        delCount, hasProx, codec, diagnostics, hasVectors);\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"dc97c61094c5498702b29cc2e8309beac50c23dc","date":1337293692,"type":3,"author":"Michael McCandless","isMerge":false,"pathNew":"lucene/core/src/java/org/apache/lucene/codecs/simpletext/SimpleTextSegmentInfosReader#readSegmentInfo(Directory,DataInput,BytesRef).mjava","pathOld":"lucene/core/src/java/org/apache/lucene/codecs/simpletext/SimpleTextSegmentInfosReader#readSegmentInfo(Directory,DataInput,BytesRef).mjava","sourceNew":"  public SegmentInfo readSegmentInfo(Directory directory, DataInput input, BytesRef scratch) throws IOException {\n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NAME);\n    final String name = readString(SI_NAME.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_CODEC);\n    final Codec codec = Codec.forName(readString(SI_CODEC.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_VERSION);\n    final String version = readString(SI_VERSION.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DOCCOUNT);\n    final int docCount = Integer.parseInt(readString(SI_DOCCOUNT.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DELCOUNT);\n    final int delCount = Integer.parseInt(readString(SI_DELCOUNT.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_USECOMPOUND);\n    final boolean isCompoundFile = Boolean.parseBoolean(readString(SI_USECOMPOUND.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSOFFSET);\n    final int dsOffset = Integer.parseInt(readString(SI_DSOFFSET.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSSEGMENT);\n    final String dsSegment = readString(SI_DSSEGMENT.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSCOMPOUND);\n    final boolean dsCompoundFile = Boolean.parseBoolean(readString(SI_DSCOMPOUND.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DELGEN);\n    final long delGen = Long.parseLong(readString(SI_DELGEN.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NUM_NORMGEN);\n    final int numNormGen = Integer.parseInt(readString(SI_NUM_NORMGEN.length, scratch));\n    final Map<Integer,Long> normGen;\n    if (numNormGen == 0) {\n      normGen = null;\n    } else {\n      normGen = new HashMap<Integer,Long>();\n      for (int i = 0; i < numNormGen; i++) {\n        SimpleTextUtil.readLine(input, scratch);\n        assert StringHelper.startsWith(scratch, SI_NORMGEN_KEY);\n        int key = Integer.parseInt(readString(SI_NORMGEN_KEY.length, scratch));\n        \n        SimpleTextUtil.readLine(input, scratch);\n        assert StringHelper.startsWith(scratch, SI_NORMGEN_VALUE);\n        long value = Long.parseLong(readString(SI_NORMGEN_VALUE.length, scratch));\n        normGen.put(key, value);\n      }\n    }\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NUM_DIAG);\n    int numDiag = Integer.parseInt(readString(SI_NUM_DIAG.length, scratch));\n    Map<String,String> diagnostics = new HashMap<String,String>();\n\n    for (int i = 0; i < numDiag; i++) {\n      SimpleTextUtil.readLine(input, scratch);\n      assert StringHelper.startsWith(scratch, SI_DIAG_KEY);\n      String key = readString(SI_DIAG_KEY.length, scratch);\n      \n      SimpleTextUtil.readLine(input, scratch);\n      assert StringHelper.startsWith(scratch, SI_DIAG_VALUE);\n      String value = readString(SI_DIAG_VALUE.length, scratch);\n      diagnostics.put(key, value);\n    }\n    \n    return new SegmentInfo(directory, version, name, docCount, delGen, dsOffset,\n        dsSegment, dsCompoundFile, normGen, isCompoundFile,\n        delCount, codec, diagnostics);\n  }\n\n","sourceOld":"  public SegmentInfo readSegmentInfo(Directory directory, DataInput input, BytesRef scratch) throws IOException {\n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NAME);\n    final String name = readString(SI_NAME.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_CODEC);\n    final Codec codec = Codec.forName(readString(SI_CODEC.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_VERSION);\n    final String version = readString(SI_VERSION.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DOCCOUNT);\n    final int docCount = Integer.parseInt(readString(SI_DOCCOUNT.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DELCOUNT);\n    final int delCount = Integer.parseInt(readString(SI_DELCOUNT.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_HASPROX);\n    final boolean hasProx = Boolean.parseBoolean(readString(SI_HASPROX.length, scratch));\n\n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_USECOMPOUND);\n    final boolean isCompoundFile = Boolean.parseBoolean(readString(SI_USECOMPOUND.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSOFFSET);\n    final int dsOffset = Integer.parseInt(readString(SI_DSOFFSET.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSSEGMENT);\n    final String dsSegment = readString(SI_DSSEGMENT.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSCOMPOUND);\n    final boolean dsCompoundFile = Boolean.parseBoolean(readString(SI_DSCOMPOUND.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DELGEN);\n    final long delGen = Long.parseLong(readString(SI_DELGEN.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NUM_NORMGEN);\n    final int numNormGen = Integer.parseInt(readString(SI_NUM_NORMGEN.length, scratch));\n    final Map<Integer,Long> normGen;\n    if (numNormGen == 0) {\n      normGen = null;\n    } else {\n      normGen = new HashMap<Integer,Long>();\n      for (int i = 0; i < numNormGen; i++) {\n        SimpleTextUtil.readLine(input, scratch);\n        assert StringHelper.startsWith(scratch, SI_NORMGEN_KEY);\n        int key = Integer.parseInt(readString(SI_NORMGEN_KEY.length, scratch));\n        \n        SimpleTextUtil.readLine(input, scratch);\n        assert StringHelper.startsWith(scratch, SI_NORMGEN_VALUE);\n        long value = Long.parseLong(readString(SI_NORMGEN_VALUE.length, scratch));\n        normGen.put(key, value);\n      }\n    }\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NUM_DIAG);\n    int numDiag = Integer.parseInt(readString(SI_NUM_DIAG.length, scratch));\n    Map<String,String> diagnostics = new HashMap<String,String>();\n\n    for (int i = 0; i < numDiag; i++) {\n      SimpleTextUtil.readLine(input, scratch);\n      assert StringHelper.startsWith(scratch, SI_DIAG_KEY);\n      String key = readString(SI_DIAG_KEY.length, scratch);\n      \n      SimpleTextUtil.readLine(input, scratch);\n      assert StringHelper.startsWith(scratch, SI_DIAG_VALUE);\n      String value = readString(SI_DIAG_VALUE.length, scratch);\n      diagnostics.put(key, value);\n    }\n    \n    return new SegmentInfo(directory, version, name, docCount, delGen, dsOffset,\n        dsSegment, dsCompoundFile, normGen, isCompoundFile,\n        delCount, hasProx, codec, diagnostics);\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"4356000e349e38c9fb48034695b7c309abd54557","date":1337460341,"type":4,"author":"Michael McCandless","isMerge":false,"pathNew":"/dev/null","pathOld":"lucene/core/src/java/org/apache/lucene/codecs/simpletext/SimpleTextSegmentInfosReader#readSegmentInfo(Directory,DataInput,BytesRef).mjava","sourceNew":null,"sourceOld":"  public SegmentInfo readSegmentInfo(Directory directory, DataInput input, BytesRef scratch) throws IOException {\n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NAME);\n    final String name = readString(SI_NAME.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_CODEC);\n    final Codec codec = Codec.forName(readString(SI_CODEC.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_VERSION);\n    final String version = readString(SI_VERSION.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DOCCOUNT);\n    final int docCount = Integer.parseInt(readString(SI_DOCCOUNT.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DELCOUNT);\n    final int delCount = Integer.parseInt(readString(SI_DELCOUNT.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_USECOMPOUND);\n    final boolean isCompoundFile = Boolean.parseBoolean(readString(SI_USECOMPOUND.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSOFFSET);\n    final int dsOffset = Integer.parseInt(readString(SI_DSOFFSET.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSSEGMENT);\n    final String dsSegment = readString(SI_DSSEGMENT.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSCOMPOUND);\n    final boolean dsCompoundFile = Boolean.parseBoolean(readString(SI_DSCOMPOUND.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DELGEN);\n    final long delGen = Long.parseLong(readString(SI_DELGEN.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NUM_NORMGEN);\n    final int numNormGen = Integer.parseInt(readString(SI_NUM_NORMGEN.length, scratch));\n    final Map<Integer,Long> normGen;\n    if (numNormGen == 0) {\n      normGen = null;\n    } else {\n      normGen = new HashMap<Integer,Long>();\n      for (int i = 0; i < numNormGen; i++) {\n        SimpleTextUtil.readLine(input, scratch);\n        assert StringHelper.startsWith(scratch, SI_NORMGEN_KEY);\n        int key = Integer.parseInt(readString(SI_NORMGEN_KEY.length, scratch));\n        \n        SimpleTextUtil.readLine(input, scratch);\n        assert StringHelper.startsWith(scratch, SI_NORMGEN_VALUE);\n        long value = Long.parseLong(readString(SI_NORMGEN_VALUE.length, scratch));\n        normGen.put(key, value);\n      }\n    }\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NUM_DIAG);\n    int numDiag = Integer.parseInt(readString(SI_NUM_DIAG.length, scratch));\n    Map<String,String> diagnostics = new HashMap<String,String>();\n\n    for (int i = 0; i < numDiag; i++) {\n      SimpleTextUtil.readLine(input, scratch);\n      assert StringHelper.startsWith(scratch, SI_DIAG_KEY);\n      String key = readString(SI_DIAG_KEY.length, scratch);\n      \n      SimpleTextUtil.readLine(input, scratch);\n      assert StringHelper.startsWith(scratch, SI_DIAG_VALUE);\n      String value = readString(SI_DIAG_VALUE.length, scratch);\n      diagnostics.put(key, value);\n    }\n    \n    return new SegmentInfo(directory, version, name, docCount, delGen, dsOffset,\n        dsSegment, dsCompoundFile, normGen, isCompoundFile,\n        delCount, codec, diagnostics);\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"615ddbd81799980d0fdd95e0238e1c498b6f47b0","date":1338233290,"type":4,"author":"Robert Muir","isMerge":true,"pathNew":"/dev/null","pathOld":"lucene/core/src/java/org/apache/lucene/codecs/simpletext/SimpleTextSegmentInfosReader#readSegmentInfo(Directory,DataInput,BytesRef).mjava","sourceNew":null,"sourceOld":"  public SegmentInfo readSegmentInfo(Directory directory, DataInput input, BytesRef scratch) throws IOException {\n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NAME);\n    final String name = readString(SI_NAME.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_CODEC);\n    final Codec codec = Codec.forName(readString(SI_CODEC.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_VERSION);\n    final String version = readString(SI_VERSION.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DOCCOUNT);\n    final int docCount = Integer.parseInt(readString(SI_DOCCOUNT.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DELCOUNT);\n    final int delCount = Integer.parseInt(readString(SI_DELCOUNT.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_HASPROX);\n    final int hasProx = readTernary(SI_HASPROX.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_HASVECTORS);\n    final int hasVectors = readTernary(SI_HASVECTORS.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_USECOMPOUND);\n    final boolean isCompoundFile = Boolean.parseBoolean(readString(SI_USECOMPOUND.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSOFFSET);\n    final int dsOffset = Integer.parseInt(readString(SI_DSOFFSET.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSSEGMENT);\n    final String dsSegment = readString(SI_DSSEGMENT.length, scratch);\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DSCOMPOUND);\n    final boolean dsCompoundFile = Boolean.parseBoolean(readString(SI_DSCOMPOUND.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_DELGEN);\n    final long delGen = Long.parseLong(readString(SI_DELGEN.length, scratch));\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NUM_NORMGEN);\n    final int numNormGen = Integer.parseInt(readString(SI_NUM_NORMGEN.length, scratch));\n    final Map<Integer,Long> normGen;\n    if (numNormGen == 0) {\n      normGen = null;\n    } else {\n      normGen = new HashMap<Integer,Long>();\n      for (int i = 0; i < numNormGen; i++) {\n        SimpleTextUtil.readLine(input, scratch);\n        assert StringHelper.startsWith(scratch, SI_NORMGEN_KEY);\n        int key = Integer.parseInt(readString(SI_NORMGEN_KEY.length, scratch));\n        \n        SimpleTextUtil.readLine(input, scratch);\n        assert StringHelper.startsWith(scratch, SI_NORMGEN_VALUE);\n        long value = Long.parseLong(readString(SI_NORMGEN_VALUE.length, scratch));\n        normGen.put(key, value);\n      }\n    }\n    \n    SimpleTextUtil.readLine(input, scratch);\n    assert StringHelper.startsWith(scratch, SI_NUM_DIAG);\n    int numDiag = Integer.parseInt(readString(SI_NUM_DIAG.length, scratch));\n    Map<String,String> diagnostics = new HashMap<String,String>();\n\n    for (int i = 0; i < numDiag; i++) {\n      SimpleTextUtil.readLine(input, scratch);\n      assert StringHelper.startsWith(scratch, SI_DIAG_KEY);\n      String key = readString(SI_DIAG_KEY.length, scratch);\n      \n      SimpleTextUtil.readLine(input, scratch);\n      assert StringHelper.startsWith(scratch, SI_DIAG_VALUE);\n      String value = readString(SI_DIAG_VALUE.length, scratch);\n      diagnostics.put(key, value);\n    }\n    \n    return new SegmentInfo(directory, version, name, docCount, delGen, dsOffset,\n        dsSegment, dsCompoundFile, normGen, isCompoundFile,\n        delCount, hasProx, codec, diagnostics, hasVectors);\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"4a8b14bc4241c302311422d5c6f7627f8febb86e":["fc834f3412d287003cc04691da380b69ab983239"],"d2dee33619431ada2a7a07f5fe2dbd94bac6a460":["3a119bbc8703c10faa329ec201c654b3a35a1e3e"],"615ddbd81799980d0fdd95e0238e1c498b6f47b0":["3a119bbc8703c10faa329ec201c654b3a35a1e3e","4356000e349e38c9fb48034695b7c309abd54557"],"4356000e349e38c9fb48034695b7c309abd54557":["dc97c61094c5498702b29cc2e8309beac50c23dc"],"3a119bbc8703c10faa329ec201c654b3a35a1e3e":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"dc97c61094c5498702b29cc2e8309beac50c23dc":["4a8b14bc4241c302311422d5c6f7627f8febb86e"],"fc834f3412d287003cc04691da380b69ab983239":["d2dee33619431ada2a7a07f5fe2dbd94bac6a460"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["615ddbd81799980d0fdd95e0238e1c498b6f47b0"]},"commit2Childs":{"4a8b14bc4241c302311422d5c6f7627f8febb86e":["dc97c61094c5498702b29cc2e8309beac50c23dc"],"d2dee33619431ada2a7a07f5fe2dbd94bac6a460":["fc834f3412d287003cc04691da380b69ab983239"],"615ddbd81799980d0fdd95e0238e1c498b6f47b0":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"4356000e349e38c9fb48034695b7c309abd54557":["615ddbd81799980d0fdd95e0238e1c498b6f47b0"],"3a119bbc8703c10faa329ec201c654b3a35a1e3e":["d2dee33619431ada2a7a07f5fe2dbd94bac6a460","615ddbd81799980d0fdd95e0238e1c498b6f47b0"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["3a119bbc8703c10faa329ec201c654b3a35a1e3e"],"dc97c61094c5498702b29cc2e8309beac50c23dc":["4356000e349e38c9fb48034695b7c309abd54557"],"fc834f3412d287003cc04691da380b69ab983239":["4a8b14bc4241c302311422d5c6f7627f8febb86e"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}