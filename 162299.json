{"path":"solr/solrj/src/test/org/apache/solr/client/solrj/TestSolrJErrorHandling#doThreads(HttpSolrClient,int,int).mjava","commits":[{"id":"a2a0d597d231e1e1141fcd33ad15e26e2a4266ac","date":1452194543,"type":0,"author":"Yonik Seeley","isMerge":false,"pathNew":"solr/solrj/src/test/org/apache/solr/client/solrj/TestSolrJErrorHandling#doThreads(HttpSolrClient,int,int).mjava","pathOld":"/dev/null","sourceNew":"  void doThreads(final HttpSolrClient client, final int numThreads, final int numRequests) throws Exception {\n    final AtomicInteger tries = new AtomicInteger(0);\n\n    List<Thread> threads = new ArrayList<>();\n\n    for (int i=0; i<numThreads; i++) {\n      final int threadNum = i;\n      threads.add( new Thread() {\n                     int reqLeft = numRequests;\n\n                     @Override\n                     public void run() {\n                       try {\n                         while (--reqLeft >= 0) {\n                           tries.incrementAndGet();\n                           doSingle(client, threadNum);\n                         }\n                       } catch (Throwable e) {\n                         // Allow thread to exit, we should have already recorded the exception.\n                       }\n                     }\n                   }\n      );\n    }\n\n    for (Thread thread : threads) {\n      thread.start();\n    }\n    for (Thread thread : threads) {\n      thread.join();\n    }\n\n    showExceptions();\n\n    int count = getCount(client);\n    if (count > tries.get()) {\n      fail(\"Number of requests was \" + tries.get() + \" but final count was \" + count);\n    }\n\n    assertEquals(tries.get(), getCount(client));\n\n    assertTrue(\"got unexpected exceptions. \", unexpected.isEmpty() );\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"a2a0d597d231e1e1141fcd33ad15e26e2a4266ac":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["a2a0d597d231e1e1141fcd33ad15e26e2a4266ac"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["a2a0d597d231e1e1141fcd33ad15e26e2a4266ac"],"a2a0d597d231e1e1141fcd33ad15e26e2a4266ac":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}