{"path":"solr/core/src/java/org/apache/solr/schema/AbstractSpatialFieldType#createSpatialQuery(QParser,SpatialOptions).mjava","commits":[{"id":"6bcb5c9814e87bce81ca6c0c80685c1754c4a1ac","date":1357162023,"type":0,"author":"David Wayne Smiley","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/schema/AbstractSpatialFieldType#createSpatialQuery(QParser,SpatialOptions).mjava","pathOld":"/dev/null","sourceNew":"  /**\n   * Implemented for compatibility with Solr 3 spatial geofilt & bbox query parsers:\n   * {@link SpatialQueryable}.\n   */\n  @Override\n  public Query createSpatialQuery(QParser parser, SpatialOptions options) {\n    //--WARNING: the code from here to the next marker is identical to LatLonType's impl.\n    double[] point = null;\n    try {\n      point = ParseUtils.parseLatitudeLongitude(options.pointStr);\n    } catch (InvalidShapeException e) {\n      throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, e);\n    }\n\n    // lat & lon in degrees\n    double latCenter = point[0];\n    double lonCenter = point[1];\n\n    double distDeg = DistanceUtils.dist2Degrees(options.distance, options.radius);\n    //--END-WARNING\n\n    Shape shape = ctx.makeCircle(lonCenter, latCenter, distDeg);\n    if (options.bbox)\n      shape = shape.getBoundingBox();\n\n    SpatialArgs spatialArgs = new SpatialArgs(SpatialOperation.Intersects, shape);\n    return getQueryFromSpatialArgs(parser, options.field, spatialArgs);\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"d3fcb70cf561547c7bb1506e0cf32ca7b1287064","date":1357616416,"type":0,"author":"Robert Muir","isMerge":true,"pathNew":"solr/core/src/java/org/apache/solr/schema/AbstractSpatialFieldType#createSpatialQuery(QParser,SpatialOptions).mjava","pathOld":"/dev/null","sourceNew":"  /**\n   * Implemented for compatibility with Solr 3 spatial geofilt & bbox query parsers:\n   * {@link SpatialQueryable}.\n   */\n  @Override\n  public Query createSpatialQuery(QParser parser, SpatialOptions options) {\n    //--WARNING: the code from here to the next marker is identical to LatLonType's impl.\n    double[] point = null;\n    try {\n      point = ParseUtils.parseLatitudeLongitude(options.pointStr);\n    } catch (InvalidShapeException e) {\n      throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, e);\n    }\n\n    // lat & lon in degrees\n    double latCenter = point[0];\n    double lonCenter = point[1];\n\n    double distDeg = DistanceUtils.dist2Degrees(options.distance, options.radius);\n    //--END-WARNING\n\n    Shape shape = ctx.makeCircle(lonCenter, latCenter, distDeg);\n    if (options.bbox)\n      shape = shape.getBoundingBox();\n\n    SpatialArgs spatialArgs = new SpatialArgs(SpatialOperation.Intersects, shape);\n    return getQueryFromSpatialArgs(parser, options.field, spatialArgs);\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"6bc65e9e84ac8f81b0861d2c7d8f56715adbf003","date":1390592414,"type":3,"author":"David Wayne Smiley","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/schema/AbstractSpatialFieldType#createSpatialQuery(QParser,SpatialOptions).mjava","pathOld":"solr/core/src/java/org/apache/solr/schema/AbstractSpatialFieldType#createSpatialQuery(QParser,SpatialOptions).mjava","sourceNew":"  /**\n   * Implemented for compatibility with geofilt & bbox query parsers:\n   * {@link SpatialQueryable}.\n   */\n  @Override\n  public Query createSpatialQuery(QParser parser, SpatialOptions options) {\n    Point pt = SpatialUtils.parsePointSolrException(options.pointStr, ctx);\n\n    double distDeg = DistanceUtils.dist2Degrees(options.distance, options.radius);\n\n    Shape shape = ctx.makeCircle(pt, distDeg);\n    if (options.bbox)\n      shape = shape.getBoundingBox();\n\n    SpatialArgs spatialArgs = new SpatialArgs(SpatialOperation.Intersects, shape);\n    return getQueryFromSpatialArgs(parser, options.field, spatialArgs);\n  }\n\n","sourceOld":"  /**\n   * Implemented for compatibility with Solr 3 spatial geofilt & bbox query parsers:\n   * {@link SpatialQueryable}.\n   */\n  @Override\n  public Query createSpatialQuery(QParser parser, SpatialOptions options) {\n    //--WARNING: the code from here to the next marker is identical to LatLonType's impl.\n    double[] point = null;\n    try {\n      point = ParseUtils.parseLatitudeLongitude(options.pointStr);\n    } catch (InvalidShapeException e) {\n      throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, e);\n    }\n\n    // lat & lon in degrees\n    double latCenter = point[0];\n    double lonCenter = point[1];\n\n    double distDeg = DistanceUtils.dist2Degrees(options.distance, options.radius);\n    //--END-WARNING\n\n    Shape shape = ctx.makeCircle(lonCenter, latCenter, distDeg);\n    if (options.bbox)\n      shape = shape.getBoundingBox();\n\n    SpatialArgs spatialArgs = new SpatialArgs(SpatialOperation.Intersects, shape);\n    return getQueryFromSpatialArgs(parser, options.field, spatialArgs);\n  }\n\n","bugFix":null,"bugIntro":["1e210ae1e604402eb4eeff2a52e56d189cd4f2f1"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"1e210ae1e604402eb4eeff2a52e56d189cd4f2f1","date":1423508552,"type":3,"author":"Robert Muir","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/schema/AbstractSpatialFieldType#createSpatialQuery(QParser,SpatialOptions).mjava","pathOld":"solr/core/src/java/org/apache/solr/schema/AbstractSpatialFieldType#createSpatialQuery(QParser,SpatialOptions).mjava","sourceNew":"  /**\n   * Implemented for compatibility with geofilt &amp; bbox query parsers:\n   * {@link SpatialQueryable}.\n   */\n  @Override\n  public Query createSpatialQuery(QParser parser, SpatialOptions options) {\n    Point pt = SpatialUtils.parsePointSolrException(options.pointStr, ctx);\n\n    double distDeg = DistanceUtils.dist2Degrees(options.distance, options.radius);\n\n    Shape shape = ctx.makeCircle(pt, distDeg);\n    if (options.bbox)\n      shape = shape.getBoundingBox();\n\n    SpatialArgs spatialArgs = new SpatialArgs(SpatialOperation.Intersects, shape);\n    return getQueryFromSpatialArgs(parser, options.field, spatialArgs);\n  }\n\n","sourceOld":"  /**\n   * Implemented for compatibility with geofilt & bbox query parsers:\n   * {@link SpatialQueryable}.\n   */\n  @Override\n  public Query createSpatialQuery(QParser parser, SpatialOptions options) {\n    Point pt = SpatialUtils.parsePointSolrException(options.pointStr, ctx);\n\n    double distDeg = DistanceUtils.dist2Degrees(options.distance, options.radius);\n\n    Shape shape = ctx.makeCircle(pt, distDeg);\n    if (options.bbox)\n      shape = shape.getBoundingBox();\n\n    SpatialArgs spatialArgs = new SpatialArgs(SpatialOperation.Intersects, shape);\n    return getQueryFromSpatialArgs(parser, options.field, spatialArgs);\n  }\n\n","bugFix":["6bc65e9e84ac8f81b0861d2c7d8f56715adbf003"],"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"d3fcb70cf561547c7bb1506e0cf32ca7b1287064":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","6bcb5c9814e87bce81ca6c0c80685c1754c4a1ac"],"6bc65e9e84ac8f81b0861d2c7d8f56715adbf003":["6bcb5c9814e87bce81ca6c0c80685c1754c4a1ac"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"6bcb5c9814e87bce81ca6c0c80685c1754c4a1ac":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"1e210ae1e604402eb4eeff2a52e56d189cd4f2f1":["6bc65e9e84ac8f81b0861d2c7d8f56715adbf003"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["1e210ae1e604402eb4eeff2a52e56d189cd4f2f1"]},"commit2Childs":{"d3fcb70cf561547c7bb1506e0cf32ca7b1287064":[],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["d3fcb70cf561547c7bb1506e0cf32ca7b1287064","6bcb5c9814e87bce81ca6c0c80685c1754c4a1ac"],"6bc65e9e84ac8f81b0861d2c7d8f56715adbf003":["1e210ae1e604402eb4eeff2a52e56d189cd4f2f1"],"6bcb5c9814e87bce81ca6c0c80685c1754c4a1ac":["d3fcb70cf561547c7bb1506e0cf32ca7b1287064","6bc65e9e84ac8f81b0861d2c7d8f56715adbf003"],"1e210ae1e604402eb4eeff2a52e56d189cd4f2f1":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["d3fcb70cf561547c7bb1506e0cf32ca7b1287064","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}