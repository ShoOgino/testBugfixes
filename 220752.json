{"path":"lucene/highlighter/src/java/org/apache/lucene/search/matchhighlight/PassageFormatter#slicePoints(Passage).mjava","commits":[{"id":"2fb36690ce41edd0bebf4e4babc0fa8c9b0f2e5c","date":1597407672,"type":0,"author":"Dawid Weiss","isMerge":false,"pathNew":"lucene/highlighter/src/java/org/apache/lucene/search/matchhighlight/PassageFormatter#slicePoints(Passage).mjava","pathOld":"/dev/null","sourceNew":"  private static SlicePoint[] slicePoints(Passage p) {\n    SlicePoint[] slicePoints = new SlicePoint[p.markers.size() * 2];\n    int x = 0;\n    for (OffsetRange m : p.markers) {\n      slicePoints[x++] = new SlicePoint(SlicePoint.Type.START, m.from, m);\n      slicePoints[x++] = new SlicePoint(SlicePoint.Type.END, m.to, m);\n    }\n\n    // Order slice points by their offset\n    Comparator<SlicePoint> c =\n        Comparator.<SlicePoint>comparingInt(pt -> pt.offset)\n            .thenComparingInt(pt -> pt.type.ordering)\n            .thenComparing(\n                (a, b) -> {\n                  if (a.type == SlicePoint.Type.START) {\n                    // Longer start slice points come first.\n                    return Integer.compare(b.marker.to, a.marker.to);\n                  } else {\n                    // Shorter end slice points come first.\n                    return Integer.compare(b.marker.from, a.marker.from);\n                  }\n                });\n\n    Arrays.sort(slicePoints, c);\n\n    return slicePoints;\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"2fb36690ce41edd0bebf4e4babc0fa8c9b0f2e5c":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["2fb36690ce41edd0bebf4e4babc0fa8c9b0f2e5c"]},"commit2Childs":{"2fb36690ce41edd0bebf4e4babc0fa8c9b0f2e5c":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["2fb36690ce41edd0bebf4e4babc0fa8c9b0f2e5c"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}