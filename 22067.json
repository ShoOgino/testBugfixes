{"path":"solr/core/src/java/org/apache/solr/util/SolrCLI.CreateCoreTool#runTool(CommandLine).mjava","commits":[{"id":"1b1713aa2c66e65f3f024e9c3c4876dfed130ceb","date":1417043528,"type":0,"author":"Timothy Potter","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/util/SolrCLI.CreateCoreTool#runTool(CommandLine).mjava","pathOld":"/dev/null","sourceNew":"    @Override\n    public int runTool(CommandLine cli) throws Exception {\n\n      String solrUrl = cli.getOptionValue(\"solrUrl\", \"http://localhost:8983/solr\");\n      if (!solrUrl.endsWith(\"/\"))\n        solrUrl += \"/\";\n\n      File configsetsDir = new File(cli.getOptionValue(\"configsetsDir\"));\n      if (!configsetsDir.isDirectory())\n        throw new FileNotFoundException(configsetsDir.getAbsolutePath()+\" not found!\");\n\n      String configSet = cli.getOptionValue(\"config\", DEFAULT_CONFIG_SET);\n      File configSetDir = new File(configsetsDir, configSet);\n      if (!configSetDir.isDirectory())\n        throw new FileNotFoundException(\"Specified config \"+configSet+\n            \" not found in \"+configsetsDir.getAbsolutePath());\n\n      File confDir = new File(configSetDir,\"conf\");\n\n      String coreName = cli.getOptionValue(\"name\");\n\n      String systemInfoUrl = solrUrl+\"admin/info/system\";\n      HttpClient httpClient = getHttpClient();\n      String solrHome = null;\n      try {\n        Map<String,Object> systemInfo = getJson(httpClient, systemInfoUrl, 2);\n        if (\"solrcloud\".equals(systemInfo.get(\"mode\"))) {\n          System.err.println(\"\\nERROR: Solr at \"+solrUrl+\n              \" is running in SolrCloud mode, please use create_collection command instead.\\n\");\n          return 1;\n        }\n\n        // convert raw JSON into user-friendly output\n        solrHome = (String)systemInfo.get(\"solr_home\");\n        if (solrHome == null) {\n          solrHome = configsetsDir.getParentFile().getAbsolutePath();\n        }\n      } finally {\n        closeHttpClient(httpClient);\n      }\n\n      File coreInstanceDir = new File(solrHome, coreName);\n      if (!coreInstanceDir.isDirectory()) {\n        coreInstanceDir.mkdirs();\n        if (!coreInstanceDir.isDirectory())\n          throw new IOException(\"Failed to create new core instance directory: \"+coreInstanceDir.getAbsolutePath());\n      }\n\n      FileUtils.copyDirectoryToDirectory(confDir, coreInstanceDir);\n\n      String createCoreUrl =\n          String.format(Locale.ROOT,\n              \"%sadmin/cores?action=CREATE&name=%s&instanceDir=%s\",\n              solrUrl,\n              coreName,\n              coreName);\n\n      System.out.println(\"Creating new core '\"+coreName+\"' using command:\\n\\n\"+createCoreUrl+\"\\n\");\n\n      Map<String,Object> json = getJson(createCoreUrl);\n      CharArr arr = new CharArr();\n      new JSONWriter(arr, 2).write(json);\n      System.out.println(arr.toString());\n      System.out.println();\n\n      return 0;\n    }\n\n","sourceOld":null,"bugFix":null,"bugIntro":["3d1db6f36874f1979916ccb702329fbb09602af8","22440a249a0bc8ef779d5a60720725614a9460d4","6784d0cc613dc1ee97030eaaa5e0754edc22d164","bda260250f85f3fbbe1a4dc7f1a8aeec3c183c64"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"209c0259a9b7087b2111411ec790d6557ef86307","date":1419393649,"type":3,"author":"Timothy Potter","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/util/SolrCLI.CreateCoreTool#runTool(CommandLine).mjava","pathOld":"solr/core/src/java/org/apache/solr/util/SolrCLI.CreateCoreTool#runTool(CommandLine).mjava","sourceNew":"    @Override\n    public int runTool(CommandLine cli) throws Exception {\n\n      String solrUrl = cli.getOptionValue(\"solrUrl\", \"http://localhost:8983/solr\");\n      if (!solrUrl.endsWith(\"/\"))\n        solrUrl += \"/\";\n\n      File configsetsDir = new File(cli.getOptionValue(\"configsetsDir\"));\n      if (!configsetsDir.isDirectory())\n        throw new FileNotFoundException(configsetsDir.getAbsolutePath() + \" not found!\");\n\n      String configSet = cli.getOptionValue(\"config\", DEFAULT_CONFIG_SET);\n      File configSetDir = new File(configsetsDir, configSet);\n      if (!configSetDir.isDirectory()) {\n        // we allow them to pass a directory instead of a configset name\n        File possibleConfigDir = new File(configSet);\n        if (possibleConfigDir.isDirectory()) {\n          configSetDir = possibleConfigDir;\n        } else {\n          throw new FileNotFoundException(\"Specified config \" + configSet +\n              \" not found in \" + configsetsDir.getAbsolutePath());\n        }\n      }\n\n      String coreName = cli.getOptionValue(\"name\");\n\n      String systemInfoUrl = solrUrl+\"admin/info/system\";\n      HttpClient httpClient = getHttpClient();\n      String solrHome = null;\n      try {\n        Map<String,Object> systemInfo = getJson(httpClient, systemInfoUrl, 2);\n        if (\"solrcloud\".equals(systemInfo.get(\"mode\"))) {\n          System.err.println(\"\\nERROR: Solr at \"+solrUrl+\n              \" is running in SolrCloud mode, please use create_collection command instead.\\n\");\n          return 1;\n        }\n\n        // convert raw JSON into user-friendly output\n        solrHome = (String)systemInfo.get(\"solr_home\");\n        if (solrHome == null)\n          solrHome = configsetsDir.getParentFile().getAbsolutePath();\n\n      } finally {\n        closeHttpClient(httpClient);\n      }\n\n      String coreStatusUrl = solrUrl+\"admin/cores?action=STATUS&core=\"+coreName;\n      if (safeCheckCoreExists(coreStatusUrl, coreName)) {\n        System.err.println(\"\\nCore '\"+coreName+\"' already exists!\");\n        System.err.println(\"\\nChecked core existence using Core API command:\\n\"+coreStatusUrl);\n        System.err.println();\n        return 1;\n      }\n\n      File coreInstanceDir = new File(solrHome, coreName);\n      File confDir = new File(configSetDir,\"conf\");\n      if (!coreInstanceDir.isDirectory()) {\n        coreInstanceDir.mkdirs();\n        if (!coreInstanceDir.isDirectory())\n          throw new IOException(\"Failed to create new core instance directory: \"+coreInstanceDir.getAbsolutePath());\n\n        if (confDir.isDirectory()) {\n          FileUtils.copyDirectoryToDirectory(confDir, coreInstanceDir);\n        } else {\n          // hmmm ... the configset we're cloning doesn't have a conf sub-directory,\n          // we'll just assume it is OK if it has solrconfig.xml\n          if ((new File(configSetDir, \"solrconfig.xml\")).isFile()) {\n            FileUtils.copyDirectory(configSetDir, new File(coreInstanceDir, \"conf\"));\n          } else {\n            System.err.println(\"\\n\"+configSetDir.getAbsolutePath()+\" doesn't contain a conf subdirectory or solrconfig.xml\\n\");\n            return 1;\n          }\n        }\n        System.out.println(\"\\nSetup new core instance directory:\\n\"+coreInstanceDir.getAbsolutePath());\n      }\n\n      String createCoreUrl =\n          String.format(Locale.ROOT,\n              \"%sadmin/cores?action=CREATE&name=%s&instanceDir=%s\",\n              solrUrl,\n              coreName,\n              coreName);\n\n      System.out.println(\"\\nCreating new core '\"+coreName+\"' using command:\\n\"+createCoreUrl+\"\\n\");\n\n      Map<String,Object> json = null;\n      try {\n        json = getJson(createCoreUrl);\n      } catch (SolrServerException sse) {\n        // mostly likely the core already exists ...\n        if (safeCheckCoreExists(coreStatusUrl, coreName)) {\n          // core already exists\n          System.err.println(\"Core '\"+coreName+\"' already exists!\");\n          System.err.println(\"\\nChecked core existence using Core API command:\\n\"+coreStatusUrl);\n        } else {\n          System.err.println(\"Failed to create core '\"+coreName+\"' due to: \"+sse.getMessage());\n        }\n        System.err.println();\n        return 1;\n      }\n\n      CharArr arr = new CharArr();\n      new JSONWriter(arr, 2).write(json);\n      System.out.println(arr.toString());\n      System.out.println();\n\n      return 0;\n    }\n\n","sourceOld":"    @Override\n    public int runTool(CommandLine cli) throws Exception {\n\n      String solrUrl = cli.getOptionValue(\"solrUrl\", \"http://localhost:8983/solr\");\n      if (!solrUrl.endsWith(\"/\"))\n        solrUrl += \"/\";\n\n      File configsetsDir = new File(cli.getOptionValue(\"configsetsDir\"));\n      if (!configsetsDir.isDirectory())\n        throw new FileNotFoundException(configsetsDir.getAbsolutePath()+\" not found!\");\n\n      String configSet = cli.getOptionValue(\"config\", DEFAULT_CONFIG_SET);\n      File configSetDir = new File(configsetsDir, configSet);\n      if (!configSetDir.isDirectory())\n        throw new FileNotFoundException(\"Specified config \"+configSet+\n            \" not found in \"+configsetsDir.getAbsolutePath());\n\n      File confDir = new File(configSetDir,\"conf\");\n\n      String coreName = cli.getOptionValue(\"name\");\n\n      String systemInfoUrl = solrUrl+\"admin/info/system\";\n      HttpClient httpClient = getHttpClient();\n      String solrHome = null;\n      try {\n        Map<String,Object> systemInfo = getJson(httpClient, systemInfoUrl, 2);\n        if (\"solrcloud\".equals(systemInfo.get(\"mode\"))) {\n          System.err.println(\"\\nERROR: Solr at \"+solrUrl+\n              \" is running in SolrCloud mode, please use create_collection command instead.\\n\");\n          return 1;\n        }\n\n        // convert raw JSON into user-friendly output\n        solrHome = (String)systemInfo.get(\"solr_home\");\n        if (solrHome == null) {\n          solrHome = configsetsDir.getParentFile().getAbsolutePath();\n        }\n      } finally {\n        closeHttpClient(httpClient);\n      }\n\n      File coreInstanceDir = new File(solrHome, coreName);\n      if (!coreInstanceDir.isDirectory()) {\n        coreInstanceDir.mkdirs();\n        if (!coreInstanceDir.isDirectory())\n          throw new IOException(\"Failed to create new core instance directory: \"+coreInstanceDir.getAbsolutePath());\n      }\n\n      FileUtils.copyDirectoryToDirectory(confDir, coreInstanceDir);\n\n      String createCoreUrl =\n          String.format(Locale.ROOT,\n              \"%sadmin/cores?action=CREATE&name=%s&instanceDir=%s\",\n              solrUrl,\n              coreName,\n              coreName);\n\n      System.out.println(\"Creating new core '\"+coreName+\"' using command:\\n\\n\"+createCoreUrl+\"\\n\");\n\n      Map<String,Object> json = getJson(createCoreUrl);\n      CharArr arr = new CharArr();\n      new JSONWriter(arr, 2).write(json);\n      System.out.println(arr.toString());\n      System.out.println();\n\n      return 0;\n    }\n\n","bugFix":null,"bugIntro":["3d1db6f36874f1979916ccb702329fbb09602af8","bda260250f85f3fbbe1a4dc7f1a8aeec3c183c64","0f506150a6ebd43fb2833cdf2713e2d1d5bddbd6"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"6784d0cc613dc1ee97030eaaa5e0754edc22d164","date":1420824784,"type":3,"author":"Mark Robert Miller","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/util/SolrCLI.CreateCoreTool#runTool(CommandLine).mjava","pathOld":"solr/core/src/java/org/apache/solr/util/SolrCLI.CreateCoreTool#runTool(CommandLine).mjava","sourceNew":"    @Override\n    public int runTool(CommandLine cli) throws Exception {\n\n      String solrUrl = cli.getOptionValue(\"solrUrl\", \"http://localhost:8983/solr\");\n      if (!solrUrl.endsWith(\"/\"))\n        solrUrl += \"/\";\n\n      File configsetsDir = new File(cli.getOptionValue(\"configsetsDir\"));\n      if (!configsetsDir.isDirectory())\n        throw new FileNotFoundException(configsetsDir.getAbsolutePath() + \" not found!\");\n\n      String configSet = cli.getOptionValue(\"config\", DEFAULT_CONFIG_SET);\n      File configSetDir = new File(configsetsDir, configSet);\n      if (!configSetDir.isDirectory()) {\n        // we allow them to pass a directory instead of a configset name\n        File possibleConfigDir = new File(configSet);\n        if (possibleConfigDir.isDirectory()) {\n          configSetDir = possibleConfigDir;\n        } else {\n          throw new FileNotFoundException(\"Specified config \" + configSet +\n              \" not found in \" + configsetsDir.getAbsolutePath());\n        }\n      }\n\n      String coreName = cli.getOptionValue(\"name\");\n\n      String systemInfoUrl = solrUrl+\"admin/info/system\";\n      CloseableHttpClient httpClient = getHttpClient();\n      String solrHome = null;\n      try {\n        Map<String,Object> systemInfo = getJson(httpClient, systemInfoUrl, 2);\n        if (\"solrcloud\".equals(systemInfo.get(\"mode\"))) {\n          System.err.println(\"\\nERROR: Solr at \"+solrUrl+\n              \" is running in SolrCloud mode, please use create_collection command instead.\\n\");\n          return 1;\n        }\n\n        // convert raw JSON into user-friendly output\n        solrHome = (String)systemInfo.get(\"solr_home\");\n        if (solrHome == null)\n          solrHome = configsetsDir.getParentFile().getAbsolutePath();\n\n      } finally {\n        closeHttpClient(httpClient);\n      }\n\n      String coreStatusUrl = solrUrl+\"admin/cores?action=STATUS&core=\"+coreName;\n      if (safeCheckCoreExists(coreStatusUrl, coreName)) {\n        System.err.println(\"\\nCore '\"+coreName+\"' already exists!\");\n        System.err.println(\"\\nChecked core existence using Core API command:\\n\"+coreStatusUrl);\n        System.err.println();\n        return 1;\n      }\n\n      File coreInstanceDir = new File(solrHome, coreName);\n      File confDir = new File(configSetDir,\"conf\");\n      if (!coreInstanceDir.isDirectory()) {\n        coreInstanceDir.mkdirs();\n        if (!coreInstanceDir.isDirectory())\n          throw new IOException(\"Failed to create new core instance directory: \"+coreInstanceDir.getAbsolutePath());\n\n        if (confDir.isDirectory()) {\n          FileUtils.copyDirectoryToDirectory(confDir, coreInstanceDir);\n        } else {\n          // hmmm ... the configset we're cloning doesn't have a conf sub-directory,\n          // we'll just assume it is OK if it has solrconfig.xml\n          if ((new File(configSetDir, \"solrconfig.xml\")).isFile()) {\n            FileUtils.copyDirectory(configSetDir, new File(coreInstanceDir, \"conf\"));\n          } else {\n            System.err.println(\"\\n\"+configSetDir.getAbsolutePath()+\" doesn't contain a conf subdirectory or solrconfig.xml\\n\");\n            return 1;\n          }\n        }\n        System.out.println(\"\\nSetup new core instance directory:\\n\"+coreInstanceDir.getAbsolutePath());\n      }\n\n      String createCoreUrl =\n          String.format(Locale.ROOT,\n              \"%sadmin/cores?action=CREATE&name=%s&instanceDir=%s\",\n              solrUrl,\n              coreName,\n              coreName);\n\n      System.out.println(\"\\nCreating new core '\"+coreName+\"' using command:\\n\"+createCoreUrl+\"\\n\");\n\n      Map<String,Object> json = null;\n      try {\n        json = getJson(createCoreUrl);\n      } catch (SolrServerException sse) {\n        // mostly likely the core already exists ...\n        if (safeCheckCoreExists(coreStatusUrl, coreName)) {\n          // core already exists\n          System.err.println(\"Core '\"+coreName+\"' already exists!\");\n          System.err.println(\"\\nChecked core existence using Core API command:\\n\"+coreStatusUrl);\n        } else {\n          System.err.println(\"Failed to create core '\"+coreName+\"' due to: \"+sse.getMessage());\n        }\n        System.err.println();\n        return 1;\n      }\n\n      CharArr arr = new CharArr();\n      new JSONWriter(arr, 2).write(json);\n      System.out.println(arr.toString());\n      System.out.println();\n\n      return 0;\n    }\n\n","sourceOld":"    @Override\n    public int runTool(CommandLine cli) throws Exception {\n\n      String solrUrl = cli.getOptionValue(\"solrUrl\", \"http://localhost:8983/solr\");\n      if (!solrUrl.endsWith(\"/\"))\n        solrUrl += \"/\";\n\n      File configsetsDir = new File(cli.getOptionValue(\"configsetsDir\"));\n      if (!configsetsDir.isDirectory())\n        throw new FileNotFoundException(configsetsDir.getAbsolutePath() + \" not found!\");\n\n      String configSet = cli.getOptionValue(\"config\", DEFAULT_CONFIG_SET);\n      File configSetDir = new File(configsetsDir, configSet);\n      if (!configSetDir.isDirectory()) {\n        // we allow them to pass a directory instead of a configset name\n        File possibleConfigDir = new File(configSet);\n        if (possibleConfigDir.isDirectory()) {\n          configSetDir = possibleConfigDir;\n        } else {\n          throw new FileNotFoundException(\"Specified config \" + configSet +\n              \" not found in \" + configsetsDir.getAbsolutePath());\n        }\n      }\n\n      String coreName = cli.getOptionValue(\"name\");\n\n      String systemInfoUrl = solrUrl+\"admin/info/system\";\n      HttpClient httpClient = getHttpClient();\n      String solrHome = null;\n      try {\n        Map<String,Object> systemInfo = getJson(httpClient, systemInfoUrl, 2);\n        if (\"solrcloud\".equals(systemInfo.get(\"mode\"))) {\n          System.err.println(\"\\nERROR: Solr at \"+solrUrl+\n              \" is running in SolrCloud mode, please use create_collection command instead.\\n\");\n          return 1;\n        }\n\n        // convert raw JSON into user-friendly output\n        solrHome = (String)systemInfo.get(\"solr_home\");\n        if (solrHome == null)\n          solrHome = configsetsDir.getParentFile().getAbsolutePath();\n\n      } finally {\n        closeHttpClient(httpClient);\n      }\n\n      String coreStatusUrl = solrUrl+\"admin/cores?action=STATUS&core=\"+coreName;\n      if (safeCheckCoreExists(coreStatusUrl, coreName)) {\n        System.err.println(\"\\nCore '\"+coreName+\"' already exists!\");\n        System.err.println(\"\\nChecked core existence using Core API command:\\n\"+coreStatusUrl);\n        System.err.println();\n        return 1;\n      }\n\n      File coreInstanceDir = new File(solrHome, coreName);\n      File confDir = new File(configSetDir,\"conf\");\n      if (!coreInstanceDir.isDirectory()) {\n        coreInstanceDir.mkdirs();\n        if (!coreInstanceDir.isDirectory())\n          throw new IOException(\"Failed to create new core instance directory: \"+coreInstanceDir.getAbsolutePath());\n\n        if (confDir.isDirectory()) {\n          FileUtils.copyDirectoryToDirectory(confDir, coreInstanceDir);\n        } else {\n          // hmmm ... the configset we're cloning doesn't have a conf sub-directory,\n          // we'll just assume it is OK if it has solrconfig.xml\n          if ((new File(configSetDir, \"solrconfig.xml\")).isFile()) {\n            FileUtils.copyDirectory(configSetDir, new File(coreInstanceDir, \"conf\"));\n          } else {\n            System.err.println(\"\\n\"+configSetDir.getAbsolutePath()+\" doesn't contain a conf subdirectory or solrconfig.xml\\n\");\n            return 1;\n          }\n        }\n        System.out.println(\"\\nSetup new core instance directory:\\n\"+coreInstanceDir.getAbsolutePath());\n      }\n\n      String createCoreUrl =\n          String.format(Locale.ROOT,\n              \"%sadmin/cores?action=CREATE&name=%s&instanceDir=%s\",\n              solrUrl,\n              coreName,\n              coreName);\n\n      System.out.println(\"\\nCreating new core '\"+coreName+\"' using command:\\n\"+createCoreUrl+\"\\n\");\n\n      Map<String,Object> json = null;\n      try {\n        json = getJson(createCoreUrl);\n      } catch (SolrServerException sse) {\n        // mostly likely the core already exists ...\n        if (safeCheckCoreExists(coreStatusUrl, coreName)) {\n          // core already exists\n          System.err.println(\"Core '\"+coreName+\"' already exists!\");\n          System.err.println(\"\\nChecked core existence using Core API command:\\n\"+coreStatusUrl);\n        } else {\n          System.err.println(\"Failed to create core '\"+coreName+\"' due to: \"+sse.getMessage());\n        }\n        System.err.println();\n        return 1;\n      }\n\n      CharArr arr = new CharArr();\n      new JSONWriter(arr, 2).write(json);\n      System.out.println(arr.toString());\n      System.out.println();\n\n      return 0;\n    }\n\n","bugFix":["1b1713aa2c66e65f3f024e9c3c4876dfed130ceb"],"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"3d1db6f36874f1979916ccb702329fbb09602af8","date":1421105614,"type":3,"author":"Timothy Potter","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/util/SolrCLI.CreateCoreTool#runTool(CommandLine).mjava","pathOld":"solr/core/src/java/org/apache/solr/util/SolrCLI.CreateCoreTool#runTool(CommandLine).mjava","sourceNew":"    @Override\n    public int runTool(CommandLine cli) throws Exception {\n\n      String solrUrl = cli.getOptionValue(\"solrUrl\", \"http://localhost:8983/solr\");\n      if (!solrUrl.endsWith(\"/\"))\n        solrUrl += \"/\";\n\n      File configsetsDir = new File(cli.getOptionValue(\"configsetsDir\"));\n      if (!configsetsDir.isDirectory())\n        throw new FileNotFoundException(configsetsDir.getAbsolutePath() + \" not found!\");\n\n      String configSet = cli.getOptionValue(\"confdir\", DEFAULT_CONFIG_SET);\n      File configSetDir = new File(configsetsDir, configSet);\n      if (!configSetDir.isDirectory()) {\n        // we allow them to pass a directory instead of a configset name\n        File possibleConfigDir = new File(configSet);\n        if (possibleConfigDir.isDirectory()) {\n          configSetDir = possibleConfigDir;\n        } else {\n          throw new FileNotFoundException(\"Specified config directory \" + configSet +\n              \" not found in \" + configsetsDir.getAbsolutePath());\n        }\n      }\n\n      String coreName = cli.getOptionValue(\"name\");\n\n      String systemInfoUrl = solrUrl+\"admin/info/system\";\n      CloseableHttpClient httpClient = getHttpClient();\n      String solrHome = null;\n      try {\n        Map<String,Object> systemInfo = getJson(httpClient, systemInfoUrl, 2);\n        if (\"solrcloud\".equals(systemInfo.get(\"mode\"))) {\n          System.err.println(\"\\nERROR: Solr at \"+solrUrl+\n              \" is running in SolrCloud mode, please use create_collection command instead.\\n\");\n          return 1;\n        }\n\n        // convert raw JSON into user-friendly output\n        solrHome = (String)systemInfo.get(\"solr_home\");\n        if (solrHome == null)\n          solrHome = configsetsDir.getParentFile().getAbsolutePath();\n\n      } finally {\n        closeHttpClient(httpClient);\n      }\n\n      String coreStatusUrl = solrUrl+\"admin/cores?action=STATUS&core=\"+coreName;\n      if (safeCheckCoreExists(coreStatusUrl, coreName)) {\n        System.err.println(\"\\nCore '\"+coreName+\"' already exists!\");\n        System.err.println(\"\\nChecked core existence using Core API command:\\n\"+coreStatusUrl);\n        System.err.println();\n        return 1;\n      }\n\n      File coreInstanceDir = new File(solrHome, coreName);\n      File confDir = new File(configSetDir,\"conf\");\n      if (!coreInstanceDir.isDirectory()) {\n        coreInstanceDir.mkdirs();\n        if (!coreInstanceDir.isDirectory())\n          throw new IOException(\"Failed to create new core instance directory: \"+coreInstanceDir.getAbsolutePath());\n\n        if (confDir.isDirectory()) {\n          FileUtils.copyDirectoryToDirectory(confDir, coreInstanceDir);\n        } else {\n          // hmmm ... the configset we're cloning doesn't have a conf sub-directory,\n          // we'll just assume it is OK if it has solrconfig.xml\n          if ((new File(configSetDir, \"solrconfig.xml\")).isFile()) {\n            FileUtils.copyDirectory(configSetDir, new File(coreInstanceDir, \"conf\"));\n          } else {\n            System.err.println(\"\\n\"+configSetDir.getAbsolutePath()+\" doesn't contain a conf subdirectory or solrconfig.xml\\n\");\n            return 1;\n          }\n        }\n        System.out.println(\"\\nSetup new core instance directory:\\n\"+coreInstanceDir.getAbsolutePath());\n      }\n\n      String createCoreUrl =\n          String.format(Locale.ROOT,\n              \"%sadmin/cores?action=CREATE&name=%s&instanceDir=%s\",\n              solrUrl,\n              coreName,\n              coreName);\n\n      System.out.println(\"\\nCreating new core '\"+coreName+\"' using command:\\n\"+createCoreUrl+\"\\n\");\n\n      Map<String,Object> json = null;\n      try {\n        json = getJson(createCoreUrl);\n      } catch (SolrServerException sse) {\n        // mostly likely the core already exists ...\n        if (safeCheckCoreExists(coreStatusUrl, coreName)) {\n          // core already exists\n          System.err.println(\"Core '\"+coreName+\"' already exists!\");\n          System.err.println(\"\\nChecked core existence using Core API command:\\n\"+coreStatusUrl);\n        } else {\n          System.err.println(\"Failed to create core '\"+coreName+\"' due to: \"+sse.getMessage());\n        }\n        System.err.println();\n        return 1;\n      }\n\n      CharArr arr = new CharArr();\n      new JSONWriter(arr, 2).write(json);\n      System.out.println(arr.toString());\n      System.out.println();\n\n      return 0;\n    }\n\n","sourceOld":"    @Override\n    public int runTool(CommandLine cli) throws Exception {\n\n      String solrUrl = cli.getOptionValue(\"solrUrl\", \"http://localhost:8983/solr\");\n      if (!solrUrl.endsWith(\"/\"))\n        solrUrl += \"/\";\n\n      File configsetsDir = new File(cli.getOptionValue(\"configsetsDir\"));\n      if (!configsetsDir.isDirectory())\n        throw new FileNotFoundException(configsetsDir.getAbsolutePath() + \" not found!\");\n\n      String configSet = cli.getOptionValue(\"config\", DEFAULT_CONFIG_SET);\n      File configSetDir = new File(configsetsDir, configSet);\n      if (!configSetDir.isDirectory()) {\n        // we allow them to pass a directory instead of a configset name\n        File possibleConfigDir = new File(configSet);\n        if (possibleConfigDir.isDirectory()) {\n          configSetDir = possibleConfigDir;\n        } else {\n          throw new FileNotFoundException(\"Specified config \" + configSet +\n              \" not found in \" + configsetsDir.getAbsolutePath());\n        }\n      }\n\n      String coreName = cli.getOptionValue(\"name\");\n\n      String systemInfoUrl = solrUrl+\"admin/info/system\";\n      CloseableHttpClient httpClient = getHttpClient();\n      String solrHome = null;\n      try {\n        Map<String,Object> systemInfo = getJson(httpClient, systemInfoUrl, 2);\n        if (\"solrcloud\".equals(systemInfo.get(\"mode\"))) {\n          System.err.println(\"\\nERROR: Solr at \"+solrUrl+\n              \" is running in SolrCloud mode, please use create_collection command instead.\\n\");\n          return 1;\n        }\n\n        // convert raw JSON into user-friendly output\n        solrHome = (String)systemInfo.get(\"solr_home\");\n        if (solrHome == null)\n          solrHome = configsetsDir.getParentFile().getAbsolutePath();\n\n      } finally {\n        closeHttpClient(httpClient);\n      }\n\n      String coreStatusUrl = solrUrl+\"admin/cores?action=STATUS&core=\"+coreName;\n      if (safeCheckCoreExists(coreStatusUrl, coreName)) {\n        System.err.println(\"\\nCore '\"+coreName+\"' already exists!\");\n        System.err.println(\"\\nChecked core existence using Core API command:\\n\"+coreStatusUrl);\n        System.err.println();\n        return 1;\n      }\n\n      File coreInstanceDir = new File(solrHome, coreName);\n      File confDir = new File(configSetDir,\"conf\");\n      if (!coreInstanceDir.isDirectory()) {\n        coreInstanceDir.mkdirs();\n        if (!coreInstanceDir.isDirectory())\n          throw new IOException(\"Failed to create new core instance directory: \"+coreInstanceDir.getAbsolutePath());\n\n        if (confDir.isDirectory()) {\n          FileUtils.copyDirectoryToDirectory(confDir, coreInstanceDir);\n        } else {\n          // hmmm ... the configset we're cloning doesn't have a conf sub-directory,\n          // we'll just assume it is OK if it has solrconfig.xml\n          if ((new File(configSetDir, \"solrconfig.xml\")).isFile()) {\n            FileUtils.copyDirectory(configSetDir, new File(coreInstanceDir, \"conf\"));\n          } else {\n            System.err.println(\"\\n\"+configSetDir.getAbsolutePath()+\" doesn't contain a conf subdirectory or solrconfig.xml\\n\");\n            return 1;\n          }\n        }\n        System.out.println(\"\\nSetup new core instance directory:\\n\"+coreInstanceDir.getAbsolutePath());\n      }\n\n      String createCoreUrl =\n          String.format(Locale.ROOT,\n              \"%sadmin/cores?action=CREATE&name=%s&instanceDir=%s\",\n              solrUrl,\n              coreName,\n              coreName);\n\n      System.out.println(\"\\nCreating new core '\"+coreName+\"' using command:\\n\"+createCoreUrl+\"\\n\");\n\n      Map<String,Object> json = null;\n      try {\n        json = getJson(createCoreUrl);\n      } catch (SolrServerException sse) {\n        // mostly likely the core already exists ...\n        if (safeCheckCoreExists(coreStatusUrl, coreName)) {\n          // core already exists\n          System.err.println(\"Core '\"+coreName+\"' already exists!\");\n          System.err.println(\"\\nChecked core existence using Core API command:\\n\"+coreStatusUrl);\n        } else {\n          System.err.println(\"Failed to create core '\"+coreName+\"' due to: \"+sse.getMessage());\n        }\n        System.err.println();\n        return 1;\n      }\n\n      CharArr arr = new CharArr();\n      new JSONWriter(arr, 2).write(json);\n      System.out.println(arr.toString());\n      System.out.println();\n\n      return 0;\n    }\n\n","bugFix":["1b1713aa2c66e65f3f024e9c3c4876dfed130ceb","209c0259a9b7087b2111411ec790d6557ef86307"],"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"1390137e395d2f07f9ba5b8c43d293befe84d563","date":1427947685,"type":3,"author":"Noble Paul","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/util/SolrCLI.CreateCoreTool#runTool(CommandLine).mjava","pathOld":"solr/core/src/java/org/apache/solr/util/SolrCLI.CreateCoreTool#runTool(CommandLine).mjava","sourceNew":"    @Override\n    public int runTool(CommandLine cli) throws Exception {\n\n      String solrUrl = cli.getOptionValue(\"solrUrl\", \"http://localhost:8983/solr\");\n      if (!solrUrl.endsWith(\"/\"))\n        solrUrl += \"/\";\n\n      File configsetsDir = new File(cli.getOptionValue(\"configsetsDir\"));\n      if (!configsetsDir.isDirectory())\n        throw new FileNotFoundException(configsetsDir.getAbsolutePath() + \" not found!\");\n\n      String configSet = cli.getOptionValue(\"confdir\", DEFAULT_CONFIG_SET);\n      File configSetDir = new File(configsetsDir, configSet);\n      if (!configSetDir.isDirectory()) {\n        // we allow them to pass a directory instead of a configset name\n        File possibleConfigDir = new File(configSet);\n        if (possibleConfigDir.isDirectory()) {\n          configSetDir = possibleConfigDir;\n        } else {\n          throw new FileNotFoundException(\"Specified config directory \" + configSet +\n              \" not found in \" + configsetsDir.getAbsolutePath());\n        }\n      }\n\n      String coreName = cli.getOptionValue(NAME);\n\n      String systemInfoUrl = solrUrl+\"admin/info/system\";\n      CloseableHttpClient httpClient = getHttpClient();\n      String solrHome = null;\n      try {\n        Map<String,Object> systemInfo = getJson(httpClient, systemInfoUrl, 2);\n        if (\"solrcloud\".equals(systemInfo.get(\"mode\"))) {\n          System.err.println(\"\\nERROR: Solr at \"+solrUrl+\n              \" is running in SolrCloud mode, please use create_collection command instead.\\n\");\n          return 1;\n        }\n\n        // convert raw JSON into user-friendly output\n        solrHome = (String)systemInfo.get(\"solr_home\");\n        if (solrHome == null)\n          solrHome = configsetsDir.getParentFile().getAbsolutePath();\n\n      } finally {\n        closeHttpClient(httpClient);\n      }\n\n      String coreStatusUrl = solrUrl+\"admin/cores?action=STATUS&core=\"+coreName;\n      if (safeCheckCoreExists(coreStatusUrl, coreName)) {\n        System.err.println(\"\\nCore '\"+coreName+\"' already exists!\");\n        System.err.println(\"\\nChecked core existence using Core API command:\\n\"+coreStatusUrl);\n        System.err.println();\n        return 1;\n      }\n\n      File coreInstanceDir = new File(solrHome, coreName);\n      File confDir = new File(configSetDir,\"conf\");\n      if (!coreInstanceDir.isDirectory()) {\n        coreInstanceDir.mkdirs();\n        if (!coreInstanceDir.isDirectory())\n          throw new IOException(\"Failed to create new core instance directory: \"+coreInstanceDir.getAbsolutePath());\n\n        if (confDir.isDirectory()) {\n          FileUtils.copyDirectoryToDirectory(confDir, coreInstanceDir);\n        } else {\n          // hmmm ... the configset we're cloning doesn't have a conf sub-directory,\n          // we'll just assume it is OK if it has solrconfig.xml\n          if ((new File(configSetDir, \"solrconfig.xml\")).isFile()) {\n            FileUtils.copyDirectory(configSetDir, new File(coreInstanceDir, \"conf\"));\n          } else {\n            System.err.println(\"\\n\"+configSetDir.getAbsolutePath()+\" doesn't contain a conf subdirectory or solrconfig.xml\\n\");\n            return 1;\n          }\n        }\n        System.out.println(\"\\nSetup new core instance directory:\\n\"+coreInstanceDir.getAbsolutePath());\n      }\n\n      String createCoreUrl =\n          String.format(Locale.ROOT,\n              \"%sadmin/cores?action=CREATE&name=%s&instanceDir=%s\",\n              solrUrl,\n              coreName,\n              coreName);\n\n      System.out.println(\"\\nCreating new core '\"+coreName+\"' using command:\\n\"+createCoreUrl+\"\\n\");\n\n      Map<String,Object> json = null;\n      try {\n        json = getJson(createCoreUrl);\n      } catch (SolrServerException sse) {\n        // mostly likely the core already exists ...\n        if (safeCheckCoreExists(coreStatusUrl, coreName)) {\n          // core already exists\n          System.err.println(\"Core '\"+coreName+\"' already exists!\");\n          System.err.println(\"\\nChecked core existence using Core API command:\\n\"+coreStatusUrl);\n        } else {\n          System.err.println(\"Failed to create core '\"+coreName+\"' due to: \"+sse.getMessage());\n        }\n        System.err.println();\n        return 1;\n      }\n\n      CharArr arr = new CharArr();\n      new JSONWriter(arr, 2).write(json);\n      System.out.println(arr.toString());\n      System.out.println();\n\n      return 0;\n    }\n\n","sourceOld":"    @Override\n    public int runTool(CommandLine cli) throws Exception {\n\n      String solrUrl = cli.getOptionValue(\"solrUrl\", \"http://localhost:8983/solr\");\n      if (!solrUrl.endsWith(\"/\"))\n        solrUrl += \"/\";\n\n      File configsetsDir = new File(cli.getOptionValue(\"configsetsDir\"));\n      if (!configsetsDir.isDirectory())\n        throw new FileNotFoundException(configsetsDir.getAbsolutePath() + \" not found!\");\n\n      String configSet = cli.getOptionValue(\"confdir\", DEFAULT_CONFIG_SET);\n      File configSetDir = new File(configsetsDir, configSet);\n      if (!configSetDir.isDirectory()) {\n        // we allow them to pass a directory instead of a configset name\n        File possibleConfigDir = new File(configSet);\n        if (possibleConfigDir.isDirectory()) {\n          configSetDir = possibleConfigDir;\n        } else {\n          throw new FileNotFoundException(\"Specified config directory \" + configSet +\n              \" not found in \" + configsetsDir.getAbsolutePath());\n        }\n      }\n\n      String coreName = cli.getOptionValue(\"name\");\n\n      String systemInfoUrl = solrUrl+\"admin/info/system\";\n      CloseableHttpClient httpClient = getHttpClient();\n      String solrHome = null;\n      try {\n        Map<String,Object> systemInfo = getJson(httpClient, systemInfoUrl, 2);\n        if (\"solrcloud\".equals(systemInfo.get(\"mode\"))) {\n          System.err.println(\"\\nERROR: Solr at \"+solrUrl+\n              \" is running in SolrCloud mode, please use create_collection command instead.\\n\");\n          return 1;\n        }\n\n        // convert raw JSON into user-friendly output\n        solrHome = (String)systemInfo.get(\"solr_home\");\n        if (solrHome == null)\n          solrHome = configsetsDir.getParentFile().getAbsolutePath();\n\n      } finally {\n        closeHttpClient(httpClient);\n      }\n\n      String coreStatusUrl = solrUrl+\"admin/cores?action=STATUS&core=\"+coreName;\n      if (safeCheckCoreExists(coreStatusUrl, coreName)) {\n        System.err.println(\"\\nCore '\"+coreName+\"' already exists!\");\n        System.err.println(\"\\nChecked core existence using Core API command:\\n\"+coreStatusUrl);\n        System.err.println();\n        return 1;\n      }\n\n      File coreInstanceDir = new File(solrHome, coreName);\n      File confDir = new File(configSetDir,\"conf\");\n      if (!coreInstanceDir.isDirectory()) {\n        coreInstanceDir.mkdirs();\n        if (!coreInstanceDir.isDirectory())\n          throw new IOException(\"Failed to create new core instance directory: \"+coreInstanceDir.getAbsolutePath());\n\n        if (confDir.isDirectory()) {\n          FileUtils.copyDirectoryToDirectory(confDir, coreInstanceDir);\n        } else {\n          // hmmm ... the configset we're cloning doesn't have a conf sub-directory,\n          // we'll just assume it is OK if it has solrconfig.xml\n          if ((new File(configSetDir, \"solrconfig.xml\")).isFile()) {\n            FileUtils.copyDirectory(configSetDir, new File(coreInstanceDir, \"conf\"));\n          } else {\n            System.err.println(\"\\n\"+configSetDir.getAbsolutePath()+\" doesn't contain a conf subdirectory or solrconfig.xml\\n\");\n            return 1;\n          }\n        }\n        System.out.println(\"\\nSetup new core instance directory:\\n\"+coreInstanceDir.getAbsolutePath());\n      }\n\n      String createCoreUrl =\n          String.format(Locale.ROOT,\n              \"%sadmin/cores?action=CREATE&name=%s&instanceDir=%s\",\n              solrUrl,\n              coreName,\n              coreName);\n\n      System.out.println(\"\\nCreating new core '\"+coreName+\"' using command:\\n\"+createCoreUrl+\"\\n\");\n\n      Map<String,Object> json = null;\n      try {\n        json = getJson(createCoreUrl);\n      } catch (SolrServerException sse) {\n        // mostly likely the core already exists ...\n        if (safeCheckCoreExists(coreStatusUrl, coreName)) {\n          // core already exists\n          System.err.println(\"Core '\"+coreName+\"' already exists!\");\n          System.err.println(\"\\nChecked core existence using Core API command:\\n\"+coreStatusUrl);\n        } else {\n          System.err.println(\"Failed to create core '\"+coreName+\"' due to: \"+sse.getMessage());\n        }\n        System.err.println();\n        return 1;\n      }\n\n      CharArr arr = new CharArr();\n      new JSONWriter(arr, 2).write(json);\n      System.out.println(arr.toString());\n      System.out.println();\n\n      return 0;\n    }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"d2638f781be724518ff6c2263d14a48cf6e68017","date":1427989059,"type":3,"author":"Robert Muir","isMerge":true,"pathNew":"solr/core/src/java/org/apache/solr/util/SolrCLI.CreateCoreTool#runTool(CommandLine).mjava","pathOld":"solr/core/src/java/org/apache/solr/util/SolrCLI.CreateCoreTool#runTool(CommandLine).mjava","sourceNew":"    @Override\n    public int runTool(CommandLine cli) throws Exception {\n\n      String solrUrl = cli.getOptionValue(\"solrUrl\", \"http://localhost:8983/solr\");\n      if (!solrUrl.endsWith(\"/\"))\n        solrUrl += \"/\";\n\n      File configsetsDir = new File(cli.getOptionValue(\"configsetsDir\"));\n      if (!configsetsDir.isDirectory())\n        throw new FileNotFoundException(configsetsDir.getAbsolutePath() + \" not found!\");\n\n      String configSet = cli.getOptionValue(\"confdir\", DEFAULT_CONFIG_SET);\n      File configSetDir = new File(configsetsDir, configSet);\n      if (!configSetDir.isDirectory()) {\n        // we allow them to pass a directory instead of a configset name\n        File possibleConfigDir = new File(configSet);\n        if (possibleConfigDir.isDirectory()) {\n          configSetDir = possibleConfigDir;\n        } else {\n          throw new FileNotFoundException(\"Specified config directory \" + configSet +\n              \" not found in \" + configsetsDir.getAbsolutePath());\n        }\n      }\n\n      String coreName = cli.getOptionValue(NAME);\n\n      String systemInfoUrl = solrUrl+\"admin/info/system\";\n      CloseableHttpClient httpClient = getHttpClient();\n      String solrHome = null;\n      try {\n        Map<String,Object> systemInfo = getJson(httpClient, systemInfoUrl, 2);\n        if (\"solrcloud\".equals(systemInfo.get(\"mode\"))) {\n          System.err.println(\"\\nERROR: Solr at \"+solrUrl+\n              \" is running in SolrCloud mode, please use create_collection command instead.\\n\");\n          return 1;\n        }\n\n        // convert raw JSON into user-friendly output\n        solrHome = (String)systemInfo.get(\"solr_home\");\n        if (solrHome == null)\n          solrHome = configsetsDir.getParentFile().getAbsolutePath();\n\n      } finally {\n        closeHttpClient(httpClient);\n      }\n\n      String coreStatusUrl = solrUrl+\"admin/cores?action=STATUS&core=\"+coreName;\n      if (safeCheckCoreExists(coreStatusUrl, coreName)) {\n        System.err.println(\"\\nCore '\"+coreName+\"' already exists!\");\n        System.err.println(\"\\nChecked core existence using Core API command:\\n\"+coreStatusUrl);\n        System.err.println();\n        return 1;\n      }\n\n      File coreInstanceDir = new File(solrHome, coreName);\n      File confDir = new File(configSetDir,\"conf\");\n      if (!coreInstanceDir.isDirectory()) {\n        coreInstanceDir.mkdirs();\n        if (!coreInstanceDir.isDirectory())\n          throw new IOException(\"Failed to create new core instance directory: \"+coreInstanceDir.getAbsolutePath());\n\n        if (confDir.isDirectory()) {\n          FileUtils.copyDirectoryToDirectory(confDir, coreInstanceDir);\n        } else {\n          // hmmm ... the configset we're cloning doesn't have a conf sub-directory,\n          // we'll just assume it is OK if it has solrconfig.xml\n          if ((new File(configSetDir, \"solrconfig.xml\")).isFile()) {\n            FileUtils.copyDirectory(configSetDir, new File(coreInstanceDir, \"conf\"));\n          } else {\n            System.err.println(\"\\n\"+configSetDir.getAbsolutePath()+\" doesn't contain a conf subdirectory or solrconfig.xml\\n\");\n            return 1;\n          }\n        }\n        System.out.println(\"\\nSetup new core instance directory:\\n\"+coreInstanceDir.getAbsolutePath());\n      }\n\n      String createCoreUrl =\n          String.format(Locale.ROOT,\n              \"%sadmin/cores?action=CREATE&name=%s&instanceDir=%s\",\n              solrUrl,\n              coreName,\n              coreName);\n\n      System.out.println(\"\\nCreating new core '\"+coreName+\"' using command:\\n\"+createCoreUrl+\"\\n\");\n\n      Map<String,Object> json = null;\n      try {\n        json = getJson(createCoreUrl);\n      } catch (SolrServerException sse) {\n        // mostly likely the core already exists ...\n        if (safeCheckCoreExists(coreStatusUrl, coreName)) {\n          // core already exists\n          System.err.println(\"Core '\"+coreName+\"' already exists!\");\n          System.err.println(\"\\nChecked core existence using Core API command:\\n\"+coreStatusUrl);\n        } else {\n          System.err.println(\"Failed to create core '\"+coreName+\"' due to: \"+sse.getMessage());\n        }\n        System.err.println();\n        return 1;\n      }\n\n      CharArr arr = new CharArr();\n      new JSONWriter(arr, 2).write(json);\n      System.out.println(arr.toString());\n      System.out.println();\n\n      return 0;\n    }\n\n","sourceOld":"    @Override\n    public int runTool(CommandLine cli) throws Exception {\n\n      String solrUrl = cli.getOptionValue(\"solrUrl\", \"http://localhost:8983/solr\");\n      if (!solrUrl.endsWith(\"/\"))\n        solrUrl += \"/\";\n\n      File configsetsDir = new File(cli.getOptionValue(\"configsetsDir\"));\n      if (!configsetsDir.isDirectory())\n        throw new FileNotFoundException(configsetsDir.getAbsolutePath() + \" not found!\");\n\n      String configSet = cli.getOptionValue(\"confdir\", DEFAULT_CONFIG_SET);\n      File configSetDir = new File(configsetsDir, configSet);\n      if (!configSetDir.isDirectory()) {\n        // we allow them to pass a directory instead of a configset name\n        File possibleConfigDir = new File(configSet);\n        if (possibleConfigDir.isDirectory()) {\n          configSetDir = possibleConfigDir;\n        } else {\n          throw new FileNotFoundException(\"Specified config directory \" + configSet +\n              \" not found in \" + configsetsDir.getAbsolutePath());\n        }\n      }\n\n      String coreName = cli.getOptionValue(\"name\");\n\n      String systemInfoUrl = solrUrl+\"admin/info/system\";\n      CloseableHttpClient httpClient = getHttpClient();\n      String solrHome = null;\n      try {\n        Map<String,Object> systemInfo = getJson(httpClient, systemInfoUrl, 2);\n        if (\"solrcloud\".equals(systemInfo.get(\"mode\"))) {\n          System.err.println(\"\\nERROR: Solr at \"+solrUrl+\n              \" is running in SolrCloud mode, please use create_collection command instead.\\n\");\n          return 1;\n        }\n\n        // convert raw JSON into user-friendly output\n        solrHome = (String)systemInfo.get(\"solr_home\");\n        if (solrHome == null)\n          solrHome = configsetsDir.getParentFile().getAbsolutePath();\n\n      } finally {\n        closeHttpClient(httpClient);\n      }\n\n      String coreStatusUrl = solrUrl+\"admin/cores?action=STATUS&core=\"+coreName;\n      if (safeCheckCoreExists(coreStatusUrl, coreName)) {\n        System.err.println(\"\\nCore '\"+coreName+\"' already exists!\");\n        System.err.println(\"\\nChecked core existence using Core API command:\\n\"+coreStatusUrl);\n        System.err.println();\n        return 1;\n      }\n\n      File coreInstanceDir = new File(solrHome, coreName);\n      File confDir = new File(configSetDir,\"conf\");\n      if (!coreInstanceDir.isDirectory()) {\n        coreInstanceDir.mkdirs();\n        if (!coreInstanceDir.isDirectory())\n          throw new IOException(\"Failed to create new core instance directory: \"+coreInstanceDir.getAbsolutePath());\n\n        if (confDir.isDirectory()) {\n          FileUtils.copyDirectoryToDirectory(confDir, coreInstanceDir);\n        } else {\n          // hmmm ... the configset we're cloning doesn't have a conf sub-directory,\n          // we'll just assume it is OK if it has solrconfig.xml\n          if ((new File(configSetDir, \"solrconfig.xml\")).isFile()) {\n            FileUtils.copyDirectory(configSetDir, new File(coreInstanceDir, \"conf\"));\n          } else {\n            System.err.println(\"\\n\"+configSetDir.getAbsolutePath()+\" doesn't contain a conf subdirectory or solrconfig.xml\\n\");\n            return 1;\n          }\n        }\n        System.out.println(\"\\nSetup new core instance directory:\\n\"+coreInstanceDir.getAbsolutePath());\n      }\n\n      String createCoreUrl =\n          String.format(Locale.ROOT,\n              \"%sadmin/cores?action=CREATE&name=%s&instanceDir=%s\",\n              solrUrl,\n              coreName,\n              coreName);\n\n      System.out.println(\"\\nCreating new core '\"+coreName+\"' using command:\\n\"+createCoreUrl+\"\\n\");\n\n      Map<String,Object> json = null;\n      try {\n        json = getJson(createCoreUrl);\n      } catch (SolrServerException sse) {\n        // mostly likely the core already exists ...\n        if (safeCheckCoreExists(coreStatusUrl, coreName)) {\n          // core already exists\n          System.err.println(\"Core '\"+coreName+\"' already exists!\");\n          System.err.println(\"\\nChecked core existence using Core API command:\\n\"+coreStatusUrl);\n        } else {\n          System.err.println(\"Failed to create core '\"+coreName+\"' due to: \"+sse.getMessage());\n        }\n        System.err.println();\n        return 1;\n      }\n\n      CharArr arr = new CharArr();\n      new JSONWriter(arr, 2).write(json);\n      System.out.println(arr.toString());\n      System.out.println();\n\n      return 0;\n    }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"22440a249a0bc8ef779d5a60720725614a9460d4","date":1432375174,"type":3,"author":"Ramkumar Aiyengar","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/util/SolrCLI.CreateCoreTool#runTool(CommandLine).mjava","pathOld":"solr/core/src/java/org/apache/solr/util/SolrCLI.CreateCoreTool#runTool(CommandLine).mjava","sourceNew":"    @Override\n    public int runTool(CommandLine cli) throws Exception {\n\n      String solrUrl = cli.getOptionValue(\"solrUrl\", DEFAULT_SOLR_URL);\n      if (!solrUrl.endsWith(\"/\"))\n        solrUrl += \"/\";\n\n      File configsetsDir = new File(cli.getOptionValue(\"configsetsDir\"));\n      if (!configsetsDir.isDirectory())\n        throw new FileNotFoundException(configsetsDir.getAbsolutePath() + \" not found!\");\n\n      String configSet = cli.getOptionValue(\"confdir\", DEFAULT_CONFIG_SET);\n      File configSetDir = new File(configsetsDir, configSet);\n      if (!configSetDir.isDirectory()) {\n        // we allow them to pass a directory instead of a configset name\n        File possibleConfigDir = new File(configSet);\n        if (possibleConfigDir.isDirectory()) {\n          configSetDir = possibleConfigDir;\n        } else {\n          throw new FileNotFoundException(\"Specified config directory \" + configSet +\n              \" not found in \" + configsetsDir.getAbsolutePath());\n        }\n      }\n\n      String coreName = cli.getOptionValue(NAME);\n\n      String systemInfoUrl = solrUrl+\"admin/info/system\";\n      CloseableHttpClient httpClient = getHttpClient();\n      String solrHome = null;\n      try {\n        Map<String,Object> systemInfo = getJson(httpClient, systemInfoUrl, 2);\n        if (\"solrcloud\".equals(systemInfo.get(\"mode\"))) {\n          System.err.println(\"\\nERROR: Solr at \"+solrUrl+\n              \" is running in SolrCloud mode, please use create_collection command instead.\\n\");\n          return 1;\n        }\n\n        // convert raw JSON into user-friendly output\n        solrHome = (String)systemInfo.get(\"solr_home\");\n        if (solrHome == null)\n          solrHome = configsetsDir.getParentFile().getAbsolutePath();\n\n      } finally {\n        closeHttpClient(httpClient);\n      }\n\n      String coreStatusUrl = solrUrl+\"admin/cores?action=STATUS&core=\"+coreName;\n      if (safeCheckCoreExists(coreStatusUrl, coreName)) {\n        System.err.println(\"\\nCore '\"+coreName+\"' already exists!\");\n        System.err.println(\"\\nChecked core existence using Core API command:\\n\"+coreStatusUrl);\n        System.err.println();\n        return 1;\n      }\n\n      File coreInstanceDir = new File(solrHome, coreName);\n      File confDir = new File(configSetDir,\"conf\");\n      if (!coreInstanceDir.isDirectory()) {\n        coreInstanceDir.mkdirs();\n        if (!coreInstanceDir.isDirectory())\n          throw new IOException(\"Failed to create new core instance directory: \"+coreInstanceDir.getAbsolutePath());\n\n        if (confDir.isDirectory()) {\n          FileUtils.copyDirectoryToDirectory(confDir, coreInstanceDir);\n        } else {\n          // hmmm ... the configset we're cloning doesn't have a conf sub-directory,\n          // we'll just assume it is OK if it has solrconfig.xml\n          if ((new File(configSetDir, \"solrconfig.xml\")).isFile()) {\n            FileUtils.copyDirectory(configSetDir, new File(coreInstanceDir, \"conf\"));\n          } else {\n            System.err.println(\"\\n\"+configSetDir.getAbsolutePath()+\" doesn't contain a conf subdirectory or solrconfig.xml\\n\");\n            return 1;\n          }\n        }\n        System.out.println(\"\\nSetup new core instance directory:\\n\"+coreInstanceDir.getAbsolutePath());\n      }\n\n      String createCoreUrl =\n          String.format(Locale.ROOT,\n              \"%sadmin/cores?action=CREATE&name=%s&instanceDir=%s\",\n              solrUrl,\n              coreName,\n              coreName);\n\n      System.out.println(\"\\nCreating new core '\"+coreName+\"' using command:\\n\"+createCoreUrl+\"\\n\");\n\n      Map<String,Object> json = null;\n      try {\n        json = getJson(createCoreUrl);\n      } catch (SolrServerException sse) {\n        // mostly likely the core already exists ...\n        if (safeCheckCoreExists(coreStatusUrl, coreName)) {\n          // core already exists\n          System.err.println(\"Core '\"+coreName+\"' already exists!\");\n          System.err.println(\"\\nChecked core existence using Core API command:\\n\"+coreStatusUrl);\n        } else {\n          System.err.println(\"Failed to create core '\"+coreName+\"' due to: \"+sse.getMessage());\n        }\n        System.err.println();\n        return 1;\n      }\n\n      CharArr arr = new CharArr();\n      new JSONWriter(arr, 2).write(json);\n      System.out.println(arr.toString());\n      System.out.println();\n\n      return 0;\n    }\n\n","sourceOld":"    @Override\n    public int runTool(CommandLine cli) throws Exception {\n\n      String solrUrl = cli.getOptionValue(\"solrUrl\", \"http://localhost:8983/solr\");\n      if (!solrUrl.endsWith(\"/\"))\n        solrUrl += \"/\";\n\n      File configsetsDir = new File(cli.getOptionValue(\"configsetsDir\"));\n      if (!configsetsDir.isDirectory())\n        throw new FileNotFoundException(configsetsDir.getAbsolutePath() + \" not found!\");\n\n      String configSet = cli.getOptionValue(\"confdir\", DEFAULT_CONFIG_SET);\n      File configSetDir = new File(configsetsDir, configSet);\n      if (!configSetDir.isDirectory()) {\n        // we allow them to pass a directory instead of a configset name\n        File possibleConfigDir = new File(configSet);\n        if (possibleConfigDir.isDirectory()) {\n          configSetDir = possibleConfigDir;\n        } else {\n          throw new FileNotFoundException(\"Specified config directory \" + configSet +\n              \" not found in \" + configsetsDir.getAbsolutePath());\n        }\n      }\n\n      String coreName = cli.getOptionValue(NAME);\n\n      String systemInfoUrl = solrUrl+\"admin/info/system\";\n      CloseableHttpClient httpClient = getHttpClient();\n      String solrHome = null;\n      try {\n        Map<String,Object> systemInfo = getJson(httpClient, systemInfoUrl, 2);\n        if (\"solrcloud\".equals(systemInfo.get(\"mode\"))) {\n          System.err.println(\"\\nERROR: Solr at \"+solrUrl+\n              \" is running in SolrCloud mode, please use create_collection command instead.\\n\");\n          return 1;\n        }\n\n        // convert raw JSON into user-friendly output\n        solrHome = (String)systemInfo.get(\"solr_home\");\n        if (solrHome == null)\n          solrHome = configsetsDir.getParentFile().getAbsolutePath();\n\n      } finally {\n        closeHttpClient(httpClient);\n      }\n\n      String coreStatusUrl = solrUrl+\"admin/cores?action=STATUS&core=\"+coreName;\n      if (safeCheckCoreExists(coreStatusUrl, coreName)) {\n        System.err.println(\"\\nCore '\"+coreName+\"' already exists!\");\n        System.err.println(\"\\nChecked core existence using Core API command:\\n\"+coreStatusUrl);\n        System.err.println();\n        return 1;\n      }\n\n      File coreInstanceDir = new File(solrHome, coreName);\n      File confDir = new File(configSetDir,\"conf\");\n      if (!coreInstanceDir.isDirectory()) {\n        coreInstanceDir.mkdirs();\n        if (!coreInstanceDir.isDirectory())\n          throw new IOException(\"Failed to create new core instance directory: \"+coreInstanceDir.getAbsolutePath());\n\n        if (confDir.isDirectory()) {\n          FileUtils.copyDirectoryToDirectory(confDir, coreInstanceDir);\n        } else {\n          // hmmm ... the configset we're cloning doesn't have a conf sub-directory,\n          // we'll just assume it is OK if it has solrconfig.xml\n          if ((new File(configSetDir, \"solrconfig.xml\")).isFile()) {\n            FileUtils.copyDirectory(configSetDir, new File(coreInstanceDir, \"conf\"));\n          } else {\n            System.err.println(\"\\n\"+configSetDir.getAbsolutePath()+\" doesn't contain a conf subdirectory or solrconfig.xml\\n\");\n            return 1;\n          }\n        }\n        System.out.println(\"\\nSetup new core instance directory:\\n\"+coreInstanceDir.getAbsolutePath());\n      }\n\n      String createCoreUrl =\n          String.format(Locale.ROOT,\n              \"%sadmin/cores?action=CREATE&name=%s&instanceDir=%s\",\n              solrUrl,\n              coreName,\n              coreName);\n\n      System.out.println(\"\\nCreating new core '\"+coreName+\"' using command:\\n\"+createCoreUrl+\"\\n\");\n\n      Map<String,Object> json = null;\n      try {\n        json = getJson(createCoreUrl);\n      } catch (SolrServerException sse) {\n        // mostly likely the core already exists ...\n        if (safeCheckCoreExists(coreStatusUrl, coreName)) {\n          // core already exists\n          System.err.println(\"Core '\"+coreName+\"' already exists!\");\n          System.err.println(\"\\nChecked core existence using Core API command:\\n\"+coreStatusUrl);\n        } else {\n          System.err.println(\"Failed to create core '\"+coreName+\"' due to: \"+sse.getMessage());\n        }\n        System.err.println();\n        return 1;\n      }\n\n      CharArr arr = new CharArr();\n      new JSONWriter(arr, 2).write(json);\n      System.out.println(arr.toString());\n      System.out.println();\n\n      return 0;\n    }\n\n","bugFix":["1b1713aa2c66e65f3f024e9c3c4876dfed130ceb"],"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"4ca20be81c9284c840498143264e583ccbb8525a","date":1438705932,"type":5,"author":"Timothy Potter","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/util/SolrCLI.CreateCoreTool#runImpl(CommandLine).mjava","pathOld":"solr/core/src/java/org/apache/solr/util/SolrCLI.CreateCoreTool#runTool(CommandLine).mjava","sourceNew":"    protected void runImpl(CommandLine cli) throws Exception {\n\n      String solrUrl = cli.getOptionValue(\"solrUrl\", DEFAULT_SOLR_URL);\n      if (!solrUrl.endsWith(\"/\"))\n        solrUrl += \"/\";\n\n      File configsetsDir = new File(cli.getOptionValue(\"configsetsDir\"));\n      if (!configsetsDir.isDirectory())\n        throw new FileNotFoundException(configsetsDir.getAbsolutePath() + \" not found!\");\n\n      String configSet = cli.getOptionValue(\"confdir\", DEFAULT_CONFIG_SET);\n      File configSetDir = new File(configsetsDir, configSet);\n      if (!configSetDir.isDirectory()) {\n        // we allow them to pass a directory instead of a configset name\n        File possibleConfigDir = new File(configSet);\n        if (possibleConfigDir.isDirectory()) {\n          configSetDir = possibleConfigDir;\n        } else {\n          throw new FileNotFoundException(\"Specified config directory \" + configSet +\n              \" not found in \" + configsetsDir.getAbsolutePath());\n        }\n      }\n\n      String coreName = cli.getOptionValue(NAME);\n\n      String systemInfoUrl = solrUrl+\"admin/info/system\";\n      CloseableHttpClient httpClient = getHttpClient();\n      String solrHome = null;\n      try {\n        Map<String,Object> systemInfo = getJson(httpClient, systemInfoUrl, 2, true);\n        if (\"solrcloud\".equals(systemInfo.get(\"mode\"))) {\n          throw new IllegalStateException(\"Solr at \"+solrUrl+\n              \" is running in SolrCloud mode, please use create_collection command instead.\");\n        }\n\n        // convert raw JSON into user-friendly output\n        solrHome = (String)systemInfo.get(\"solr_home\");\n        if (solrHome == null)\n          solrHome = configsetsDir.getParentFile().getAbsolutePath();\n\n      } finally {\n        closeHttpClient(httpClient);\n      }\n\n      String coreStatusUrl = solrUrl+\"admin/cores?action=STATUS&core=\"+coreName;\n      if (safeCheckCoreExists(coreStatusUrl, coreName)) {\n        throw new IllegalArgumentException(\"\\nCore '\"+coreName+\n            \"' already exists!\\nChecked core existence using Core API command:\\n\"+coreStatusUrl);\n      }\n\n      File coreInstanceDir = new File(solrHome, coreName);\n      File confDir = new File(configSetDir,\"conf\");\n      if (!coreInstanceDir.isDirectory()) {\n        coreInstanceDir.mkdirs();\n        if (!coreInstanceDir.isDirectory())\n          throw new IOException(\"Failed to create new core instance directory: \"+coreInstanceDir.getAbsolutePath());\n\n        if (confDir.isDirectory()) {\n          FileUtils.copyDirectoryToDirectory(confDir, coreInstanceDir);\n        } else {\n          // hmmm ... the configset we're cloning doesn't have a conf sub-directory,\n          // we'll just assume it is OK if it has solrconfig.xml\n          if ((new File(configSetDir, \"solrconfig.xml\")).isFile()) {\n            FileUtils.copyDirectory(configSetDir, new File(coreInstanceDir, \"conf\"));\n          } else {\n            throw new IllegalArgumentException(\"\\n\"+configSetDir.getAbsolutePath()+\" doesn't contain a conf subdirectory or solrconfig.xml\\n\");\n          }\n        }\n        echo(\"\\nSetup new core instance directory:\\n\" + coreInstanceDir.getAbsolutePath());\n      }\n\n      String createCoreUrl =\n          String.format(Locale.ROOT,\n              \"%sadmin/cores?action=CREATE&name=%s&instanceDir=%s\",\n              solrUrl,\n              coreName,\n              coreName);\n\n      echo(\"\\nCreating new core '\" + coreName + \"' using command:\\n\" + createCoreUrl + \"\\n\");\n\n      Map<String,Object> json = null;\n      try {\n        json = getJson(createCoreUrl);\n      } catch (SolrServerException sse) {\n        // mostly likely the core already exists ...\n        if (safeCheckCoreExists(coreStatusUrl, coreName)) {\n          // core already exists\n          throw new IllegalArgumentException(\"Core '\"+coreName+\"' already exists!\\nChecked core existence using Core API command:\\n\"+coreStatusUrl);\n        } else {\n          throw sse;\n        }\n      }\n\n      CharArr arr = new CharArr();\n      new JSONWriter(arr, 2).write(json);\n      echo(arr.toString());\n      echo(\"\\n\");\n    }\n\n","sourceOld":"    @Override\n    public int runTool(CommandLine cli) throws Exception {\n\n      String solrUrl = cli.getOptionValue(\"solrUrl\", DEFAULT_SOLR_URL);\n      if (!solrUrl.endsWith(\"/\"))\n        solrUrl += \"/\";\n\n      File configsetsDir = new File(cli.getOptionValue(\"configsetsDir\"));\n      if (!configsetsDir.isDirectory())\n        throw new FileNotFoundException(configsetsDir.getAbsolutePath() + \" not found!\");\n\n      String configSet = cli.getOptionValue(\"confdir\", DEFAULT_CONFIG_SET);\n      File configSetDir = new File(configsetsDir, configSet);\n      if (!configSetDir.isDirectory()) {\n        // we allow them to pass a directory instead of a configset name\n        File possibleConfigDir = new File(configSet);\n        if (possibleConfigDir.isDirectory()) {\n          configSetDir = possibleConfigDir;\n        } else {\n          throw new FileNotFoundException(\"Specified config directory \" + configSet +\n              \" not found in \" + configsetsDir.getAbsolutePath());\n        }\n      }\n\n      String coreName = cli.getOptionValue(NAME);\n\n      String systemInfoUrl = solrUrl+\"admin/info/system\";\n      CloseableHttpClient httpClient = getHttpClient();\n      String solrHome = null;\n      try {\n        Map<String,Object> systemInfo = getJson(httpClient, systemInfoUrl, 2);\n        if (\"solrcloud\".equals(systemInfo.get(\"mode\"))) {\n          System.err.println(\"\\nERROR: Solr at \"+solrUrl+\n              \" is running in SolrCloud mode, please use create_collection command instead.\\n\");\n          return 1;\n        }\n\n        // convert raw JSON into user-friendly output\n        solrHome = (String)systemInfo.get(\"solr_home\");\n        if (solrHome == null)\n          solrHome = configsetsDir.getParentFile().getAbsolutePath();\n\n      } finally {\n        closeHttpClient(httpClient);\n      }\n\n      String coreStatusUrl = solrUrl+\"admin/cores?action=STATUS&core=\"+coreName;\n      if (safeCheckCoreExists(coreStatusUrl, coreName)) {\n        System.err.println(\"\\nCore '\"+coreName+\"' already exists!\");\n        System.err.println(\"\\nChecked core existence using Core API command:\\n\"+coreStatusUrl);\n        System.err.println();\n        return 1;\n      }\n\n      File coreInstanceDir = new File(solrHome, coreName);\n      File confDir = new File(configSetDir,\"conf\");\n      if (!coreInstanceDir.isDirectory()) {\n        coreInstanceDir.mkdirs();\n        if (!coreInstanceDir.isDirectory())\n          throw new IOException(\"Failed to create new core instance directory: \"+coreInstanceDir.getAbsolutePath());\n\n        if (confDir.isDirectory()) {\n          FileUtils.copyDirectoryToDirectory(confDir, coreInstanceDir);\n        } else {\n          // hmmm ... the configset we're cloning doesn't have a conf sub-directory,\n          // we'll just assume it is OK if it has solrconfig.xml\n          if ((new File(configSetDir, \"solrconfig.xml\")).isFile()) {\n            FileUtils.copyDirectory(configSetDir, new File(coreInstanceDir, \"conf\"));\n          } else {\n            System.err.println(\"\\n\"+configSetDir.getAbsolutePath()+\" doesn't contain a conf subdirectory or solrconfig.xml\\n\");\n            return 1;\n          }\n        }\n        System.out.println(\"\\nSetup new core instance directory:\\n\"+coreInstanceDir.getAbsolutePath());\n      }\n\n      String createCoreUrl =\n          String.format(Locale.ROOT,\n              \"%sadmin/cores?action=CREATE&name=%s&instanceDir=%s\",\n              solrUrl,\n              coreName,\n              coreName);\n\n      System.out.println(\"\\nCreating new core '\"+coreName+\"' using command:\\n\"+createCoreUrl+\"\\n\");\n\n      Map<String,Object> json = null;\n      try {\n        json = getJson(createCoreUrl);\n      } catch (SolrServerException sse) {\n        // mostly likely the core already exists ...\n        if (safeCheckCoreExists(coreStatusUrl, coreName)) {\n          // core already exists\n          System.err.println(\"Core '\"+coreName+\"' already exists!\");\n          System.err.println(\"\\nChecked core existence using Core API command:\\n\"+coreStatusUrl);\n        } else {\n          System.err.println(\"Failed to create core '\"+coreName+\"' due to: \"+sse.getMessage());\n        }\n        System.err.println();\n        return 1;\n      }\n\n      CharArr arr = new CharArr();\n      new JSONWriter(arr, 2).write(json);\n      System.out.println(arr.toString());\n      System.out.println();\n\n      return 0;\n    }\n\n","bugFix":null,"bugIntro":["0f506150a6ebd43fb2833cdf2713e2d1d5bddbd6"],"isBuggy":true,"nexts":[],"revCommit":null}],"commit2Parents":{"4ca20be81c9284c840498143264e583ccbb8525a":["22440a249a0bc8ef779d5a60720725614a9460d4"],"3d1db6f36874f1979916ccb702329fbb09602af8":["6784d0cc613dc1ee97030eaaa5e0754edc22d164"],"22440a249a0bc8ef779d5a60720725614a9460d4":["1390137e395d2f07f9ba5b8c43d293befe84d563"],"1390137e395d2f07f9ba5b8c43d293befe84d563":["3d1db6f36874f1979916ccb702329fbb09602af8"],"209c0259a9b7087b2111411ec790d6557ef86307":["1b1713aa2c66e65f3f024e9c3c4876dfed130ceb"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"d2638f781be724518ff6c2263d14a48cf6e68017":["3d1db6f36874f1979916ccb702329fbb09602af8","1390137e395d2f07f9ba5b8c43d293befe84d563"],"6784d0cc613dc1ee97030eaaa5e0754edc22d164":["209c0259a9b7087b2111411ec790d6557ef86307"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["4ca20be81c9284c840498143264e583ccbb8525a"],"1b1713aa2c66e65f3f024e9c3c4876dfed130ceb":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"]},"commit2Childs":{"4ca20be81c9284c840498143264e583ccbb8525a":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"3d1db6f36874f1979916ccb702329fbb09602af8":["1390137e395d2f07f9ba5b8c43d293befe84d563","d2638f781be724518ff6c2263d14a48cf6e68017"],"22440a249a0bc8ef779d5a60720725614a9460d4":["4ca20be81c9284c840498143264e583ccbb8525a"],"1390137e395d2f07f9ba5b8c43d293befe84d563":["22440a249a0bc8ef779d5a60720725614a9460d4","d2638f781be724518ff6c2263d14a48cf6e68017"],"209c0259a9b7087b2111411ec790d6557ef86307":["6784d0cc613dc1ee97030eaaa5e0754edc22d164"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["1b1713aa2c66e65f3f024e9c3c4876dfed130ceb"],"d2638f781be724518ff6c2263d14a48cf6e68017":[],"6784d0cc613dc1ee97030eaaa5e0754edc22d164":["3d1db6f36874f1979916ccb702329fbb09602af8"],"1b1713aa2c66e65f3f024e9c3c4876dfed130ceb":["209c0259a9b7087b2111411ec790d6557ef86307"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["d2638f781be724518ff6c2263d14a48cf6e68017","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}