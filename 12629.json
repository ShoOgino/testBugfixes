{"path":"lucene/analysis/common/src/test/org/apache/lucene/analysis/charfilter/HTMLStripCharFilterTest#testMalformedHTML().mjava","commits":[{"id":"b89678825b68eccaf09e6ab71675fc0b0af1e099","date":1334669779,"type":1,"author":"Robert Muir","isMerge":false,"pathNew":"lucene/analysis/common/src/test/org/apache/lucene/analysis/charfilter/HTMLStripCharFilterTest#testMalformedHTML().mjava","pathOld":"modules/analysis/common/src/test/org/apache/lucene/analysis/charfilter/HTMLStripCharFilterTest#testMalformedHTML().mjava","sourceNew":"  public void testMalformedHTML() throws Exception {\n    String[] testGold = {\n        \"a <a hr<ef=aa<a>> </close</a>\",\n        \"a <a hr<ef=aa> </close\",\n\n        \"<a href=http://dmoz.org/cgi-bin/add.cgi?where=/arts/\\\" class=lu style=\\\"font-size: 9px\\\" target=dmoz>Submit a Site</a>\",\n        \"Submit a Site\",\n\n        \"<a href=javascript:ioSwitch('p8','http://www.csmonitor.com/') title=expand id=e8 class=expanded rel=http://www.csmonitor.com/>Christian Science\",\n        \"Christian Science\",\n\n        \"<link rel=\\\"alternate\\\" type=\\\"application/rss+xml\\\" title=\\\"San Francisco \\\" 2008 RSS Feed\\\" href=\\\"http://2008.sf.wordcamp.org/feed/\\\" />\",\n        \"\\n\",\n\n        // \"<\" before \">\" inhibits tag recognition\n        \"<a href=\\\" http://www.surgery4was.happyhost.org/video-of-arthroscopic-knee-surgery symptoms.html, heat congestive heart failure <a href=\\\" http://www.symptoms1bad.happyhost.org/canine\",\n        \"<a href=\\\" http://www.surgery4was.happyhost.org/video-of-arthroscopic-knee-surgery symptoms.html, heat congestive heart failure <a href=\\\" http://www.symptoms1bad.happyhost.org/canine\",\n\n        \"<a href=\\\"http://ucblibraries.colorado.edu/how/index.htm\\\"class=\\\"pageNavAreaText\\\">\",\n        \"\",\n\n        \"<link title=\\\"^\\\\\\\" 21Sta's Blog\\\" rel=\\\"search\\\"  type=\\\"application/opensearchdescription+xml\\\"  href=\\\"http://21sta.com/blog/inc/opensearch.php\\\" />\",\n        \"\\n\",\n\n        \"<a href=\\\"#postcomment\\\" title=\\\"\\\"Leave a comment\\\";\\\">?\",\n        \"?\",\n\n        \"<a href='/modern-furniture'   ' id='21txt' class='offtab'   onMouseout=\\\"this.className='offtab';  return true;\\\" onMouseover=\\\"this.className='ontab';  return true;\\\">\",\n        \"\",\n\n        \"<a href='http://alievi.wordpress.com/category/01-todos-posts/' style='font-size: 275%; padding: 1px; margin: 1px;' title='01 - Todos Post's (83)'>\",\n        \"\",\n\n        \"The <a href=<a href=\\\"http://www.advancedmd.com>medical\\\">http://www.advancedmd.com>medical</a> practice software</a>\",\n        \"The <a href=medical\\\">http://www.advancedmd.com>medical practice software\",\n\n        \"<a href=\\\"node/21426\\\" class=\\\"clipTitle2\\\" title=\\\"Levi.com/BMX 2008 Clip of the Week 29 \\\"Morgan Wade Leftover Clips\\\"\\\">Levi.com/BMX 2008 Clip of the Week 29...\",\n        \"Levi.com/BMX 2008 Clip of the Week 29...\",\n\n        \"<a href=\\\"printer_friendly.php?branch=&year=&submit=go&screen=\\\";\\\">Printer Friendly\",\n        \"Printer Friendly\",\n\n        \"<a href=#\\\" ondragstart=\\\"return false\\\" onclick=\\\"window.external.AddFavorite('http://www.amazingtextures.com', 'Amazing Textures');return false\\\" onmouseover=\\\"window.status='Add to Favorites';return true\\\">Add to Favorites\",\n        \"Add to Favorites\",\n\n        \"<a href=\\\"../at_home/at_home_search.html\\\"../_home/at_home_search.html\\\">At\",\n        \"At\",\n\n        \"E-mail: <a href=\\\"\\\"mailto:XXXXXX@example.com\\\" \\\">XXXXXX@example.com </a>\",\n        \"E-mail: XXXXXX@example.com \",\n\n        \"<li class=\\\"farsi\\\"><a title=\\\"A'13?\\\" alt=\\\"A'13?\\\" href=\\\"http://www.america.gov/persian\\\" alt=\\\"\\\" name=\\\"A'13?\\\"A'13? title=\\\"A'13?\\\">A'13?</a></li>\",\n        \"\\nA'13?\\n\",\n\n        \"<li><a href=\\\"#28\\\" title=\\\"Hubert \\\"Geese\\\" Ausby\\\">Hubert \\\"Geese\\\" Ausby</a></li>\",\n        \"\\nHubert \\\"Geese\\\" Ausby\\n\",\n\n        \"<href=\\\"http://anbportal.com/mms/login.asp\\\">\",\n        \"\\n\",\n\n        \"<a href=\\\"\",\n        \"<a href=\\\"\",\n\n        \"<a href=\\\">\",\n        \"\",\n\n        \"<a rel=\\\"nofollow\\\" href=\\\"http://anissanina31.skyrock.com/1895039493-Hi-tout-le-monde.html\\\" title=\\\" Hi, tout le monde !>#</a>\",\n        \"#\",\n\n        \"<a href=\\\"http://annunciharleydavidsonusate.myblog.it/\\\" title=\\\"Annunci Moto e Accessori Harley Davidson\\\" target=\\\"_blank\\\"><img src=\\\"http://annunciharleydavidsonusate.myblog.it/images/Antipixel.gif\\\" /></a>\",\n        \"\",\n\n        \"<a href=\\\"video/addvideo&v=120838887181\\\" onClick=\\\"return confirm('Are you sure you want  add this video to your profile? If it exists some video in your profile will be overlapped by this video!!')\\\" \\\" onmouseover=\\\"this.className='border2'\\\" onmouseout=\\\"this.className=''\\\">\",\n        \"\",\n\n        \"<a href=#Services & Support>\",\n        \"\",\n\n        // \"<\" and \">\" chars are accepted in on[Event] attribute values\n        \"<input type=\\\"image\\\" src=\\\"http://apologyindex.com/ThemeFiles/83401-72905/images/btn_search.gif\\\"value=\\\"Search\\\" name=\\\"Search\\\" alt=\\\"Search\\\" class=\\\"searchimage\\\" onclick=\\\"incom ='&sc=' + document.getElementById('sel').value ; var dt ='&dt=' + document.getElementById('dt').value; var searchKeyword = document.getElementById('q').value ; searchKeyword = searchKeyword.replace(/\\\\s/g,''); if (searchKeyword.length < 3){alert('Nothing to search. Search keyword should contain atleast 3 chars.'); return false; } var al='&al=' +  document.getElementById('advancedlink').style.display ;  document.location.href='http://apologyindex.com/search.aspx?q=' + document.getElementById('q').value + incom + dt + al;\\\" />\",\n        \"\",\n\n        \"<input type=\\\"image\\\" src=\\\"images/afbe.gif\\\" width=\\\"22\\\" height=\\\"22\\\"  hspace=\\\"4\\\" title=\\\"Add to Favorite\\\" alt=\\\"Add to Favorite\\\"onClick=\\\" if(window.sidebar){ window.sidebar.addPanel(document.title,location.href,''); }else if(window.external){ window.external.AddFavorite(location.href,document.title); }else if(window.opera&&window.print) { return true; }\\\">\",\n        \"\",\n\n        \"<area shape=\\\"rect\\\" coords=\\\"12,153,115,305\\\" href=\\\"http://statenislandtalk.com/v-web/gallery/Osmundsen-family\\\"Art's Norwegian Roots in Rogaland\\\">\",\n        \"\\n\",\n\n        \"<a rel=\\\"nofollow\\\" href=\\\"http://arth26.skyrock.com/660188240-bonzai.html\\\" title=\\\"bonza>#\",\n        \"#\",\n\n        \"<a href=  >\",\n        \"\",\n\n        \"<ahref=http:..\",\n        \"<ahref=http:..\",\n\n        \"<ahref=http:..>\",\n        \"\\n\",\n\n        \"<ahref=\\\"http://aseigo.bddf.ca/cms/1025\\\">A\",\n        \"\\nA\",\n\n        \"<a href=\\\"javascript:calendar_window=window.open('/calendar.aspx?formname=frmCalendar.txtDate','calendar_window','width=154,height=188');calendar_window.focus()\\\">\",\n        \"\",\n\n        \"<a href=\\\"/applications/defenseaerospace/19+rackmounts\\\" title=\\\"19\\\" Rackmounts\\\">\",\n        \"\",\n\n        \"<a href=http://www.azimprimerie.fr/flash/backup/lewes-zip-code/savage-model-110-manual.html title=savage model 110 manual rel=dofollow>\",\n        \"\",\n\n        \"<a class=\\\"at\\\" name=\\\"Lamborghini  href=\\\"http://lamborghini.coolbegin.com\\\">Lamborghini /a>\",\n        \"Lamborghini /a>\",\n\n        \"<A href='newslink.php?news_link=http%3A%2F%2Fwww.worldnetdaily.com%2Findex.php%3Ffa%3DPAGE.view%26pageId%3D85729&news_title=Florida QB makes 'John 3:16' hottest Google search Tebow inscribed Bible reference on eye black for championship game' TARGET=_blank>\",\n        \"\",\n\n        \"<a href=/myspace !style='color:#993333'>\",\n        \"\",\n\n        \"<meta name=3DProgId content=3DExcel.Sheet>\",\n        \"\\n\",\n\n        \"<link id=3D\\\"shLink\\\" href=3D\\\"PSABrKelly-BADMINTONCupResults08FINAL2008_09_19=_files/sheet004.htm\\\">\",\n        \"\\n\",\n\n        \"<td bgcolor=3D\\\"#FFFFFF\\\" nowrap>\",\n        \"\\n\",\n\n        \"<a href=\\\"http://basnect.info/usersearch/\\\"predicciones-mundiales-2009\\\".html\\\">\\\"predicciones mundiales 2009\\\"</a>\",\n        \"\\\"predicciones mundiales 2009\\\"\",\n\n        \"<a class=\\\"comment-link\\\" href=\\\"https://www.blogger.com/comment.g?blogID=19402125&postID=114070605958684588\\\"location.href=https://www.blogger.com/comment.g?blogID=19402125&postID=114070605958684588;>\",\n        \"\",\n\n        \"<a href = \\\"/videos/Bishop\\\"/\\\" title = \\\"click to see more Bishop\\\" videos\\\">Bishop\\\"</a>\",\n        \"Bishop\\\"\",\n\n        \"<a href=\\\"http://bhaa.ie/calendar/event.php?eid=20081203150127531\\\"\\\">BHAA Eircom 2 &amp; 5 miles CC combined start</a>\",\n        \"BHAA Eircom 2 & 5 miles CC combined start\",\n\n        \"<a href=\\\"http://people.tribe.net/wolfmana\\\" onClick='setClick(\\\"Application[tribe].Person[bb7df210-9dc0-478c-917f-436b896bcb79]\\\")'\\\" title=\\\"Mana\\\">\",\n        \"\",\n\n        \"<a  href=\\\"http://blog.edu-cyberpg.com/ct.ashx?id=6143c528-080c-4bb2-b765-5ec56c8256d3&url=http%3a%2f%2fwww.gsa.ac.uk%2fmackintoshsketchbook%2f\\\"\\\" eudora=\\\"autourl\\\">\",\n        \"\",\n\n        // \"<\" before \">\" inhibits tag recognition\n        \"<input type=\\\"text\\\" value=\\\"<search here>\\\">\",\n        \"<input type=\\\"text\\\" value=\\\"\\n\\\">\",\n\n        \"<input type=\\\"text\\\" value=\\\"<search here\\\">\",\n        \"<input type=\\\"text\\\" value=\\\"\\n\",\n\n        \"<input type=\\\"text\\\" value=\\\"search here>\\\">\",\n        \"\\\">\",\n\n        // \"<\" and \">\" chars are accepted in on[Event] attribute values\n        \"<input type=\\\"text\\\" value=\\\"&lt;search here&gt;\\\" onFocus=\\\"this.value='<search here>'\\\">\",\n        \"\",\n\n        \"<![if ! IE]>\\n<link href=\\\"http://i.deviantart.com/icons/favicon.png\\\" rel=\\\"shortcut icon\\\"/>\\n<![endif]>\",\n        \"\\n\\n\\n\",\n\n        \"<![if supportMisalignedColumns]>\\n<tr height=0 style='display:none'>\\n<td width=64 style='width:48pt'></td>\\n</tr>\\n<![endif]>\",\n        \"\\n\\n\\n\\n\\n\\n\\n\\n\",\n    };\n    for (int i = 0 ; i < testGold.length ; i += 2) {\n      String test = testGold[i];\n      String gold = testGold[i + 1];\n      Reader reader = new HTMLStripCharFilter(CharReader.get(new StringReader(test)));\n      StringBuilder builder = new StringBuilder();\n      int ch = 0;\n      while ((ch = reader.read()) != -1){\n        builder.append((char)ch);\n      }\n      String result = builder.toString();\n      assertEquals(\"Test: '\" + test + \"'\", gold, result);\n    }\n  }\n\n","sourceOld":"  public void testMalformedHTML() throws Exception {\n    String[] testGold = {\n        \"a <a hr<ef=aa<a>> </close</a>\",\n        \"a <a hr<ef=aa> </close\",\n\n        \"<a href=http://dmoz.org/cgi-bin/add.cgi?where=/arts/\\\" class=lu style=\\\"font-size: 9px\\\" target=dmoz>Submit a Site</a>\",\n        \"Submit a Site\",\n\n        \"<a href=javascript:ioSwitch('p8','http://www.csmonitor.com/') title=expand id=e8 class=expanded rel=http://www.csmonitor.com/>Christian Science\",\n        \"Christian Science\",\n\n        \"<link rel=\\\"alternate\\\" type=\\\"application/rss+xml\\\" title=\\\"San Francisco \\\" 2008 RSS Feed\\\" href=\\\"http://2008.sf.wordcamp.org/feed/\\\" />\",\n        \"\\n\",\n\n        // \"<\" before \">\" inhibits tag recognition\n        \"<a href=\\\" http://www.surgery4was.happyhost.org/video-of-arthroscopic-knee-surgery symptoms.html, heat congestive heart failure <a href=\\\" http://www.symptoms1bad.happyhost.org/canine\",\n        \"<a href=\\\" http://www.surgery4was.happyhost.org/video-of-arthroscopic-knee-surgery symptoms.html, heat congestive heart failure <a href=\\\" http://www.symptoms1bad.happyhost.org/canine\",\n\n        \"<a href=\\\"http://ucblibraries.colorado.edu/how/index.htm\\\"class=\\\"pageNavAreaText\\\">\",\n        \"\",\n\n        \"<link title=\\\"^\\\\\\\" 21Sta's Blog\\\" rel=\\\"search\\\"  type=\\\"application/opensearchdescription+xml\\\"  href=\\\"http://21sta.com/blog/inc/opensearch.php\\\" />\",\n        \"\\n\",\n\n        \"<a href=\\\"#postcomment\\\" title=\\\"\\\"Leave a comment\\\";\\\">?\",\n        \"?\",\n\n        \"<a href='/modern-furniture'   ' id='21txt' class='offtab'   onMouseout=\\\"this.className='offtab';  return true;\\\" onMouseover=\\\"this.className='ontab';  return true;\\\">\",\n        \"\",\n\n        \"<a href='http://alievi.wordpress.com/category/01-todos-posts/' style='font-size: 275%; padding: 1px; margin: 1px;' title='01 - Todos Post's (83)'>\",\n        \"\",\n\n        \"The <a href=<a href=\\\"http://www.advancedmd.com>medical\\\">http://www.advancedmd.com>medical</a> practice software</a>\",\n        \"The <a href=medical\\\">http://www.advancedmd.com>medical practice software\",\n\n        \"<a href=\\\"node/21426\\\" class=\\\"clipTitle2\\\" title=\\\"Levi.com/BMX 2008 Clip of the Week 29 \\\"Morgan Wade Leftover Clips\\\"\\\">Levi.com/BMX 2008 Clip of the Week 29...\",\n        \"Levi.com/BMX 2008 Clip of the Week 29...\",\n\n        \"<a href=\\\"printer_friendly.php?branch=&year=&submit=go&screen=\\\";\\\">Printer Friendly\",\n        \"Printer Friendly\",\n\n        \"<a href=#\\\" ondragstart=\\\"return false\\\" onclick=\\\"window.external.AddFavorite('http://www.amazingtextures.com', 'Amazing Textures');return false\\\" onmouseover=\\\"window.status='Add to Favorites';return true\\\">Add to Favorites\",\n        \"Add to Favorites\",\n\n        \"<a href=\\\"../at_home/at_home_search.html\\\"../_home/at_home_search.html\\\">At\",\n        \"At\",\n\n        \"E-mail: <a href=\\\"\\\"mailto:XXXXXX@example.com\\\" \\\">XXXXXX@example.com </a>\",\n        \"E-mail: XXXXXX@example.com \",\n\n        \"<li class=\\\"farsi\\\"><a title=\\\"A'13?\\\" alt=\\\"A'13?\\\" href=\\\"http://www.america.gov/persian\\\" alt=\\\"\\\" name=\\\"A'13?\\\"A'13? title=\\\"A'13?\\\">A'13?</a></li>\",\n        \"\\nA'13?\\n\",\n\n        \"<li><a href=\\\"#28\\\" title=\\\"Hubert \\\"Geese\\\" Ausby\\\">Hubert \\\"Geese\\\" Ausby</a></li>\",\n        \"\\nHubert \\\"Geese\\\" Ausby\\n\",\n\n        \"<href=\\\"http://anbportal.com/mms/login.asp\\\">\",\n        \"\\n\",\n\n        \"<a href=\\\"\",\n        \"<a href=\\\"\",\n\n        \"<a href=\\\">\",\n        \"\",\n\n        \"<a rel=\\\"nofollow\\\" href=\\\"http://anissanina31.skyrock.com/1895039493-Hi-tout-le-monde.html\\\" title=\\\" Hi, tout le monde !>#</a>\",\n        \"#\",\n\n        \"<a href=\\\"http://annunciharleydavidsonusate.myblog.it/\\\" title=\\\"Annunci Moto e Accessori Harley Davidson\\\" target=\\\"_blank\\\"><img src=\\\"http://annunciharleydavidsonusate.myblog.it/images/Antipixel.gif\\\" /></a>\",\n        \"\",\n\n        \"<a href=\\\"video/addvideo&v=120838887181\\\" onClick=\\\"return confirm('Are you sure you want  add this video to your profile? If it exists some video in your profile will be overlapped by this video!!')\\\" \\\" onmouseover=\\\"this.className='border2'\\\" onmouseout=\\\"this.className=''\\\">\",\n        \"\",\n\n        \"<a href=#Services & Support>\",\n        \"\",\n\n        // \"<\" and \">\" chars are accepted in on[Event] attribute values\n        \"<input type=\\\"image\\\" src=\\\"http://apologyindex.com/ThemeFiles/83401-72905/images/btn_search.gif\\\"value=\\\"Search\\\" name=\\\"Search\\\" alt=\\\"Search\\\" class=\\\"searchimage\\\" onclick=\\\"incom ='&sc=' + document.getElementById('sel').value ; var dt ='&dt=' + document.getElementById('dt').value; var searchKeyword = document.getElementById('q').value ; searchKeyword = searchKeyword.replace(/\\\\s/g,''); if (searchKeyword.length < 3){alert('Nothing to search. Search keyword should contain atleast 3 chars.'); return false; } var al='&al=' +  document.getElementById('advancedlink').style.display ;  document.location.href='http://apologyindex.com/search.aspx?q=' + document.getElementById('q').value + incom + dt + al;\\\" />\",\n        \"\",\n\n        \"<input type=\\\"image\\\" src=\\\"images/afbe.gif\\\" width=\\\"22\\\" height=\\\"22\\\"  hspace=\\\"4\\\" title=\\\"Add to Favorite\\\" alt=\\\"Add to Favorite\\\"onClick=\\\" if(window.sidebar){ window.sidebar.addPanel(document.title,location.href,''); }else if(window.external){ window.external.AddFavorite(location.href,document.title); }else if(window.opera&&window.print) { return true; }\\\">\",\n        \"\",\n\n        \"<area shape=\\\"rect\\\" coords=\\\"12,153,115,305\\\" href=\\\"http://statenislandtalk.com/v-web/gallery/Osmundsen-family\\\"Art's Norwegian Roots in Rogaland\\\">\",\n        \"\\n\",\n\n        \"<a rel=\\\"nofollow\\\" href=\\\"http://arth26.skyrock.com/660188240-bonzai.html\\\" title=\\\"bonza>#\",\n        \"#\",\n\n        \"<a href=  >\",\n        \"\",\n\n        \"<ahref=http:..\",\n        \"<ahref=http:..\",\n\n        \"<ahref=http:..>\",\n        \"\\n\",\n\n        \"<ahref=\\\"http://aseigo.bddf.ca/cms/1025\\\">A\",\n        \"\\nA\",\n\n        \"<a href=\\\"javascript:calendar_window=window.open('/calendar.aspx?formname=frmCalendar.txtDate','calendar_window','width=154,height=188');calendar_window.focus()\\\">\",\n        \"\",\n\n        \"<a href=\\\"/applications/defenseaerospace/19+rackmounts\\\" title=\\\"19\\\" Rackmounts\\\">\",\n        \"\",\n\n        \"<a href=http://www.azimprimerie.fr/flash/backup/lewes-zip-code/savage-model-110-manual.html title=savage model 110 manual rel=dofollow>\",\n        \"\",\n\n        \"<a class=\\\"at\\\" name=\\\"Lamborghini  href=\\\"http://lamborghini.coolbegin.com\\\">Lamborghini /a>\",\n        \"Lamborghini /a>\",\n\n        \"<A href='newslink.php?news_link=http%3A%2F%2Fwww.worldnetdaily.com%2Findex.php%3Ffa%3DPAGE.view%26pageId%3D85729&news_title=Florida QB makes 'John 3:16' hottest Google search Tebow inscribed Bible reference on eye black for championship game' TARGET=_blank>\",\n        \"\",\n\n        \"<a href=/myspace !style='color:#993333'>\",\n        \"\",\n\n        \"<meta name=3DProgId content=3DExcel.Sheet>\",\n        \"\\n\",\n\n        \"<link id=3D\\\"shLink\\\" href=3D\\\"PSABrKelly-BADMINTONCupResults08FINAL2008_09_19=_files/sheet004.htm\\\">\",\n        \"\\n\",\n\n        \"<td bgcolor=3D\\\"#FFFFFF\\\" nowrap>\",\n        \"\\n\",\n\n        \"<a href=\\\"http://basnect.info/usersearch/\\\"predicciones-mundiales-2009\\\".html\\\">\\\"predicciones mundiales 2009\\\"</a>\",\n        \"\\\"predicciones mundiales 2009\\\"\",\n\n        \"<a class=\\\"comment-link\\\" href=\\\"https://www.blogger.com/comment.g?blogID=19402125&postID=114070605958684588\\\"location.href=https://www.blogger.com/comment.g?blogID=19402125&postID=114070605958684588;>\",\n        \"\",\n\n        \"<a href = \\\"/videos/Bishop\\\"/\\\" title = \\\"click to see more Bishop\\\" videos\\\">Bishop\\\"</a>\",\n        \"Bishop\\\"\",\n\n        \"<a href=\\\"http://bhaa.ie/calendar/event.php?eid=20081203150127531\\\"\\\">BHAA Eircom 2 &amp; 5 miles CC combined start</a>\",\n        \"BHAA Eircom 2 & 5 miles CC combined start\",\n\n        \"<a href=\\\"http://people.tribe.net/wolfmana\\\" onClick='setClick(\\\"Application[tribe].Person[bb7df210-9dc0-478c-917f-436b896bcb79]\\\")'\\\" title=\\\"Mana\\\">\",\n        \"\",\n\n        \"<a  href=\\\"http://blog.edu-cyberpg.com/ct.ashx?id=6143c528-080c-4bb2-b765-5ec56c8256d3&url=http%3a%2f%2fwww.gsa.ac.uk%2fmackintoshsketchbook%2f\\\"\\\" eudora=\\\"autourl\\\">\",\n        \"\",\n\n        // \"<\" before \">\" inhibits tag recognition\n        \"<input type=\\\"text\\\" value=\\\"<search here>\\\">\",\n        \"<input type=\\\"text\\\" value=\\\"\\n\\\">\",\n\n        \"<input type=\\\"text\\\" value=\\\"<search here\\\">\",\n        \"<input type=\\\"text\\\" value=\\\"\\n\",\n\n        \"<input type=\\\"text\\\" value=\\\"search here>\\\">\",\n        \"\\\">\",\n\n        // \"<\" and \">\" chars are accepted in on[Event] attribute values\n        \"<input type=\\\"text\\\" value=\\\"&lt;search here&gt;\\\" onFocus=\\\"this.value='<search here>'\\\">\",\n        \"\",\n\n        \"<![if ! IE]>\\n<link href=\\\"http://i.deviantart.com/icons/favicon.png\\\" rel=\\\"shortcut icon\\\"/>\\n<![endif]>\",\n        \"\\n\\n\\n\",\n\n        \"<![if supportMisalignedColumns]>\\n<tr height=0 style='display:none'>\\n<td width=64 style='width:48pt'></td>\\n</tr>\\n<![endif]>\",\n        \"\\n\\n\\n\\n\\n\\n\\n\\n\",\n    };\n    for (int i = 0 ; i < testGold.length ; i += 2) {\n      String test = testGold[i];\n      String gold = testGold[i + 1];\n      Reader reader = new HTMLStripCharFilter(CharReader.get(new StringReader(test)));\n      StringBuilder builder = new StringBuilder();\n      int ch = 0;\n      while ((ch = reader.read()) != -1){\n        builder.append((char)ch);\n      }\n      String result = builder.toString();\n      assertEquals(\"Test: '\" + test + \"'\", gold, result);\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"fc706b1e03a539d44d99998108feb684bb44cbb2","date":1342522408,"type":3,"author":"Robert Muir","isMerge":false,"pathNew":"lucene/analysis/common/src/test/org/apache/lucene/analysis/charfilter/HTMLStripCharFilterTest#testMalformedHTML().mjava","pathOld":"lucene/analysis/common/src/test/org/apache/lucene/analysis/charfilter/HTMLStripCharFilterTest#testMalformedHTML().mjava","sourceNew":"  public void testMalformedHTML() throws Exception {\n    String[] testGold = {\n        \"a <a hr<ef=aa<a>> </close</a>\",\n        \"a <a hr<ef=aa> </close\",\n\n        \"<a href=http://dmoz.org/cgi-bin/add.cgi?where=/arts/\\\" class=lu style=\\\"font-size: 9px\\\" target=dmoz>Submit a Site</a>\",\n        \"Submit a Site\",\n\n        \"<a href=javascript:ioSwitch('p8','http://www.csmonitor.com/') title=expand id=e8 class=expanded rel=http://www.csmonitor.com/>Christian Science\",\n        \"Christian Science\",\n\n        \"<link rel=\\\"alternate\\\" type=\\\"application/rss+xml\\\" title=\\\"San Francisco \\\" 2008 RSS Feed\\\" href=\\\"http://2008.sf.wordcamp.org/feed/\\\" />\",\n        \"\\n\",\n\n        // \"<\" before \">\" inhibits tag recognition\n        \"<a href=\\\" http://www.surgery4was.happyhost.org/video-of-arthroscopic-knee-surgery symptoms.html, heat congestive heart failure <a href=\\\" http://www.symptoms1bad.happyhost.org/canine\",\n        \"<a href=\\\" http://www.surgery4was.happyhost.org/video-of-arthroscopic-knee-surgery symptoms.html, heat congestive heart failure <a href=\\\" http://www.symptoms1bad.happyhost.org/canine\",\n\n        \"<a href=\\\"http://ucblibraries.colorado.edu/how/index.htm\\\"class=\\\"pageNavAreaText\\\">\",\n        \"\",\n\n        \"<link title=\\\"^\\\\\\\" 21Sta's Blog\\\" rel=\\\"search\\\"  type=\\\"application/opensearchdescription+xml\\\"  href=\\\"http://21sta.com/blog/inc/opensearch.php\\\" />\",\n        \"\\n\",\n\n        \"<a href=\\\"#postcomment\\\" title=\\\"\\\"Leave a comment\\\";\\\">?\",\n        \"?\",\n\n        \"<a href='/modern-furniture'   ' id='21txt' class='offtab'   onMouseout=\\\"this.className='offtab';  return true;\\\" onMouseover=\\\"this.className='ontab';  return true;\\\">\",\n        \"\",\n\n        \"<a href='http://alievi.wordpress.com/category/01-todos-posts/' style='font-size: 275%; padding: 1px; margin: 1px;' title='01 - Todos Post's (83)'>\",\n        \"\",\n\n        \"The <a href=<a href=\\\"http://www.advancedmd.com>medical\\\">http://www.advancedmd.com>medical</a> practice software</a>\",\n        \"The <a href=medical\\\">http://www.advancedmd.com>medical practice software\",\n\n        \"<a href=\\\"node/21426\\\" class=\\\"clipTitle2\\\" title=\\\"Levi.com/BMX 2008 Clip of the Week 29 \\\"Morgan Wade Leftover Clips\\\"\\\">Levi.com/BMX 2008 Clip of the Week 29...\",\n        \"Levi.com/BMX 2008 Clip of the Week 29...\",\n\n        \"<a href=\\\"printer_friendly.php?branch=&year=&submit=go&screen=\\\";\\\">Printer Friendly\",\n        \"Printer Friendly\",\n\n        \"<a href=#\\\" ondragstart=\\\"return false\\\" onclick=\\\"window.external.AddFavorite('http://www.amazingtextures.com', 'Amazing Textures');return false\\\" onmouseover=\\\"window.status='Add to Favorites';return true\\\">Add to Favorites\",\n        \"Add to Favorites\",\n\n        \"<a href=\\\"../at_home/at_home_search.html\\\"../_home/at_home_search.html\\\">At\",\n        \"At\",\n\n        \"E-mail: <a href=\\\"\\\"mailto:XXXXXX@example.com\\\" \\\">XXXXXX@example.com </a>\",\n        \"E-mail: XXXXXX@example.com \",\n\n        \"<li class=\\\"farsi\\\"><a title=\\\"A'13?\\\" alt=\\\"A'13?\\\" href=\\\"http://www.america.gov/persian\\\" alt=\\\"\\\" name=\\\"A'13?\\\"A'13? title=\\\"A'13?\\\">A'13?</a></li>\",\n        \"\\nA'13?\\n\",\n\n        \"<li><a href=\\\"#28\\\" title=\\\"Hubert \\\"Geese\\\" Ausby\\\">Hubert \\\"Geese\\\" Ausby</a></li>\",\n        \"\\nHubert \\\"Geese\\\" Ausby\\n\",\n\n        \"<href=\\\"http://anbportal.com/mms/login.asp\\\">\",\n        \"\\n\",\n\n        \"<a href=\\\"\",\n        \"<a href=\\\"\",\n\n        \"<a href=\\\">\",\n        \"\",\n\n        \"<a rel=\\\"nofollow\\\" href=\\\"http://anissanina31.skyrock.com/1895039493-Hi-tout-le-monde.html\\\" title=\\\" Hi, tout le monde !>#</a>\",\n        \"#\",\n\n        \"<a href=\\\"http://annunciharleydavidsonusate.myblog.it/\\\" title=\\\"Annunci Moto e Accessori Harley Davidson\\\" target=\\\"_blank\\\"><img src=\\\"http://annunciharleydavidsonusate.myblog.it/images/Antipixel.gif\\\" /></a>\",\n        \"\",\n\n        \"<a href=\\\"video/addvideo&v=120838887181\\\" onClick=\\\"return confirm('Are you sure you want  add this video to your profile? If it exists some video in your profile will be overlapped by this video!!')\\\" \\\" onmouseover=\\\"this.className='border2'\\\" onmouseout=\\\"this.className=''\\\">\",\n        \"\",\n\n        \"<a href=#Services & Support>\",\n        \"\",\n\n        // \"<\" and \">\" chars are accepted in on[Event] attribute values\n        \"<input type=\\\"image\\\" src=\\\"http://apologyindex.com/ThemeFiles/83401-72905/images/btn_search.gif\\\"value=\\\"Search\\\" name=\\\"Search\\\" alt=\\\"Search\\\" class=\\\"searchimage\\\" onclick=\\\"incom ='&sc=' + document.getElementById('sel').value ; var dt ='&dt=' + document.getElementById('dt').value; var searchKeyword = document.getElementById('q').value ; searchKeyword = searchKeyword.replace(/\\\\s/g,''); if (searchKeyword.length < 3){alert('Nothing to search. Search keyword should contain atleast 3 chars.'); return false; } var al='&al=' +  document.getElementById('advancedlink').style.display ;  document.location.href='http://apologyindex.com/search.aspx?q=' + document.getElementById('q').value + incom + dt + al;\\\" />\",\n        \"\",\n\n        \"<input type=\\\"image\\\" src=\\\"images/afbe.gif\\\" width=\\\"22\\\" height=\\\"22\\\"  hspace=\\\"4\\\" title=\\\"Add to Favorite\\\" alt=\\\"Add to Favorite\\\"onClick=\\\" if(window.sidebar){ window.sidebar.addPanel(document.title,location.href,''); }else if(window.external){ window.external.AddFavorite(location.href,document.title); }else if(window.opera&&window.print) { return true; }\\\">\",\n        \"\",\n\n        \"<area shape=\\\"rect\\\" coords=\\\"12,153,115,305\\\" href=\\\"http://statenislandtalk.com/v-web/gallery/Osmundsen-family\\\"Art's Norwegian Roots in Rogaland\\\">\",\n        \"\\n\",\n\n        \"<a rel=\\\"nofollow\\\" href=\\\"http://arth26.skyrock.com/660188240-bonzai.html\\\" title=\\\"bonza>#\",\n        \"#\",\n\n        \"<a href=  >\",\n        \"\",\n\n        \"<ahref=http:..\",\n        \"<ahref=http:..\",\n\n        \"<ahref=http:..>\",\n        \"\\n\",\n\n        \"<ahref=\\\"http://aseigo.bddf.ca/cms/1025\\\">A\",\n        \"\\nA\",\n\n        \"<a href=\\\"javascript:calendar_window=window.open('/calendar.aspx?formname=frmCalendar.txtDate','calendar_window','width=154,height=188');calendar_window.focus()\\\">\",\n        \"\",\n\n        \"<a href=\\\"/applications/defenseaerospace/19+rackmounts\\\" title=\\\"19\\\" Rackmounts\\\">\",\n        \"\",\n\n        \"<a href=http://www.azimprimerie.fr/flash/backup/lewes-zip-code/savage-model-110-manual.html title=savage model 110 manual rel=dofollow>\",\n        \"\",\n\n        \"<a class=\\\"at\\\" name=\\\"Lamborghini  href=\\\"http://lamborghini.coolbegin.com\\\">Lamborghini /a>\",\n        \"Lamborghini /a>\",\n\n        \"<A href='newslink.php?news_link=http%3A%2F%2Fwww.worldnetdaily.com%2Findex.php%3Ffa%3DPAGE.view%26pageId%3D85729&news_title=Florida QB makes 'John 3:16' hottest Google search Tebow inscribed Bible reference on eye black for championship game' TARGET=_blank>\",\n        \"\",\n\n        \"<a href=/myspace !style='color:#993333'>\",\n        \"\",\n\n        \"<meta name=3DProgId content=3DExcel.Sheet>\",\n        \"\\n\",\n\n        \"<link id=3D\\\"shLink\\\" href=3D\\\"PSABrKelly-BADMINTONCupResults08FINAL2008_09_19=_files/sheet004.htm\\\">\",\n        \"\\n\",\n\n        \"<td bgcolor=3D\\\"#FFFFFF\\\" nowrap>\",\n        \"\\n\",\n\n        \"<a href=\\\"http://basnect.info/usersearch/\\\"predicciones-mundiales-2009\\\".html\\\">\\\"predicciones mundiales 2009\\\"</a>\",\n        \"\\\"predicciones mundiales 2009\\\"\",\n\n        \"<a class=\\\"comment-link\\\" href=\\\"https://www.blogger.com/comment.g?blogID=19402125&postID=114070605958684588\\\"location.href=https://www.blogger.com/comment.g?blogID=19402125&postID=114070605958684588;>\",\n        \"\",\n\n        \"<a href = \\\"/videos/Bishop\\\"/\\\" title = \\\"click to see more Bishop\\\" videos\\\">Bishop\\\"</a>\",\n        \"Bishop\\\"\",\n\n        \"<a href=\\\"http://bhaa.ie/calendar/event.php?eid=20081203150127531\\\"\\\">BHAA Eircom 2 &amp; 5 miles CC combined start</a>\",\n        \"BHAA Eircom 2 & 5 miles CC combined start\",\n\n        \"<a href=\\\"http://people.tribe.net/wolfmana\\\" onClick='setClick(\\\"Application[tribe].Person[bb7df210-9dc0-478c-917f-436b896bcb79]\\\")'\\\" title=\\\"Mana\\\">\",\n        \"\",\n\n        \"<a  href=\\\"http://blog.edu-cyberpg.com/ct.ashx?id=6143c528-080c-4bb2-b765-5ec56c8256d3&url=http%3a%2f%2fwww.gsa.ac.uk%2fmackintoshsketchbook%2f\\\"\\\" eudora=\\\"autourl\\\">\",\n        \"\",\n\n        // \"<\" before \">\" inhibits tag recognition\n        \"<input type=\\\"text\\\" value=\\\"<search here>\\\">\",\n        \"<input type=\\\"text\\\" value=\\\"\\n\\\">\",\n\n        \"<input type=\\\"text\\\" value=\\\"<search here\\\">\",\n        \"<input type=\\\"text\\\" value=\\\"\\n\",\n\n        \"<input type=\\\"text\\\" value=\\\"search here>\\\">\",\n        \"\\\">\",\n\n        // \"<\" and \">\" chars are accepted in on[Event] attribute values\n        \"<input type=\\\"text\\\" value=\\\"&lt;search here&gt;\\\" onFocus=\\\"this.value='<search here>'\\\">\",\n        \"\",\n\n        \"<![if ! IE]>\\n<link href=\\\"http://i.deviantart.com/icons/favicon.png\\\" rel=\\\"shortcut icon\\\"/>\\n<![endif]>\",\n        \"\\n\\n\\n\",\n\n        \"<![if supportMisalignedColumns]>\\n<tr height=0 style='display:none'>\\n<td width=64 style='width:48pt'></td>\\n</tr>\\n<![endif]>\",\n        \"\\n\\n\\n\\n\\n\\n\\n\\n\",\n    };\n    for (int i = 0 ; i < testGold.length ; i += 2) {\n      String test = testGold[i];\n      String gold = testGold[i + 1];\n      Reader reader = new HTMLStripCharFilter(new StringReader(test));\n      StringBuilder builder = new StringBuilder();\n      int ch = 0;\n      while ((ch = reader.read()) != -1){\n        builder.append((char)ch);\n      }\n      String result = builder.toString();\n      assertEquals(\"Test: '\" + test + \"'\", gold, result);\n    }\n  }\n\n","sourceOld":"  public void testMalformedHTML() throws Exception {\n    String[] testGold = {\n        \"a <a hr<ef=aa<a>> </close</a>\",\n        \"a <a hr<ef=aa> </close\",\n\n        \"<a href=http://dmoz.org/cgi-bin/add.cgi?where=/arts/\\\" class=lu style=\\\"font-size: 9px\\\" target=dmoz>Submit a Site</a>\",\n        \"Submit a Site\",\n\n        \"<a href=javascript:ioSwitch('p8','http://www.csmonitor.com/') title=expand id=e8 class=expanded rel=http://www.csmonitor.com/>Christian Science\",\n        \"Christian Science\",\n\n        \"<link rel=\\\"alternate\\\" type=\\\"application/rss+xml\\\" title=\\\"San Francisco \\\" 2008 RSS Feed\\\" href=\\\"http://2008.sf.wordcamp.org/feed/\\\" />\",\n        \"\\n\",\n\n        // \"<\" before \">\" inhibits tag recognition\n        \"<a href=\\\" http://www.surgery4was.happyhost.org/video-of-arthroscopic-knee-surgery symptoms.html, heat congestive heart failure <a href=\\\" http://www.symptoms1bad.happyhost.org/canine\",\n        \"<a href=\\\" http://www.surgery4was.happyhost.org/video-of-arthroscopic-knee-surgery symptoms.html, heat congestive heart failure <a href=\\\" http://www.symptoms1bad.happyhost.org/canine\",\n\n        \"<a href=\\\"http://ucblibraries.colorado.edu/how/index.htm\\\"class=\\\"pageNavAreaText\\\">\",\n        \"\",\n\n        \"<link title=\\\"^\\\\\\\" 21Sta's Blog\\\" rel=\\\"search\\\"  type=\\\"application/opensearchdescription+xml\\\"  href=\\\"http://21sta.com/blog/inc/opensearch.php\\\" />\",\n        \"\\n\",\n\n        \"<a href=\\\"#postcomment\\\" title=\\\"\\\"Leave a comment\\\";\\\">?\",\n        \"?\",\n\n        \"<a href='/modern-furniture'   ' id='21txt' class='offtab'   onMouseout=\\\"this.className='offtab';  return true;\\\" onMouseover=\\\"this.className='ontab';  return true;\\\">\",\n        \"\",\n\n        \"<a href='http://alievi.wordpress.com/category/01-todos-posts/' style='font-size: 275%; padding: 1px; margin: 1px;' title='01 - Todos Post's (83)'>\",\n        \"\",\n\n        \"The <a href=<a href=\\\"http://www.advancedmd.com>medical\\\">http://www.advancedmd.com>medical</a> practice software</a>\",\n        \"The <a href=medical\\\">http://www.advancedmd.com>medical practice software\",\n\n        \"<a href=\\\"node/21426\\\" class=\\\"clipTitle2\\\" title=\\\"Levi.com/BMX 2008 Clip of the Week 29 \\\"Morgan Wade Leftover Clips\\\"\\\">Levi.com/BMX 2008 Clip of the Week 29...\",\n        \"Levi.com/BMX 2008 Clip of the Week 29...\",\n\n        \"<a href=\\\"printer_friendly.php?branch=&year=&submit=go&screen=\\\";\\\">Printer Friendly\",\n        \"Printer Friendly\",\n\n        \"<a href=#\\\" ondragstart=\\\"return false\\\" onclick=\\\"window.external.AddFavorite('http://www.amazingtextures.com', 'Amazing Textures');return false\\\" onmouseover=\\\"window.status='Add to Favorites';return true\\\">Add to Favorites\",\n        \"Add to Favorites\",\n\n        \"<a href=\\\"../at_home/at_home_search.html\\\"../_home/at_home_search.html\\\">At\",\n        \"At\",\n\n        \"E-mail: <a href=\\\"\\\"mailto:XXXXXX@example.com\\\" \\\">XXXXXX@example.com </a>\",\n        \"E-mail: XXXXXX@example.com \",\n\n        \"<li class=\\\"farsi\\\"><a title=\\\"A'13?\\\" alt=\\\"A'13?\\\" href=\\\"http://www.america.gov/persian\\\" alt=\\\"\\\" name=\\\"A'13?\\\"A'13? title=\\\"A'13?\\\">A'13?</a></li>\",\n        \"\\nA'13?\\n\",\n\n        \"<li><a href=\\\"#28\\\" title=\\\"Hubert \\\"Geese\\\" Ausby\\\">Hubert \\\"Geese\\\" Ausby</a></li>\",\n        \"\\nHubert \\\"Geese\\\" Ausby\\n\",\n\n        \"<href=\\\"http://anbportal.com/mms/login.asp\\\">\",\n        \"\\n\",\n\n        \"<a href=\\\"\",\n        \"<a href=\\\"\",\n\n        \"<a href=\\\">\",\n        \"\",\n\n        \"<a rel=\\\"nofollow\\\" href=\\\"http://anissanina31.skyrock.com/1895039493-Hi-tout-le-monde.html\\\" title=\\\" Hi, tout le monde !>#</a>\",\n        \"#\",\n\n        \"<a href=\\\"http://annunciharleydavidsonusate.myblog.it/\\\" title=\\\"Annunci Moto e Accessori Harley Davidson\\\" target=\\\"_blank\\\"><img src=\\\"http://annunciharleydavidsonusate.myblog.it/images/Antipixel.gif\\\" /></a>\",\n        \"\",\n\n        \"<a href=\\\"video/addvideo&v=120838887181\\\" onClick=\\\"return confirm('Are you sure you want  add this video to your profile? If it exists some video in your profile will be overlapped by this video!!')\\\" \\\" onmouseover=\\\"this.className='border2'\\\" onmouseout=\\\"this.className=''\\\">\",\n        \"\",\n\n        \"<a href=#Services & Support>\",\n        \"\",\n\n        // \"<\" and \">\" chars are accepted in on[Event] attribute values\n        \"<input type=\\\"image\\\" src=\\\"http://apologyindex.com/ThemeFiles/83401-72905/images/btn_search.gif\\\"value=\\\"Search\\\" name=\\\"Search\\\" alt=\\\"Search\\\" class=\\\"searchimage\\\" onclick=\\\"incom ='&sc=' + document.getElementById('sel').value ; var dt ='&dt=' + document.getElementById('dt').value; var searchKeyword = document.getElementById('q').value ; searchKeyword = searchKeyword.replace(/\\\\s/g,''); if (searchKeyword.length < 3){alert('Nothing to search. Search keyword should contain atleast 3 chars.'); return false; } var al='&al=' +  document.getElementById('advancedlink').style.display ;  document.location.href='http://apologyindex.com/search.aspx?q=' + document.getElementById('q').value + incom + dt + al;\\\" />\",\n        \"\",\n\n        \"<input type=\\\"image\\\" src=\\\"images/afbe.gif\\\" width=\\\"22\\\" height=\\\"22\\\"  hspace=\\\"4\\\" title=\\\"Add to Favorite\\\" alt=\\\"Add to Favorite\\\"onClick=\\\" if(window.sidebar){ window.sidebar.addPanel(document.title,location.href,''); }else if(window.external){ window.external.AddFavorite(location.href,document.title); }else if(window.opera&&window.print) { return true; }\\\">\",\n        \"\",\n\n        \"<area shape=\\\"rect\\\" coords=\\\"12,153,115,305\\\" href=\\\"http://statenislandtalk.com/v-web/gallery/Osmundsen-family\\\"Art's Norwegian Roots in Rogaland\\\">\",\n        \"\\n\",\n\n        \"<a rel=\\\"nofollow\\\" href=\\\"http://arth26.skyrock.com/660188240-bonzai.html\\\" title=\\\"bonza>#\",\n        \"#\",\n\n        \"<a href=  >\",\n        \"\",\n\n        \"<ahref=http:..\",\n        \"<ahref=http:..\",\n\n        \"<ahref=http:..>\",\n        \"\\n\",\n\n        \"<ahref=\\\"http://aseigo.bddf.ca/cms/1025\\\">A\",\n        \"\\nA\",\n\n        \"<a href=\\\"javascript:calendar_window=window.open('/calendar.aspx?formname=frmCalendar.txtDate','calendar_window','width=154,height=188');calendar_window.focus()\\\">\",\n        \"\",\n\n        \"<a href=\\\"/applications/defenseaerospace/19+rackmounts\\\" title=\\\"19\\\" Rackmounts\\\">\",\n        \"\",\n\n        \"<a href=http://www.azimprimerie.fr/flash/backup/lewes-zip-code/savage-model-110-manual.html title=savage model 110 manual rel=dofollow>\",\n        \"\",\n\n        \"<a class=\\\"at\\\" name=\\\"Lamborghini  href=\\\"http://lamborghini.coolbegin.com\\\">Lamborghini /a>\",\n        \"Lamborghini /a>\",\n\n        \"<A href='newslink.php?news_link=http%3A%2F%2Fwww.worldnetdaily.com%2Findex.php%3Ffa%3DPAGE.view%26pageId%3D85729&news_title=Florida QB makes 'John 3:16' hottest Google search Tebow inscribed Bible reference on eye black for championship game' TARGET=_blank>\",\n        \"\",\n\n        \"<a href=/myspace !style='color:#993333'>\",\n        \"\",\n\n        \"<meta name=3DProgId content=3DExcel.Sheet>\",\n        \"\\n\",\n\n        \"<link id=3D\\\"shLink\\\" href=3D\\\"PSABrKelly-BADMINTONCupResults08FINAL2008_09_19=_files/sheet004.htm\\\">\",\n        \"\\n\",\n\n        \"<td bgcolor=3D\\\"#FFFFFF\\\" nowrap>\",\n        \"\\n\",\n\n        \"<a href=\\\"http://basnect.info/usersearch/\\\"predicciones-mundiales-2009\\\".html\\\">\\\"predicciones mundiales 2009\\\"</a>\",\n        \"\\\"predicciones mundiales 2009\\\"\",\n\n        \"<a class=\\\"comment-link\\\" href=\\\"https://www.blogger.com/comment.g?blogID=19402125&postID=114070605958684588\\\"location.href=https://www.blogger.com/comment.g?blogID=19402125&postID=114070605958684588;>\",\n        \"\",\n\n        \"<a href = \\\"/videos/Bishop\\\"/\\\" title = \\\"click to see more Bishop\\\" videos\\\">Bishop\\\"</a>\",\n        \"Bishop\\\"\",\n\n        \"<a href=\\\"http://bhaa.ie/calendar/event.php?eid=20081203150127531\\\"\\\">BHAA Eircom 2 &amp; 5 miles CC combined start</a>\",\n        \"BHAA Eircom 2 & 5 miles CC combined start\",\n\n        \"<a href=\\\"http://people.tribe.net/wolfmana\\\" onClick='setClick(\\\"Application[tribe].Person[bb7df210-9dc0-478c-917f-436b896bcb79]\\\")'\\\" title=\\\"Mana\\\">\",\n        \"\",\n\n        \"<a  href=\\\"http://blog.edu-cyberpg.com/ct.ashx?id=6143c528-080c-4bb2-b765-5ec56c8256d3&url=http%3a%2f%2fwww.gsa.ac.uk%2fmackintoshsketchbook%2f\\\"\\\" eudora=\\\"autourl\\\">\",\n        \"\",\n\n        // \"<\" before \">\" inhibits tag recognition\n        \"<input type=\\\"text\\\" value=\\\"<search here>\\\">\",\n        \"<input type=\\\"text\\\" value=\\\"\\n\\\">\",\n\n        \"<input type=\\\"text\\\" value=\\\"<search here\\\">\",\n        \"<input type=\\\"text\\\" value=\\\"\\n\",\n\n        \"<input type=\\\"text\\\" value=\\\"search here>\\\">\",\n        \"\\\">\",\n\n        // \"<\" and \">\" chars are accepted in on[Event] attribute values\n        \"<input type=\\\"text\\\" value=\\\"&lt;search here&gt;\\\" onFocus=\\\"this.value='<search here>'\\\">\",\n        \"\",\n\n        \"<![if ! IE]>\\n<link href=\\\"http://i.deviantart.com/icons/favicon.png\\\" rel=\\\"shortcut icon\\\"/>\\n<![endif]>\",\n        \"\\n\\n\\n\",\n\n        \"<![if supportMisalignedColumns]>\\n<tr height=0 style='display:none'>\\n<td width=64 style='width:48pt'></td>\\n</tr>\\n<![endif]>\",\n        \"\\n\\n\\n\\n\\n\\n\\n\\n\",\n    };\n    for (int i = 0 ; i < testGold.length ; i += 2) {\n      String test = testGold[i];\n      String gold = testGold[i + 1];\n      Reader reader = new HTMLStripCharFilter(CharReader.get(new StringReader(test)));\n      StringBuilder builder = new StringBuilder();\n      int ch = 0;\n      while ((ch = reader.read()) != -1){\n        builder.append((char)ch);\n      }\n      String result = builder.toString();\n      assertEquals(\"Test: '\" + test + \"'\", gold, result);\n    }\n  }\n\n","bugFix":null,"bugIntro":["ab081a78869a616f9c93e5b2f3ec2f99c2f7f741"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"fe33227f6805edab2036cbb80645cc4e2d1fa424","date":1342713534,"type":3,"author":"Michael McCandless","isMerge":true,"pathNew":"lucene/analysis/common/src/test/org/apache/lucene/analysis/charfilter/HTMLStripCharFilterTest#testMalformedHTML().mjava","pathOld":"lucene/analysis/common/src/test/org/apache/lucene/analysis/charfilter/HTMLStripCharFilterTest#testMalformedHTML().mjava","sourceNew":"  public void testMalformedHTML() throws Exception {\n    String[] testGold = {\n        \"a <a hr<ef=aa<a>> </close</a>\",\n        \"a <a hr<ef=aa> </close\",\n\n        \"<a href=http://dmoz.org/cgi-bin/add.cgi?where=/arts/\\\" class=lu style=\\\"font-size: 9px\\\" target=dmoz>Submit a Site</a>\",\n        \"Submit a Site\",\n\n        \"<a href=javascript:ioSwitch('p8','http://www.csmonitor.com/') title=expand id=e8 class=expanded rel=http://www.csmonitor.com/>Christian Science\",\n        \"Christian Science\",\n\n        \"<link rel=\\\"alternate\\\" type=\\\"application/rss+xml\\\" title=\\\"San Francisco \\\" 2008 RSS Feed\\\" href=\\\"http://2008.sf.wordcamp.org/feed/\\\" />\",\n        \"\\n\",\n\n        // \"<\" before \">\" inhibits tag recognition\n        \"<a href=\\\" http://www.surgery4was.happyhost.org/video-of-arthroscopic-knee-surgery symptoms.html, heat congestive heart failure <a href=\\\" http://www.symptoms1bad.happyhost.org/canine\",\n        \"<a href=\\\" http://www.surgery4was.happyhost.org/video-of-arthroscopic-knee-surgery symptoms.html, heat congestive heart failure <a href=\\\" http://www.symptoms1bad.happyhost.org/canine\",\n\n        \"<a href=\\\"http://ucblibraries.colorado.edu/how/index.htm\\\"class=\\\"pageNavAreaText\\\">\",\n        \"\",\n\n        \"<link title=\\\"^\\\\\\\" 21Sta's Blog\\\" rel=\\\"search\\\"  type=\\\"application/opensearchdescription+xml\\\"  href=\\\"http://21sta.com/blog/inc/opensearch.php\\\" />\",\n        \"\\n\",\n\n        \"<a href=\\\"#postcomment\\\" title=\\\"\\\"Leave a comment\\\";\\\">?\",\n        \"?\",\n\n        \"<a href='/modern-furniture'   ' id='21txt' class='offtab'   onMouseout=\\\"this.className='offtab';  return true;\\\" onMouseover=\\\"this.className='ontab';  return true;\\\">\",\n        \"\",\n\n        \"<a href='http://alievi.wordpress.com/category/01-todos-posts/' style='font-size: 275%; padding: 1px; margin: 1px;' title='01 - Todos Post's (83)'>\",\n        \"\",\n\n        \"The <a href=<a href=\\\"http://www.advancedmd.com>medical\\\">http://www.advancedmd.com>medical</a> practice software</a>\",\n        \"The <a href=medical\\\">http://www.advancedmd.com>medical practice software\",\n\n        \"<a href=\\\"node/21426\\\" class=\\\"clipTitle2\\\" title=\\\"Levi.com/BMX 2008 Clip of the Week 29 \\\"Morgan Wade Leftover Clips\\\"\\\">Levi.com/BMX 2008 Clip of the Week 29...\",\n        \"Levi.com/BMX 2008 Clip of the Week 29...\",\n\n        \"<a href=\\\"printer_friendly.php?branch=&year=&submit=go&screen=\\\";\\\">Printer Friendly\",\n        \"Printer Friendly\",\n\n        \"<a href=#\\\" ondragstart=\\\"return false\\\" onclick=\\\"window.external.AddFavorite('http://www.amazingtextures.com', 'Amazing Textures');return false\\\" onmouseover=\\\"window.status='Add to Favorites';return true\\\">Add to Favorites\",\n        \"Add to Favorites\",\n\n        \"<a href=\\\"../at_home/at_home_search.html\\\"../_home/at_home_search.html\\\">At\",\n        \"At\",\n\n        \"E-mail: <a href=\\\"\\\"mailto:XXXXXX@example.com\\\" \\\">XXXXXX@example.com </a>\",\n        \"E-mail: XXXXXX@example.com \",\n\n        \"<li class=\\\"farsi\\\"><a title=\\\"A'13?\\\" alt=\\\"A'13?\\\" href=\\\"http://www.america.gov/persian\\\" alt=\\\"\\\" name=\\\"A'13?\\\"A'13? title=\\\"A'13?\\\">A'13?</a></li>\",\n        \"\\nA'13?\\n\",\n\n        \"<li><a href=\\\"#28\\\" title=\\\"Hubert \\\"Geese\\\" Ausby\\\">Hubert \\\"Geese\\\" Ausby</a></li>\",\n        \"\\nHubert \\\"Geese\\\" Ausby\\n\",\n\n        \"<href=\\\"http://anbportal.com/mms/login.asp\\\">\",\n        \"\\n\",\n\n        \"<a href=\\\"\",\n        \"<a href=\\\"\",\n\n        \"<a href=\\\">\",\n        \"\",\n\n        \"<a rel=\\\"nofollow\\\" href=\\\"http://anissanina31.skyrock.com/1895039493-Hi-tout-le-monde.html\\\" title=\\\" Hi, tout le monde !>#</a>\",\n        \"#\",\n\n        \"<a href=\\\"http://annunciharleydavidsonusate.myblog.it/\\\" title=\\\"Annunci Moto e Accessori Harley Davidson\\\" target=\\\"_blank\\\"><img src=\\\"http://annunciharleydavidsonusate.myblog.it/images/Antipixel.gif\\\" /></a>\",\n        \"\",\n\n        \"<a href=\\\"video/addvideo&v=120838887181\\\" onClick=\\\"return confirm('Are you sure you want  add this video to your profile? If it exists some video in your profile will be overlapped by this video!!')\\\" \\\" onmouseover=\\\"this.className='border2'\\\" onmouseout=\\\"this.className=''\\\">\",\n        \"\",\n\n        \"<a href=#Services & Support>\",\n        \"\",\n\n        // \"<\" and \">\" chars are accepted in on[Event] attribute values\n        \"<input type=\\\"image\\\" src=\\\"http://apologyindex.com/ThemeFiles/83401-72905/images/btn_search.gif\\\"value=\\\"Search\\\" name=\\\"Search\\\" alt=\\\"Search\\\" class=\\\"searchimage\\\" onclick=\\\"incom ='&sc=' + document.getElementById('sel').value ; var dt ='&dt=' + document.getElementById('dt').value; var searchKeyword = document.getElementById('q').value ; searchKeyword = searchKeyword.replace(/\\\\s/g,''); if (searchKeyword.length < 3){alert('Nothing to search. Search keyword should contain atleast 3 chars.'); return false; } var al='&al=' +  document.getElementById('advancedlink').style.display ;  document.location.href='http://apologyindex.com/search.aspx?q=' + document.getElementById('q').value + incom + dt + al;\\\" />\",\n        \"\",\n\n        \"<input type=\\\"image\\\" src=\\\"images/afbe.gif\\\" width=\\\"22\\\" height=\\\"22\\\"  hspace=\\\"4\\\" title=\\\"Add to Favorite\\\" alt=\\\"Add to Favorite\\\"onClick=\\\" if(window.sidebar){ window.sidebar.addPanel(document.title,location.href,''); }else if(window.external){ window.external.AddFavorite(location.href,document.title); }else if(window.opera&&window.print) { return true; }\\\">\",\n        \"\",\n\n        \"<area shape=\\\"rect\\\" coords=\\\"12,153,115,305\\\" href=\\\"http://statenislandtalk.com/v-web/gallery/Osmundsen-family\\\"Art's Norwegian Roots in Rogaland\\\">\",\n        \"\\n\",\n\n        \"<a rel=\\\"nofollow\\\" href=\\\"http://arth26.skyrock.com/660188240-bonzai.html\\\" title=\\\"bonza>#\",\n        \"#\",\n\n        \"<a href=  >\",\n        \"\",\n\n        \"<ahref=http:..\",\n        \"<ahref=http:..\",\n\n        \"<ahref=http:..>\",\n        \"\\n\",\n\n        \"<ahref=\\\"http://aseigo.bddf.ca/cms/1025\\\">A\",\n        \"\\nA\",\n\n        \"<a href=\\\"javascript:calendar_window=window.open('/calendar.aspx?formname=frmCalendar.txtDate','calendar_window','width=154,height=188');calendar_window.focus()\\\">\",\n        \"\",\n\n        \"<a href=\\\"/applications/defenseaerospace/19+rackmounts\\\" title=\\\"19\\\" Rackmounts\\\">\",\n        \"\",\n\n        \"<a href=http://www.azimprimerie.fr/flash/backup/lewes-zip-code/savage-model-110-manual.html title=savage model 110 manual rel=dofollow>\",\n        \"\",\n\n        \"<a class=\\\"at\\\" name=\\\"Lamborghini  href=\\\"http://lamborghini.coolbegin.com\\\">Lamborghini /a>\",\n        \"Lamborghini /a>\",\n\n        \"<A href='newslink.php?news_link=http%3A%2F%2Fwww.worldnetdaily.com%2Findex.php%3Ffa%3DPAGE.view%26pageId%3D85729&news_title=Florida QB makes 'John 3:16' hottest Google search Tebow inscribed Bible reference on eye black for championship game' TARGET=_blank>\",\n        \"\",\n\n        \"<a href=/myspace !style='color:#993333'>\",\n        \"\",\n\n        \"<meta name=3DProgId content=3DExcel.Sheet>\",\n        \"\\n\",\n\n        \"<link id=3D\\\"shLink\\\" href=3D\\\"PSABrKelly-BADMINTONCupResults08FINAL2008_09_19=_files/sheet004.htm\\\">\",\n        \"\\n\",\n\n        \"<td bgcolor=3D\\\"#FFFFFF\\\" nowrap>\",\n        \"\\n\",\n\n        \"<a href=\\\"http://basnect.info/usersearch/\\\"predicciones-mundiales-2009\\\".html\\\">\\\"predicciones mundiales 2009\\\"</a>\",\n        \"\\\"predicciones mundiales 2009\\\"\",\n\n        \"<a class=\\\"comment-link\\\" href=\\\"https://www.blogger.com/comment.g?blogID=19402125&postID=114070605958684588\\\"location.href=https://www.blogger.com/comment.g?blogID=19402125&postID=114070605958684588;>\",\n        \"\",\n\n        \"<a href = \\\"/videos/Bishop\\\"/\\\" title = \\\"click to see more Bishop\\\" videos\\\">Bishop\\\"</a>\",\n        \"Bishop\\\"\",\n\n        \"<a href=\\\"http://bhaa.ie/calendar/event.php?eid=20081203150127531\\\"\\\">BHAA Eircom 2 &amp; 5 miles CC combined start</a>\",\n        \"BHAA Eircom 2 & 5 miles CC combined start\",\n\n        \"<a href=\\\"http://people.tribe.net/wolfmana\\\" onClick='setClick(\\\"Application[tribe].Person[bb7df210-9dc0-478c-917f-436b896bcb79]\\\")'\\\" title=\\\"Mana\\\">\",\n        \"\",\n\n        \"<a  href=\\\"http://blog.edu-cyberpg.com/ct.ashx?id=6143c528-080c-4bb2-b765-5ec56c8256d3&url=http%3a%2f%2fwww.gsa.ac.uk%2fmackintoshsketchbook%2f\\\"\\\" eudora=\\\"autourl\\\">\",\n        \"\",\n\n        // \"<\" before \">\" inhibits tag recognition\n        \"<input type=\\\"text\\\" value=\\\"<search here>\\\">\",\n        \"<input type=\\\"text\\\" value=\\\"\\n\\\">\",\n\n        \"<input type=\\\"text\\\" value=\\\"<search here\\\">\",\n        \"<input type=\\\"text\\\" value=\\\"\\n\",\n\n        \"<input type=\\\"text\\\" value=\\\"search here>\\\">\",\n        \"\\\">\",\n\n        // \"<\" and \">\" chars are accepted in on[Event] attribute values\n        \"<input type=\\\"text\\\" value=\\\"&lt;search here&gt;\\\" onFocus=\\\"this.value='<search here>'\\\">\",\n        \"\",\n\n        \"<![if ! IE]>\\n<link href=\\\"http://i.deviantart.com/icons/favicon.png\\\" rel=\\\"shortcut icon\\\"/>\\n<![endif]>\",\n        \"\\n\\n\\n\",\n\n        \"<![if supportMisalignedColumns]>\\n<tr height=0 style='display:none'>\\n<td width=64 style='width:48pt'></td>\\n</tr>\\n<![endif]>\",\n        \"\\n\\n\\n\\n\\n\\n\\n\\n\",\n    };\n    for (int i = 0 ; i < testGold.length ; i += 2) {\n      String test = testGold[i];\n      String gold = testGold[i + 1];\n      Reader reader = new HTMLStripCharFilter(new StringReader(test));\n      StringBuilder builder = new StringBuilder();\n      int ch = 0;\n      while ((ch = reader.read()) != -1){\n        builder.append((char)ch);\n      }\n      String result = builder.toString();\n      assertEquals(\"Test: '\" + test + \"'\", gold, result);\n    }\n  }\n\n","sourceOld":"  public void testMalformedHTML() throws Exception {\n    String[] testGold = {\n        \"a <a hr<ef=aa<a>> </close</a>\",\n        \"a <a hr<ef=aa> </close\",\n\n        \"<a href=http://dmoz.org/cgi-bin/add.cgi?where=/arts/\\\" class=lu style=\\\"font-size: 9px\\\" target=dmoz>Submit a Site</a>\",\n        \"Submit a Site\",\n\n        \"<a href=javascript:ioSwitch('p8','http://www.csmonitor.com/') title=expand id=e8 class=expanded rel=http://www.csmonitor.com/>Christian Science\",\n        \"Christian Science\",\n\n        \"<link rel=\\\"alternate\\\" type=\\\"application/rss+xml\\\" title=\\\"San Francisco \\\" 2008 RSS Feed\\\" href=\\\"http://2008.sf.wordcamp.org/feed/\\\" />\",\n        \"\\n\",\n\n        // \"<\" before \">\" inhibits tag recognition\n        \"<a href=\\\" http://www.surgery4was.happyhost.org/video-of-arthroscopic-knee-surgery symptoms.html, heat congestive heart failure <a href=\\\" http://www.symptoms1bad.happyhost.org/canine\",\n        \"<a href=\\\" http://www.surgery4was.happyhost.org/video-of-arthroscopic-knee-surgery symptoms.html, heat congestive heart failure <a href=\\\" http://www.symptoms1bad.happyhost.org/canine\",\n\n        \"<a href=\\\"http://ucblibraries.colorado.edu/how/index.htm\\\"class=\\\"pageNavAreaText\\\">\",\n        \"\",\n\n        \"<link title=\\\"^\\\\\\\" 21Sta's Blog\\\" rel=\\\"search\\\"  type=\\\"application/opensearchdescription+xml\\\"  href=\\\"http://21sta.com/blog/inc/opensearch.php\\\" />\",\n        \"\\n\",\n\n        \"<a href=\\\"#postcomment\\\" title=\\\"\\\"Leave a comment\\\";\\\">?\",\n        \"?\",\n\n        \"<a href='/modern-furniture'   ' id='21txt' class='offtab'   onMouseout=\\\"this.className='offtab';  return true;\\\" onMouseover=\\\"this.className='ontab';  return true;\\\">\",\n        \"\",\n\n        \"<a href='http://alievi.wordpress.com/category/01-todos-posts/' style='font-size: 275%; padding: 1px; margin: 1px;' title='01 - Todos Post's (83)'>\",\n        \"\",\n\n        \"The <a href=<a href=\\\"http://www.advancedmd.com>medical\\\">http://www.advancedmd.com>medical</a> practice software</a>\",\n        \"The <a href=medical\\\">http://www.advancedmd.com>medical practice software\",\n\n        \"<a href=\\\"node/21426\\\" class=\\\"clipTitle2\\\" title=\\\"Levi.com/BMX 2008 Clip of the Week 29 \\\"Morgan Wade Leftover Clips\\\"\\\">Levi.com/BMX 2008 Clip of the Week 29...\",\n        \"Levi.com/BMX 2008 Clip of the Week 29...\",\n\n        \"<a href=\\\"printer_friendly.php?branch=&year=&submit=go&screen=\\\";\\\">Printer Friendly\",\n        \"Printer Friendly\",\n\n        \"<a href=#\\\" ondragstart=\\\"return false\\\" onclick=\\\"window.external.AddFavorite('http://www.amazingtextures.com', 'Amazing Textures');return false\\\" onmouseover=\\\"window.status='Add to Favorites';return true\\\">Add to Favorites\",\n        \"Add to Favorites\",\n\n        \"<a href=\\\"../at_home/at_home_search.html\\\"../_home/at_home_search.html\\\">At\",\n        \"At\",\n\n        \"E-mail: <a href=\\\"\\\"mailto:XXXXXX@example.com\\\" \\\">XXXXXX@example.com </a>\",\n        \"E-mail: XXXXXX@example.com \",\n\n        \"<li class=\\\"farsi\\\"><a title=\\\"A'13?\\\" alt=\\\"A'13?\\\" href=\\\"http://www.america.gov/persian\\\" alt=\\\"\\\" name=\\\"A'13?\\\"A'13? title=\\\"A'13?\\\">A'13?</a></li>\",\n        \"\\nA'13?\\n\",\n\n        \"<li><a href=\\\"#28\\\" title=\\\"Hubert \\\"Geese\\\" Ausby\\\">Hubert \\\"Geese\\\" Ausby</a></li>\",\n        \"\\nHubert \\\"Geese\\\" Ausby\\n\",\n\n        \"<href=\\\"http://anbportal.com/mms/login.asp\\\">\",\n        \"\\n\",\n\n        \"<a href=\\\"\",\n        \"<a href=\\\"\",\n\n        \"<a href=\\\">\",\n        \"\",\n\n        \"<a rel=\\\"nofollow\\\" href=\\\"http://anissanina31.skyrock.com/1895039493-Hi-tout-le-monde.html\\\" title=\\\" Hi, tout le monde !>#</a>\",\n        \"#\",\n\n        \"<a href=\\\"http://annunciharleydavidsonusate.myblog.it/\\\" title=\\\"Annunci Moto e Accessori Harley Davidson\\\" target=\\\"_blank\\\"><img src=\\\"http://annunciharleydavidsonusate.myblog.it/images/Antipixel.gif\\\" /></a>\",\n        \"\",\n\n        \"<a href=\\\"video/addvideo&v=120838887181\\\" onClick=\\\"return confirm('Are you sure you want  add this video to your profile? If it exists some video in your profile will be overlapped by this video!!')\\\" \\\" onmouseover=\\\"this.className='border2'\\\" onmouseout=\\\"this.className=''\\\">\",\n        \"\",\n\n        \"<a href=#Services & Support>\",\n        \"\",\n\n        // \"<\" and \">\" chars are accepted in on[Event] attribute values\n        \"<input type=\\\"image\\\" src=\\\"http://apologyindex.com/ThemeFiles/83401-72905/images/btn_search.gif\\\"value=\\\"Search\\\" name=\\\"Search\\\" alt=\\\"Search\\\" class=\\\"searchimage\\\" onclick=\\\"incom ='&sc=' + document.getElementById('sel').value ; var dt ='&dt=' + document.getElementById('dt').value; var searchKeyword = document.getElementById('q').value ; searchKeyword = searchKeyword.replace(/\\\\s/g,''); if (searchKeyword.length < 3){alert('Nothing to search. Search keyword should contain atleast 3 chars.'); return false; } var al='&al=' +  document.getElementById('advancedlink').style.display ;  document.location.href='http://apologyindex.com/search.aspx?q=' + document.getElementById('q').value + incom + dt + al;\\\" />\",\n        \"\",\n\n        \"<input type=\\\"image\\\" src=\\\"images/afbe.gif\\\" width=\\\"22\\\" height=\\\"22\\\"  hspace=\\\"4\\\" title=\\\"Add to Favorite\\\" alt=\\\"Add to Favorite\\\"onClick=\\\" if(window.sidebar){ window.sidebar.addPanel(document.title,location.href,''); }else if(window.external){ window.external.AddFavorite(location.href,document.title); }else if(window.opera&&window.print) { return true; }\\\">\",\n        \"\",\n\n        \"<area shape=\\\"rect\\\" coords=\\\"12,153,115,305\\\" href=\\\"http://statenislandtalk.com/v-web/gallery/Osmundsen-family\\\"Art's Norwegian Roots in Rogaland\\\">\",\n        \"\\n\",\n\n        \"<a rel=\\\"nofollow\\\" href=\\\"http://arth26.skyrock.com/660188240-bonzai.html\\\" title=\\\"bonza>#\",\n        \"#\",\n\n        \"<a href=  >\",\n        \"\",\n\n        \"<ahref=http:..\",\n        \"<ahref=http:..\",\n\n        \"<ahref=http:..>\",\n        \"\\n\",\n\n        \"<ahref=\\\"http://aseigo.bddf.ca/cms/1025\\\">A\",\n        \"\\nA\",\n\n        \"<a href=\\\"javascript:calendar_window=window.open('/calendar.aspx?formname=frmCalendar.txtDate','calendar_window','width=154,height=188');calendar_window.focus()\\\">\",\n        \"\",\n\n        \"<a href=\\\"/applications/defenseaerospace/19+rackmounts\\\" title=\\\"19\\\" Rackmounts\\\">\",\n        \"\",\n\n        \"<a href=http://www.azimprimerie.fr/flash/backup/lewes-zip-code/savage-model-110-manual.html title=savage model 110 manual rel=dofollow>\",\n        \"\",\n\n        \"<a class=\\\"at\\\" name=\\\"Lamborghini  href=\\\"http://lamborghini.coolbegin.com\\\">Lamborghini /a>\",\n        \"Lamborghini /a>\",\n\n        \"<A href='newslink.php?news_link=http%3A%2F%2Fwww.worldnetdaily.com%2Findex.php%3Ffa%3DPAGE.view%26pageId%3D85729&news_title=Florida QB makes 'John 3:16' hottest Google search Tebow inscribed Bible reference on eye black for championship game' TARGET=_blank>\",\n        \"\",\n\n        \"<a href=/myspace !style='color:#993333'>\",\n        \"\",\n\n        \"<meta name=3DProgId content=3DExcel.Sheet>\",\n        \"\\n\",\n\n        \"<link id=3D\\\"shLink\\\" href=3D\\\"PSABrKelly-BADMINTONCupResults08FINAL2008_09_19=_files/sheet004.htm\\\">\",\n        \"\\n\",\n\n        \"<td bgcolor=3D\\\"#FFFFFF\\\" nowrap>\",\n        \"\\n\",\n\n        \"<a href=\\\"http://basnect.info/usersearch/\\\"predicciones-mundiales-2009\\\".html\\\">\\\"predicciones mundiales 2009\\\"</a>\",\n        \"\\\"predicciones mundiales 2009\\\"\",\n\n        \"<a class=\\\"comment-link\\\" href=\\\"https://www.blogger.com/comment.g?blogID=19402125&postID=114070605958684588\\\"location.href=https://www.blogger.com/comment.g?blogID=19402125&postID=114070605958684588;>\",\n        \"\",\n\n        \"<a href = \\\"/videos/Bishop\\\"/\\\" title = \\\"click to see more Bishop\\\" videos\\\">Bishop\\\"</a>\",\n        \"Bishop\\\"\",\n\n        \"<a href=\\\"http://bhaa.ie/calendar/event.php?eid=20081203150127531\\\"\\\">BHAA Eircom 2 &amp; 5 miles CC combined start</a>\",\n        \"BHAA Eircom 2 & 5 miles CC combined start\",\n\n        \"<a href=\\\"http://people.tribe.net/wolfmana\\\" onClick='setClick(\\\"Application[tribe].Person[bb7df210-9dc0-478c-917f-436b896bcb79]\\\")'\\\" title=\\\"Mana\\\">\",\n        \"\",\n\n        \"<a  href=\\\"http://blog.edu-cyberpg.com/ct.ashx?id=6143c528-080c-4bb2-b765-5ec56c8256d3&url=http%3a%2f%2fwww.gsa.ac.uk%2fmackintoshsketchbook%2f\\\"\\\" eudora=\\\"autourl\\\">\",\n        \"\",\n\n        // \"<\" before \">\" inhibits tag recognition\n        \"<input type=\\\"text\\\" value=\\\"<search here>\\\">\",\n        \"<input type=\\\"text\\\" value=\\\"\\n\\\">\",\n\n        \"<input type=\\\"text\\\" value=\\\"<search here\\\">\",\n        \"<input type=\\\"text\\\" value=\\\"\\n\",\n\n        \"<input type=\\\"text\\\" value=\\\"search here>\\\">\",\n        \"\\\">\",\n\n        // \"<\" and \">\" chars are accepted in on[Event] attribute values\n        \"<input type=\\\"text\\\" value=\\\"&lt;search here&gt;\\\" onFocus=\\\"this.value='<search here>'\\\">\",\n        \"\",\n\n        \"<![if ! IE]>\\n<link href=\\\"http://i.deviantart.com/icons/favicon.png\\\" rel=\\\"shortcut icon\\\"/>\\n<![endif]>\",\n        \"\\n\\n\\n\",\n\n        \"<![if supportMisalignedColumns]>\\n<tr height=0 style='display:none'>\\n<td width=64 style='width:48pt'></td>\\n</tr>\\n<![endif]>\",\n        \"\\n\\n\\n\\n\\n\\n\\n\\n\",\n    };\n    for (int i = 0 ; i < testGold.length ; i += 2) {\n      String test = testGold[i];\n      String gold = testGold[i + 1];\n      Reader reader = new HTMLStripCharFilter(CharReader.get(new StringReader(test)));\n      StringBuilder builder = new StringBuilder();\n      int ch = 0;\n      while ((ch = reader.read()) != -1){\n        builder.append((char)ch);\n      }\n      String result = builder.toString();\n      assertEquals(\"Test: '\" + test + \"'\", gold, result);\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"aba371508186796cc6151d8223a5b4e16d02e26e","date":1343474871,"type":3,"author":"Uwe Schindler","isMerge":true,"pathNew":"lucene/analysis/common/src/test/org/apache/lucene/analysis/charfilter/HTMLStripCharFilterTest#testMalformedHTML().mjava","pathOld":"lucene/analysis/common/src/test/org/apache/lucene/analysis/charfilter/HTMLStripCharFilterTest#testMalformedHTML().mjava","sourceNew":"  public void testMalformedHTML() throws Exception {\n    String[] testGold = {\n        \"a <a hr<ef=aa<a>> </close</a>\",\n        \"a <a hr<ef=aa> </close\",\n\n        \"<a href=http://dmoz.org/cgi-bin/add.cgi?where=/arts/\\\" class=lu style=\\\"font-size: 9px\\\" target=dmoz>Submit a Site</a>\",\n        \"Submit a Site\",\n\n        \"<a href=javascript:ioSwitch('p8','http://www.csmonitor.com/') title=expand id=e8 class=expanded rel=http://www.csmonitor.com/>Christian Science\",\n        \"Christian Science\",\n\n        \"<link rel=\\\"alternate\\\" type=\\\"application/rss+xml\\\" title=\\\"San Francisco \\\" 2008 RSS Feed\\\" href=\\\"http://2008.sf.wordcamp.org/feed/\\\" />\",\n        \"\\n\",\n\n        // \"<\" before \">\" inhibits tag recognition\n        \"<a href=\\\" http://www.surgery4was.happyhost.org/video-of-arthroscopic-knee-surgery symptoms.html, heat congestive heart failure <a href=\\\" http://www.symptoms1bad.happyhost.org/canine\",\n        \"<a href=\\\" http://www.surgery4was.happyhost.org/video-of-arthroscopic-knee-surgery symptoms.html, heat congestive heart failure <a href=\\\" http://www.symptoms1bad.happyhost.org/canine\",\n\n        \"<a href=\\\"http://ucblibraries.colorado.edu/how/index.htm\\\"class=\\\"pageNavAreaText\\\">\",\n        \"\",\n\n        \"<link title=\\\"^\\\\\\\" 21Sta's Blog\\\" rel=\\\"search\\\"  type=\\\"application/opensearchdescription+xml\\\"  href=\\\"http://21sta.com/blog/inc/opensearch.php\\\" />\",\n        \"\\n\",\n\n        \"<a href=\\\"#postcomment\\\" title=\\\"\\\"Leave a comment\\\";\\\">?\",\n        \"?\",\n\n        \"<a href='/modern-furniture'   ' id='21txt' class='offtab'   onMouseout=\\\"this.className='offtab';  return true;\\\" onMouseover=\\\"this.className='ontab';  return true;\\\">\",\n        \"\",\n\n        \"<a href='http://alievi.wordpress.com/category/01-todos-posts/' style='font-size: 275%; padding: 1px; margin: 1px;' title='01 - Todos Post's (83)'>\",\n        \"\",\n\n        \"The <a href=<a href=\\\"http://www.advancedmd.com>medical\\\">http://www.advancedmd.com>medical</a> practice software</a>\",\n        \"The <a href=medical\\\">http://www.advancedmd.com>medical practice software\",\n\n        \"<a href=\\\"node/21426\\\" class=\\\"clipTitle2\\\" title=\\\"Levi.com/BMX 2008 Clip of the Week 29 \\\"Morgan Wade Leftover Clips\\\"\\\">Levi.com/BMX 2008 Clip of the Week 29...\",\n        \"Levi.com/BMX 2008 Clip of the Week 29...\",\n\n        \"<a href=\\\"printer_friendly.php?branch=&year=&submit=go&screen=\\\";\\\">Printer Friendly\",\n        \"Printer Friendly\",\n\n        \"<a href=#\\\" ondragstart=\\\"return false\\\" onclick=\\\"window.external.AddFavorite('http://www.amazingtextures.com', 'Amazing Textures');return false\\\" onmouseover=\\\"window.status='Add to Favorites';return true\\\">Add to Favorites\",\n        \"Add to Favorites\",\n\n        \"<a href=\\\"../at_home/at_home_search.html\\\"../_home/at_home_search.html\\\">At\",\n        \"At\",\n\n        \"E-mail: <a href=\\\"\\\"mailto:XXXXXX@example.com\\\" \\\">XXXXXX@example.com </a>\",\n        \"E-mail: XXXXXX@example.com \",\n\n        \"<li class=\\\"farsi\\\"><a title=\\\"A'13?\\\" alt=\\\"A'13?\\\" href=\\\"http://www.america.gov/persian\\\" alt=\\\"\\\" name=\\\"A'13?\\\"A'13? title=\\\"A'13?\\\">A'13?</a></li>\",\n        \"\\nA'13?\\n\",\n\n        \"<li><a href=\\\"#28\\\" title=\\\"Hubert \\\"Geese\\\" Ausby\\\">Hubert \\\"Geese\\\" Ausby</a></li>\",\n        \"\\nHubert \\\"Geese\\\" Ausby\\n\",\n\n        \"<href=\\\"http://anbportal.com/mms/login.asp\\\">\",\n        \"\\n\",\n\n        \"<a href=\\\"\",\n        \"<a href=\\\"\",\n\n        \"<a href=\\\">\",\n        \"\",\n\n        \"<a rel=\\\"nofollow\\\" href=\\\"http://anissanina31.skyrock.com/1895039493-Hi-tout-le-monde.html\\\" title=\\\" Hi, tout le monde !>#</a>\",\n        \"#\",\n\n        \"<a href=\\\"http://annunciharleydavidsonusate.myblog.it/\\\" title=\\\"Annunci Moto e Accessori Harley Davidson\\\" target=\\\"_blank\\\"><img src=\\\"http://annunciharleydavidsonusate.myblog.it/images/Antipixel.gif\\\" /></a>\",\n        \"\",\n\n        \"<a href=\\\"video/addvideo&v=120838887181\\\" onClick=\\\"return confirm('Are you sure you want  add this video to your profile? If it exists some video in your profile will be overlapped by this video!!')\\\" \\\" onmouseover=\\\"this.className='border2'\\\" onmouseout=\\\"this.className=''\\\">\",\n        \"\",\n\n        \"<a href=#Services & Support>\",\n        \"\",\n\n        // \"<\" and \">\" chars are accepted in on[Event] attribute values\n        \"<input type=\\\"image\\\" src=\\\"http://apologyindex.com/ThemeFiles/83401-72905/images/btn_search.gif\\\"value=\\\"Search\\\" name=\\\"Search\\\" alt=\\\"Search\\\" class=\\\"searchimage\\\" onclick=\\\"incom ='&sc=' + document.getElementById('sel').value ; var dt ='&dt=' + document.getElementById('dt').value; var searchKeyword = document.getElementById('q').value ; searchKeyword = searchKeyword.replace(/\\\\s/g,''); if (searchKeyword.length < 3){alert('Nothing to search. Search keyword should contain atleast 3 chars.'); return false; } var al='&al=' +  document.getElementById('advancedlink').style.display ;  document.location.href='http://apologyindex.com/search.aspx?q=' + document.getElementById('q').value + incom + dt + al;\\\" />\",\n        \"\",\n\n        \"<input type=\\\"image\\\" src=\\\"images/afbe.gif\\\" width=\\\"22\\\" height=\\\"22\\\"  hspace=\\\"4\\\" title=\\\"Add to Favorite\\\" alt=\\\"Add to Favorite\\\"onClick=\\\" if(window.sidebar){ window.sidebar.addPanel(document.title,location.href,''); }else if(window.external){ window.external.AddFavorite(location.href,document.title); }else if(window.opera&&window.print) { return true; }\\\">\",\n        \"\",\n\n        \"<area shape=\\\"rect\\\" coords=\\\"12,153,115,305\\\" href=\\\"http://statenislandtalk.com/v-web/gallery/Osmundsen-family\\\"Art's Norwegian Roots in Rogaland\\\">\",\n        \"\\n\",\n\n        \"<a rel=\\\"nofollow\\\" href=\\\"http://arth26.skyrock.com/660188240-bonzai.html\\\" title=\\\"bonza>#\",\n        \"#\",\n\n        \"<a href=  >\",\n        \"\",\n\n        \"<ahref=http:..\",\n        \"<ahref=http:..\",\n\n        \"<ahref=http:..>\",\n        \"\\n\",\n\n        \"<ahref=\\\"http://aseigo.bddf.ca/cms/1025\\\">A\",\n        \"\\nA\",\n\n        \"<a href=\\\"javascript:calendar_window=window.open('/calendar.aspx?formname=frmCalendar.txtDate','calendar_window','width=154,height=188');calendar_window.focus()\\\">\",\n        \"\",\n\n        \"<a href=\\\"/applications/defenseaerospace/19+rackmounts\\\" title=\\\"19\\\" Rackmounts\\\">\",\n        \"\",\n\n        \"<a href=http://www.azimprimerie.fr/flash/backup/lewes-zip-code/savage-model-110-manual.html title=savage model 110 manual rel=dofollow>\",\n        \"\",\n\n        \"<a class=\\\"at\\\" name=\\\"Lamborghini  href=\\\"http://lamborghini.coolbegin.com\\\">Lamborghini /a>\",\n        \"Lamborghini /a>\",\n\n        \"<A href='newslink.php?news_link=http%3A%2F%2Fwww.worldnetdaily.com%2Findex.php%3Ffa%3DPAGE.view%26pageId%3D85729&news_title=Florida QB makes 'John 3:16' hottest Google search Tebow inscribed Bible reference on eye black for championship game' TARGET=_blank>\",\n        \"\",\n\n        \"<a href=/myspace !style='color:#993333'>\",\n        \"\",\n\n        \"<meta name=3DProgId content=3DExcel.Sheet>\",\n        \"\\n\",\n\n        \"<link id=3D\\\"shLink\\\" href=3D\\\"PSABrKelly-BADMINTONCupResults08FINAL2008_09_19=_files/sheet004.htm\\\">\",\n        \"\\n\",\n\n        \"<td bgcolor=3D\\\"#FFFFFF\\\" nowrap>\",\n        \"\\n\",\n\n        \"<a href=\\\"http://basnect.info/usersearch/\\\"predicciones-mundiales-2009\\\".html\\\">\\\"predicciones mundiales 2009\\\"</a>\",\n        \"\\\"predicciones mundiales 2009\\\"\",\n\n        \"<a class=\\\"comment-link\\\" href=\\\"https://www.blogger.com/comment.g?blogID=19402125&postID=114070605958684588\\\"location.href=https://www.blogger.com/comment.g?blogID=19402125&postID=114070605958684588;>\",\n        \"\",\n\n        \"<a href = \\\"/videos/Bishop\\\"/\\\" title = \\\"click to see more Bishop\\\" videos\\\">Bishop\\\"</a>\",\n        \"Bishop\\\"\",\n\n        \"<a href=\\\"http://bhaa.ie/calendar/event.php?eid=20081203150127531\\\"\\\">BHAA Eircom 2 &amp; 5 miles CC combined start</a>\",\n        \"BHAA Eircom 2 & 5 miles CC combined start\",\n\n        \"<a href=\\\"http://people.tribe.net/wolfmana\\\" onClick='setClick(\\\"Application[tribe].Person[bb7df210-9dc0-478c-917f-436b896bcb79]\\\")'\\\" title=\\\"Mana\\\">\",\n        \"\",\n\n        \"<a  href=\\\"http://blog.edu-cyberpg.com/ct.ashx?id=6143c528-080c-4bb2-b765-5ec56c8256d3&url=http%3a%2f%2fwww.gsa.ac.uk%2fmackintoshsketchbook%2f\\\"\\\" eudora=\\\"autourl\\\">\",\n        \"\",\n\n        // \"<\" before \">\" inhibits tag recognition\n        \"<input type=\\\"text\\\" value=\\\"<search here>\\\">\",\n        \"<input type=\\\"text\\\" value=\\\"\\n\\\">\",\n\n        \"<input type=\\\"text\\\" value=\\\"<search here\\\">\",\n        \"<input type=\\\"text\\\" value=\\\"\\n\",\n\n        \"<input type=\\\"text\\\" value=\\\"search here>\\\">\",\n        \"\\\">\",\n\n        // \"<\" and \">\" chars are accepted in on[Event] attribute values\n        \"<input type=\\\"text\\\" value=\\\"&lt;search here&gt;\\\" onFocus=\\\"this.value='<search here>'\\\">\",\n        \"\",\n\n        \"<![if ! IE]>\\n<link href=\\\"http://i.deviantart.com/icons/favicon.png\\\" rel=\\\"shortcut icon\\\"/>\\n<![endif]>\",\n        \"\\n\\n\\n\",\n\n        \"<![if supportMisalignedColumns]>\\n<tr height=0 style='display:none'>\\n<td width=64 style='width:48pt'></td>\\n</tr>\\n<![endif]>\",\n        \"\\n\\n\\n\\n\\n\\n\\n\\n\",\n    };\n    for (int i = 0 ; i < testGold.length ; i += 2) {\n      String test = testGold[i];\n      String gold = testGold[i + 1];\n      Reader reader = new HTMLStripCharFilter(new StringReader(test));\n      StringBuilder builder = new StringBuilder();\n      int ch = 0;\n      while ((ch = reader.read()) != -1){\n        builder.append((char)ch);\n      }\n      String result = builder.toString();\n      assertEquals(\"Test: '\" + test + \"'\", gold, result);\n    }\n  }\n\n","sourceOld":"  public void testMalformedHTML() throws Exception {\n    String[] testGold = {\n        \"a <a hr<ef=aa<a>> </close</a>\",\n        \"a <a hr<ef=aa> </close\",\n\n        \"<a href=http://dmoz.org/cgi-bin/add.cgi?where=/arts/\\\" class=lu style=\\\"font-size: 9px\\\" target=dmoz>Submit a Site</a>\",\n        \"Submit a Site\",\n\n        \"<a href=javascript:ioSwitch('p8','http://www.csmonitor.com/') title=expand id=e8 class=expanded rel=http://www.csmonitor.com/>Christian Science\",\n        \"Christian Science\",\n\n        \"<link rel=\\\"alternate\\\" type=\\\"application/rss+xml\\\" title=\\\"San Francisco \\\" 2008 RSS Feed\\\" href=\\\"http://2008.sf.wordcamp.org/feed/\\\" />\",\n        \"\\n\",\n\n        // \"<\" before \">\" inhibits tag recognition\n        \"<a href=\\\" http://www.surgery4was.happyhost.org/video-of-arthroscopic-knee-surgery symptoms.html, heat congestive heart failure <a href=\\\" http://www.symptoms1bad.happyhost.org/canine\",\n        \"<a href=\\\" http://www.surgery4was.happyhost.org/video-of-arthroscopic-knee-surgery symptoms.html, heat congestive heart failure <a href=\\\" http://www.symptoms1bad.happyhost.org/canine\",\n\n        \"<a href=\\\"http://ucblibraries.colorado.edu/how/index.htm\\\"class=\\\"pageNavAreaText\\\">\",\n        \"\",\n\n        \"<link title=\\\"^\\\\\\\" 21Sta's Blog\\\" rel=\\\"search\\\"  type=\\\"application/opensearchdescription+xml\\\"  href=\\\"http://21sta.com/blog/inc/opensearch.php\\\" />\",\n        \"\\n\",\n\n        \"<a href=\\\"#postcomment\\\" title=\\\"\\\"Leave a comment\\\";\\\">?\",\n        \"?\",\n\n        \"<a href='/modern-furniture'   ' id='21txt' class='offtab'   onMouseout=\\\"this.className='offtab';  return true;\\\" onMouseover=\\\"this.className='ontab';  return true;\\\">\",\n        \"\",\n\n        \"<a href='http://alievi.wordpress.com/category/01-todos-posts/' style='font-size: 275%; padding: 1px; margin: 1px;' title='01 - Todos Post's (83)'>\",\n        \"\",\n\n        \"The <a href=<a href=\\\"http://www.advancedmd.com>medical\\\">http://www.advancedmd.com>medical</a> practice software</a>\",\n        \"The <a href=medical\\\">http://www.advancedmd.com>medical practice software\",\n\n        \"<a href=\\\"node/21426\\\" class=\\\"clipTitle2\\\" title=\\\"Levi.com/BMX 2008 Clip of the Week 29 \\\"Morgan Wade Leftover Clips\\\"\\\">Levi.com/BMX 2008 Clip of the Week 29...\",\n        \"Levi.com/BMX 2008 Clip of the Week 29...\",\n\n        \"<a href=\\\"printer_friendly.php?branch=&year=&submit=go&screen=\\\";\\\">Printer Friendly\",\n        \"Printer Friendly\",\n\n        \"<a href=#\\\" ondragstart=\\\"return false\\\" onclick=\\\"window.external.AddFavorite('http://www.amazingtextures.com', 'Amazing Textures');return false\\\" onmouseover=\\\"window.status='Add to Favorites';return true\\\">Add to Favorites\",\n        \"Add to Favorites\",\n\n        \"<a href=\\\"../at_home/at_home_search.html\\\"../_home/at_home_search.html\\\">At\",\n        \"At\",\n\n        \"E-mail: <a href=\\\"\\\"mailto:XXXXXX@example.com\\\" \\\">XXXXXX@example.com </a>\",\n        \"E-mail: XXXXXX@example.com \",\n\n        \"<li class=\\\"farsi\\\"><a title=\\\"A'13?\\\" alt=\\\"A'13?\\\" href=\\\"http://www.america.gov/persian\\\" alt=\\\"\\\" name=\\\"A'13?\\\"A'13? title=\\\"A'13?\\\">A'13?</a></li>\",\n        \"\\nA'13?\\n\",\n\n        \"<li><a href=\\\"#28\\\" title=\\\"Hubert \\\"Geese\\\" Ausby\\\">Hubert \\\"Geese\\\" Ausby</a></li>\",\n        \"\\nHubert \\\"Geese\\\" Ausby\\n\",\n\n        \"<href=\\\"http://anbportal.com/mms/login.asp\\\">\",\n        \"\\n\",\n\n        \"<a href=\\\"\",\n        \"<a href=\\\"\",\n\n        \"<a href=\\\">\",\n        \"\",\n\n        \"<a rel=\\\"nofollow\\\" href=\\\"http://anissanina31.skyrock.com/1895039493-Hi-tout-le-monde.html\\\" title=\\\" Hi, tout le monde !>#</a>\",\n        \"#\",\n\n        \"<a href=\\\"http://annunciharleydavidsonusate.myblog.it/\\\" title=\\\"Annunci Moto e Accessori Harley Davidson\\\" target=\\\"_blank\\\"><img src=\\\"http://annunciharleydavidsonusate.myblog.it/images/Antipixel.gif\\\" /></a>\",\n        \"\",\n\n        \"<a href=\\\"video/addvideo&v=120838887181\\\" onClick=\\\"return confirm('Are you sure you want  add this video to your profile? If it exists some video in your profile will be overlapped by this video!!')\\\" \\\" onmouseover=\\\"this.className='border2'\\\" onmouseout=\\\"this.className=''\\\">\",\n        \"\",\n\n        \"<a href=#Services & Support>\",\n        \"\",\n\n        // \"<\" and \">\" chars are accepted in on[Event] attribute values\n        \"<input type=\\\"image\\\" src=\\\"http://apologyindex.com/ThemeFiles/83401-72905/images/btn_search.gif\\\"value=\\\"Search\\\" name=\\\"Search\\\" alt=\\\"Search\\\" class=\\\"searchimage\\\" onclick=\\\"incom ='&sc=' + document.getElementById('sel').value ; var dt ='&dt=' + document.getElementById('dt').value; var searchKeyword = document.getElementById('q').value ; searchKeyword = searchKeyword.replace(/\\\\s/g,''); if (searchKeyword.length < 3){alert('Nothing to search. Search keyword should contain atleast 3 chars.'); return false; } var al='&al=' +  document.getElementById('advancedlink').style.display ;  document.location.href='http://apologyindex.com/search.aspx?q=' + document.getElementById('q').value + incom + dt + al;\\\" />\",\n        \"\",\n\n        \"<input type=\\\"image\\\" src=\\\"images/afbe.gif\\\" width=\\\"22\\\" height=\\\"22\\\"  hspace=\\\"4\\\" title=\\\"Add to Favorite\\\" alt=\\\"Add to Favorite\\\"onClick=\\\" if(window.sidebar){ window.sidebar.addPanel(document.title,location.href,''); }else if(window.external){ window.external.AddFavorite(location.href,document.title); }else if(window.opera&&window.print) { return true; }\\\">\",\n        \"\",\n\n        \"<area shape=\\\"rect\\\" coords=\\\"12,153,115,305\\\" href=\\\"http://statenislandtalk.com/v-web/gallery/Osmundsen-family\\\"Art's Norwegian Roots in Rogaland\\\">\",\n        \"\\n\",\n\n        \"<a rel=\\\"nofollow\\\" href=\\\"http://arth26.skyrock.com/660188240-bonzai.html\\\" title=\\\"bonza>#\",\n        \"#\",\n\n        \"<a href=  >\",\n        \"\",\n\n        \"<ahref=http:..\",\n        \"<ahref=http:..\",\n\n        \"<ahref=http:..>\",\n        \"\\n\",\n\n        \"<ahref=\\\"http://aseigo.bddf.ca/cms/1025\\\">A\",\n        \"\\nA\",\n\n        \"<a href=\\\"javascript:calendar_window=window.open('/calendar.aspx?formname=frmCalendar.txtDate','calendar_window','width=154,height=188');calendar_window.focus()\\\">\",\n        \"\",\n\n        \"<a href=\\\"/applications/defenseaerospace/19+rackmounts\\\" title=\\\"19\\\" Rackmounts\\\">\",\n        \"\",\n\n        \"<a href=http://www.azimprimerie.fr/flash/backup/lewes-zip-code/savage-model-110-manual.html title=savage model 110 manual rel=dofollow>\",\n        \"\",\n\n        \"<a class=\\\"at\\\" name=\\\"Lamborghini  href=\\\"http://lamborghini.coolbegin.com\\\">Lamborghini /a>\",\n        \"Lamborghini /a>\",\n\n        \"<A href='newslink.php?news_link=http%3A%2F%2Fwww.worldnetdaily.com%2Findex.php%3Ffa%3DPAGE.view%26pageId%3D85729&news_title=Florida QB makes 'John 3:16' hottest Google search Tebow inscribed Bible reference on eye black for championship game' TARGET=_blank>\",\n        \"\",\n\n        \"<a href=/myspace !style='color:#993333'>\",\n        \"\",\n\n        \"<meta name=3DProgId content=3DExcel.Sheet>\",\n        \"\\n\",\n\n        \"<link id=3D\\\"shLink\\\" href=3D\\\"PSABrKelly-BADMINTONCupResults08FINAL2008_09_19=_files/sheet004.htm\\\">\",\n        \"\\n\",\n\n        \"<td bgcolor=3D\\\"#FFFFFF\\\" nowrap>\",\n        \"\\n\",\n\n        \"<a href=\\\"http://basnect.info/usersearch/\\\"predicciones-mundiales-2009\\\".html\\\">\\\"predicciones mundiales 2009\\\"</a>\",\n        \"\\\"predicciones mundiales 2009\\\"\",\n\n        \"<a class=\\\"comment-link\\\" href=\\\"https://www.blogger.com/comment.g?blogID=19402125&postID=114070605958684588\\\"location.href=https://www.blogger.com/comment.g?blogID=19402125&postID=114070605958684588;>\",\n        \"\",\n\n        \"<a href = \\\"/videos/Bishop\\\"/\\\" title = \\\"click to see more Bishop\\\" videos\\\">Bishop\\\"</a>\",\n        \"Bishop\\\"\",\n\n        \"<a href=\\\"http://bhaa.ie/calendar/event.php?eid=20081203150127531\\\"\\\">BHAA Eircom 2 &amp; 5 miles CC combined start</a>\",\n        \"BHAA Eircom 2 & 5 miles CC combined start\",\n\n        \"<a href=\\\"http://people.tribe.net/wolfmana\\\" onClick='setClick(\\\"Application[tribe].Person[bb7df210-9dc0-478c-917f-436b896bcb79]\\\")'\\\" title=\\\"Mana\\\">\",\n        \"\",\n\n        \"<a  href=\\\"http://blog.edu-cyberpg.com/ct.ashx?id=6143c528-080c-4bb2-b765-5ec56c8256d3&url=http%3a%2f%2fwww.gsa.ac.uk%2fmackintoshsketchbook%2f\\\"\\\" eudora=\\\"autourl\\\">\",\n        \"\",\n\n        // \"<\" before \">\" inhibits tag recognition\n        \"<input type=\\\"text\\\" value=\\\"<search here>\\\">\",\n        \"<input type=\\\"text\\\" value=\\\"\\n\\\">\",\n\n        \"<input type=\\\"text\\\" value=\\\"<search here\\\">\",\n        \"<input type=\\\"text\\\" value=\\\"\\n\",\n\n        \"<input type=\\\"text\\\" value=\\\"search here>\\\">\",\n        \"\\\">\",\n\n        // \"<\" and \">\" chars are accepted in on[Event] attribute values\n        \"<input type=\\\"text\\\" value=\\\"&lt;search here&gt;\\\" onFocus=\\\"this.value='<search here>'\\\">\",\n        \"\",\n\n        \"<![if ! IE]>\\n<link href=\\\"http://i.deviantart.com/icons/favicon.png\\\" rel=\\\"shortcut icon\\\"/>\\n<![endif]>\",\n        \"\\n\\n\\n\",\n\n        \"<![if supportMisalignedColumns]>\\n<tr height=0 style='display:none'>\\n<td width=64 style='width:48pt'></td>\\n</tr>\\n<![endif]>\",\n        \"\\n\\n\\n\\n\\n\\n\\n\\n\",\n    };\n    for (int i = 0 ; i < testGold.length ; i += 2) {\n      String test = testGold[i];\n      String gold = testGold[i + 1];\n      Reader reader = new HTMLStripCharFilter(CharReader.get(new StringReader(test)));\n      StringBuilder builder = new StringBuilder();\n      int ch = 0;\n      while ((ch = reader.read()) != -1){\n        builder.append((char)ch);\n      }\n      String result = builder.toString();\n      assertEquals(\"Test: '\" + test + \"'\", gold, result);\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"ab081a78869a616f9c93e5b2f3ec2f99c2f7f741","date":1397714897,"type":3,"author":"Steven Rowe","isMerge":false,"pathNew":"lucene/analysis/common/src/test/org/apache/lucene/analysis/charfilter/HTMLStripCharFilterTest#testMalformedHTML().mjava","pathOld":"lucene/analysis/common/src/test/org/apache/lucene/analysis/charfilter/HTMLStripCharFilterTest#testMalformedHTML().mjava","sourceNew":"  public void testMalformedHTML() throws Exception {\n    String[] testGold = {\n        \"a <a hr<ef=aa<a>> </close</a>\",\n        \"a <a hr<ef=aa> </close\",\n\n        \"<a href=http://dmoz.org/cgi-bin/add.cgi?where=/arts/\\\" class=lu style=\\\"font-size: 9px\\\" target=dmoz>Submit a Site</a>\",\n        \"Submit a Site\",\n\n        \"<a href=javascript:ioSwitch('p8','http://www.csmonitor.com/') title=expand id=e8 class=expanded rel=http://www.csmonitor.com/>Christian Science\",\n        \"Christian Science\",\n\n        \"<link rel=\\\"alternate\\\" type=\\\"application/rss+xml\\\" title=\\\"San Francisco \\\" 2008 RSS Feed\\\" href=\\\"http://2008.sf.wordcamp.org/feed/\\\" />\",\n        \"\\n\",\n\n        // \"<\" before \">\" inhibits tag recognition\n        \"<a href=\\\" http://www.surgery4was.happyhost.org/video-of-arthroscopic-knee-surgery symptoms.html, heat congestive heart failure <a href=\\\" http://www.symptoms1bad.happyhost.org/canine\",\n        \"<a href=\\\" http://www.surgery4was.happyhost.org/video-of-arthroscopic-knee-surgery symptoms.html, heat congestive heart failure <a href=\\\" http://www.symptoms1bad.happyhost.org/canine\",\n\n        \"<a href=\\\"http://ucblibraries.colorado.edu/how/index.htm\\\"class=\\\"pageNavAreaText\\\">\",\n        \"\",\n\n        \"<link title=\\\"^\\\\\\\" 21Sta's Blog\\\" rel=\\\"search\\\"  type=\\\"application/opensearchdescription+xml\\\"  href=\\\"http://21sta.com/blog/inc/opensearch.php\\\" />\",\n        \"\\n\",\n\n        \"<a href=\\\"#postcomment\\\" title=\\\"\\\"Leave a comment\\\";\\\">?\",\n        \"?\",\n\n        \"<a href='/modern-furniture'   ' id='21txt' class='offtab'   onMouseout=\\\"this.className='offtab';  return true;\\\" onMouseover=\\\"this.className='ontab';  return true;\\\">\",\n        \"\",\n\n        \"<a href='http://alievi.wordpress.com/category/01-todos-posts/' style='font-size: 275%; padding: 1px; margin: 1px;' title='01 - Todos Post's (83)'>\",\n        \"\",\n\n        \"The <a href=<a href=\\\"http://www.advancedmd.com>medical\\\">http://www.advancedmd.com>medical</a> practice software</a>\",\n        \"The <a href=medical\\\">http://www.advancedmd.com>medical practice software\",\n\n        \"<a href=\\\"node/21426\\\" class=\\\"clipTitle2\\\" title=\\\"Levi.com/BMX 2008 Clip of the Week 29 \\\"Morgan Wade Leftover Clips\\\"\\\">Levi.com/BMX 2008 Clip of the Week 29...\",\n        \"Levi.com/BMX 2008 Clip of the Week 29...\",\n\n        \"<a href=\\\"printer_friendly.php?branch=&year=&submit=go&screen=\\\";\\\">Printer Friendly\",\n        \"Printer Friendly\",\n\n        \"<a href=#\\\" ondragstart=\\\"return false\\\" onclick=\\\"window.external.AddFavorite('http://www.amazingtextures.com', 'Amazing Textures');return false\\\" onmouseover=\\\"window.status='Add to Favorites';return true\\\">Add to Favorites\",\n        \"Add to Favorites\",\n\n        \"<a href=\\\"../at_home/at_home_search.html\\\"../_home/at_home_search.html\\\">At\",\n        \"At\",\n\n        \"E-mail: <a href=\\\"\\\"mailto:XXXXXX@example.com\\\" \\\">XXXXXX@example.com </a>\",\n        \"E-mail: XXXXXX@example.com \",\n\n        \"<li class=\\\"farsi\\\"><a title=\\\"A'13?\\\" alt=\\\"A'13?\\\" href=\\\"http://www.america.gov/persian\\\" alt=\\\"\\\" name=\\\"A'13?\\\"A'13? title=\\\"A'13?\\\">A'13?</a></li>\",\n        \"\\nA'13?\\n\",\n\n        \"<li><a href=\\\"#28\\\" title=\\\"Hubert \\\"Geese\\\" Ausby\\\">Hubert \\\"Geese\\\" Ausby</a></li>\",\n        \"\\nHubert \\\"Geese\\\" Ausby\\n\",\n\n        \"<href=\\\"http://anbportal.com/mms/login.asp\\\">\",\n        \"\\n\",\n\n        \"<a href=\\\"\",\n        \"<a href=\\\"\",\n\n        \"<a href=\\\">\",\n        \"\",\n\n        \"<a rel=\\\"nofollow\\\" href=\\\"http://anissanina31.skyrock.com/1895039493-Hi-tout-le-monde.html\\\" title=\\\" Hi, tout le monde !>#</a>\",\n        \"#\",\n\n        \"<a href=\\\"http://annunciharleydavidsonusate.myblog.it/\\\" title=\\\"Annunci Moto e Accessori Harley Davidson\\\" target=\\\"_blank\\\"><img src=\\\"http://annunciharleydavidsonusate.myblog.it/images/Antipixel.gif\\\" /></a>\",\n        \"\",\n\n        \"<a href=\\\"video/addvideo&v=120838887181\\\" onClick=\\\"return confirm('Are you sure you want  add this video to your profile? If it exists some video in your profile will be overlapped by this video!!')\\\" \\\" onmouseover=\\\"this.className='border2'\\\" onmouseout=\\\"this.className=''\\\">\",\n        \"\",\n\n        \"<a href=#Services & Support>\",\n        \"\",\n\n        // \"<\" and \">\" chars are accepted in on[Event] attribute values\n        \"<input type=\\\"image\\\" src=\\\"http://apologyindex.com/ThemeFiles/83401-72905/images/btn_search.gif\\\"value=\\\"Search\\\" name=\\\"Search\\\" alt=\\\"Search\\\" class=\\\"searchimage\\\" onclick=\\\"incom ='&sc=' + document.getElementById('sel').value ; var dt ='&dt=' + document.getElementById('dt').value; var searchKeyword = document.getElementById('q').value ; searchKeyword = searchKeyword.replace(/\\\\s/g,''); if (searchKeyword.length < 3){alert('Nothing to search. Search keyword should contain atleast 3 chars.'); return false; } var al='&al=' +  document.getElementById('advancedlink').style.display ;  document.location.href='http://apologyindex.com/search.aspx?q=' + document.getElementById('q').value + incom + dt + al;\\\" />\",\n        \"\",\n\n        \"<input type=\\\"image\\\" src=\\\"images/afbe.gif\\\" width=\\\"22\\\" height=\\\"22\\\"  hspace=\\\"4\\\" title=\\\"Add to Favorite\\\" alt=\\\"Add to Favorite\\\"onClick=\\\" if(window.sidebar){ window.sidebar.addPanel(document.title,location.href,''); }else if(window.external){ window.external.AddFavorite(location.href,document.title); }else if(window.opera&&window.print) { return true; }\\\">\",\n        \"\",\n\n        \"<area shape=\\\"rect\\\" coords=\\\"12,153,115,305\\\" href=\\\"http://statenislandtalk.com/v-web/gallery/Osmundsen-family\\\"Art's Norwegian Roots in Rogaland\\\">\",\n        \"\\n\",\n\n        \"<a rel=\\\"nofollow\\\" href=\\\"http://arth26.skyrock.com/660188240-bonzai.html\\\" title=\\\"bonza>#\",\n        \"#\",\n\n        \"<a href=  >\",\n        \"\",\n\n        \"<ahref=http:..\",\n        \"<ahref=http:..\",\n\n        \"<ahref=http:..>\",\n        \"\\n\",\n\n        \"<ahref=\\\"http://aseigo.bddf.ca/cms/1025\\\">A\",\n        \"\\nA\",\n\n        \"<a href=\\\"javascript:calendar_window=window.open('/calendar.aspx?formname=frmCalendar.txtDate','calendar_window','width=154,height=188');calendar_window.focus()\\\">\",\n        \"\",\n\n        \"<a href=\\\"/applications/defenseaerospace/19+rackmounts\\\" title=\\\"19\\\" Rackmounts\\\">\",\n        \"\",\n\n        \"<a href=http://www.azimprimerie.fr/flash/backup/lewes-zip-code/savage-model-110-manual.html title=savage model 110 manual rel=dofollow>\",\n        \"\",\n\n        \"<a class=\\\"at\\\" name=\\\"Lamborghini  href=\\\"http://lamborghini.coolbegin.com\\\">Lamborghini /a>\",\n        \"Lamborghini /a>\",\n\n        \"<A href='newslink.php?news_link=http%3A%2F%2Fwww.worldnetdaily.com%2Findex.php%3Ffa%3DPAGE.view%26pageId%3D85729&news_title=Florida QB makes 'John 3:16' hottest Google search Tebow inscribed Bible reference on eye black for championship game' TARGET=_blank>\",\n        \"\",\n\n        \"<a href=/myspace !style='color:#993333'>\",\n        \"\",\n\n        \"<meta name=3DProgId content=3DExcel.Sheet>\",\n        \"\\n\",\n\n        \"<link id=3D\\\"shLink\\\" href=3D\\\"PSABrKelly-BADMINTONCupResults08FINAL2008_09_19=_files/sheet004.htm\\\">\",\n        \"\\n\",\n\n        \"<td bgcolor=3D\\\"#FFFFFF\\\" nowrap>\",\n        \"\\n\",\n\n        \"<a href=\\\"http://basnect.info/usersearch/\\\"predicciones-mundiales-2009\\\".html\\\">\\\"predicciones mundiales 2009\\\"</a>\",\n        \"\\\"predicciones mundiales 2009\\\"\",\n\n        \"<a class=\\\"comment-link\\\" href=\\\"https://www.blogger.com/comment.g?blogID=19402125&postID=114070605958684588\\\"location.href=https://www.blogger.com/comment.g?blogID=19402125&postID=114070605958684588;>\",\n        \"\",\n\n        \"<a href = \\\"/videos/Bishop\\\"/\\\" title = \\\"click to see more Bishop\\\" videos\\\">Bishop\\\"</a>\",\n        \"Bishop\\\"\",\n\n        \"<a href=\\\"http://bhaa.ie/calendar/event.php?eid=20081203150127531\\\"\\\">BHAA Eircom 2 &amp; 5 miles CC combined start</a>\",\n        \"BHAA Eircom 2 & 5 miles CC combined start\",\n\n        \"<a href=\\\"http://people.tribe.net/wolfmana\\\" onClick='setClick(\\\"Application[tribe].Person[bb7df210-9dc0-478c-917f-436b896bcb79]\\\")'\\\" title=\\\"Mana\\\">\",\n        \"\",\n\n        \"<a  href=\\\"http://blog.edu-cyberpg.com/ct.ashx?id=6143c528-080c-4bb2-b765-5ec56c8256d3&url=http%3a%2f%2fwww.gsa.ac.uk%2fmackintoshsketchbook%2f\\\"\\\" eudora=\\\"autourl\\\">\",\n        \"\",\n\n        // \"<\" before \">\" inhibits tag recognition\n        \"<input type=\\\"text\\\" value=\\\"<search here>\\\">\",\n        \"<input type=\\\"text\\\" value=\\\"\\n\\\">\",\n\n        \"<input type=\\\"text\\\" value=\\\"<search here\\\">\",\n        \"<input type=\\\"text\\\" value=\\\"\\n\",\n\n        \"<input type=\\\"text\\\" value=\\\"search here>\\\">\",\n        \"\\\">\",\n\n        // \"<\" and \">\" chars are accepted in on[Event] attribute values\n        \"<input type=\\\"text\\\" value=\\\"&lt;search here&gt;\\\" onFocus=\\\"this.value='<search here>'\\\">\",\n        \"\",\n\n        \"<![if ! IE]>\\n<link href=\\\"http://i.deviantart.com/icons/favicon.png\\\" rel=\\\"shortcut icon\\\"/>\\n<![endif]>\",\n        \"\\n\\n\\n\",\n\n        \"<![if supportMisalignedColumns]>\\n<tr height=0 style='display:none'>\\n<td width=64 style='width:48pt'></td>\\n</tr>\\n<![endif]>\",\n        \"\\n\\n\\n\\n\\n\\n\\n\\n\",\n    };\n    for (int i = 0 ; i < testGold.length ; i += 2) {\n      assertHTMLStripsTo(testGold[i], testGold[i + 1], null);\n    }\n  }\n\n","sourceOld":"  public void testMalformedHTML() throws Exception {\n    String[] testGold = {\n        \"a <a hr<ef=aa<a>> </close</a>\",\n        \"a <a hr<ef=aa> </close\",\n\n        \"<a href=http://dmoz.org/cgi-bin/add.cgi?where=/arts/\\\" class=lu style=\\\"font-size: 9px\\\" target=dmoz>Submit a Site</a>\",\n        \"Submit a Site\",\n\n        \"<a href=javascript:ioSwitch('p8','http://www.csmonitor.com/') title=expand id=e8 class=expanded rel=http://www.csmonitor.com/>Christian Science\",\n        \"Christian Science\",\n\n        \"<link rel=\\\"alternate\\\" type=\\\"application/rss+xml\\\" title=\\\"San Francisco \\\" 2008 RSS Feed\\\" href=\\\"http://2008.sf.wordcamp.org/feed/\\\" />\",\n        \"\\n\",\n\n        // \"<\" before \">\" inhibits tag recognition\n        \"<a href=\\\" http://www.surgery4was.happyhost.org/video-of-arthroscopic-knee-surgery symptoms.html, heat congestive heart failure <a href=\\\" http://www.symptoms1bad.happyhost.org/canine\",\n        \"<a href=\\\" http://www.surgery4was.happyhost.org/video-of-arthroscopic-knee-surgery symptoms.html, heat congestive heart failure <a href=\\\" http://www.symptoms1bad.happyhost.org/canine\",\n\n        \"<a href=\\\"http://ucblibraries.colorado.edu/how/index.htm\\\"class=\\\"pageNavAreaText\\\">\",\n        \"\",\n\n        \"<link title=\\\"^\\\\\\\" 21Sta's Blog\\\" rel=\\\"search\\\"  type=\\\"application/opensearchdescription+xml\\\"  href=\\\"http://21sta.com/blog/inc/opensearch.php\\\" />\",\n        \"\\n\",\n\n        \"<a href=\\\"#postcomment\\\" title=\\\"\\\"Leave a comment\\\";\\\">?\",\n        \"?\",\n\n        \"<a href='/modern-furniture'   ' id='21txt' class='offtab'   onMouseout=\\\"this.className='offtab';  return true;\\\" onMouseover=\\\"this.className='ontab';  return true;\\\">\",\n        \"\",\n\n        \"<a href='http://alievi.wordpress.com/category/01-todos-posts/' style='font-size: 275%; padding: 1px; margin: 1px;' title='01 - Todos Post's (83)'>\",\n        \"\",\n\n        \"The <a href=<a href=\\\"http://www.advancedmd.com>medical\\\">http://www.advancedmd.com>medical</a> practice software</a>\",\n        \"The <a href=medical\\\">http://www.advancedmd.com>medical practice software\",\n\n        \"<a href=\\\"node/21426\\\" class=\\\"clipTitle2\\\" title=\\\"Levi.com/BMX 2008 Clip of the Week 29 \\\"Morgan Wade Leftover Clips\\\"\\\">Levi.com/BMX 2008 Clip of the Week 29...\",\n        \"Levi.com/BMX 2008 Clip of the Week 29...\",\n\n        \"<a href=\\\"printer_friendly.php?branch=&year=&submit=go&screen=\\\";\\\">Printer Friendly\",\n        \"Printer Friendly\",\n\n        \"<a href=#\\\" ondragstart=\\\"return false\\\" onclick=\\\"window.external.AddFavorite('http://www.amazingtextures.com', 'Amazing Textures');return false\\\" onmouseover=\\\"window.status='Add to Favorites';return true\\\">Add to Favorites\",\n        \"Add to Favorites\",\n\n        \"<a href=\\\"../at_home/at_home_search.html\\\"../_home/at_home_search.html\\\">At\",\n        \"At\",\n\n        \"E-mail: <a href=\\\"\\\"mailto:XXXXXX@example.com\\\" \\\">XXXXXX@example.com </a>\",\n        \"E-mail: XXXXXX@example.com \",\n\n        \"<li class=\\\"farsi\\\"><a title=\\\"A'13?\\\" alt=\\\"A'13?\\\" href=\\\"http://www.america.gov/persian\\\" alt=\\\"\\\" name=\\\"A'13?\\\"A'13? title=\\\"A'13?\\\">A'13?</a></li>\",\n        \"\\nA'13?\\n\",\n\n        \"<li><a href=\\\"#28\\\" title=\\\"Hubert \\\"Geese\\\" Ausby\\\">Hubert \\\"Geese\\\" Ausby</a></li>\",\n        \"\\nHubert \\\"Geese\\\" Ausby\\n\",\n\n        \"<href=\\\"http://anbportal.com/mms/login.asp\\\">\",\n        \"\\n\",\n\n        \"<a href=\\\"\",\n        \"<a href=\\\"\",\n\n        \"<a href=\\\">\",\n        \"\",\n\n        \"<a rel=\\\"nofollow\\\" href=\\\"http://anissanina31.skyrock.com/1895039493-Hi-tout-le-monde.html\\\" title=\\\" Hi, tout le monde !>#</a>\",\n        \"#\",\n\n        \"<a href=\\\"http://annunciharleydavidsonusate.myblog.it/\\\" title=\\\"Annunci Moto e Accessori Harley Davidson\\\" target=\\\"_blank\\\"><img src=\\\"http://annunciharleydavidsonusate.myblog.it/images/Antipixel.gif\\\" /></a>\",\n        \"\",\n\n        \"<a href=\\\"video/addvideo&v=120838887181\\\" onClick=\\\"return confirm('Are you sure you want  add this video to your profile? If it exists some video in your profile will be overlapped by this video!!')\\\" \\\" onmouseover=\\\"this.className='border2'\\\" onmouseout=\\\"this.className=''\\\">\",\n        \"\",\n\n        \"<a href=#Services & Support>\",\n        \"\",\n\n        // \"<\" and \">\" chars are accepted in on[Event] attribute values\n        \"<input type=\\\"image\\\" src=\\\"http://apologyindex.com/ThemeFiles/83401-72905/images/btn_search.gif\\\"value=\\\"Search\\\" name=\\\"Search\\\" alt=\\\"Search\\\" class=\\\"searchimage\\\" onclick=\\\"incom ='&sc=' + document.getElementById('sel').value ; var dt ='&dt=' + document.getElementById('dt').value; var searchKeyword = document.getElementById('q').value ; searchKeyword = searchKeyword.replace(/\\\\s/g,''); if (searchKeyword.length < 3){alert('Nothing to search. Search keyword should contain atleast 3 chars.'); return false; } var al='&al=' +  document.getElementById('advancedlink').style.display ;  document.location.href='http://apologyindex.com/search.aspx?q=' + document.getElementById('q').value + incom + dt + al;\\\" />\",\n        \"\",\n\n        \"<input type=\\\"image\\\" src=\\\"images/afbe.gif\\\" width=\\\"22\\\" height=\\\"22\\\"  hspace=\\\"4\\\" title=\\\"Add to Favorite\\\" alt=\\\"Add to Favorite\\\"onClick=\\\" if(window.sidebar){ window.sidebar.addPanel(document.title,location.href,''); }else if(window.external){ window.external.AddFavorite(location.href,document.title); }else if(window.opera&&window.print) { return true; }\\\">\",\n        \"\",\n\n        \"<area shape=\\\"rect\\\" coords=\\\"12,153,115,305\\\" href=\\\"http://statenislandtalk.com/v-web/gallery/Osmundsen-family\\\"Art's Norwegian Roots in Rogaland\\\">\",\n        \"\\n\",\n\n        \"<a rel=\\\"nofollow\\\" href=\\\"http://arth26.skyrock.com/660188240-bonzai.html\\\" title=\\\"bonza>#\",\n        \"#\",\n\n        \"<a href=  >\",\n        \"\",\n\n        \"<ahref=http:..\",\n        \"<ahref=http:..\",\n\n        \"<ahref=http:..>\",\n        \"\\n\",\n\n        \"<ahref=\\\"http://aseigo.bddf.ca/cms/1025\\\">A\",\n        \"\\nA\",\n\n        \"<a href=\\\"javascript:calendar_window=window.open('/calendar.aspx?formname=frmCalendar.txtDate','calendar_window','width=154,height=188');calendar_window.focus()\\\">\",\n        \"\",\n\n        \"<a href=\\\"/applications/defenseaerospace/19+rackmounts\\\" title=\\\"19\\\" Rackmounts\\\">\",\n        \"\",\n\n        \"<a href=http://www.azimprimerie.fr/flash/backup/lewes-zip-code/savage-model-110-manual.html title=savage model 110 manual rel=dofollow>\",\n        \"\",\n\n        \"<a class=\\\"at\\\" name=\\\"Lamborghini  href=\\\"http://lamborghini.coolbegin.com\\\">Lamborghini /a>\",\n        \"Lamborghini /a>\",\n\n        \"<A href='newslink.php?news_link=http%3A%2F%2Fwww.worldnetdaily.com%2Findex.php%3Ffa%3DPAGE.view%26pageId%3D85729&news_title=Florida QB makes 'John 3:16' hottest Google search Tebow inscribed Bible reference on eye black for championship game' TARGET=_blank>\",\n        \"\",\n\n        \"<a href=/myspace !style='color:#993333'>\",\n        \"\",\n\n        \"<meta name=3DProgId content=3DExcel.Sheet>\",\n        \"\\n\",\n\n        \"<link id=3D\\\"shLink\\\" href=3D\\\"PSABrKelly-BADMINTONCupResults08FINAL2008_09_19=_files/sheet004.htm\\\">\",\n        \"\\n\",\n\n        \"<td bgcolor=3D\\\"#FFFFFF\\\" nowrap>\",\n        \"\\n\",\n\n        \"<a href=\\\"http://basnect.info/usersearch/\\\"predicciones-mundiales-2009\\\".html\\\">\\\"predicciones mundiales 2009\\\"</a>\",\n        \"\\\"predicciones mundiales 2009\\\"\",\n\n        \"<a class=\\\"comment-link\\\" href=\\\"https://www.blogger.com/comment.g?blogID=19402125&postID=114070605958684588\\\"location.href=https://www.blogger.com/comment.g?blogID=19402125&postID=114070605958684588;>\",\n        \"\",\n\n        \"<a href = \\\"/videos/Bishop\\\"/\\\" title = \\\"click to see more Bishop\\\" videos\\\">Bishop\\\"</a>\",\n        \"Bishop\\\"\",\n\n        \"<a href=\\\"http://bhaa.ie/calendar/event.php?eid=20081203150127531\\\"\\\">BHAA Eircom 2 &amp; 5 miles CC combined start</a>\",\n        \"BHAA Eircom 2 & 5 miles CC combined start\",\n\n        \"<a href=\\\"http://people.tribe.net/wolfmana\\\" onClick='setClick(\\\"Application[tribe].Person[bb7df210-9dc0-478c-917f-436b896bcb79]\\\")'\\\" title=\\\"Mana\\\">\",\n        \"\",\n\n        \"<a  href=\\\"http://blog.edu-cyberpg.com/ct.ashx?id=6143c528-080c-4bb2-b765-5ec56c8256d3&url=http%3a%2f%2fwww.gsa.ac.uk%2fmackintoshsketchbook%2f\\\"\\\" eudora=\\\"autourl\\\">\",\n        \"\",\n\n        // \"<\" before \">\" inhibits tag recognition\n        \"<input type=\\\"text\\\" value=\\\"<search here>\\\">\",\n        \"<input type=\\\"text\\\" value=\\\"\\n\\\">\",\n\n        \"<input type=\\\"text\\\" value=\\\"<search here\\\">\",\n        \"<input type=\\\"text\\\" value=\\\"\\n\",\n\n        \"<input type=\\\"text\\\" value=\\\"search here>\\\">\",\n        \"\\\">\",\n\n        // \"<\" and \">\" chars are accepted in on[Event] attribute values\n        \"<input type=\\\"text\\\" value=\\\"&lt;search here&gt;\\\" onFocus=\\\"this.value='<search here>'\\\">\",\n        \"\",\n\n        \"<![if ! IE]>\\n<link href=\\\"http://i.deviantart.com/icons/favicon.png\\\" rel=\\\"shortcut icon\\\"/>\\n<![endif]>\",\n        \"\\n\\n\\n\",\n\n        \"<![if supportMisalignedColumns]>\\n<tr height=0 style='display:none'>\\n<td width=64 style='width:48pt'></td>\\n</tr>\\n<![endif]>\",\n        \"\\n\\n\\n\\n\\n\\n\\n\\n\",\n    };\n    for (int i = 0 ; i < testGold.length ; i += 2) {\n      String test = testGold[i];\n      String gold = testGold[i + 1];\n      Reader reader = new HTMLStripCharFilter(new StringReader(test));\n      StringBuilder builder = new StringBuilder();\n      int ch = 0;\n      while ((ch = reader.read()) != -1){\n        builder.append((char)ch);\n      }\n      String result = builder.toString();\n      assertEquals(\"Test: '\" + test + \"'\", gold, result);\n    }\n  }\n\n","bugFix":["fc706b1e03a539d44d99998108feb684bb44cbb2","e3a908bacd530957eaa6d2dfebdd534afd9ac60e"],"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"b89678825b68eccaf09e6ab71675fc0b0af1e099":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"aba371508186796cc6151d8223a5b4e16d02e26e":["b89678825b68eccaf09e6ab71675fc0b0af1e099","fc706b1e03a539d44d99998108feb684bb44cbb2"],"fc706b1e03a539d44d99998108feb684bb44cbb2":["b89678825b68eccaf09e6ab71675fc0b0af1e099"],"fe33227f6805edab2036cbb80645cc4e2d1fa424":["b89678825b68eccaf09e6ab71675fc0b0af1e099","fc706b1e03a539d44d99998108feb684bb44cbb2"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"ab081a78869a616f9c93e5b2f3ec2f99c2f7f741":["fc706b1e03a539d44d99998108feb684bb44cbb2"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["ab081a78869a616f9c93e5b2f3ec2f99c2f7f741"]},"commit2Childs":{"b89678825b68eccaf09e6ab71675fc0b0af1e099":["aba371508186796cc6151d8223a5b4e16d02e26e","fc706b1e03a539d44d99998108feb684bb44cbb2","fe33227f6805edab2036cbb80645cc4e2d1fa424"],"aba371508186796cc6151d8223a5b4e16d02e26e":[],"fc706b1e03a539d44d99998108feb684bb44cbb2":["aba371508186796cc6151d8223a5b4e16d02e26e","fe33227f6805edab2036cbb80645cc4e2d1fa424","ab081a78869a616f9c93e5b2f3ec2f99c2f7f741"],"fe33227f6805edab2036cbb80645cc4e2d1fa424":[],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["b89678825b68eccaf09e6ab71675fc0b0af1e099"],"ab081a78869a616f9c93e5b2f3ec2f99c2f7f741":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["aba371508186796cc6151d8223a5b4e16d02e26e","fe33227f6805edab2036cbb80645cc4e2d1fa424","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}