{"path":"lucene/core/src/java/org/apache/lucene/util/packed/DirectMonotonicReader#getInstance(Meta,RandomAccessInput).mjava","commits":[{"id":"a870f9917149dc600c4ad4417d615c1795de5864","date":1445975387,"type":0,"author":"Adrien Grand","isMerge":false,"pathNew":"lucene/core/src/java/org/apache/lucene/util/packed/DirectMonotonicReader#getInstance(Meta,RandomAccessInput).mjava","pathOld":"/dev/null","sourceNew":"  /**\n   * Retrieves an instance from the specified slice.\n   */\n  public static LongValues getInstance(Meta meta, RandomAccessInput data) throws IOException {\n    final LongValues[] readers = new LongValues[meta.numBlocks];\n    for (int i = 0; i < meta.mins.length; ++i) {\n      if (meta.bpvs[i] == 0) {\n        readers[i] = EMPTY;\n      } else {\n        readers[i] = DirectReader.getInstance(data, meta.bpvs[i], meta.offsets[i]);\n      }\n    }\n    final int blockShift = meta.blockShift;\n\n    final long[] mins = meta.mins;\n    final float[] avgs = meta.avgs;\n    return new LongValues() {\n\n      @Override\n      public long get(long index) {\n        final int block = (int) (index >>> blockShift);\n        final long blockIndex = index & ((1 << blockShift) - 1);\n        final long delta = readers[block].get(blockIndex);\n        return mins[block] + (long) (avgs[block] * blockIndex) + delta;\n      }\n\n    };\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"70a4487b07c49a1861c05720e04624826ecbe9fa","date":1580924108,"type":3,"author":"Adrien Grand","isMerge":false,"pathNew":"lucene/core/src/java/org/apache/lucene/util/packed/DirectMonotonicReader#getInstance(Meta,RandomAccessInput).mjava","pathOld":"lucene/core/src/java/org/apache/lucene/util/packed/DirectMonotonicReader#getInstance(Meta,RandomAccessInput).mjava","sourceNew":"  /**\n   * Retrieves an instance from the specified slice.\n   */\n  public static DirectMonotonicReader getInstance(Meta meta, RandomAccessInput data) throws IOException {\n    final LongValues[] readers = new LongValues[meta.numBlocks];\n    for (int i = 0; i < meta.mins.length; ++i) {\n      if (meta.bpvs[i] == 0) {\n        readers[i] = EMPTY;\n      } else {\n        readers[i] = DirectReader.getInstance(data, meta.bpvs[i], meta.offsets[i]);\n      }\n    }\n\n    return new DirectMonotonicReader(meta.blockShift, readers, meta.mins, meta.avgs, meta.bpvs);\n  }\n\n","sourceOld":"  /**\n   * Retrieves an instance from the specified slice.\n   */\n  public static LongValues getInstance(Meta meta, RandomAccessInput data) throws IOException {\n    final LongValues[] readers = new LongValues[meta.numBlocks];\n    for (int i = 0; i < meta.mins.length; ++i) {\n      if (meta.bpvs[i] == 0) {\n        readers[i] = EMPTY;\n      } else {\n        readers[i] = DirectReader.getInstance(data, meta.bpvs[i], meta.offsets[i]);\n      }\n    }\n    final int blockShift = meta.blockShift;\n\n    final long[] mins = meta.mins;\n    final float[] avgs = meta.avgs;\n    return new LongValues() {\n\n      @Override\n      public long get(long index) {\n        final int block = (int) (index >>> blockShift);\n        final long blockIndex = index & ((1 << blockShift) - 1);\n        final long delta = readers[block].get(blockIndex);\n        return mins[block] + (long) (avgs[block] * blockIndex) + delta;\n      }\n\n    };\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"70a4487b07c49a1861c05720e04624826ecbe9fa":["a870f9917149dc600c4ad4417d615c1795de5864"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"a870f9917149dc600c4ad4417d615c1795de5864":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["70a4487b07c49a1861c05720e04624826ecbe9fa"]},"commit2Childs":{"70a4487b07c49a1861c05720e04624826ecbe9fa":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["a870f9917149dc600c4ad4417d615c1795de5864"],"a870f9917149dc600c4ad4417d615c1795de5864":["70a4487b07c49a1861c05720e04624826ecbe9fa"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}