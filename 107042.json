{"path":"sandbox/projects/appex/src/java/org/krysalis/centipede/ant/task/XmlPropertyTask#execute().mjava","commits":[{"id":"e3074d05d861bc1436ee03619fdee547f9c51d22","date":1020526983,"type":0,"author":"Andrew C. Oliver","isMerge":false,"pathNew":"sandbox/projects/appex/src/java/org/krysalis/centipede/ant/task/XmlPropertyTask#execute().mjava","pathOld":"/dev/null","sourceNew":"    /**\n     * Run the task.\n     * @exception org.apache.tools.ant.BuildException The exception raised during task execution.\n     */\n    public void execute()\n        throws org.apache.tools.ant.BuildException\n    {   \n        BufferedInputStream configurationStream = null;\n      \n        try\n        {\n            configurationStream     =\n                new BufferedInputStream(new FileInputStream(src));\n                \n            DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\n            \n            factory.setValidating(false);\n            factory.setNamespaceAware(false);\n    \n            DocumentBuilder builder = factory.newDocumentBuilder();\n            document = builder.parse( configurationStream );\n\n            Element topElement = document.getDocumentElement();\n            NodeList topChildren = topElement.getChildNodes();\n            int numChildren = topChildren.getLength();\n\n            log(\"Using prefix: \\\"\"+prefix+\"\\\"\", Project.MSG_VERBOSE);\n                         \n            String prefixToUse = \"\";\n            \n            if(!(prefix.equals(\"\")))\n            {\n              prefixToUse = prefix;\n            } \n\n            log(\"Prefix to use 1: \\\"\"+prefixToUse+\"\\\"\", Project.MSG_VERBOSE);\n            \n            if((!(prefix.equals(\"\")))&&keepRoot)\n            {\n              prefixToUse += \".\";            \n            }\n            \n            log(\"Prefix to use 2: \\\"\"+prefixToUse+\"\\\"\", Project.MSG_VERBOSE);\n            \n            if(keepRoot)\n            {\n              prefixToUse += (topElement.getNodeName());\n            } \n\n            log(\"Prefix to use 3: \\\"\"+prefixToUse+\"\\\"\", Project.MSG_VERBOSE);\n                        \n            for(int i=0; i<numChildren; i++)\n            {\n              addNodeRecursively(topChildren.item(i),prefixToUse, 0);            \n            }\n            \n        } catch (SAXException sxe) {\n           // Error generated during parsing\n           Exception  x = sxe;\n           if (sxe.getException() != null)\n               x = sxe.getException();\n           throw new BuildException(x);\n    \n        } catch (ParserConfigurationException pce) {\n           // Parser with specified options can't be built\n            throw new BuildException(pce);\n        } catch (IOException ioe) {\n           // I/O error\n            throw new BuildException(ioe);\n        }\n        finally\n        { \n          if(configurationStream!=null){\n            try{configurationStream.close();}catch(Exception e){}}\n        }\n    }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"f35ba86e9cc568fdc800d780c620749584b1d5bc","date":1051838861,"type":4,"author":"Kelvin Tan","isMerge":false,"pathNew":"/dev/null","pathOld":"sandbox/projects/appex/src/java/org/krysalis/centipede/ant/task/XmlPropertyTask#execute().mjava","sourceNew":null,"sourceOld":"    /**\n     * Run the task.\n     * @exception org.apache.tools.ant.BuildException The exception raised during task execution.\n     */\n    public void execute()\n        throws org.apache.tools.ant.BuildException\n    {   \n        BufferedInputStream configurationStream = null;\n      \n        try\n        {\n            configurationStream     =\n                new BufferedInputStream(new FileInputStream(src));\n                \n            DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\n            \n            factory.setValidating(false);\n            factory.setNamespaceAware(false);\n    \n            DocumentBuilder builder = factory.newDocumentBuilder();\n            document = builder.parse( configurationStream );\n\n            Element topElement = document.getDocumentElement();\n            NodeList topChildren = topElement.getChildNodes();\n            int numChildren = topChildren.getLength();\n\n            log(\"Using prefix: \\\"\"+prefix+\"\\\"\", Project.MSG_VERBOSE);\n                         \n            String prefixToUse = \"\";\n            \n            if(!(prefix.equals(\"\")))\n            {\n              prefixToUse = prefix;\n            } \n\n            log(\"Prefix to use 1: \\\"\"+prefixToUse+\"\\\"\", Project.MSG_VERBOSE);\n            \n            if((!(prefix.equals(\"\")))&&keepRoot)\n            {\n              prefixToUse += \".\";            \n            }\n            \n            log(\"Prefix to use 2: \\\"\"+prefixToUse+\"\\\"\", Project.MSG_VERBOSE);\n            \n            if(keepRoot)\n            {\n              prefixToUse += (topElement.getNodeName());\n            } \n\n            log(\"Prefix to use 3: \\\"\"+prefixToUse+\"\\\"\", Project.MSG_VERBOSE);\n                        \n            for(int i=0; i<numChildren; i++)\n            {\n              addNodeRecursively(topChildren.item(i),prefixToUse, 0);            \n            }\n            \n        } catch (SAXException sxe) {\n           // Error generated during parsing\n           Exception  x = sxe;\n           if (sxe.getException() != null)\n               x = sxe.getException();\n           throw new BuildException(x);\n    \n        } catch (ParserConfigurationException pce) {\n           // Parser with specified options can't be built\n            throw new BuildException(pce);\n        } catch (IOException ioe) {\n           // I/O error\n            throw new BuildException(ioe);\n        }\n        finally\n        { \n          if(configurationStream!=null){\n            try{configurationStream.close();}catch(Exception e){}}\n        }\n    }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"f35ba86e9cc568fdc800d780c620749584b1d5bc":["e3074d05d861bc1436ee03619fdee547f9c51d22"],"e3074d05d861bc1436ee03619fdee547f9c51d22":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["f35ba86e9cc568fdc800d780c620749584b1d5bc"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["e3074d05d861bc1436ee03619fdee547f9c51d22"],"f35ba86e9cc568fdc800d780c620749584b1d5bc":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"e3074d05d861bc1436ee03619fdee547f9c51d22":["f35ba86e9cc568fdc800d780c620749584b1d5bc"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}