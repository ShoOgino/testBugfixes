{"path":"solr/core/src/java/org/apache/solr/util/SolrCLI.AuthTool#updateIncludeFileEnableAuth(File,String,String,String).mjava","commits":[{"id":"f5eb842cfee458c37a15154f49502a6a00fc662f","date":1494313961,"type":0,"author":"Ishan Chattopadhyaya","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/util/SolrCLI.AuthTool#updateIncludeFileEnableAuth(File,String,String,String).mjava","pathOld":"/dev/null","sourceNew":"    private void updateIncludeFileEnableAuth(File includeFile, String basicAuthConfFile, String username, String password) throws IOException {\n      List<String> includeFileLines = FileUtils.readLines(includeFile, StandardCharsets.UTF_8);\n      for (int i=0; i<includeFileLines.size(); i++) {\n        String line = includeFileLines.get(i);\n        if (authenticationVariables.contains(line.trim().split(\"=\")[0].trim())) { // Non-Windows\n          includeFileLines.set(i, \"# \" + line);\n        }\n        if (line.trim().split(\"=\")[0].trim().startsWith(\"set \")\n            && authenticationVariables.contains(line.trim().split(\"=\")[0].trim().substring(4))) { // Windows\n          includeFileLines.set(i, \"REM \" + line);\n        }\n      }\n      includeFileLines.add(\"\"); // blank line\n      if (SystemUtils.IS_OS_WINDOWS) {\n        includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n        includeFileLines.add(\"set SOLR_AUTH_TYPE=basic\");\n        includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n      } else {\n        includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n        includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"basic\\\"\");\n        includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n      }\n      FileUtils.writeLines(includeFile, StandardCharsets.UTF_8.name(), includeFileLines);\n\n      System.out.println(\"Written out credentials file: \" + basicAuthConfFile + \", updated Solr include file: \" + includeFile.getAbsolutePath() + \".\");\n    }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"1396efc84e04da571f41a8f47919f874385db0a8","date":1494866186,"type":5,"author":"Ishan Chattopadhyaya","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/util/SolrCLI.AuthTool#updateIncludeFileEnableAuth(File,String).mjava","pathOld":"solr/core/src/java/org/apache/solr/util/SolrCLI.AuthTool#updateIncludeFileEnableAuth(File,String,String,String).mjava","sourceNew":"    private void updateIncludeFileEnableAuth(File includeFile, String basicAuthConfFile) throws IOException {\n      List<String> includeFileLines = FileUtils.readLines(includeFile, StandardCharsets.UTF_8);\n      for (int i=0; i<includeFileLines.size(); i++) {\n        String line = includeFileLines.get(i);\n        if (authenticationVariables.contains(line.trim().split(\"=\")[0].trim())) { // Non-Windows\n          includeFileLines.set(i, \"# \" + line);\n        }\n        if (line.trim().split(\"=\")[0].trim().startsWith(\"set \")\n            && authenticationVariables.contains(line.trim().split(\"=\")[0].trim().substring(4))) { // Windows\n          includeFileLines.set(i, \"REM \" + line);\n        }\n      }\n      includeFileLines.add(\"\"); // blank line\n      if (SystemUtils.IS_OS_WINDOWS) {\n        includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n        includeFileLines.add(\"set SOLR_AUTH_TYPE=basic\");\n        includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n      } else {\n        includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n        includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"basic\\\"\");\n        includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n      }\n      FileUtils.writeLines(includeFile, StandardCharsets.UTF_8.name(), includeFileLines);\n\n      System.out.println(\"Written out credentials file: \" + basicAuthConfFile + \", updated Solr include file: \" + includeFile.getAbsolutePath() + \".\");\n    }\n\n","sourceOld":"    private void updateIncludeFileEnableAuth(File includeFile, String basicAuthConfFile, String username, String password) throws IOException {\n      List<String> includeFileLines = FileUtils.readLines(includeFile, StandardCharsets.UTF_8);\n      for (int i=0; i<includeFileLines.size(); i++) {\n        String line = includeFileLines.get(i);\n        if (authenticationVariables.contains(line.trim().split(\"=\")[0].trim())) { // Non-Windows\n          includeFileLines.set(i, \"# \" + line);\n        }\n        if (line.trim().split(\"=\")[0].trim().startsWith(\"set \")\n            && authenticationVariables.contains(line.trim().split(\"=\")[0].trim().substring(4))) { // Windows\n          includeFileLines.set(i, \"REM \" + line);\n        }\n      }\n      includeFileLines.add(\"\"); // blank line\n      if (SystemUtils.IS_OS_WINDOWS) {\n        includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n        includeFileLines.add(\"set SOLR_AUTH_TYPE=basic\");\n        includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n      } else {\n        includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n        includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"basic\\\"\");\n        includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n      }\n      FileUtils.writeLines(includeFile, StandardCharsets.UTF_8.name(), includeFileLines);\n\n      System.out.println(\"Written out credentials file: \" + basicAuthConfFile + \", updated Solr include file: \" + includeFile.getAbsolutePath() + \".\");\n    }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"c5536d1fc2015d46bbeb8163f6f8b99483c7cc1f","date":1495081498,"type":5,"author":"Cao Manh Dat","isMerge":true,"pathNew":"solr/core/src/java/org/apache/solr/util/SolrCLI.AuthTool#updateIncludeFileEnableAuth(File,String).mjava","pathOld":"solr/core/src/java/org/apache/solr/util/SolrCLI.AuthTool#updateIncludeFileEnableAuth(File,String,String,String).mjava","sourceNew":"    private void updateIncludeFileEnableAuth(File includeFile, String basicAuthConfFile) throws IOException {\n      List<String> includeFileLines = FileUtils.readLines(includeFile, StandardCharsets.UTF_8);\n      for (int i=0; i<includeFileLines.size(); i++) {\n        String line = includeFileLines.get(i);\n        if (authenticationVariables.contains(line.trim().split(\"=\")[0].trim())) { // Non-Windows\n          includeFileLines.set(i, \"# \" + line);\n        }\n        if (line.trim().split(\"=\")[0].trim().startsWith(\"set \")\n            && authenticationVariables.contains(line.trim().split(\"=\")[0].trim().substring(4))) { // Windows\n          includeFileLines.set(i, \"REM \" + line);\n        }\n      }\n      includeFileLines.add(\"\"); // blank line\n      if (SystemUtils.IS_OS_WINDOWS) {\n        includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n        includeFileLines.add(\"set SOLR_AUTH_TYPE=basic\");\n        includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n      } else {\n        includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n        includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"basic\\\"\");\n        includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n      }\n      FileUtils.writeLines(includeFile, StandardCharsets.UTF_8.name(), includeFileLines);\n\n      System.out.println(\"Written out credentials file: \" + basicAuthConfFile + \", updated Solr include file: \" + includeFile.getAbsolutePath() + \".\");\n    }\n\n","sourceOld":"    private void updateIncludeFileEnableAuth(File includeFile, String basicAuthConfFile, String username, String password) throws IOException {\n      List<String> includeFileLines = FileUtils.readLines(includeFile, StandardCharsets.UTF_8);\n      for (int i=0; i<includeFileLines.size(); i++) {\n        String line = includeFileLines.get(i);\n        if (authenticationVariables.contains(line.trim().split(\"=\")[0].trim())) { // Non-Windows\n          includeFileLines.set(i, \"# \" + line);\n        }\n        if (line.trim().split(\"=\")[0].trim().startsWith(\"set \")\n            && authenticationVariables.contains(line.trim().split(\"=\")[0].trim().substring(4))) { // Windows\n          includeFileLines.set(i, \"REM \" + line);\n        }\n      }\n      includeFileLines.add(\"\"); // blank line\n      if (SystemUtils.IS_OS_WINDOWS) {\n        includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n        includeFileLines.add(\"set SOLR_AUTH_TYPE=basic\");\n        includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n      } else {\n        includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n        includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"basic\\\"\");\n        includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n      }\n      FileUtils.writeLines(includeFile, StandardCharsets.UTF_8.name(), includeFileLines);\n\n      System.out.println(\"Written out credentials file: \" + basicAuthConfFile + \", updated Solr include file: \" + includeFile.getAbsolutePath() + \".\");\n    }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"f5eb842cfee458c37a15154f49502a6a00fc662f":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"1396efc84e04da571f41a8f47919f874385db0a8":["f5eb842cfee458c37a15154f49502a6a00fc662f"],"c5536d1fc2015d46bbeb8163f6f8b99483c7cc1f":["f5eb842cfee458c37a15154f49502a6a00fc662f","1396efc84e04da571f41a8f47919f874385db0a8"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["c5536d1fc2015d46bbeb8163f6f8b99483c7cc1f"]},"commit2Childs":{"f5eb842cfee458c37a15154f49502a6a00fc662f":["1396efc84e04da571f41a8f47919f874385db0a8","c5536d1fc2015d46bbeb8163f6f8b99483c7cc1f"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["f5eb842cfee458c37a15154f49502a6a00fc662f"],"1396efc84e04da571f41a8f47919f874385db0a8":["c5536d1fc2015d46bbeb8163f6f8b99483c7cc1f"],"c5536d1fc2015d46bbeb8163f6f8b99483c7cc1f":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}