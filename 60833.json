{"path":"lucene/replicator/src/test/org/apache/lucene/replicator/nrt/SimpleTransLog#flushBuffer().mjava","commits":[{"id":"0d49a158012a8ff48f328a4558e4bfcffbaed16f","date":1453677440,"type":0,"author":"Mike McCandless","isMerge":false,"pathNew":"lucene/replicator/src/test/org/apache/lucene/replicator/nrt/SimpleTransLog#flushBuffer().mjava","pathOld":"/dev/null","sourceNew":"  /** Writes buffer to the file and returns the start position. */\n  private synchronized long flushBuffer() throws IOException {\n    long pos = channel.position();\n    int len = (int) buffer.getFilePointer();\n    byte[] bytes = new byte[len];\n    buffer.writeTo(bytes, 0);\n    buffer.reset();\n\n    intBuffer[0] = (byte) (len >> 24);\n    intBuffer[1] = (byte) (len >> 16);\n    intBuffer[2] = (byte) (len >> 8);\n    intBuffer[3] = (byte) len;\n    intByteBuffer.limit(4);\n    intByteBuffer.position(0);\n\n    writeBytesToChannel(intByteBuffer);\n    writeBytesToChannel(ByteBuffer.wrap(bytes));\n\n    return pos;\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"68496c2200e559fb7802f7575427b7a482659afb","date":1455207618,"type":0,"author":"Mike McCandless","isMerge":true,"pathNew":"lucene/replicator/src/test/org/apache/lucene/replicator/nrt/SimpleTransLog#flushBuffer().mjava","pathOld":"/dev/null","sourceNew":"  /** Writes buffer to the file and returns the start position. */\n  private synchronized long flushBuffer() throws IOException {\n    long pos = channel.position();\n    int len = (int) buffer.getFilePointer();\n    byte[] bytes = new byte[len];\n    buffer.writeTo(bytes, 0);\n    buffer.reset();\n\n    intBuffer[0] = (byte) (len >> 24);\n    intBuffer[1] = (byte) (len >> 16);\n    intBuffer[2] = (byte) (len >> 8);\n    intBuffer[3] = (byte) len;\n    intByteBuffer.limit(4);\n    intByteBuffer.position(0);\n\n    writeBytesToChannel(intByteBuffer);\n    writeBytesToChannel(ByteBuffer.wrap(bytes));\n\n    return pos;\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"409da428f28953cf35fddd5c9ff5c7e4f5439863","date":1547556145,"type":3,"author":"Dawid Weiss","isMerge":false,"pathNew":"lucene/replicator/src/test/org/apache/lucene/replicator/nrt/SimpleTransLog#flushBuffer().mjava","pathOld":"lucene/replicator/src/test/org/apache/lucene/replicator/nrt/SimpleTransLog#flushBuffer().mjava","sourceNew":"  /** Writes buffer to the file and returns the start position. */\n  private synchronized long flushBuffer() throws IOException {\n    long pos = channel.position();\n    int len = Math.toIntExact(buffer.size());\n    byte[] bytes = buffer.toArrayCopy();\n    buffer.reset();\n\n    intBuffer[0] = (byte) (len >> 24);\n    intBuffer[1] = (byte) (len >> 16);\n    intBuffer[2] = (byte) (len >> 8);\n    intBuffer[3] = (byte) len;\n    intByteBuffer.limit(4);\n    intByteBuffer.position(0);\n\n    writeBytesToChannel(intByteBuffer);\n    writeBytesToChannel(ByteBuffer.wrap(bytes));\n\n    return pos;\n  }\n\n","sourceOld":"  /** Writes buffer to the file and returns the start position. */\n  private synchronized long flushBuffer() throws IOException {\n    long pos = channel.position();\n    int len = (int) buffer.getFilePointer();\n    byte[] bytes = new byte[len];\n    buffer.writeTo(bytes, 0);\n    buffer.reset();\n\n    intBuffer[0] = (byte) (len >> 24);\n    intBuffer[1] = (byte) (len >> 16);\n    intBuffer[2] = (byte) (len >> 8);\n    intBuffer[3] = (byte) len;\n    intByteBuffer.limit(4);\n    intByteBuffer.position(0);\n\n    writeBytesToChannel(intByteBuffer);\n    writeBytesToChannel(ByteBuffer.wrap(bytes));\n\n    return pos;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"409da428f28953cf35fddd5c9ff5c7e4f5439863":["68496c2200e559fb7802f7575427b7a482659afb"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"68496c2200e559fb7802f7575427b7a482659afb":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","0d49a158012a8ff48f328a4558e4bfcffbaed16f"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["409da428f28953cf35fddd5c9ff5c7e4f5439863"],"0d49a158012a8ff48f328a4558e4bfcffbaed16f":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"]},"commit2Childs":{"409da428f28953cf35fddd5c9ff5c7e4f5439863":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["68496c2200e559fb7802f7575427b7a482659afb","0d49a158012a8ff48f328a4558e4bfcffbaed16f"],"68496c2200e559fb7802f7575427b7a482659afb":["409da428f28953cf35fddd5c9ff5c7e4f5439863"],"0d49a158012a8ff48f328a4558e4bfcffbaed16f":["68496c2200e559fb7802f7575427b7a482659afb"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}