{"path":"solr/solrj/src/java/org/apache/solr/client/solrj/io/eval/KnnRegressionEvaluator.KnnRegressionTuple#scale(double[]).mjava","commits":[{"id":"f7656aa7218845fc29808b9dfe775b9558ca4611","date":1533776721,"type":0,"author":"Joel Bernstein","isMerge":false,"pathNew":"solr/solrj/src/java/org/apache/solr/client/solrj/io/eval/KnnRegressionEvaluator.KnnRegressionTuple#scale(double[]).mjava","pathOld":"/dev/null","sourceNew":"    public double[] scale(double[] predictors) {\n      double[][] data = observations.getData();\n      //We need to scale the columns of the data matrix with along with the predictors\n      Array2DRowRealMatrix matrix = new Array2DRowRealMatrix(data);\n      Array2DRowRealMatrix transposed = (Array2DRowRealMatrix) matrix.transpose();\n      double[][] featureRows = transposed.getDataRef();\n\n      double[] scaledPredictors = new double[predictors.length];\n\n      for(int i=0; i<featureRows.length; i++) {\n        double[] featureRow = featureRows[i];\n        double[] combinedFeatureRow = new double[featureRow.length+1];\n        System.arraycopy(featureRow, 0, combinedFeatureRow, 0, featureRow.length);\n        combinedFeatureRow[featureRow.length] = predictors[i];  // Add the last feature from the predictor\n        double[] scaledFeatures = MinMaxScaleEvaluator.scale(combinedFeatureRow, 0, 1);\n        scaledPredictors[i] = scaledFeatures[featureRow.length];\n        System.arraycopy(scaledFeatures, 0, featureRow, 0, featureRow.length);\n      }\n\n      Array2DRowRealMatrix scaledFeatureMatrix = new Array2DRowRealMatrix(featureRows);\n\n\n      Array2DRowRealMatrix scaledObservationsMatrix= (Array2DRowRealMatrix)scaledFeatureMatrix.transpose();\n      this.scaledObservations = new Matrix(scaledObservationsMatrix.getDataRef());\n      return scaledPredictors;\n    }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["f7656aa7218845fc29808b9dfe775b9558ca4611"],"f7656aa7218845fc29808b9dfe775b9558ca4611":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["f7656aa7218845fc29808b9dfe775b9558ca4611"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[],"f7656aa7218845fc29808b9dfe775b9558ca4611":["cd5edd1f2b162a5cfa08efd17851a07373a96817"]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}