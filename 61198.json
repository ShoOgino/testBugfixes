{"path":"src/java/org/apache/solr/core/Config#locateInstanceDir().mjava","commits":[{"id":"abbfb3ad1f90df8ebf4751c8e72b2756ace50699","date":1190497478,"type":0,"author":"Ryan McKinley","isMerge":false,"pathNew":"src/java/org/apache/solr/core/Config#locateInstanceDir().mjava","pathOld":"/dev/null","sourceNew":"  public static String locateInstanceDir() {\n    String home = null;\n    // Try JNDI\n    try {\n      Context c = new InitialContext();\n      home = (String)c.lookup(\"java:comp/env/solr/home\");\n      log.info(\"Using JNDI solr.home: \"+home );\n    } catch (NoInitialContextException e) {\n      log.info(\"JNDI not configured for Solr (NoInitialContextEx)\");\n    } catch (NamingException e) {\n      log.info(\"No /solr/home in JNDI\");\n    } catch( RuntimeException ex ) {\n      log.warning(\"Odd RuntimeException while testing for JNDI: \" + ex.getMessage());\n    } \n    \n    // Now try system property\n    if( home == null ) {\n      String prop = project + \".solr.home\";\n      home = normalizeDir(System.getProperty(prop));\n      if( home != null ) {\n        log.info(\"using system property solr.home: \" + home );\n      }\n    }\n    \n    // if all else fails, try \n    if( home == null ) {\n      home = project + '/';\n      log.info(\"Solr home defaulted to '\" + home + \"' (could not find system property or JNDI)\");\n    }\n    return normalizeDir( home );\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"fcf52a7da226d8d3756cc8bf9f3ae1f39952b014","date":1195912306,"type":5,"author":"Ryan McKinley","isMerge":false,"pathNew":"src/java/org/apache/solr/core/SolrResourceLoader#locateInstanceDir().mjava","pathOld":"src/java/org/apache/solr/core/Config#locateInstanceDir().mjava","sourceNew":"  public static String locateInstanceDir() {\n    String home = null;\n    // Try JNDI\n    try {\n      Context c = new InitialContext();\n      home = (String)c.lookup(\"java:comp/env/solr/home\");\n      log.info(\"Using JNDI solr.home: \"+home );\n    } catch (NoInitialContextException e) {\n      log.info(\"JNDI not configured for Solr (NoInitialContextEx)\");\n    } catch (NamingException e) {\n      log.info(\"No /solr/home in JNDI\");\n    } catch( RuntimeException ex ) {\n      log.warning(\"Odd RuntimeException while testing for JNDI: \" + ex.getMessage());\n    } \n    \n    // Now try system property\n    if( home == null ) {\n      String prop = project + \".solr.home\";\n      home = normalizeDir(System.getProperty(prop));\n      if( home != null ) {\n        log.info(\"using system property solr.home: \" + home );\n      }\n    }\n    \n    // if all else fails, try \n    if( home == null ) {\n      home = project + '/';\n      log.info(\"Solr home defaulted to '\" + home + \"' (could not find system property or JNDI)\");\n    }\n    return normalizeDir( home );\n  }\n\n","sourceOld":"  public static String locateInstanceDir() {\n    String home = null;\n    // Try JNDI\n    try {\n      Context c = new InitialContext();\n      home = (String)c.lookup(\"java:comp/env/solr/home\");\n      log.info(\"Using JNDI solr.home: \"+home );\n    } catch (NoInitialContextException e) {\n      log.info(\"JNDI not configured for Solr (NoInitialContextEx)\");\n    } catch (NamingException e) {\n      log.info(\"No /solr/home in JNDI\");\n    } catch( RuntimeException ex ) {\n      log.warning(\"Odd RuntimeException while testing for JNDI: \" + ex.getMessage());\n    } \n    \n    // Now try system property\n    if( home == null ) {\n      String prop = project + \".solr.home\";\n      home = normalizeDir(System.getProperty(prop));\n      if( home != null ) {\n        log.info(\"using system property solr.home: \" + home );\n      }\n    }\n    \n    // if all else fails, try \n    if( home == null ) {\n      home = project + '/';\n      log.info(\"Solr home defaulted to '\" + home + \"' (could not find system property or JNDI)\");\n    }\n    return normalizeDir( home );\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b":[],"fcf52a7da226d8d3756cc8bf9f3ae1f39952b014":["abbfb3ad1f90df8ebf4751c8e72b2756ace50699"],"abbfb3ad1f90df8ebf4751c8e72b2756ace50699":["3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b":["abbfb3ad1f90df8ebf4751c8e72b2756ace50699"],"fcf52a7da226d8d3756cc8bf9f3ae1f39952b014":[],"abbfb3ad1f90df8ebf4751c8e72b2756ace50699":["fcf52a7da226d8d3756cc8bf9f3ae1f39952b014"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["fcf52a7da226d8d3756cc8bf9f3ae1f39952b014","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b"],"pathCommit":null}