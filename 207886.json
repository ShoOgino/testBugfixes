{"path":"solr/core/src/test/org/apache/solr/handler/TestStressThreadBackup#validateBackup(File).mjava","commits":[{"id":"19f02bb04467ed179738a398a7da80bbbe161c16","date":1573660732,"type":0,"author":"Chris Hostetter","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/handler/TestStressThreadBackup#validateBackup(File).mjava","pathOld":"/dev/null","sourceNew":"  /** \n   * Validates a backup dir exists, passes check index, and contains a number of \"real\" documents\n   * that match it's name\n   * \n   * @see #getNumRealDocsFromBackupName\n   */\n  private void validateBackup(final File backup) throws IOException {\n    log.info(\"Checking Validity of {}\", backup);\n    assertTrue(backup.toString() + \": isDir?\", backup.isDirectory());\n    final Matcher m = ENDS_WITH_INT_DIGITS.matcher(backup.getName());\n    assertTrue(\"Backup dir name does not end with int digits: \" + backup.toString(), m.find());\n    final int numRealDocsExpected = Integer.parseInt(m.group());\n    \n    try (Directory dir = FSDirectory.open(backup.toPath())) {\n      TestUtil.checkIndex(dir, true, true, null);\n      try (DirectoryReader r = DirectoryReader.open(dir)) {\n        assertEquals(\"num real docs in \" + backup.toString(),\n                     numRealDocsExpected, r.docFreq(new Term(\"type_s\",\"real\")));\n      }\n    }\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"19f02bb04467ed179738a398a7da80bbbe161c16":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["19f02bb04467ed179738a398a7da80bbbe161c16"]},"commit2Childs":{"19f02bb04467ed179738a398a7da80bbbe161c16":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["19f02bb04467ed179738a398a7da80bbbe161c16"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}