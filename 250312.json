{"path":"solr/core/src/java/org/apache/solr/update/processor/DistributedUpdateProcessor#doRemove(SolrInputDocument,SolrInputField,Object).mjava","commits":[{"id":"3aa8a7a6dfbdba53bcf332c8a2154c3426a932d7","date":1397774798,"type":0,"author":"Erick Erickson","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/update/processor/DistributedUpdateProcessor#doRemove(SolrInputDocument,SolrInputField,Object).mjava","pathOld":"/dev/null","sourceNew":"  private void doRemove(SolrInputDocument oldDoc, SolrInputField sif, Object fieldVal) {\n    final String name = sif.getName();\n    SolrInputField existingField = oldDoc.get(name);\n    if (existingField != null) {\n      final Collection<Object> original = existingField.getValues();\n      if (fieldVal instanceof Collection) {\n        original.removeAll((Collection) fieldVal);\n      } else {\n        original.remove(fieldVal);\n      }\n\n      oldDoc.setField(name, original);\n\n    }\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"1166b183ba6d2f30d8660b254c6a8255505a44c3","date":1413452503,"type":5,"author":"Noble Paul","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/update/processor/DistributedUpdateProcessor#doRemove(SolrInputDocument,SolrInputField,Object,IndexSchema).mjava","pathOld":"solr/core/src/java/org/apache/solr/update/processor/DistributedUpdateProcessor#doRemove(SolrInputDocument,SolrInputField,Object).mjava","sourceNew":"  private boolean doRemove(SolrInputDocument oldDoc, SolrInputField sif, Object fieldVal, IndexSchema schema) {\n    final String name = sif.getName();\n    SolrInputField existingField = oldDoc.get(name);\n    if(existingField == null) return false;\n    SchemaField sf = schema.getField(name);\n    int oldSize = existingField.getValueCount();\n\n    if (sf != null) {\n      final Collection<Object> original = existingField.getValues();\n      if (fieldVal instanceof Collection) {\n        for (Object object : (Collection)fieldVal){\n          original.remove(sf.getType().toNativeType(object));\n        }\n      } else {\n        original.remove(sf.getType().toNativeType(fieldVal));\n      }\n\n      oldDoc.setField(name, original);\n\n    }\n    \n    return oldSize > existingField.getValueCount();\n  }\n\n","sourceOld":"  private void doRemove(SolrInputDocument oldDoc, SolrInputField sif, Object fieldVal) {\n    final String name = sif.getName();\n    SolrInputField existingField = oldDoc.get(name);\n    if (existingField != null) {\n      final Collection<Object> original = existingField.getValues();\n      if (fieldVal instanceof Collection) {\n        original.removeAll((Collection) fieldVal);\n      } else {\n        original.remove(fieldVal);\n      }\n\n      oldDoc.setField(name, original);\n\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"c93b0dbaa6abe99bc8d1b476bcacc27b324b2b84","date":1413458798,"type":5,"author":"Robert Muir","isMerge":true,"pathNew":"solr/core/src/java/org/apache/solr/update/processor/DistributedUpdateProcessor#doRemove(SolrInputDocument,SolrInputField,Object,IndexSchema).mjava","pathOld":"solr/core/src/java/org/apache/solr/update/processor/DistributedUpdateProcessor#doRemove(SolrInputDocument,SolrInputField,Object).mjava","sourceNew":"  private boolean doRemove(SolrInputDocument oldDoc, SolrInputField sif, Object fieldVal, IndexSchema schema) {\n    final String name = sif.getName();\n    SolrInputField existingField = oldDoc.get(name);\n    if(existingField == null) return false;\n    SchemaField sf = schema.getField(name);\n    int oldSize = existingField.getValueCount();\n\n    if (sf != null) {\n      final Collection<Object> original = existingField.getValues();\n      if (fieldVal instanceof Collection) {\n        for (Object object : (Collection)fieldVal){\n          original.remove(sf.getType().toNativeType(object));\n        }\n      } else {\n        original.remove(sf.getType().toNativeType(fieldVal));\n      }\n\n      oldDoc.setField(name, original);\n\n    }\n    \n    return oldSize > existingField.getValueCount();\n  }\n\n","sourceOld":"  private void doRemove(SolrInputDocument oldDoc, SolrInputField sif, Object fieldVal) {\n    final String name = sif.getName();\n    SolrInputField existingField = oldDoc.get(name);\n    if (existingField != null) {\n      final Collection<Object> original = existingField.getValues();\n      if (fieldVal instanceof Collection) {\n        original.removeAll((Collection) fieldVal);\n      } else {\n        original.remove(fieldVal);\n      }\n\n      oldDoc.setField(name, original);\n\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"c93b0dbaa6abe99bc8d1b476bcacc27b324b2b84":["3aa8a7a6dfbdba53bcf332c8a2154c3426a932d7","1166b183ba6d2f30d8660b254c6a8255505a44c3"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"1166b183ba6d2f30d8660b254c6a8255505a44c3":["3aa8a7a6dfbdba53bcf332c8a2154c3426a932d7"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["1166b183ba6d2f30d8660b254c6a8255505a44c3"],"3aa8a7a6dfbdba53bcf332c8a2154c3426a932d7":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"]},"commit2Childs":{"c93b0dbaa6abe99bc8d1b476bcacc27b324b2b84":[],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["3aa8a7a6dfbdba53bcf332c8a2154c3426a932d7"],"1166b183ba6d2f30d8660b254c6a8255505a44c3":["c93b0dbaa6abe99bc8d1b476bcacc27b324b2b84","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"3aa8a7a6dfbdba53bcf332c8a2154c3426a932d7":["c93b0dbaa6abe99bc8d1b476bcacc27b324b2b84","1166b183ba6d2f30d8660b254c6a8255505a44c3"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["c93b0dbaa6abe99bc8d1b476bcacc27b324b2b84","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}