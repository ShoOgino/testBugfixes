{"path":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","commits":[{"id":"415bbbe7da8065dd3c477bdc3c703c6425622998","date":1485393793,"type":0,"author":"Ishan Chattopadhyaya","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","pathOld":"/dev/null","sourceNew":"  @Test\n  @ShardsFixed(num = 3)\n  @SuppressWarnings(\"unchecked\")\n  public void test() throws Exception {\n    waitForRecoveriesToFinish(true);\n    mapReplicasToClients();\n    \n    // sanity check no one broke the assumptions we make about our schema\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_int\",\n        \"type\",\"int\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_float\",\n        \"type\",\"float\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"_version_\",\n        \"type\",\"long\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n\n    // Do the tests now:\n    testDBQUsingUpdatedFieldFromDroppedUpdate();\n    outOfOrderDBQsTest();\n    docValuesUpdateTest();\n    ensureRtgWorksWithPartialUpdatesTest();\n    delayedReorderingFetchesMissingUpdateFromLeaderTest();\n    outOfOrderUpdatesIndividualReplicaTest();\n    outOfOrderDeleteUpdatesIndividualReplicaTest();\n    reorderedDBQsWithInPlaceUpdatesShouldNotThrowReplicaInLIRTest();\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"598b5d23aa7c9732bf473c21a9cd309c44599394","date":1485530378,"type":0,"author":"Kevin Risden","isMerge":true,"pathNew":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","pathOld":"/dev/null","sourceNew":"  @Test\n  @ShardsFixed(num = 3)\n  @SuppressWarnings(\"unchecked\")\n  public void test() throws Exception {\n    waitForRecoveriesToFinish(true);\n    mapReplicasToClients();\n    \n    // sanity check no one broke the assumptions we make about our schema\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_int\",\n        \"type\",\"int\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_float\",\n        \"type\",\"float\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"_version_\",\n        \"type\",\"long\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n\n    // Do the tests now:\n    testDBQUsingUpdatedFieldFromDroppedUpdate();\n    outOfOrderDBQsTest();\n    docValuesUpdateTest();\n    ensureRtgWorksWithPartialUpdatesTest();\n    delayedReorderingFetchesMissingUpdateFromLeaderTest();\n    outOfOrderUpdatesIndividualReplicaTest();\n    outOfOrderDeleteUpdatesIndividualReplicaTest();\n    reorderedDBQsWithInPlaceUpdatesShouldNotThrowReplicaInLIRTest();\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"9133745ed58338ebe8daabe49076605b61fc6b86","date":1487468548,"type":3,"author":"Ishan Chattopadhyaya","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","pathOld":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","sourceNew":"  @Test\n  @ShardsFixed(num = 3)\n  @SuppressWarnings(\"unchecked\")\n  public void test() throws Exception {\n    waitForRecoveriesToFinish(true);\n    mapReplicasToClients();\n    \n    // sanity check no one broke the assumptions we make about our schema\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_int\",\n        \"type\",\"int\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_float\",\n        \"type\",\"float\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"_version_\",\n        \"type\",\"long\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n\n    // Do the tests now:\n    reorderedDBQIndividualReplicaTest();\n    testDBQUsingUpdatedFieldFromDroppedUpdate();\n    outOfOrderDBQsTest();\n    docValuesUpdateTest();\n    ensureRtgWorksWithPartialUpdatesTest();\n    delayedReorderingFetchesMissingUpdateFromLeaderTest();\n    outOfOrderUpdatesIndividualReplicaTest();\n    outOfOrderDeleteUpdatesIndividualReplicaTest();\n    reorderedDBQsWithInPlaceUpdatesShouldNotThrowReplicaInLIRTest();\n  }\n\n","sourceOld":"  @Test\n  @ShardsFixed(num = 3)\n  @SuppressWarnings(\"unchecked\")\n  public void test() throws Exception {\n    waitForRecoveriesToFinish(true);\n    mapReplicasToClients();\n    \n    // sanity check no one broke the assumptions we make about our schema\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_int\",\n        \"type\",\"int\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_float\",\n        \"type\",\"float\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"_version_\",\n        \"type\",\"long\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n\n    // Do the tests now:\n    testDBQUsingUpdatedFieldFromDroppedUpdate();\n    outOfOrderDBQsTest();\n    docValuesUpdateTest();\n    ensureRtgWorksWithPartialUpdatesTest();\n    delayedReorderingFetchesMissingUpdateFromLeaderTest();\n    outOfOrderUpdatesIndividualReplicaTest();\n    outOfOrderDeleteUpdatesIndividualReplicaTest();\n    reorderedDBQsWithInPlaceUpdatesShouldNotThrowReplicaInLIRTest();\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"2e11e54ce6015434b2aaadb49ca5071dbe7be50c","date":1489404389,"type":3,"author":"Ishan Chattopadhyaya","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","pathOld":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","sourceNew":"  @Test\n  @ShardsFixed(num = 3)\n  @SuppressWarnings(\"unchecked\")\n  public void test() throws Exception {\n    waitForRecoveriesToFinish(true);\n    mapReplicasToClients();\n    \n    // sanity check no one broke the assumptions we make about our schema\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_int\",\n        \"type\",\"int\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_float\",\n        \"type\",\"float\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"_version_\",\n        \"type\",\"long\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n\n    // Do the tests now:\n    docValuesUpdateTest();\n    ensureRtgWorksWithPartialUpdatesTest();\n    outOfOrderUpdatesIndividualReplicaTest();\n    delayedReorderingFetchesMissingUpdateFromLeaderTest();\n    updatingDVsInAVeryOldSegment();\n\n    // TODO Should we combine all/some of these into a single test, so as to cut down on execution time?\n    reorderedDBQIndividualReplicaTest();\n    reorderedDeletesTest();\n    reorderedDBQsSimpleTest();\n    reorderedDBQsResurrectionTest();\n    reorderedDBQsUsingUpdatedValueFromADroppedUpdate();\n  }\n\n","sourceOld":"  @Test\n  @ShardsFixed(num = 3)\n  @SuppressWarnings(\"unchecked\")\n  public void test() throws Exception {\n    waitForRecoveriesToFinish(true);\n    mapReplicasToClients();\n    \n    // sanity check no one broke the assumptions we make about our schema\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_int\",\n        \"type\",\"int\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_float\",\n        \"type\",\"float\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"_version_\",\n        \"type\",\"long\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n\n    // Do the tests now:\n    reorderedDBQIndividualReplicaTest();\n    testDBQUsingUpdatedFieldFromDroppedUpdate();\n    outOfOrderDBQsTest();\n    docValuesUpdateTest();\n    ensureRtgWorksWithPartialUpdatesTest();\n    delayedReorderingFetchesMissingUpdateFromLeaderTest();\n    outOfOrderUpdatesIndividualReplicaTest();\n    outOfOrderDeleteUpdatesIndividualReplicaTest();\n    reorderedDBQsWithInPlaceUpdatesShouldNotThrowReplicaInLIRTest();\n  }\n\n","bugFix":null,"bugIntro":["bb222a3f9d9421d5c95afce73013fbd8de07ea1f"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"b4eb66898bd78f7d0afde22c21607ac3650e6bd0","date":1517936429,"type":3,"author":"Mikhail Khludnev","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","pathOld":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","sourceNew":"  @Test\n  @ShardsFixed(num = 3)\n  @SuppressWarnings(\"unchecked\")\n  public void test() throws Exception {\n    waitForRecoveriesToFinish(true);\n    mapReplicasToClients();\n    \n    // sanity check no one broke the assumptions we make about our schema\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_int\",\n        \"type\",\"int\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_float\",\n        \"type\",\"float\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"_version_\",\n        \"type\",\"long\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n\n    // Do the tests now:\n    docValuesUpdateTest();\n    ensureRtgWorksWithPartialUpdatesTest();\n    outOfOrderUpdatesIndividualReplicaTest();\n    delayedReorderingFetchesMissingUpdateFromLeaderTest();\n    updatingDVsInAVeryOldSegment();\n    updateExistingThenNonExistentDoc();\n\n    // TODO Should we combine all/some of these into a single test, so as to cut down on execution time?\n    reorderedDBQIndividualReplicaTest();\n    reorderedDeletesTest();\n    reorderedDBQsSimpleTest();\n    reorderedDBQsResurrectionTest();\n    reorderedDBQsUsingUpdatedValueFromADroppedUpdate();\n  }\n\n","sourceOld":"  @Test\n  @ShardsFixed(num = 3)\n  @SuppressWarnings(\"unchecked\")\n  public void test() throws Exception {\n    waitForRecoveriesToFinish(true);\n    mapReplicasToClients();\n    \n    // sanity check no one broke the assumptions we make about our schema\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_int\",\n        \"type\",\"int\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_float\",\n        \"type\",\"float\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"_version_\",\n        \"type\",\"long\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n\n    // Do the tests now:\n    docValuesUpdateTest();\n    ensureRtgWorksWithPartialUpdatesTest();\n    outOfOrderUpdatesIndividualReplicaTest();\n    delayedReorderingFetchesMissingUpdateFromLeaderTest();\n    updatingDVsInAVeryOldSegment();\n\n    // TODO Should we combine all/some of these into a single test, so as to cut down on execution time?\n    reorderedDBQIndividualReplicaTest();\n    reorderedDeletesTest();\n    reorderedDBQsSimpleTest();\n    reorderedDBQsResurrectionTest();\n    reorderedDBQsUsingUpdatedValueFromADroppedUpdate();\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"43ad790248d7f7daee5d9cced548c546f37c7218","date":1527269998,"type":3,"author":"Erick Erickson","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","pathOld":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","sourceNew":"  @Test\n  @ShardsFixed(num = 3)\n  @SuppressWarnings(\"unchecked\")\n  @BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 21-May-2018\n  public void test() throws Exception {\n    waitForRecoveriesToFinish(true);\n    mapReplicasToClients();\n    \n    // sanity check no one broke the assumptions we make about our schema\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_int\",\n        \"type\",\"int\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_float\",\n        \"type\",\"float\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"_version_\",\n        \"type\",\"long\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n\n    // Do the tests now:\n    docValuesUpdateTest();\n    ensureRtgWorksWithPartialUpdatesTest();\n    outOfOrderUpdatesIndividualReplicaTest();\n    delayedReorderingFetchesMissingUpdateFromLeaderTest();\n    updatingDVsInAVeryOldSegment();\n    updateExistingThenNonExistentDoc();\n\n    // TODO Should we combine all/some of these into a single test, so as to cut down on execution time?\n    reorderedDBQIndividualReplicaTest();\n    reorderedDeletesTest();\n    reorderedDBQsSimpleTest();\n    reorderedDBQsResurrectionTest();\n    reorderedDBQsUsingUpdatedValueFromADroppedUpdate();\n  }\n\n","sourceOld":"  @Test\n  @ShardsFixed(num = 3)\n  @SuppressWarnings(\"unchecked\")\n  public void test() throws Exception {\n    waitForRecoveriesToFinish(true);\n    mapReplicasToClients();\n    \n    // sanity check no one broke the assumptions we make about our schema\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_int\",\n        \"type\",\"int\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_float\",\n        \"type\",\"float\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"_version_\",\n        \"type\",\"long\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n\n    // Do the tests now:\n    docValuesUpdateTest();\n    ensureRtgWorksWithPartialUpdatesTest();\n    outOfOrderUpdatesIndividualReplicaTest();\n    delayedReorderingFetchesMissingUpdateFromLeaderTest();\n    updatingDVsInAVeryOldSegment();\n    updateExistingThenNonExistentDoc();\n\n    // TODO Should we combine all/some of these into a single test, so as to cut down on execution time?\n    reorderedDBQIndividualReplicaTest();\n    reorderedDeletesTest();\n    reorderedDBQsSimpleTest();\n    reorderedDBQsResurrectionTest();\n    reorderedDBQsUsingUpdatedValueFromADroppedUpdate();\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"11d6f92dfa9251d9da6d80ec5963a9cbecc90180","date":1530559969,"type":3,"author":"Erick Erickson","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","pathOld":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","sourceNew":"  @Test\n  @ShardsFixed(num = 3)\n  @SuppressWarnings(\"unchecked\")\n  //28-June-2018 @BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 21-May-2018\n  public void test() throws Exception {\n    waitForRecoveriesToFinish(true);\n    mapReplicasToClients();\n    \n    // sanity check no one broke the assumptions we make about our schema\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_int\",\n        \"type\",\"int\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_float\",\n        \"type\",\"float\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"_version_\",\n        \"type\",\"long\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n\n    // Do the tests now:\n    docValuesUpdateTest();\n    ensureRtgWorksWithPartialUpdatesTest();\n    outOfOrderUpdatesIndividualReplicaTest();\n    delayedReorderingFetchesMissingUpdateFromLeaderTest();\n    updatingDVsInAVeryOldSegment();\n    updateExistingThenNonExistentDoc();\n\n    // TODO Should we combine all/some of these into a single test, so as to cut down on execution time?\n    reorderedDBQIndividualReplicaTest();\n    reorderedDeletesTest();\n    reorderedDBQsSimpleTest();\n    reorderedDBQsResurrectionTest();\n    reorderedDBQsUsingUpdatedValueFromADroppedUpdate();\n  }\n\n","sourceOld":"  @Test\n  @ShardsFixed(num = 3)\n  @SuppressWarnings(\"unchecked\")\n  @BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 21-May-2018\n  public void test() throws Exception {\n    waitForRecoveriesToFinish(true);\n    mapReplicasToClients();\n    \n    // sanity check no one broke the assumptions we make about our schema\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_int\",\n        \"type\",\"int\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_float\",\n        \"type\",\"float\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"_version_\",\n        \"type\",\"long\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n\n    // Do the tests now:\n    docValuesUpdateTest();\n    ensureRtgWorksWithPartialUpdatesTest();\n    outOfOrderUpdatesIndividualReplicaTest();\n    delayedReorderingFetchesMissingUpdateFromLeaderTest();\n    updatingDVsInAVeryOldSegment();\n    updateExistingThenNonExistentDoc();\n\n    // TODO Should we combine all/some of these into a single test, so as to cut down on execution time?\n    reorderedDBQIndividualReplicaTest();\n    reorderedDeletesTest();\n    reorderedDBQsSimpleTest();\n    reorderedDBQsResurrectionTest();\n    reorderedDBQsUsingUpdatedValueFromADroppedUpdate();\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"7eeaaea0106c7d6a2de50acfc8d357121ef8bd26","date":1531589977,"type":3,"author":"Michael Braun","isMerge":true,"pathNew":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","pathOld":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","sourceNew":"  @Test\n  @ShardsFixed(num = 3)\n  @SuppressWarnings(\"unchecked\")\n  //28-June-2018 @BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 21-May-2018\n  public void test() throws Exception {\n    waitForRecoveriesToFinish(true);\n    mapReplicasToClients();\n    \n    // sanity check no one broke the assumptions we make about our schema\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_int\",\n        \"type\",\"int\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_float\",\n        \"type\",\"float\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"_version_\",\n        \"type\",\"long\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n\n    // Do the tests now:\n    docValuesUpdateTest();\n    ensureRtgWorksWithPartialUpdatesTest();\n    outOfOrderUpdatesIndividualReplicaTest();\n    delayedReorderingFetchesMissingUpdateFromLeaderTest();\n    updatingDVsInAVeryOldSegment();\n    updateExistingThenNonExistentDoc();\n\n    // TODO Should we combine all/some of these into a single test, so as to cut down on execution time?\n    reorderedDBQIndividualReplicaTest();\n    reorderedDeletesTest();\n    reorderedDBQsSimpleTest();\n    reorderedDBQsResurrectionTest();\n    reorderedDBQsUsingUpdatedValueFromADroppedUpdate();\n  }\n\n","sourceOld":"  @Test\n  @ShardsFixed(num = 3)\n  @SuppressWarnings(\"unchecked\")\n  @BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 21-May-2018\n  public void test() throws Exception {\n    waitForRecoveriesToFinish(true);\n    mapReplicasToClients();\n    \n    // sanity check no one broke the assumptions we make about our schema\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_int\",\n        \"type\",\"int\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_float\",\n        \"type\",\"float\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"_version_\",\n        \"type\",\"long\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n\n    // Do the tests now:\n    docValuesUpdateTest();\n    ensureRtgWorksWithPartialUpdatesTest();\n    outOfOrderUpdatesIndividualReplicaTest();\n    delayedReorderingFetchesMissingUpdateFromLeaderTest();\n    updatingDVsInAVeryOldSegment();\n    updateExistingThenNonExistentDoc();\n\n    // TODO Should we combine all/some of these into a single test, so as to cut down on execution time?\n    reorderedDBQIndividualReplicaTest();\n    reorderedDeletesTest();\n    reorderedDBQsSimpleTest();\n    reorderedDBQsResurrectionTest();\n    reorderedDBQsUsingUpdatedValueFromADroppedUpdate();\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"0efc9f2cae117418f13ba9035f5e1d516ea7a2b5","date":1531905561,"type":3,"author":"Alessandro Benedetti","isMerge":true,"pathNew":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","pathOld":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","sourceNew":"  @Test\n  @ShardsFixed(num = 3)\n  @SuppressWarnings(\"unchecked\")\n  //28-June-2018 @BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 21-May-2018\n  public void test() throws Exception {\n    waitForRecoveriesToFinish(true);\n    mapReplicasToClients();\n    \n    // sanity check no one broke the assumptions we make about our schema\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_int\",\n        \"type\",\"int\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_float\",\n        \"type\",\"float\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"_version_\",\n        \"type\",\"long\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n\n    // Do the tests now:\n    docValuesUpdateTest();\n    ensureRtgWorksWithPartialUpdatesTest();\n    outOfOrderUpdatesIndividualReplicaTest();\n    delayedReorderingFetchesMissingUpdateFromLeaderTest();\n    updatingDVsInAVeryOldSegment();\n    updateExistingThenNonExistentDoc();\n\n    // TODO Should we combine all/some of these into a single test, so as to cut down on execution time?\n    reorderedDBQIndividualReplicaTest();\n    reorderedDeletesTest();\n    reorderedDBQsSimpleTest();\n    reorderedDBQsResurrectionTest();\n    reorderedDBQsUsingUpdatedValueFromADroppedUpdate();\n  }\n\n","sourceOld":"  @Test\n  @ShardsFixed(num = 3)\n  @SuppressWarnings(\"unchecked\")\n  @BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 21-May-2018\n  public void test() throws Exception {\n    waitForRecoveriesToFinish(true);\n    mapReplicasToClients();\n    \n    // sanity check no one broke the assumptions we make about our schema\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_int\",\n        \"type\",\"int\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_float\",\n        \"type\",\"float\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"_version_\",\n        \"type\",\"long\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n\n    // Do the tests now:\n    docValuesUpdateTest();\n    ensureRtgWorksWithPartialUpdatesTest();\n    outOfOrderUpdatesIndividualReplicaTest();\n    delayedReorderingFetchesMissingUpdateFromLeaderTest();\n    updatingDVsInAVeryOldSegment();\n    updateExistingThenNonExistentDoc();\n\n    // TODO Should we combine all/some of these into a single test, so as to cut down on execution time?\n    reorderedDBQIndividualReplicaTest();\n    reorderedDeletesTest();\n    reorderedDBQsSimpleTest();\n    reorderedDBQsResurrectionTest();\n    reorderedDBQsUsingUpdatedValueFromADroppedUpdate();\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"05a3c9b5f1dfb39879069eb1dac3ca104d3e4108","date":1533256859,"type":3,"author":"Erick","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","pathOld":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","sourceNew":"  @Test\n  @ShardsFixed(num = 3)\n  @SuppressWarnings(\"unchecked\")\n  //28-June-2018 @BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 21-May-2018\n  @LuceneTestCase.BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 2-Aug-2018\n  public void test() throws Exception {\n    waitForRecoveriesToFinish(true);\n    mapReplicasToClients();\n    \n    // sanity check no one broke the assumptions we make about our schema\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_int\",\n        \"type\",\"int\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_float\",\n        \"type\",\"float\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"_version_\",\n        \"type\",\"long\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n\n    // Do the tests now:\n    docValuesUpdateTest();\n    ensureRtgWorksWithPartialUpdatesTest();\n    outOfOrderUpdatesIndividualReplicaTest();\n    delayedReorderingFetchesMissingUpdateFromLeaderTest();\n    updatingDVsInAVeryOldSegment();\n    updateExistingThenNonExistentDoc();\n\n    // TODO Should we combine all/some of these into a single test, so as to cut down on execution time?\n    reorderedDBQIndividualReplicaTest();\n    reorderedDeletesTest();\n    reorderedDBQsSimpleTest();\n    reorderedDBQsResurrectionTest();\n    reorderedDBQsUsingUpdatedValueFromADroppedUpdate();\n  }\n\n","sourceOld":"  @Test\n  @ShardsFixed(num = 3)\n  @SuppressWarnings(\"unchecked\")\n  //28-June-2018 @BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 21-May-2018\n  public void test() throws Exception {\n    waitForRecoveriesToFinish(true);\n    mapReplicasToClients();\n    \n    // sanity check no one broke the assumptions we make about our schema\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_int\",\n        \"type\",\"int\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_float\",\n        \"type\",\"float\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"_version_\",\n        \"type\",\"long\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n\n    // Do the tests now:\n    docValuesUpdateTest();\n    ensureRtgWorksWithPartialUpdatesTest();\n    outOfOrderUpdatesIndividualReplicaTest();\n    delayedReorderingFetchesMissingUpdateFromLeaderTest();\n    updatingDVsInAVeryOldSegment();\n    updateExistingThenNonExistentDoc();\n\n    // TODO Should we combine all/some of these into a single test, so as to cut down on execution time?\n    reorderedDBQIndividualReplicaTest();\n    reorderedDeletesTest();\n    reorderedDBQsSimpleTest();\n    reorderedDBQsResurrectionTest();\n    reorderedDBQsUsingUpdatedValueFromADroppedUpdate();\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"f7ba5de6e78dd9b7518e92274a8a4cf8823a9c4a","date":1536291831,"type":3,"author":"Erick Erickson","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","pathOld":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","sourceNew":"  @Test\n  @ShardsFixed(num = 3)\n  @SuppressWarnings(\"unchecked\")\n  //28-June-2018 @BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 21-May-2018\n  // commented 4-Sep-2018 @LuceneTestCase.BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 2-Aug-2018\n  public void test() throws Exception {\n    waitForRecoveriesToFinish(true);\n    mapReplicasToClients();\n    \n    // sanity check no one broke the assumptions we make about our schema\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_int\",\n        \"type\",\"int\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_float\",\n        \"type\",\"float\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"_version_\",\n        \"type\",\"long\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n\n    // Do the tests now:\n    docValuesUpdateTest();\n    ensureRtgWorksWithPartialUpdatesTest();\n    outOfOrderUpdatesIndividualReplicaTest();\n    delayedReorderingFetchesMissingUpdateFromLeaderTest();\n    updatingDVsInAVeryOldSegment();\n    updateExistingThenNonExistentDoc();\n\n    // TODO Should we combine all/some of these into a single test, so as to cut down on execution time?\n    reorderedDBQIndividualReplicaTest();\n    reorderedDeletesTest();\n    reorderedDBQsSimpleTest();\n    reorderedDBQsResurrectionTest();\n    reorderedDBQsUsingUpdatedValueFromADroppedUpdate();\n  }\n\n","sourceOld":"  @Test\n  @ShardsFixed(num = 3)\n  @SuppressWarnings(\"unchecked\")\n  //28-June-2018 @BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 21-May-2018\n  @LuceneTestCase.BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 2-Aug-2018\n  public void test() throws Exception {\n    waitForRecoveriesToFinish(true);\n    mapReplicasToClients();\n    \n    // sanity check no one broke the assumptions we make about our schema\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_int\",\n        \"type\",\"int\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_float\",\n        \"type\",\"float\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"_version_\",\n        \"type\",\"long\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n\n    // Do the tests now:\n    docValuesUpdateTest();\n    ensureRtgWorksWithPartialUpdatesTest();\n    outOfOrderUpdatesIndividualReplicaTest();\n    delayedReorderingFetchesMissingUpdateFromLeaderTest();\n    updatingDVsInAVeryOldSegment();\n    updateExistingThenNonExistentDoc();\n\n    // TODO Should we combine all/some of these into a single test, so as to cut down on execution time?\n    reorderedDBQIndividualReplicaTest();\n    reorderedDeletesTest();\n    reorderedDBQsSimpleTest();\n    reorderedDBQsResurrectionTest();\n    reorderedDBQsUsingUpdatedValueFromADroppedUpdate();\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"bb222a3f9d9421d5c95afce73013fbd8de07ea1f","date":1543514331,"type":3,"author":"markrmiller","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","pathOld":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","sourceNew":"  @Test\n  @ShardsFixed(num = 3)\n  @SuppressWarnings(\"unchecked\")\n  //28-June-2018 @BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 21-May-2018\n  // commented 4-Sep-2018 @LuceneTestCase.BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 2-Aug-2018\n  public void test() throws Exception {\n    waitForRecoveriesToFinish(true);\n\n    resetDelays();\n    \n    mapReplicasToClients();\n    \n    clearIndex();\n    commit();\n    \n    // sanity check no one broke the assumptions we make about our schema\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_int\",\n        \"type\",\"int\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_float\",\n        \"type\",\"float\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"_version_\",\n        \"type\",\"long\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n\n    // Do the tests now:\n    \n    // AwaitsFix this test fails easily\n    // delayedReorderingFetchesMissingUpdateFromLeaderTest();\n    \n    resetDelays();\n    docValuesUpdateTest();\n    resetDelays();\n    ensureRtgWorksWithPartialUpdatesTest();\n    resetDelays();\n    outOfOrderUpdatesIndividualReplicaTest();\n    resetDelays();\n    updatingDVsInAVeryOldSegment();\n    resetDelays();\n    updateExistingThenNonExistentDoc();\n    resetDelays();\n    // TODO Should we combine all/some of these into a single test, so as to cut down on execution time?\n    reorderedDBQIndividualReplicaTest();\n    resetDelays();\n    reorderedDeletesTest();\n    resetDelays();\n    reorderedDBQsSimpleTest();\n    resetDelays();\n    reorderedDBQsResurrectionTest();\n    resetDelays();\n    \n    // AwaitsFix this test fails easily\n    // reorderedDBQsUsingUpdatedValueFromADroppedUpdate();\n  }\n\n","sourceOld":"  @Test\n  @ShardsFixed(num = 3)\n  @SuppressWarnings(\"unchecked\")\n  //28-June-2018 @BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 21-May-2018\n  // commented 4-Sep-2018 @LuceneTestCase.BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 2-Aug-2018\n  public void test() throws Exception {\n    waitForRecoveriesToFinish(true);\n    mapReplicasToClients();\n    \n    // sanity check no one broke the assumptions we make about our schema\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_int\",\n        \"type\",\"int\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_float\",\n        \"type\",\"float\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"_version_\",\n        \"type\",\"long\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n\n    // Do the tests now:\n    docValuesUpdateTest();\n    ensureRtgWorksWithPartialUpdatesTest();\n    outOfOrderUpdatesIndividualReplicaTest();\n    delayedReorderingFetchesMissingUpdateFromLeaderTest();\n    updatingDVsInAVeryOldSegment();\n    updateExistingThenNonExistentDoc();\n\n    // TODO Should we combine all/some of these into a single test, so as to cut down on execution time?\n    reorderedDBQIndividualReplicaTest();\n    reorderedDeletesTest();\n    reorderedDBQsSimpleTest();\n    reorderedDBQsResurrectionTest();\n    reorderedDBQsUsingUpdatedValueFromADroppedUpdate();\n  }\n\n","bugFix":["2e11e54ce6015434b2aaadb49ca5071dbe7be50c"],"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"8d35c84fdef07284c122012ca4000d3b7285a66e","date":1545962630,"type":3,"author":"Erick Erickson","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","pathOld":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","sourceNew":"  @Test\n  @ShardsFixed(num = 3)\n  @SuppressWarnings(\"unchecked\")\n  //28-June-2018 @BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 21-May-2018\n  // commented 4-Sep-2018 @LuceneTestCase.BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 2-Aug-2018\n  @BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // annotated on: 24-Dec-2018\n  public void test() throws Exception {\n    waitForRecoveriesToFinish(true);\n\n    resetDelays();\n    \n    mapReplicasToClients();\n    \n    clearIndex();\n    commit();\n    \n    // sanity check no one broke the assumptions we make about our schema\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_int\",\n        \"type\",\"int\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_float\",\n        \"type\",\"float\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"_version_\",\n        \"type\",\"long\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n\n    // Do the tests now:\n    \n    // AwaitsFix this test fails easily\n    // delayedReorderingFetchesMissingUpdateFromLeaderTest();\n    \n    resetDelays();\n    docValuesUpdateTest();\n    resetDelays();\n    ensureRtgWorksWithPartialUpdatesTest();\n    resetDelays();\n    outOfOrderUpdatesIndividualReplicaTest();\n    resetDelays();\n    updatingDVsInAVeryOldSegment();\n    resetDelays();\n    updateExistingThenNonExistentDoc();\n    resetDelays();\n    // TODO Should we combine all/some of these into a single test, so as to cut down on execution time?\n    reorderedDBQIndividualReplicaTest();\n    resetDelays();\n    reorderedDeletesTest();\n    resetDelays();\n    reorderedDBQsSimpleTest();\n    resetDelays();\n    reorderedDBQsResurrectionTest();\n    resetDelays();\n    \n    // AwaitsFix this test fails easily\n    // reorderedDBQsUsingUpdatedValueFromADroppedUpdate();\n  }\n\n","sourceOld":"  @Test\n  @ShardsFixed(num = 3)\n  @SuppressWarnings(\"unchecked\")\n  //28-June-2018 @BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 21-May-2018\n  // commented 4-Sep-2018 @LuceneTestCase.BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 2-Aug-2018\n  public void test() throws Exception {\n    waitForRecoveriesToFinish(true);\n\n    resetDelays();\n    \n    mapReplicasToClients();\n    \n    clearIndex();\n    commit();\n    \n    // sanity check no one broke the assumptions we make about our schema\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_int\",\n        \"type\",\"int\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_float\",\n        \"type\",\"float\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"_version_\",\n        \"type\",\"long\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n\n    // Do the tests now:\n    \n    // AwaitsFix this test fails easily\n    // delayedReorderingFetchesMissingUpdateFromLeaderTest();\n    \n    resetDelays();\n    docValuesUpdateTest();\n    resetDelays();\n    ensureRtgWorksWithPartialUpdatesTest();\n    resetDelays();\n    outOfOrderUpdatesIndividualReplicaTest();\n    resetDelays();\n    updatingDVsInAVeryOldSegment();\n    resetDelays();\n    updateExistingThenNonExistentDoc();\n    resetDelays();\n    // TODO Should we combine all/some of these into a single test, so as to cut down on execution time?\n    reorderedDBQIndividualReplicaTest();\n    resetDelays();\n    reorderedDeletesTest();\n    resetDelays();\n    reorderedDBQsSimpleTest();\n    resetDelays();\n    reorderedDBQsResurrectionTest();\n    resetDelays();\n    \n    // AwaitsFix this test fails easily\n    // reorderedDBQsUsingUpdatedValueFromADroppedUpdate();\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"b5c929d2716fa79d443b93a82adb1da5b578ebd8","date":1550428858,"type":3,"author":"Erick Erickson","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","pathOld":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","sourceNew":"  @Test\n  @ShardsFixed(num = 3)\n  @SuppressWarnings(\"unchecked\")\n  //28-June-2018 @BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 21-May-2018\n  // commented 4-Sep-2018 @LuceneTestCase.BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 2-Aug-2018\n  // commented out on: 17-Feb-2019   @BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // annotated on: 24-Dec-2018\n  public void test() throws Exception {\n    waitForRecoveriesToFinish(true);\n\n    resetDelays();\n    \n    mapReplicasToClients();\n    \n    clearIndex();\n    commit();\n    \n    // sanity check no one broke the assumptions we make about our schema\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_int\",\n        \"type\",\"int\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_float\",\n        \"type\",\"float\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"_version_\",\n        \"type\",\"long\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n\n    // Do the tests now:\n    \n    // AwaitsFix this test fails easily\n    // delayedReorderingFetchesMissingUpdateFromLeaderTest();\n    \n    resetDelays();\n    docValuesUpdateTest();\n    resetDelays();\n    ensureRtgWorksWithPartialUpdatesTest();\n    resetDelays();\n    outOfOrderUpdatesIndividualReplicaTest();\n    resetDelays();\n    updatingDVsInAVeryOldSegment();\n    resetDelays();\n    updateExistingThenNonExistentDoc();\n    resetDelays();\n    // TODO Should we combine all/some of these into a single test, so as to cut down on execution time?\n    reorderedDBQIndividualReplicaTest();\n    resetDelays();\n    reorderedDeletesTest();\n    resetDelays();\n    reorderedDBQsSimpleTest();\n    resetDelays();\n    reorderedDBQsResurrectionTest();\n    resetDelays();\n    \n    // AwaitsFix this test fails easily\n    // reorderedDBQsUsingUpdatedValueFromADroppedUpdate();\n  }\n\n","sourceOld":"  @Test\n  @ShardsFixed(num = 3)\n  @SuppressWarnings(\"unchecked\")\n  //28-June-2018 @BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 21-May-2018\n  // commented 4-Sep-2018 @LuceneTestCase.BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 2-Aug-2018\n  @BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // annotated on: 24-Dec-2018\n  public void test() throws Exception {\n    waitForRecoveriesToFinish(true);\n\n    resetDelays();\n    \n    mapReplicasToClients();\n    \n    clearIndex();\n    commit();\n    \n    // sanity check no one broke the assumptions we make about our schema\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_int\",\n        \"type\",\"int\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_float\",\n        \"type\",\"float\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"_version_\",\n        \"type\",\"long\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n\n    // Do the tests now:\n    \n    // AwaitsFix this test fails easily\n    // delayedReorderingFetchesMissingUpdateFromLeaderTest();\n    \n    resetDelays();\n    docValuesUpdateTest();\n    resetDelays();\n    ensureRtgWorksWithPartialUpdatesTest();\n    resetDelays();\n    outOfOrderUpdatesIndividualReplicaTest();\n    resetDelays();\n    updatingDVsInAVeryOldSegment();\n    resetDelays();\n    updateExistingThenNonExistentDoc();\n    resetDelays();\n    // TODO Should we combine all/some of these into a single test, so as to cut down on execution time?\n    reorderedDBQIndividualReplicaTest();\n    resetDelays();\n    reorderedDeletesTest();\n    resetDelays();\n    reorderedDBQsSimpleTest();\n    resetDelays();\n    reorderedDBQsResurrectionTest();\n    resetDelays();\n    \n    // AwaitsFix this test fails easily\n    // reorderedDBQsUsingUpdatedValueFromADroppedUpdate();\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"48924d191f1724fe63df8b6401965b79a2787c71","date":1561368051,"type":3,"author":"Munendra S N","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","pathOld":"solr/core/src/test/org/apache/solr/update/TestInPlaceUpdatesDistrib#test().mjava","sourceNew":"  @Test\n  @ShardsFixed(num = 3)\n  @SuppressWarnings(\"unchecked\")\n  //28-June-2018 @BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 21-May-2018\n  // commented 4-Sep-2018 @LuceneTestCase.BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 2-Aug-2018\n  // commented out on: 17-Feb-2019   @BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // annotated on: 24-Dec-2018\n  public void test() throws Exception {\n    waitForRecoveriesToFinish(true);\n\n    resetDelays();\n    \n    mapReplicasToClients();\n    \n    clearIndex();\n    commit();\n    \n    // sanity check no one broke the assumptions we make about our schema\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_int\",\n        \"type\",\"int\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_float\",\n        \"type\",\"float\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"_version_\",\n        \"type\",\"long\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n\n    // Do the tests now:\n    \n    // AwaitsFix this test fails easily\n    // delayedReorderingFetchesMissingUpdateFromLeaderTest();\n    \n    resetDelays();\n    docValuesUpdateTest();\n    resetDelays();\n    ensureRtgWorksWithPartialUpdatesTest();\n    resetDelays();\n    outOfOrderUpdatesIndividualReplicaTest();\n    resetDelays();\n    updatingDVsInAVeryOldSegment();\n    resetDelays();\n    updateExistingThenNonExistentDoc();\n    resetDelays();\n    // TODO Should we combine all/some of these into a single test, so as to cut down on execution time?\n    reorderedDBQIndividualReplicaTest();\n    resetDelays();\n    reorderedDeletesTest();\n    resetDelays();\n    reorderedDBQsSimpleTest();\n    resetDelays();\n    reorderedDBQsResurrectionTest();\n    resetDelays();\n    setNullForDVEnabledField();\n    resetDelays();\n    \n    // AwaitsFix this test fails easily\n    // reorderedDBQsUsingUpdatedValueFromADroppedUpdate();\n  }\n\n","sourceOld":"  @Test\n  @ShardsFixed(num = 3)\n  @SuppressWarnings(\"unchecked\")\n  //28-June-2018 @BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 21-May-2018\n  // commented 4-Sep-2018 @LuceneTestCase.BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // 2-Aug-2018\n  // commented out on: 17-Feb-2019   @BadApple(bugUrl=\"https://issues.apache.org/jira/browse/SOLR-12028\") // annotated on: 24-Dec-2018\n  public void test() throws Exception {\n    waitForRecoveriesToFinish(true);\n\n    resetDelays();\n    \n    mapReplicasToClients();\n    \n    clearIndex();\n    commit();\n    \n    // sanity check no one broke the assumptions we make about our schema\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_int\",\n        \"type\",\"int\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"inplace_updatable_float\",\n        \"type\",\"float\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n    checkExpectedSchemaField(map(\"name\", \"_version_\",\n        \"type\",\"long\",\n        \"stored\",Boolean.FALSE,\n        \"indexed\",Boolean.FALSE,\n        \"docValues\",Boolean.TRUE));\n\n    // Do the tests now:\n    \n    // AwaitsFix this test fails easily\n    // delayedReorderingFetchesMissingUpdateFromLeaderTest();\n    \n    resetDelays();\n    docValuesUpdateTest();\n    resetDelays();\n    ensureRtgWorksWithPartialUpdatesTest();\n    resetDelays();\n    outOfOrderUpdatesIndividualReplicaTest();\n    resetDelays();\n    updatingDVsInAVeryOldSegment();\n    resetDelays();\n    updateExistingThenNonExistentDoc();\n    resetDelays();\n    // TODO Should we combine all/some of these into a single test, so as to cut down on execution time?\n    reorderedDBQIndividualReplicaTest();\n    resetDelays();\n    reorderedDeletesTest();\n    resetDelays();\n    reorderedDBQsSimpleTest();\n    resetDelays();\n    reorderedDBQsResurrectionTest();\n    resetDelays();\n    \n    // AwaitsFix this test fails easily\n    // reorderedDBQsUsingUpdatedValueFromADroppedUpdate();\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"415bbbe7da8065dd3c477bdc3c703c6425622998":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"05a3c9b5f1dfb39879069eb1dac3ca104d3e4108":["11d6f92dfa9251d9da6d80ec5963a9cbecc90180"],"598b5d23aa7c9732bf473c21a9cd309c44599394":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","415bbbe7da8065dd3c477bdc3c703c6425622998"],"bb222a3f9d9421d5c95afce73013fbd8de07ea1f":["f7ba5de6e78dd9b7518e92274a8a4cf8823a9c4a"],"2e11e54ce6015434b2aaadb49ca5071dbe7be50c":["9133745ed58338ebe8daabe49076605b61fc6b86"],"9133745ed58338ebe8daabe49076605b61fc6b86":["415bbbe7da8065dd3c477bdc3c703c6425622998"],"b5c929d2716fa79d443b93a82adb1da5b578ebd8":["8d35c84fdef07284c122012ca4000d3b7285a66e"],"43ad790248d7f7daee5d9cced548c546f37c7218":["b4eb66898bd78f7d0afde22c21607ac3650e6bd0"],"8d35c84fdef07284c122012ca4000d3b7285a66e":["bb222a3f9d9421d5c95afce73013fbd8de07ea1f"],"48924d191f1724fe63df8b6401965b79a2787c71":["b5c929d2716fa79d443b93a82adb1da5b578ebd8"],"11d6f92dfa9251d9da6d80ec5963a9cbecc90180":["43ad790248d7f7daee5d9cced548c546f37c7218"],"0efc9f2cae117418f13ba9035f5e1d516ea7a2b5":["43ad790248d7f7daee5d9cced548c546f37c7218","11d6f92dfa9251d9da6d80ec5963a9cbecc90180"],"b4eb66898bd78f7d0afde22c21607ac3650e6bd0":["2e11e54ce6015434b2aaadb49ca5071dbe7be50c"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"f7ba5de6e78dd9b7518e92274a8a4cf8823a9c4a":["05a3c9b5f1dfb39879069eb1dac3ca104d3e4108"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["48924d191f1724fe63df8b6401965b79a2787c71"],"7eeaaea0106c7d6a2de50acfc8d357121ef8bd26":["43ad790248d7f7daee5d9cced548c546f37c7218","11d6f92dfa9251d9da6d80ec5963a9cbecc90180"]},"commit2Childs":{"415bbbe7da8065dd3c477bdc3c703c6425622998":["598b5d23aa7c9732bf473c21a9cd309c44599394","9133745ed58338ebe8daabe49076605b61fc6b86"],"05a3c9b5f1dfb39879069eb1dac3ca104d3e4108":["f7ba5de6e78dd9b7518e92274a8a4cf8823a9c4a"],"598b5d23aa7c9732bf473c21a9cd309c44599394":[],"bb222a3f9d9421d5c95afce73013fbd8de07ea1f":["8d35c84fdef07284c122012ca4000d3b7285a66e"],"2e11e54ce6015434b2aaadb49ca5071dbe7be50c":["b4eb66898bd78f7d0afde22c21607ac3650e6bd0"],"9133745ed58338ebe8daabe49076605b61fc6b86":["2e11e54ce6015434b2aaadb49ca5071dbe7be50c"],"b5c929d2716fa79d443b93a82adb1da5b578ebd8":["48924d191f1724fe63df8b6401965b79a2787c71"],"43ad790248d7f7daee5d9cced548c546f37c7218":["11d6f92dfa9251d9da6d80ec5963a9cbecc90180","0efc9f2cae117418f13ba9035f5e1d516ea7a2b5","7eeaaea0106c7d6a2de50acfc8d357121ef8bd26"],"8d35c84fdef07284c122012ca4000d3b7285a66e":["b5c929d2716fa79d443b93a82adb1da5b578ebd8"],"11d6f92dfa9251d9da6d80ec5963a9cbecc90180":["05a3c9b5f1dfb39879069eb1dac3ca104d3e4108","0efc9f2cae117418f13ba9035f5e1d516ea7a2b5","7eeaaea0106c7d6a2de50acfc8d357121ef8bd26"],"48924d191f1724fe63df8b6401965b79a2787c71":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"0efc9f2cae117418f13ba9035f5e1d516ea7a2b5":[],"b4eb66898bd78f7d0afde22c21607ac3650e6bd0":["43ad790248d7f7daee5d9cced548c546f37c7218"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["415bbbe7da8065dd3c477bdc3c703c6425622998","598b5d23aa7c9732bf473c21a9cd309c44599394"],"f7ba5de6e78dd9b7518e92274a8a4cf8823a9c4a":["bb222a3f9d9421d5c95afce73013fbd8de07ea1f"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[],"7eeaaea0106c7d6a2de50acfc8d357121ef8bd26":[]},"heads":["598b5d23aa7c9732bf473c21a9cd309c44599394","0efc9f2cae117418f13ba9035f5e1d516ea7a2b5","cd5edd1f2b162a5cfa08efd17851a07373a96817","7eeaaea0106c7d6a2de50acfc8d357121ef8bd26"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}