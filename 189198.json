{"path":"solr/core/src/java/org/apache/solr/core/SolrCores#swap(String,String).mjava","commits":[{"id":"9409650933cc688e77e565092a25e58adfc2e18d","date":1366663164,"type":1,"author":"Mark Robert Miller","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/core/SolrCores#swap(String,String).mjava","pathOld":"solr/core/src/java/org/apache/solr/core/CoreMaps#swap(String,String).mjava","sourceNew":"  protected void swap(String n0, String n1) {\n\n    synchronized (modifyLock) {\n      SolrCore c0 = cores.get(n0);\n      SolrCore c1 = cores.get(n1);\n      if (c0 == null)\n        throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n0);\n      if (c1 == null)\n        throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n1);\n      cores.put(n0, c1);\n      cores.put(n1, c0);\n\n      c0.setName(n1);\n      c0.getCoreDescriptor().putProperty(CoreDescriptor.CORE_NAME, n1);\n      c1.setName(n0);\n      c1.getCoreDescriptor().putProperty(CoreDescriptor.CORE_NAME, n0);\n    }\n\n  }\n\n","sourceOld":"  protected void swap(String n0, String n1) {\n\n    synchronized (locker) {\n      SolrCore c0 = cores.get(n0);\n      SolrCore c1 = cores.get(n1);\n      if (c0 == null)\n        throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n0);\n      if (c1 == null)\n        throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n1);\n      cores.put(n0, c1);\n      cores.put(n1, c0);\n\n      c0.setName(n1);\n      c0.getCoreDescriptor().putProperty(CoreDescriptor.CORE_NAME, n1);\n      c1.setName(n0);\n      c1.getCoreDescriptor().putProperty(CoreDescriptor.CORE_NAME, n0);\n    }\n\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"dc6e48afbb50ae0a22fa76e226f04fd585532938","date":1371429211,"type":3,"author":"Erick Erickson","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/core/SolrCores#swap(String,String).mjava","pathOld":"solr/core/src/java/org/apache/solr/core/SolrCores#swap(String,String).mjava","sourceNew":"  protected void swap(String n0, String n1) {\n\n    synchronized (modifyLock) {\n      SolrCore c0 = cores.get(n0);\n      SolrCore c1 = cores.get(n1);\n      if (c0 == null) { // Might be an unloaded transient core\n        c0 = container.getCore(n0);\n        if (c0 == null) {\n          throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n0);\n        }\n      }\n      if (c1 == null) { // Might be an unloaded transient core\n        c1 = container.getCore(n1);\n        if (c1 == null) {\n          throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n1);\n        }\n      }\n      cores.put(n0, c1);\n      cores.put(n1, c0);\n\n      c0.setName(n1);\n      c0.getCoreDescriptor().putProperty(CoreDescriptor.CORE_NAME, n1);\n      c1.setName(n0);\n      c1.getCoreDescriptor().putProperty(CoreDescriptor.CORE_NAME, n0);\n    }\n\n  }\n\n","sourceOld":"  protected void swap(String n0, String n1) {\n\n    synchronized (modifyLock) {\n      SolrCore c0 = cores.get(n0);\n      SolrCore c1 = cores.get(n1);\n      if (c0 == null)\n        throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n0);\n      if (c1 == null)\n        throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n1);\n      cores.put(n0, c1);\n      cores.put(n1, c0);\n\n      c0.setName(n1);\n      c0.getCoreDescriptor().putProperty(CoreDescriptor.CORE_NAME, n1);\n      c1.setName(n0);\n      c1.getCoreDescriptor().putProperty(CoreDescriptor.CORE_NAME, n0);\n    }\n\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"6e764e9a107f93be9fa3c922bc6a197b3eec387e","date":1373560501,"type":3,"author":"Alan Woodward","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/core/SolrCores#swap(String,String).mjava","pathOld":"solr/core/src/java/org/apache/solr/core/SolrCores#swap(String,String).mjava","sourceNew":"  protected void swap(String n0, String n1) {\n\n    synchronized (modifyLock) {\n      SolrCore c0 = cores.get(n0);\n      SolrCore c1 = cores.get(n1);\n      if (c0 == null) { // Might be an unloaded transient core\n        c0 = container.getCore(n0);\n        if (c0 == null) {\n          throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n0);\n        }\n      }\n      if (c1 == null) { // Might be an unloaded transient core\n        c1 = container.getCore(n1);\n        if (c1 == null) {\n          throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n1);\n        }\n      }\n      cores.put(n0, c1);\n      cores.put(n1, c0);\n\n      c0.setName(n1);\n      c1.setName(n0);\n    }\n\n  }\n\n","sourceOld":"  protected void swap(String n0, String n1) {\n\n    synchronized (modifyLock) {\n      SolrCore c0 = cores.get(n0);\n      SolrCore c1 = cores.get(n1);\n      if (c0 == null) { // Might be an unloaded transient core\n        c0 = container.getCore(n0);\n        if (c0 == null) {\n          throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n0);\n        }\n      }\n      if (c1 == null) { // Might be an unloaded transient core\n        c1 = container.getCore(n1);\n        if (c1 == null) {\n          throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n1);\n        }\n      }\n      cores.put(n0, c1);\n      cores.put(n1, c0);\n\n      c0.setName(n1);\n      c0.getCoreDescriptor().putProperty(CoreDescriptor.CORE_NAME, n1);\n      c1.setName(n0);\n      c1.getCoreDescriptor().putProperty(CoreDescriptor.CORE_NAME, n0);\n    }\n\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"37a0f60745e53927c4c876cfe5b5a58170f0646c","date":1373994005,"type":3,"author":"Han Jiang","isMerge":true,"pathNew":"solr/core/src/java/org/apache/solr/core/SolrCores#swap(String,String).mjava","pathOld":"solr/core/src/java/org/apache/solr/core/SolrCores#swap(String,String).mjava","sourceNew":"  protected void swap(String n0, String n1) {\n\n    synchronized (modifyLock) {\n      SolrCore c0 = cores.get(n0);\n      SolrCore c1 = cores.get(n1);\n      if (c0 == null) { // Might be an unloaded transient core\n        c0 = container.getCore(n0);\n        if (c0 == null) {\n          throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n0);\n        }\n      }\n      if (c1 == null) { // Might be an unloaded transient core\n        c1 = container.getCore(n1);\n        if (c1 == null) {\n          throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n1);\n        }\n      }\n      cores.put(n0, c1);\n      cores.put(n1, c0);\n\n      c0.setName(n1);\n      c1.setName(n0);\n    }\n\n  }\n\n","sourceOld":"  protected void swap(String n0, String n1) {\n\n    synchronized (modifyLock) {\n      SolrCore c0 = cores.get(n0);\n      SolrCore c1 = cores.get(n1);\n      if (c0 == null)\n        throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n0);\n      if (c1 == null)\n        throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n1);\n      cores.put(n0, c1);\n      cores.put(n1, c0);\n\n      c0.setName(n1);\n      c0.getCoreDescriptor().putProperty(CoreDescriptor.CORE_NAME, n1);\n      c1.setName(n0);\n      c1.getCoreDescriptor().putProperty(CoreDescriptor.CORE_NAME, n0);\n    }\n\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"a30bfa174128ad6cb3bcf568080886729e347fe9","date":1485967817,"type":3,"author":"Andrzej Bialecki","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/core/SolrCores#swap(String,String).mjava","pathOld":"solr/core/src/java/org/apache/solr/core/SolrCores#swap(String,String).mjava","sourceNew":"  protected void swap(String n0, String n1) {\n\n    synchronized (modifyLock) {\n      SolrCore c0 = cores.get(n0);\n      SolrCore c1 = cores.get(n1);\n      if (c0 == null) { // Might be an unloaded transient core\n        c0 = container.getCore(n0);\n        if (c0 == null) {\n          throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n0);\n        }\n      }\n      if (c1 == null) { // Might be an unloaded transient core\n        c1 = container.getCore(n1);\n        if (c1 == null) {\n          throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n1);\n        }\n      }\n      cores.put(n0, c1);\n      cores.put(n1, c0);\n      container.getMetricManager().swapRegistries(\n          c0.getCoreMetricManager().getRegistryName(),\n          c1.getCoreMetricManager().getRegistryName());\n      c0.setName(n1);\n      c1.setName(n0);\n    }\n\n  }\n\n","sourceOld":"  protected void swap(String n0, String n1) {\n\n    synchronized (modifyLock) {\n      SolrCore c0 = cores.get(n0);\n      SolrCore c1 = cores.get(n1);\n      if (c0 == null) { // Might be an unloaded transient core\n        c0 = container.getCore(n0);\n        if (c0 == null) {\n          throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n0);\n        }\n      }\n      if (c1 == null) { // Might be an unloaded transient core\n        c1 = container.getCore(n1);\n        if (c1 == null) {\n          throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n1);\n        }\n      }\n      cores.put(n0, c1);\n      cores.put(n1, c0);\n\n      c0.setName(n1);\n      c1.setName(n0);\n    }\n\n  }\n\n","bugFix":["a837c064b67fa63a9394136e31218b908cdcf783"],"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"7c3523a0ab04c3002eee3896c75ea5f10f388bcc","date":1485968422,"type":3,"author":"Kevin Risden","isMerge":true,"pathNew":"solr/core/src/java/org/apache/solr/core/SolrCores#swap(String,String).mjava","pathOld":"solr/core/src/java/org/apache/solr/core/SolrCores#swap(String,String).mjava","sourceNew":"  protected void swap(String n0, String n1) {\n\n    synchronized (modifyLock) {\n      SolrCore c0 = cores.get(n0);\n      SolrCore c1 = cores.get(n1);\n      if (c0 == null) { // Might be an unloaded transient core\n        c0 = container.getCore(n0);\n        if (c0 == null) {\n          throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n0);\n        }\n      }\n      if (c1 == null) { // Might be an unloaded transient core\n        c1 = container.getCore(n1);\n        if (c1 == null) {\n          throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n1);\n        }\n      }\n      cores.put(n0, c1);\n      cores.put(n1, c0);\n      container.getMetricManager().swapRegistries(\n          c0.getCoreMetricManager().getRegistryName(),\n          c1.getCoreMetricManager().getRegistryName());\n      c0.setName(n1);\n      c1.setName(n0);\n    }\n\n  }\n\n","sourceOld":"  protected void swap(String n0, String n1) {\n\n    synchronized (modifyLock) {\n      SolrCore c0 = cores.get(n0);\n      SolrCore c1 = cores.get(n1);\n      if (c0 == null) { // Might be an unloaded transient core\n        c0 = container.getCore(n0);\n        if (c0 == null) {\n          throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n0);\n        }\n      }\n      if (c1 == null) { // Might be an unloaded transient core\n        c1 = container.getCore(n1);\n        if (c1 == null) {\n          throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n1);\n        }\n      }\n      cores.put(n0, c1);\n      cores.put(n1, c0);\n\n      c0.setName(n1);\n      c1.setName(n0);\n    }\n\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"729cb470f975115d4c60517b2cb7c42e37a7a2e1","date":1492041760,"type":3,"author":"Erick Erickson","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/core/SolrCores#swap(String,String).mjava","pathOld":"solr/core/src/java/org/apache/solr/core/SolrCores#swap(String,String).mjava","sourceNew":"  protected void swap(String n0, String n1) {\n\n    synchronized (modifyLock) {\n      SolrCore c0 = cores.get(n0);\n      SolrCore c1 = cores.get(n1);\n      if (c0 == null) { // Might be an unloaded transient core\n        c0 = container.getCore(n0);\n        if (c0 == null) {\n          throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n0);\n        }\n      }\n      if (c1 == null) { // Might be an unloaded transient core\n        c1 = container.getCore(n1);\n        if (c1 == null) {\n          throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n1);\n        }\n      }\n      // When we swap the cores, we also need to swap the associated core descriptors. Note, this changes the \n      // name of the coreDescriptor by virtue of the c-tor\n      CoreDescriptor cd1 = c1.getCoreDescriptor(); \n      addCoreDescriptor(new CoreDescriptor(n1, c0.getCoreDescriptor()));\n      addCoreDescriptor(new CoreDescriptor(n0, cd1));\n      cores.put(n0, c1);\n      cores.put(n1, c0);\n      c0.setName(n1);\n      c1.setName(n0);\n      \n      container.getMetricManager().swapRegistries(\n          c0.getCoreMetricManager().getRegistryName(),\n          c1.getCoreMetricManager().getRegistryName());\n    }\n\n  }\n\n","sourceOld":"  protected void swap(String n0, String n1) {\n\n    synchronized (modifyLock) {\n      SolrCore c0 = cores.get(n0);\n      SolrCore c1 = cores.get(n1);\n      if (c0 == null) { // Might be an unloaded transient core\n        c0 = container.getCore(n0);\n        if (c0 == null) {\n          throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n0);\n        }\n      }\n      if (c1 == null) { // Might be an unloaded transient core\n        c1 = container.getCore(n1);\n        if (c1 == null) {\n          throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n1);\n        }\n      }\n      cores.put(n0, c1);\n      cores.put(n1, c0);\n      container.getMetricManager().swapRegistries(\n          c0.getCoreMetricManager().getRegistryName(),\n          c1.getCoreMetricManager().getRegistryName());\n      c0.setName(n1);\n      c1.setName(n0);\n    }\n\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"54ca69905c5d9d1529286f06ab1d12c68f6c13cb","date":1492683554,"type":3,"author":"Andrzej Bialecki","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/core/SolrCores#swap(String,String).mjava","pathOld":"solr/core/src/java/org/apache/solr/core/SolrCores#swap(String,String).mjava","sourceNew":"  protected void swap(String n0, String n1) {\n\n    synchronized (modifyLock) {\n      SolrCore c0 = cores.get(n0);\n      SolrCore c1 = cores.get(n1);\n      if (c0 == null) { // Might be an unloaded transient core\n        c0 = container.getCore(n0);\n        if (c0 == null) {\n          throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n0);\n        }\n      }\n      if (c1 == null) { // Might be an unloaded transient core\n        c1 = container.getCore(n1);\n        if (c1 == null) {\n          throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n1);\n        }\n      }\n      // When we swap the cores, we also need to swap the associated core descriptors. Note, this changes the \n      // name of the coreDescriptor by virtue of the c-tor\n      CoreDescriptor cd1 = c1.getCoreDescriptor(); \n      addCoreDescriptor(new CoreDescriptor(n1, c0.getCoreDescriptor()));\n      addCoreDescriptor(new CoreDescriptor(n0, cd1));\n      cores.put(n0, c1);\n      cores.put(n1, c0);\n      c0.setName(n1);\n      c1.setName(n0);\n      \n      container.getMetricManager().swapRegistries(\n          c0.getCoreMetricManager().getRegistryName(),\n          c1.getCoreMetricManager().getRegistryName());\n    }\n\n  }\n\n","sourceOld":"  protected void swap(String n0, String n1) {\n\n    synchronized (modifyLock) {\n      SolrCore c0 = cores.get(n0);\n      SolrCore c1 = cores.get(n1);\n      if (c0 == null) { // Might be an unloaded transient core\n        c0 = container.getCore(n0);\n        if (c0 == null) {\n          throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n0);\n        }\n      }\n      if (c1 == null) { // Might be an unloaded transient core\n        c1 = container.getCore(n1);\n        if (c1 == null) {\n          throw new SolrException(SolrException.ErrorCode.BAD_REQUEST, \"No such core: \" + n1);\n        }\n      }\n      cores.put(n0, c1);\n      cores.put(n1, c0);\n      container.getMetricManager().swapRegistries(\n          c0.getCoreMetricManager().getRegistryName(),\n          c1.getCoreMetricManager().getRegistryName());\n      c0.setName(n1);\n      c1.setName(n0);\n    }\n\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"54ca69905c5d9d1529286f06ab1d12c68f6c13cb":["a30bfa174128ad6cb3bcf568080886729e347fe9"],"a30bfa174128ad6cb3bcf568080886729e347fe9":["6e764e9a107f93be9fa3c922bc6a197b3eec387e"],"dc6e48afbb50ae0a22fa76e226f04fd585532938":["9409650933cc688e77e565092a25e58adfc2e18d"],"37a0f60745e53927c4c876cfe5b5a58170f0646c":["9409650933cc688e77e565092a25e58adfc2e18d","6e764e9a107f93be9fa3c922bc6a197b3eec387e"],"9409650933cc688e77e565092a25e58adfc2e18d":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"7c3523a0ab04c3002eee3896c75ea5f10f388bcc":["6e764e9a107f93be9fa3c922bc6a197b3eec387e","a30bfa174128ad6cb3bcf568080886729e347fe9"],"6e764e9a107f93be9fa3c922bc6a197b3eec387e":["dc6e48afbb50ae0a22fa76e226f04fd585532938"],"729cb470f975115d4c60517b2cb7c42e37a7a2e1":["a30bfa174128ad6cb3bcf568080886729e347fe9"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["729cb470f975115d4c60517b2cb7c42e37a7a2e1"]},"commit2Childs":{"54ca69905c5d9d1529286f06ab1d12c68f6c13cb":[],"a30bfa174128ad6cb3bcf568080886729e347fe9":["54ca69905c5d9d1529286f06ab1d12c68f6c13cb","7c3523a0ab04c3002eee3896c75ea5f10f388bcc","729cb470f975115d4c60517b2cb7c42e37a7a2e1"],"dc6e48afbb50ae0a22fa76e226f04fd585532938":["6e764e9a107f93be9fa3c922bc6a197b3eec387e"],"37a0f60745e53927c4c876cfe5b5a58170f0646c":[],"9409650933cc688e77e565092a25e58adfc2e18d":["dc6e48afbb50ae0a22fa76e226f04fd585532938","37a0f60745e53927c4c876cfe5b5a58170f0646c"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["9409650933cc688e77e565092a25e58adfc2e18d"],"7c3523a0ab04c3002eee3896c75ea5f10f388bcc":[],"6e764e9a107f93be9fa3c922bc6a197b3eec387e":["a30bfa174128ad6cb3bcf568080886729e347fe9","37a0f60745e53927c4c876cfe5b5a58170f0646c","7c3523a0ab04c3002eee3896c75ea5f10f388bcc"],"729cb470f975115d4c60517b2cb7c42e37a7a2e1":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["54ca69905c5d9d1529286f06ab1d12c68f6c13cb","37a0f60745e53927c4c876cfe5b5a58170f0646c","7c3523a0ab04c3002eee3896c75ea5f10f388bcc","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}