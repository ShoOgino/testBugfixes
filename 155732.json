{"path":"lucene/src/test/org/apache/lucene/search/payloads/TestPayloadNearQuery#test().mjava","commits":[{"id":"9454a6510e2db155fb01faa5c049b06ece95fab9","date":1453508333,"type":1,"author":"Dawid Weiss","isMerge":false,"pathNew":"lucene/src/test/org/apache/lucene/search/payloads/TestPayloadNearQuery#test().mjava","pathOld":"src/test/org/apache/lucene/search/payloads/TestPayloadNearQuery#test().mjava","sourceNew":"  public void test() throws IOException {\n    PayloadNearQuery query;\n    TopDocs hits;\n\n    query = newPhraseQuery(\"field\", \"twenty two\", true);\n    QueryUtils.check(query);\n\t\t\n    // all 10 hits should have score = 3 because adjacent terms have payloads of 2,4\n    // and all the similarity factors are set to 1\n    hits = searcher.search(query, null, 100);\n    assertTrue(\"hits is null and it shouldn't be\", hits != null);\n    assertTrue(\"should be 10 hits\", hits.totalHits == 10);\n    for (int j = 0; j < hits.scoreDocs.length; j++) {\n      ScoreDoc doc = hits.scoreDocs[j];\n      assertTrue(doc.score + \" does not equal: \" + 3, doc.score == 3);\n    }\n    for (int i=1;i<10;i++) {\n      query = newPhraseQuery(\"field\", English.intToEnglish(i)+\" hundred\", true);\n      // all should have score = 3 because adjacent terms have payloads of 2,4\n      // and all the similarity factors are set to 1\n      hits = searcher.search(query, null, 100);\n      assertTrue(\"hits is null and it shouldn't be\", hits != null);\n      assertTrue(\"should be 100 hits\", hits.totalHits == 100);\n      for (int j = 0; j < hits.scoreDocs.length; j++) {\n        ScoreDoc doc = hits.scoreDocs[j];\n        //\t\t\t\tSystem.out.println(\"Doc: \" + doc.toString());\n        //\t\t\t\tSystem.out.println(\"Explain: \" + searcher.explain(query, doc.doc));\n        assertTrue(doc.score + \" does not equal: \" + 3, doc.score == 3);\n      }\n    }\n  }\n\n","sourceOld":"  public void test() throws IOException {\n    PayloadNearQuery query;\n    TopDocs hits;\n\n    query = newPhraseQuery(\"field\", \"twenty two\", true);\n    QueryUtils.check(query);\n\t\t\n    // all 10 hits should have score = 3 because adjacent terms have payloads of 2,4\n    // and all the similarity factors are set to 1\n    hits = searcher.search(query, null, 100);\n    assertTrue(\"hits is null and it shouldn't be\", hits != null);\n    assertTrue(\"should be 10 hits\", hits.totalHits == 10);\n    for (int j = 0; j < hits.scoreDocs.length; j++) {\n      ScoreDoc doc = hits.scoreDocs[j];\n      assertTrue(doc.score + \" does not equal: \" + 3, doc.score == 3);\n    }\n    for (int i=1;i<10;i++) {\n      query = newPhraseQuery(\"field\", English.intToEnglish(i)+\" hundred\", true);\n      // all should have score = 3 because adjacent terms have payloads of 2,4\n      // and all the similarity factors are set to 1\n      hits = searcher.search(query, null, 100);\n      assertTrue(\"hits is null and it shouldn't be\", hits != null);\n      assertTrue(\"should be 100 hits\", hits.totalHits == 100);\n      for (int j = 0; j < hits.scoreDocs.length; j++) {\n        ScoreDoc doc = hits.scoreDocs[j];\n        //\t\t\t\tSystem.out.println(\"Doc: \" + doc.toString());\n        //\t\t\t\tSystem.out.println(\"Explain: \" + searcher.explain(query, doc.doc));\n        assertTrue(doc.score + \" does not equal: \" + 3, doc.score == 3);\n      }\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"63962b8b453f75ca481172689753cdb3ca868d4c","date":1283201927,"type":3,"author":"Grant Ingersoll","isMerge":false,"pathNew":"lucene/src/test/org/apache/lucene/search/payloads/TestPayloadNearQuery#test().mjava","pathOld":"lucene/src/test/org/apache/lucene/search/payloads/TestPayloadNearQuery#test().mjava","sourceNew":"  public void test() throws IOException {\n    PayloadNearQuery query;\n    TopDocs hits;\n\n    query = newPhraseQuery(\"field\", \"twenty two\", true, new AveragePayloadFunction());\n    QueryUtils.check(query);\n\t\t\n    // all 10 hits should have score = 3 because adjacent terms have payloads of 2,4\n    // and all the similarity factors are set to 1\n    hits = searcher.search(query, null, 100);\n    assertTrue(\"hits is null and it shouldn't be\", hits != null);\n    assertTrue(\"should be 10 hits\", hits.totalHits == 10);\n    for (int j = 0; j < hits.scoreDocs.length; j++) {\n      ScoreDoc doc = hits.scoreDocs[j];\n      assertTrue(doc.score + \" does not equal: \" + 3, doc.score == 3);\n    }\n    for (int i=1;i<10;i++) {\n      query = newPhraseQuery(\"field\", English.intToEnglish(i)+\" hundred\", true, new AveragePayloadFunction());\n      // all should have score = 3 because adjacent terms have payloads of 2,4\n      // and all the similarity factors are set to 1\n      hits = searcher.search(query, null, 100);\n      assertTrue(\"hits is null and it shouldn't be\", hits != null);\n      assertTrue(\"should be 100 hits\", hits.totalHits == 100);\n      for (int j = 0; j < hits.scoreDocs.length; j++) {\n        ScoreDoc doc = hits.scoreDocs[j];\n        //\t\t\t\tSystem.out.println(\"Doc: \" + doc.toString());\n        //\t\t\t\tSystem.out.println(\"Explain: \" + searcher.explain(query, doc.doc));\n        assertTrue(doc.score + \" does not equal: \" + 3, doc.score == 3);\n      }\n    }\n  }\n\n","sourceOld":"  public void test() throws IOException {\n    PayloadNearQuery query;\n    TopDocs hits;\n\n    query = newPhraseQuery(\"field\", \"twenty two\", true);\n    QueryUtils.check(query);\n\t\t\n    // all 10 hits should have score = 3 because adjacent terms have payloads of 2,4\n    // and all the similarity factors are set to 1\n    hits = searcher.search(query, null, 100);\n    assertTrue(\"hits is null and it shouldn't be\", hits != null);\n    assertTrue(\"should be 10 hits\", hits.totalHits == 10);\n    for (int j = 0; j < hits.scoreDocs.length; j++) {\n      ScoreDoc doc = hits.scoreDocs[j];\n      assertTrue(doc.score + \" does not equal: \" + 3, doc.score == 3);\n    }\n    for (int i=1;i<10;i++) {\n      query = newPhraseQuery(\"field\", English.intToEnglish(i)+\" hundred\", true);\n      // all should have score = 3 because adjacent terms have payloads of 2,4\n      // and all the similarity factors are set to 1\n      hits = searcher.search(query, null, 100);\n      assertTrue(\"hits is null and it shouldn't be\", hits != null);\n      assertTrue(\"should be 100 hits\", hits.totalHits == 100);\n      for (int j = 0; j < hits.scoreDocs.length; j++) {\n        ScoreDoc doc = hits.scoreDocs[j];\n        //\t\t\t\tSystem.out.println(\"Doc: \" + doc.toString());\n        //\t\t\t\tSystem.out.println(\"Explain: \" + searcher.explain(query, doc.doc));\n        assertTrue(doc.score + \" does not equal: \" + 3, doc.score == 3);\n      }\n    }\n  }\n\n","bugFix":["e9a421afb32184cc61e8326108325225d58dfde0"],"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"7c65bc241a96282ca59ae736b4ffb5b7e5eeb23a","date":1292920096,"type":3,"author":"Michael Busch","isMerge":true,"pathNew":"lucene/src/test/org/apache/lucene/search/payloads/TestPayloadNearQuery#test().mjava","pathOld":"lucene/src/test/org/apache/lucene/search/payloads/TestPayloadNearQuery#test().mjava","sourceNew":"  public void test() throws IOException {\n    PayloadNearQuery query;\n    TopDocs hits;\n\n    query = newPhraseQuery(\"field\", \"twenty two\", true, new AveragePayloadFunction());\n    QueryUtils.check(query);\n\t\t\n    // all 10 hits should have score = 3 because adjacent terms have payloads of 2,4\n    // and all the similarity factors are set to 1\n    hits = searcher.search(query, null, 100);\n    assertTrue(\"hits is null and it shouldn't be\", hits != null);\n    assertTrue(\"should be 10 hits\", hits.totalHits == 10);\n    for (int j = 0; j < hits.scoreDocs.length; j++) {\n      ScoreDoc doc = hits.scoreDocs[j];\n      assertTrue(doc.score + \" does not equal: \" + 3, doc.score == 3);\n    }\n    for (int i=1;i<10;i++) {\n      query = newPhraseQuery(\"field\", English.intToEnglish(i)+\" hundred\", true, new AveragePayloadFunction());\n      // all should have score = 3 because adjacent terms have payloads of 2,4\n      // and all the similarity factors are set to 1\n      hits = searcher.search(query, null, 100);\n      assertTrue(\"hits is null and it shouldn't be\", hits != null);\n      assertTrue(\"should be 100 hits\", hits.totalHits == 100);\n      for (int j = 0; j < hits.scoreDocs.length; j++) {\n        ScoreDoc doc = hits.scoreDocs[j];\n        //\t\t\t\tSystem.out.println(\"Doc: \" + doc.toString());\n        //\t\t\t\tSystem.out.println(\"Explain: \" + searcher.explain(query, doc.doc));\n        assertTrue(doc.score + \" does not equal: \" + 3, doc.score == 3);\n      }\n    }\n  }\n\n","sourceOld":"  public void test() throws IOException {\n    PayloadNearQuery query;\n    TopDocs hits;\n\n    query = newPhraseQuery(\"field\", \"twenty two\", true);\n    QueryUtils.check(query);\n\t\t\n    // all 10 hits should have score = 3 because adjacent terms have payloads of 2,4\n    // and all the similarity factors are set to 1\n    hits = searcher.search(query, null, 100);\n    assertTrue(\"hits is null and it shouldn't be\", hits != null);\n    assertTrue(\"should be 10 hits\", hits.totalHits == 10);\n    for (int j = 0; j < hits.scoreDocs.length; j++) {\n      ScoreDoc doc = hits.scoreDocs[j];\n      assertTrue(doc.score + \" does not equal: \" + 3, doc.score == 3);\n    }\n    for (int i=1;i<10;i++) {\n      query = newPhraseQuery(\"field\", English.intToEnglish(i)+\" hundred\", true);\n      // all should have score = 3 because adjacent terms have payloads of 2,4\n      // and all the similarity factors are set to 1\n      hits = searcher.search(query, null, 100);\n      assertTrue(\"hits is null and it shouldn't be\", hits != null);\n      assertTrue(\"should be 100 hits\", hits.totalHits == 100);\n      for (int j = 0; j < hits.scoreDocs.length; j++) {\n        ScoreDoc doc = hits.scoreDocs[j];\n        //\t\t\t\tSystem.out.println(\"Doc: \" + doc.toString());\n        //\t\t\t\tSystem.out.println(\"Explain: \" + searcher.explain(query, doc.doc));\n        assertTrue(doc.score + \" does not equal: \" + 3, doc.score == 3);\n      }\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"60ba444201d2570214b6fcf1d15600dc1a01f548","date":1313868045,"type":3,"author":"Michael McCandless","isMerge":false,"pathNew":"lucene/src/test/org/apache/lucene/search/payloads/TestPayloadNearQuery#test().mjava","pathOld":"lucene/src/test/org/apache/lucene/search/payloads/TestPayloadNearQuery#test().mjava","sourceNew":"  public void test() throws IOException {\n    PayloadNearQuery query;\n    TopDocs hits;\n\n    query = newPhraseQuery(\"field\", \"twenty two\", true, new AveragePayloadFunction());\n    QueryUtils.check(query);\n\t\t\n    // all 10 hits should have score = 3 because adjacent terms have payloads of 2,4\n    // and all the similarity factors are set to 1\n    hits = searcher.search(query, null, 100);\n    assertTrue(\"hits is null and it shouldn't be\", hits != null);\n    assertTrue(\"should be 10 hits\", hits.totalHits == 10);\n    for (int j = 0; j < hits.scoreDocs.length; j++) {\n      ScoreDoc doc = hits.scoreDocs[j];\n      assertTrue(doc.score + \" does not equal: \" + 3, doc.score == 3);\n    }\n    for (int i=1;i<10;i++) {\n      query = newPhraseQuery(\"field\", English.intToEnglish(i)+\" hundred\", true, new AveragePayloadFunction());\n      if (VERBOSE) {\n        System.out.println(\"TEST: run query=\" + query);\n      }\n      // all should have score = 3 because adjacent terms have payloads of 2,4\n      // and all the similarity factors are set to 1\n      hits = searcher.search(query, null, 100);\n      assertTrue(\"hits is null and it shouldn't be\", hits != null);\n      assertEquals(\"should be 100 hits\", 100, hits.totalHits);\n      for (int j = 0; j < hits.scoreDocs.length; j++) {\n        ScoreDoc doc = hits.scoreDocs[j];\n        //\t\t\t\tSystem.out.println(\"Doc: \" + doc.toString());\n        //\t\t\t\tSystem.out.println(\"Explain: \" + searcher.explain(query, doc.doc));\n        assertTrue(doc.score + \" does not equal: \" + 3, doc.score == 3);\n      }\n    }\n  }\n\n","sourceOld":"  public void test() throws IOException {\n    PayloadNearQuery query;\n    TopDocs hits;\n\n    query = newPhraseQuery(\"field\", \"twenty two\", true, new AveragePayloadFunction());\n    QueryUtils.check(query);\n\t\t\n    // all 10 hits should have score = 3 because adjacent terms have payloads of 2,4\n    // and all the similarity factors are set to 1\n    hits = searcher.search(query, null, 100);\n    assertTrue(\"hits is null and it shouldn't be\", hits != null);\n    assertTrue(\"should be 10 hits\", hits.totalHits == 10);\n    for (int j = 0; j < hits.scoreDocs.length; j++) {\n      ScoreDoc doc = hits.scoreDocs[j];\n      assertTrue(doc.score + \" does not equal: \" + 3, doc.score == 3);\n    }\n    for (int i=1;i<10;i++) {\n      query = newPhraseQuery(\"field\", English.intToEnglish(i)+\" hundred\", true, new AveragePayloadFunction());\n      // all should have score = 3 because adjacent terms have payloads of 2,4\n      // and all the similarity factors are set to 1\n      hits = searcher.search(query, null, 100);\n      assertTrue(\"hits is null and it shouldn't be\", hits != null);\n      assertTrue(\"should be 100 hits\", hits.totalHits == 100);\n      for (int j = 0; j < hits.scoreDocs.length; j++) {\n        ScoreDoc doc = hits.scoreDocs[j];\n        //\t\t\t\tSystem.out.println(\"Doc: \" + doc.toString());\n        //\t\t\t\tSystem.out.println(\"Explain: \" + searcher.explain(query, doc.doc));\n        assertTrue(doc.score + \" does not equal: \" + 3, doc.score == 3);\n      }\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"3a119bbc8703c10faa329ec201c654b3a35a1e3e","date":1328644745,"type":5,"author":"Steven Rowe","isMerge":false,"pathNew":"lucene/core/src/test/org/apache/lucene/search/payloads/TestPayloadNearQuery#test().mjava","pathOld":"lucene/src/test/org/apache/lucene/search/payloads/TestPayloadNearQuery#test().mjava","sourceNew":"  public void test() throws IOException {\n    PayloadNearQuery query;\n    TopDocs hits;\n\n    query = newPhraseQuery(\"field\", \"twenty two\", true, new AveragePayloadFunction());\n    QueryUtils.check(query);\n\t\t\n    // all 10 hits should have score = 3 because adjacent terms have payloads of 2,4\n    // and all the similarity factors are set to 1\n    hits = searcher.search(query, null, 100);\n    assertTrue(\"hits is null and it shouldn't be\", hits != null);\n    assertTrue(\"should be 10 hits\", hits.totalHits == 10);\n    for (int j = 0; j < hits.scoreDocs.length; j++) {\n      ScoreDoc doc = hits.scoreDocs[j];\n      assertTrue(doc.score + \" does not equal: \" + 3, doc.score == 3);\n    }\n    for (int i=1;i<10;i++) {\n      query = newPhraseQuery(\"field\", English.intToEnglish(i)+\" hundred\", true, new AveragePayloadFunction());\n      if (VERBOSE) {\n        System.out.println(\"TEST: run query=\" + query);\n      }\n      // all should have score = 3 because adjacent terms have payloads of 2,4\n      // and all the similarity factors are set to 1\n      hits = searcher.search(query, null, 100);\n      assertTrue(\"hits is null and it shouldn't be\", hits != null);\n      assertEquals(\"should be 100 hits\", 100, hits.totalHits);\n      for (int j = 0; j < hits.scoreDocs.length; j++) {\n        ScoreDoc doc = hits.scoreDocs[j];\n        //\t\t\t\tSystem.out.println(\"Doc: \" + doc.toString());\n        //\t\t\t\tSystem.out.println(\"Explain: \" + searcher.explain(query, doc.doc));\n        assertTrue(doc.score + \" does not equal: \" + 3, doc.score == 3);\n      }\n    }\n  }\n\n","sourceOld":"  public void test() throws IOException {\n    PayloadNearQuery query;\n    TopDocs hits;\n\n    query = newPhraseQuery(\"field\", \"twenty two\", true, new AveragePayloadFunction());\n    QueryUtils.check(query);\n\t\t\n    // all 10 hits should have score = 3 because adjacent terms have payloads of 2,4\n    // and all the similarity factors are set to 1\n    hits = searcher.search(query, null, 100);\n    assertTrue(\"hits is null and it shouldn't be\", hits != null);\n    assertTrue(\"should be 10 hits\", hits.totalHits == 10);\n    for (int j = 0; j < hits.scoreDocs.length; j++) {\n      ScoreDoc doc = hits.scoreDocs[j];\n      assertTrue(doc.score + \" does not equal: \" + 3, doc.score == 3);\n    }\n    for (int i=1;i<10;i++) {\n      query = newPhraseQuery(\"field\", English.intToEnglish(i)+\" hundred\", true, new AveragePayloadFunction());\n      if (VERBOSE) {\n        System.out.println(\"TEST: run query=\" + query);\n      }\n      // all should have score = 3 because adjacent terms have payloads of 2,4\n      // and all the similarity factors are set to 1\n      hits = searcher.search(query, null, 100);\n      assertTrue(\"hits is null and it shouldn't be\", hits != null);\n      assertEquals(\"should be 100 hits\", 100, hits.totalHits);\n      for (int j = 0; j < hits.scoreDocs.length; j++) {\n        ScoreDoc doc = hits.scoreDocs[j];\n        //\t\t\t\tSystem.out.println(\"Doc: \" + doc.toString());\n        //\t\t\t\tSystem.out.println(\"Explain: \" + searcher.explain(query, doc.doc));\n        assertTrue(doc.score + \" does not equal: \" + 3, doc.score == 3);\n      }\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"60ba444201d2570214b6fcf1d15600dc1a01f548":["63962b8b453f75ca481172689753cdb3ca868d4c"],"3a119bbc8703c10faa329ec201c654b3a35a1e3e":["60ba444201d2570214b6fcf1d15600dc1a01f548"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"63962b8b453f75ca481172689753cdb3ca868d4c":["9454a6510e2db155fb01faa5c049b06ece95fab9"],"7c65bc241a96282ca59ae736b4ffb5b7e5eeb23a":["9454a6510e2db155fb01faa5c049b06ece95fab9","63962b8b453f75ca481172689753cdb3ca868d4c"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["3a119bbc8703c10faa329ec201c654b3a35a1e3e"],"9454a6510e2db155fb01faa5c049b06ece95fab9":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"]},"commit2Childs":{"60ba444201d2570214b6fcf1d15600dc1a01f548":["3a119bbc8703c10faa329ec201c654b3a35a1e3e"],"3a119bbc8703c10faa329ec201c654b3a35a1e3e":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["9454a6510e2db155fb01faa5c049b06ece95fab9"],"63962b8b453f75ca481172689753cdb3ca868d4c":["60ba444201d2570214b6fcf1d15600dc1a01f548","7c65bc241a96282ca59ae736b4ffb5b7e5eeb23a"],"7c65bc241a96282ca59ae736b4ffb5b7e5eeb23a":[],"9454a6510e2db155fb01faa5c049b06ece95fab9":["63962b8b453f75ca481172689753cdb3ca868d4c","7c65bc241a96282ca59ae736b4ffb5b7e5eeb23a"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["7c65bc241a96282ca59ae736b4ffb5b7e5eeb23a","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}