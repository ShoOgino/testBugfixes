{"path":"solr/core/src/java/org/apache/solr/handler/component/HttpShardHandler#canShortCircuit(String[],boolean,SolrParams,CloudDescriptor).mjava","commits":[{"id":"cc28b46d62a8b91c8e90f9345612c4050eab98d4","date":1581344825,"type":0,"author":"Shalin Shekhar Mangar","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/handler/component/HttpShardHandler#canShortCircuit(String[],boolean,SolrParams,CloudDescriptor).mjava","pathOld":"/dev/null","sourceNew":"  private boolean canShortCircuit(String[] slices, boolean onlyNrtReplicas, SolrParams params, CloudDescriptor cloudDescriptor) {\n    // Are we hosting the shard that this request is for, and are we active? If so, then handle it ourselves\n    // and make it a non-distributed request.\n    String ourSlice = cloudDescriptor.getShardId();\n    String ourCollection = cloudDescriptor.getCollectionName();\n    // Some requests may only be fulfilled by replicas of type Replica.Type.NRT\n    if (slices.length == 1 && slices[0] != null\n        && (slices[0].equals(ourSlice) || slices[0].equals(ourCollection + \"_\" + ourSlice))  // handle the <collection>_<slice> format\n        && cloudDescriptor.getLastPublished() == Replica.State.ACTIVE\n        && (!onlyNrtReplicas || cloudDescriptor.getReplicaType() == Replica.Type.NRT)) {\n      boolean shortCircuit = params.getBool(\"shortCircuit\", true);       // currently just a debugging parameter to check distrib search on a single node\n\n      String targetHandler = params.get(ShardParams.SHARDS_QT);\n      shortCircuit = shortCircuit && targetHandler == null;             // if a different handler is specified, don't short-circuit\n\n      return shortCircuit;\n    }\n    return false;\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cc28b46d62a8b91c8e90f9345612c4050eab98d4":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["cc28b46d62a8b91c8e90f9345612c4050eab98d4"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["cc28b46d62a8b91c8e90f9345612c4050eab98d4"],"cc28b46d62a8b91c8e90f9345612c4050eab98d4":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}