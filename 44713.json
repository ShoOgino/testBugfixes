{"path":"lucene/luke/src/java/org/apache/lucene/luke/models/tools/IndexToolsImpl#exportTerms(String,String,String).mjava","commits":[{"id":"01e3f81218fdc170a818bb0a75b395a3650a661d","date":1568804028,"type":1,"author":"Amish Shah","isMerge":false,"pathNew":"lucene/luke/src/java/org/apache/lucene/luke/models/tools/IndexToolsImpl#exportTerms(String,String,String).mjava","pathOld":"lucene/luke/src/java/org/apache/lucene/luke/models/tools/IndexToolsImpl#exportTerms(String,String).mjava","sourceNew":"  public String exportTerms(String destDir, String field, String delimiter) {\n    String filename = \"terms_\" + field + \"_\" + System.currentTimeMillis() + \".out\";\n    Path path = Paths.get(destDir, filename);\n    try {\n      Terms terms = MultiTerms.getTerms(reader, field);\n      if (terms == null) {\n        throw new LukeException(String.format(Locale.US, \"Field %s does not contain any terms to be exported\", field));\n      }\n      try (BufferedWriter writer = Files.newBufferedWriter(path, Charset.forName(\"UTF-8\"))) {\n        TermsEnum termsEnum = terms.iterator();\n        BytesRef term;\n        while (!Thread.currentThread().isInterrupted() && (term = termsEnum.next()) != null) {\n          writer.write(String.format(Locale.US, \"%s%s%d\\n\", term.utf8ToString(), delimiter, +termsEnum.docFreq()));\n        }\n        return path.toString();\n      }\n    } catch (IOException e) {\n      throw new LukeException(\"Terms file export for field [\" + field + \"] to file [\" + filename + \"] has failed.\", e);\n    }\n  }\n\n","sourceOld":"  public String exportTerms(String destDir, String field) {\n    String filename = \"terms_\" + field + \"_\" + System.currentTimeMillis() + \".out\";\n    Path path = Paths.get(destDir, filename);\n    try {\n      Terms terms = MultiTerms.getTerms(reader, field);\n      if (terms == null) {\n        throw new LukeException(String.format(Locale.US, \"Field %s does not contain any terms to be exported\", field));\n      }\n      try (BufferedWriter writer = Files.newBufferedWriter(path, Charset.forName(\"UTF-8\"))) {\n        TermsEnum termsEnum = terms.iterator();\n        BytesRef term;\n        while (!Thread.currentThread().isInterrupted() && (term = termsEnum.next()) != null) {\n          writer.write(String.format(Locale.US, \"%s,%d\\n\", term.utf8ToString(), +termsEnum.docFreq()));\n        }\n        return path.toString();\n      }\n    } catch (IOException e) {\n      throw new LukeException(\"Terms file export for field [\" + field + \"] to file [\" + filename + \"] has failed.\", e);\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"01e3f81218fdc170a818bb0a75b395a3650a661d":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["01e3f81218fdc170a818bb0a75b395a3650a661d"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["01e3f81218fdc170a818bb0a75b395a3650a661d"],"01e3f81218fdc170a818bb0a75b395a3650a661d":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}