{"path":"lucene/core/src/test/org/apache/lucene/search/TestTopFieldCollector#testRelationVsTopDocsCount().mjava","commits":[{"id":"60a97329527e682292497dd2f6fae1c519840bae","date":1587668642,"type":0,"author":"Tomas Fernandez Lobbe","isMerge":false,"pathNew":"lucene/core/src/test/org/apache/lucene/search/TestTopFieldCollector#testRelationVsTopDocsCount().mjava","pathOld":"/dev/null","sourceNew":"  public void testRelationVsTopDocsCount() throws Exception {\n    Sort sort = new Sort(SortField.FIELD_SCORE, SortField.FIELD_DOC);\n    try (Directory dir = newDirectory();\n        IndexWriter w = new IndexWriter(dir, newIndexWriterConfig().setMergePolicy(NoMergePolicy.INSTANCE))) {\n      Document doc = new Document();\n      doc.add(new TextField(\"f\", \"foo bar\", Store.NO));\n      w.addDocuments(Arrays.asList(doc, doc, doc, doc, doc));\n      w.flush();\n      w.addDocuments(Arrays.asList(doc, doc, doc, doc, doc));\n      w.flush();\n      \n      try (IndexReader reader = DirectoryReader.open(w)) {\n        IndexSearcher searcher = new IndexSearcher(reader);\n        TopFieldCollector collector = TopFieldCollector.create(sort, 2, 10);\n        searcher.search(new TermQuery(new Term(\"f\", \"foo\")), collector);\n        assertEquals(10, collector.totalHits);\n        assertEquals(TotalHits.Relation.EQUAL_TO, collector.totalHitsRelation);\n        \n        collector = TopFieldCollector.create(sort, 2, 2);\n        searcher.search(new TermQuery(new Term(\"f\", \"foo\")), collector);\n        assertTrue(10 >= collector.totalHits);\n        assertEquals(TotalHits.Relation.GREATER_THAN_OR_EQUAL_TO, collector.totalHitsRelation);\n        \n        collector = TopFieldCollector.create(sort, 10, 2);\n        searcher.search(new TermQuery(new Term(\"f\", \"foo\")), collector);\n        assertEquals(10, collector.totalHits);\n        assertEquals(TotalHits.Relation.EQUAL_TO, collector.totalHitsRelation);\n      }\n    }\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"60a97329527e682292497dd2f6fae1c519840bae":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["60a97329527e682292497dd2f6fae1c519840bae"]},"commit2Childs":{"60a97329527e682292497dd2f6fae1c519840bae":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["60a97329527e682292497dd2f6fae1c519840bae"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}