{"path":"contrib/spatial/src/java/org/apache/lucene/spatial/tier/CartesianShapeFilter#getDocIdSet(IndexReader).mjava","commits":[{"id":"d41c10b9c61bc826acd344f499e062fb46bc42ae","date":1249408917,"type":1,"author":"Michael McCandless","isMerge":false,"pathNew":"contrib/spatial/src/java/org/apache/lucene/spatial/tier/CartesianShapeFilter#getDocIdSet(IndexReader).mjava","pathOld":"contrib/spatial/src/java/org/apache/lucene/spatial/tier/CartesianShapeFilter#bits(IndexReader).mjava","sourceNew":"  @Override\n  public DocIdSet getDocIdSet(IndexReader reader) throws IOException {\n    long start = System.currentTimeMillis();\n      \n    OpenBitSet bits = new OpenBitSet(reader.maxDoc());\n\n    TermDocs termDocs = reader.termDocs();\n    List<Double> area = shape.getArea();\n    int sz = area.size();\n    log.fine(\"Area size \"+ sz);\n\n    // iterate through each boxid\n    for (int i =0; i< sz; i++) {\n      double boxId = area.get(i).doubleValue();\n      termDocs.seek(new Term(fieldName,\n          NumericUtils.doubleToPrefixCoded(boxId)));\n      \n      // iterate through all documents\n      // which have this boxId\n      while (termDocs.next()) {\n        bits.fastSet(termDocs.doc());\n      }\n    }\n    \n    long end = System.currentTimeMillis();\n    log.fine(\"BoundaryBox Time Taken: \"+ (end - start) + \" found: \"+bits.cardinality()+\" candidates\");\n    return bits;\n  }\n\n","sourceOld":"  @Override\n  public BitSet bits(IndexReader reader) throws IOException {\n    long start = System.currentTimeMillis();\n      \n    BitSet bits = new BitSet(reader.maxDoc());\n\n    TermDocs termDocs = reader.termDocs();\n    List<Double> area = shape.getArea();\n    int sz = area.size();\n    log.fine(\"Area size \"+ sz);\n    \n    // iterate through each boxid\n    for (int i =0; i< sz; i++) {\n      double boxId = area.get(i).doubleValue();\n      termDocs.seek(new Term(fieldName,\n          NumericUtils.doubleToPrefixCoded(boxId)));\n      \n      // iterate through all documents\n      // which have this boxId\n      while (termDocs.next()) {\n        bits.set(termDocs.doc());\n      }\n    }\n    \n    long end = System.currentTimeMillis();\n    log.fine(\"BoundaryBox Time Taken: \"+ (end - start) + \" found: \"+bits.cardinality()+\" candidates\");\n    return bits;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"2c2ae53cd6aaa1f611cd392de6193cfbb2483eaf","date":1252289524,"type":3,"author":"Mark Robert Miller","isMerge":false,"pathNew":"contrib/spatial/src/java/org/apache/lucene/spatial/tier/CartesianShapeFilter#getDocIdSet(IndexReader).mjava","pathOld":"contrib/spatial/src/java/org/apache/lucene/spatial/tier/CartesianShapeFilter#getDocIdSet(IndexReader).mjava","sourceNew":"  @Override\n  public DocIdSet getDocIdSet(IndexReader reader) throws IOException {\n    long start = System.currentTimeMillis();\n      \n    OpenBitSet bits = new OpenBitSet(reader.maxDoc());\n\n    TermDocs termDocs = reader.termDocs();\n    List<Double> area = shape.getArea();\n    int sz = area.size();\n    log.fine(\"Area size \"+ sz);\n\n    // iterate through each boxid\n    for (int i =0; i< sz; i++) {\n      double boxId = area.get(i).doubleValue();\n      termDocs.seek(new Term(fieldName,\n          NumericUtils.doubleToPrefixCoded(boxId)));\n      \n      // iterate through all documents\n      // which have this boxId\n      while (termDocs.next()) {\n        bits.fastSet(termDocs.doc());\n      }\n    }\n    \n    long end = System.currentTimeMillis();\n    if(log.isLoggable(Level.FINE)) {\n      log.fine(\"BoundaryBox Time Taken: \"+ (end - start) + \" found: \"+bits.cardinality()+\" candidates\");\n    }\n    return bits;\n  }\n\n","sourceOld":"  @Override\n  public DocIdSet getDocIdSet(IndexReader reader) throws IOException {\n    long start = System.currentTimeMillis();\n      \n    OpenBitSet bits = new OpenBitSet(reader.maxDoc());\n\n    TermDocs termDocs = reader.termDocs();\n    List<Double> area = shape.getArea();\n    int sz = area.size();\n    log.fine(\"Area size \"+ sz);\n\n    // iterate through each boxid\n    for (int i =0; i< sz; i++) {\n      double boxId = area.get(i).doubleValue();\n      termDocs.seek(new Term(fieldName,\n          NumericUtils.doubleToPrefixCoded(boxId)));\n      \n      // iterate through all documents\n      // which have this boxId\n      while (termDocs.next()) {\n        bits.fastSet(termDocs.doc());\n      }\n    }\n    \n    long end = System.currentTimeMillis();\n    log.fine(\"BoundaryBox Time Taken: \"+ (end - start) + \" found: \"+bits.cardinality()+\" candidates\");\n    return bits;\n  }\n\n","bugFix":null,"bugIntro":["e59cead675ff912b2ffdac41ca1a2fa7d905b8fa"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"e59cead675ff912b2ffdac41ca1a2fa7d905b8fa","date":1257446961,"type":3,"author":"Simon Willnauer","isMerge":false,"pathNew":"contrib/spatial/src/java/org/apache/lucene/spatial/tier/CartesianShapeFilter#getDocIdSet(IndexReader).mjava","pathOld":"contrib/spatial/src/java/org/apache/lucene/spatial/tier/CartesianShapeFilter#getDocIdSet(IndexReader).mjava","sourceNew":"  @Override\n  public DocIdSet getDocIdSet(final IndexReader reader) throws IOException {\n    final OpenBitSet bits = new OpenBitSet(reader.maxDoc());\n    final TermDocs termDocs = reader.termDocs();\n    final List<Double> area = shape.getArea();\n    int sz = area.size();\n    \n    final Term term = new Term(fieldName);\n    // iterate through each boxid\n    for (int i =0; i< sz; i++) {\n      double boxId = area.get(i).doubleValue();\n      termDocs.seek(term.createTerm(NumericUtils.doubleToPrefixCoded(boxId)));\n      // iterate through all documents\n      // which have this boxId\n      while (termDocs.next()) {\n        bits.fastSet(termDocs.doc());\n      }\n    }\n    return bits;\n  }\n\n","sourceOld":"  @Override\n  public DocIdSet getDocIdSet(IndexReader reader) throws IOException {\n    long start = System.currentTimeMillis();\n      \n    OpenBitSet bits = new OpenBitSet(reader.maxDoc());\n\n    TermDocs termDocs = reader.termDocs();\n    List<Double> area = shape.getArea();\n    int sz = area.size();\n    log.fine(\"Area size \"+ sz);\n\n    // iterate through each boxid\n    for (int i =0; i< sz; i++) {\n      double boxId = area.get(i).doubleValue();\n      termDocs.seek(new Term(fieldName,\n          NumericUtils.doubleToPrefixCoded(boxId)));\n      \n      // iterate through all documents\n      // which have this boxId\n      while (termDocs.next()) {\n        bits.fastSet(termDocs.doc());\n      }\n    }\n    \n    long end = System.currentTimeMillis();\n    if(log.isLoggable(Level.FINE)) {\n      log.fine(\"BoundaryBox Time Taken: \"+ (end - start) + \" found: \"+bits.cardinality()+\" candidates\");\n    }\n    return bits;\n  }\n\n","bugFix":["60fe82b6af0f490fe9a473a5315847479e78f73f","04a4a94db1eb59c8583adb166acfe686a031bedc","2d6be147c89de7996054b96873a638b6adc5cea1","2c2ae53cd6aaa1f611cd392de6193cfbb2483eaf","d41c10b9c61bc826acd344f499e062fb46bc42ae"],"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"9454a6510e2db155fb01faa5c049b06ece95fab9","date":1453508333,"type":5,"author":"Dawid Weiss","isMerge":false,"pathNew":"lucene/contrib/spatial/src/java/org/apache/lucene/spatial/tier/CartesianShapeFilter#getDocIdSet(IndexReader).mjava","pathOld":"contrib/spatial/src/java/org/apache/lucene/spatial/tier/CartesianShapeFilter#getDocIdSet(IndexReader).mjava","sourceNew":"  @Override\n  public DocIdSet getDocIdSet(final IndexReader reader) throws IOException {\n    final OpenBitSet bits = new OpenBitSet(reader.maxDoc());\n    final TermDocs termDocs = reader.termDocs();\n    final List<Double> area = shape.getArea();\n    int sz = area.size();\n    \n    final Term term = new Term(fieldName);\n    // iterate through each boxid\n    for (int i =0; i< sz; i++) {\n      double boxId = area.get(i).doubleValue();\n      termDocs.seek(term.createTerm(NumericUtils.doubleToPrefixCoded(boxId)));\n      // iterate through all documents\n      // which have this boxId\n      while (termDocs.next()) {\n        bits.fastSet(termDocs.doc());\n      }\n    }\n    return bits;\n  }\n\n","sourceOld":"  @Override\n  public DocIdSet getDocIdSet(final IndexReader reader) throws IOException {\n    final OpenBitSet bits = new OpenBitSet(reader.maxDoc());\n    final TermDocs termDocs = reader.termDocs();\n    final List<Double> area = shape.getArea();\n    int sz = area.size();\n    \n    final Term term = new Term(fieldName);\n    // iterate through each boxid\n    for (int i =0; i< sz; i++) {\n      double boxId = area.get(i).doubleValue();\n      termDocs.seek(term.createTerm(NumericUtils.doubleToPrefixCoded(boxId)));\n      // iterate through all documents\n      // which have this boxId\n      while (termDocs.next()) {\n        bits.fastSet(termDocs.doc());\n      }\n    }\n    return bits;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"e59cead675ff912b2ffdac41ca1a2fa7d905b8fa":["2c2ae53cd6aaa1f611cd392de6193cfbb2483eaf"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"d41c10b9c61bc826acd344f499e062fb46bc42ae":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"2c2ae53cd6aaa1f611cd392de6193cfbb2483eaf":["d41c10b9c61bc826acd344f499e062fb46bc42ae"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["9454a6510e2db155fb01faa5c049b06ece95fab9"],"9454a6510e2db155fb01faa5c049b06ece95fab9":["e59cead675ff912b2ffdac41ca1a2fa7d905b8fa"]},"commit2Childs":{"e59cead675ff912b2ffdac41ca1a2fa7d905b8fa":["9454a6510e2db155fb01faa5c049b06ece95fab9"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["d41c10b9c61bc826acd344f499e062fb46bc42ae"],"d41c10b9c61bc826acd344f499e062fb46bc42ae":["2c2ae53cd6aaa1f611cd392de6193cfbb2483eaf"],"2c2ae53cd6aaa1f611cd392de6193cfbb2483eaf":["e59cead675ff912b2ffdac41ca1a2fa7d905b8fa"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[],"9454a6510e2db155fb01faa5c049b06ece95fab9":["cd5edd1f2b162a5cfa08efd17851a07373a96817"]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}