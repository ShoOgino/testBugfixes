{"path":"lucene/facet/src/test/org/apache/lucene/facet/taxonomy/TestTaxonomyCombined#testWriterTwice2().mjava","commits":[{"id":"b89678825b68eccaf09e6ab71675fc0b0af1e099","date":1334669779,"type":1,"author":"Robert Muir","isMerge":false,"pathNew":"lucene/facet/src/test/org/apache/lucene/facet/taxonomy/TestTaxonomyCombined#testWriterTwice2().mjava","pathOld":"modules/facet/src/test/org/apache/lucene/facet/taxonomy/TestTaxonomyCombined#testWriterTwice2().mjava","sourceNew":"  /**  testWriterTwice2 is similar to testWriterTwice, except that the index\n    is closed and reopened before attempting to write to it the same\n    categories again. While testWriterTwice can get along with writing\n    and reading correctly just to the cache, testWriterTwice2 checks also\n    the actual disk read part of the writer:\n   */\n  @Test\n  public void testWriterTwice2() throws Exception {\n    Directory indexDir = newDirectory();\n    TaxonomyWriter tw = new DirectoryTaxonomyWriter(indexDir);\n    fillTaxonomy(tw);\n    tw.close();\n    tw = new DirectoryTaxonomyWriter(indexDir);\n    // run fillTaxonomy again - this will try to add the same categories\n    // again, and check that we see the same ordinals again, not different\n    // ones, and that the number of categories hasn't grown by the new\n    // additions\n    fillTaxonomy(tw);\n    assertEquals(expectedCategories.length, tw.getSize());    \n    tw.close();\n    indexDir.close();\n  }\n\n","sourceOld":"  /**  testWriterTwice2 is similar to testWriterTwice, except that the index\n    is closed and reopened before attempting to write to it the same\n    categories again. While testWriterTwice can get along with writing\n    and reading correctly just to the cache, testWriterTwice2 checks also\n    the actual disk read part of the writer:\n   */\n  @Test\n  public void testWriterTwice2() throws Exception {\n    Directory indexDir = newDirectory();\n    TaxonomyWriter tw = new DirectoryTaxonomyWriter(indexDir);\n    fillTaxonomy(tw);\n    tw.close();\n    tw = new DirectoryTaxonomyWriter(indexDir);\n    // run fillTaxonomy again - this will try to add the same categories\n    // again, and check that we see the same ordinals again, not different\n    // ones, and that the number of categories hasn't grown by the new\n    // additions\n    fillTaxonomy(tw);\n    assertEquals(expectedCategories.length, tw.getSize());    \n    tw.close();\n    indexDir.close();\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"b89678825b68eccaf09e6ab71675fc0b0af1e099":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["b89678825b68eccaf09e6ab71675fc0b0af1e099"]},"commit2Childs":{"b89678825b68eccaf09e6ab71675fc0b0af1e099":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["b89678825b68eccaf09e6ab71675fc0b0af1e099"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}