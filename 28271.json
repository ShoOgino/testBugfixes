{"path":"solr/contrib/clustering/src/test/org/apache/solr/handler/clustering/AbstractClusteringTestCase#beforeClass().mjava","commits":[{"id":"5128b7b3b73fedff05fdc5ea2e6be53c1020bb91","date":1306767085,"type":1,"author":"Steven Rowe","isMerge":true,"pathNew":"solr/contrib/clustering/src/test/org/apache/solr/handler/clustering/AbstractClusteringTestCase#beforeClass().mjava","pathOld":"solr/contrib/clustering/src/test/java/org/apache/solr/handler/clustering/AbstractClusteringTestCase#beforeClass().mjava","sourceNew":"  @BeforeClass\n  public static void beforeClass() throws Exception {\n    initCore(\"solrconfig.xml\", \"schema.xml\", \"solr-clustering\");\n    numberOfDocs = 0;\n    for (String[] doc : DOCUMENTS) {\n      assertNull(h.validateUpdate(adoc(\"id\", Integer.toString(numberOfDocs), \"url\", doc[0], \"title\", doc[1], \"snippet\", doc[2])));\n      numberOfDocs++;\n    }\n    assertNull(h.validateUpdate(commit()));\n  }\n\n","sourceOld":"  @BeforeClass\n  public static void beforeClass() throws Exception {\n    initCore(\"solrconfig.xml\", \"schema.xml\", \"solr-clustering\");\n    numberOfDocs = 0;\n    for (String[] doc : DOCUMENTS) {\n      assertNull(h.validateUpdate(adoc(\"id\", Integer.toString(numberOfDocs), \"url\", doc[0], \"title\", doc[1], \"snippet\", doc[2])));\n      numberOfDocs++;\n    }\n    assertNull(h.validateUpdate(commit()));\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"c26f00b574427b55127e869b935845554afde1fa","date":1310252513,"type":1,"author":"Steven Rowe","isMerge":true,"pathNew":"solr/contrib/clustering/src/test/org/apache/solr/handler/clustering/AbstractClusteringTestCase#beforeClass().mjava","pathOld":"solr/contrib/clustering/src/test/java/org/apache/solr/handler/clustering/AbstractClusteringTestCase#beforeClass().mjava","sourceNew":"  @BeforeClass\n  public static void beforeClass() throws Exception {\n    initCore(\"solrconfig.xml\", \"schema.xml\", \"solr-clustering\");\n    numberOfDocs = 0;\n    for (String[] doc : DOCUMENTS) {\n      assertNull(h.validateUpdate(adoc(\"id\", Integer.toString(numberOfDocs), \"url\", doc[0], \"title\", doc[1], \"snippet\", doc[2])));\n      numberOfDocs++;\n    }\n    assertNull(h.validateUpdate(commit()));\n  }\n\n","sourceOld":"  @BeforeClass\n  public static void beforeClass() throws Exception {\n    initCore(\"solrconfig.xml\", \"schema.xml\", \"solr-clustering\");\n    numberOfDocs = 0;\n    for (String[] doc : DOCUMENTS) {\n      assertNull(h.validateUpdate(adoc(\"id\", Integer.toString(numberOfDocs), \"url\", doc[0], \"title\", doc[1], \"snippet\", doc[2])));\n      numberOfDocs++;\n    }\n    assertNull(h.validateUpdate(commit()));\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"abd55340ba9df8b62edcd692b34e46cf0614a52e","date":1311341057,"type":3,"author":"Steven Rowe","isMerge":false,"pathNew":"solr/contrib/clustering/src/test/org/apache/solr/handler/clustering/AbstractClusteringTestCase#beforeClass().mjava","pathOld":"solr/contrib/clustering/src/test/org/apache/solr/handler/clustering/AbstractClusteringTestCase#beforeClass().mjava","sourceNew":"  @BeforeClass\n  public static void beforeClass() throws Exception {\n    initCore(\"solrconfig.xml\", \"schema.xml\", \"clustering/solr\");\n    numberOfDocs = 0;\n    for (String[] doc : DOCUMENTS) {\n      assertNull(h.validateUpdate(adoc(\"id\", Integer.toString(numberOfDocs), \"url\", doc[0], \"title\", doc[1], \"snippet\", doc[2])));\n      numberOfDocs++;\n    }\n    assertNull(h.validateUpdate(commit()));\n  }\n\n","sourceOld":"  @BeforeClass\n  public static void beforeClass() throws Exception {\n    initCore(\"solrconfig.xml\", \"schema.xml\", \"solr-clustering\");\n    numberOfDocs = 0;\n    for (String[] doc : DOCUMENTS) {\n      assertNull(h.validateUpdate(adoc(\"id\", Integer.toString(numberOfDocs), \"url\", doc[0], \"title\", doc[1], \"snippet\", doc[2])));\n      numberOfDocs++;\n    }\n    assertNull(h.validateUpdate(commit()));\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"3b0bf71278457cb04b0666bf73b8aa71d36be8c4","date":1323446256,"type":3,"author":"Stanisław Osiński","isMerge":false,"pathNew":"solr/contrib/clustering/src/test/org/apache/solr/handler/clustering/AbstractClusteringTestCase#beforeClass().mjava","pathOld":"solr/contrib/clustering/src/test/org/apache/solr/handler/clustering/AbstractClusteringTestCase#beforeClass().mjava","sourceNew":"  @BeforeClass\n  public static void beforeClass() throws Exception {\n    initCore(\"solrconfig.xml\", \"schema.xml\", \"clustering/solr\");\n    numberOfDocs = 0;\n    for (String[] doc : DOCUMENTS) {\n      assertNull(h.validateUpdate(adoc(\"id\", Integer.toString(numberOfDocs), \"url\", doc[0], \"title\", doc[1], \"snippet\", doc[2])));\n      numberOfDocs++;\n    }\n    \n    // Add a multi-valued snippet\n    final SolrInputDocument multiValuedSnippet = new SolrInputDocument();\n    multiValuedSnippet.addField(\"id\", numberOfDocs++);\n    multiValuedSnippet.addField(\"title\", \"Title\");\n    multiValuedSnippet.addField(\"url\", \"URL\");\n    multiValuedSnippet.addField(\"snippet\", \"First value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Second value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Third value of multi field. Some more text. And still more.\");\n    assertNull(h.validateUpdate(adoc(multiValuedSnippet)));\n\n    assertNull(h.validateUpdate(commit()));\n  }\n\n","sourceOld":"  @BeforeClass\n  public static void beforeClass() throws Exception {\n    initCore(\"solrconfig.xml\", \"schema.xml\", \"clustering/solr\");\n    numberOfDocs = 0;\n    for (String[] doc : DOCUMENTS) {\n      assertNull(h.validateUpdate(adoc(\"id\", Integer.toString(numberOfDocs), \"url\", doc[0], \"title\", doc[1], \"snippet\", doc[2])));\n      numberOfDocs++;\n    }\n    assertNull(h.validateUpdate(commit()));\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"f25fe5576647e3bdd2a797a9900982532d5e2e97","date":1323446322,"type":3,"author":"Stanisław Osiński","isMerge":false,"pathNew":"solr/contrib/clustering/src/test/org/apache/solr/handler/clustering/AbstractClusteringTestCase#beforeClass().mjava","pathOld":"solr/contrib/clustering/src/test/org/apache/solr/handler/clustering/AbstractClusteringTestCase#beforeClass().mjava","sourceNew":"  @BeforeClass\n  public static void beforeClass() throws Exception {\n    initCore(\"solrconfig.xml\", \"schema.xml\", \"clustering/solr\");\n    numberOfDocs = 0;\n    for (String[] doc : DOCUMENTS) {\n      assertNull(h.validateUpdate(adoc(\"id\", Integer.toString(numberOfDocs), \"url\", doc[0], \"title\", doc[1], \"snippet\", doc[2])));\n      numberOfDocs++;\n    }\n    \n    // Add a multi-valued snippet\n    final SolrInputDocument multiValuedSnippet = new SolrInputDocument();\n    multiValuedSnippet.addField(\"id\", numberOfDocs++);\n    multiValuedSnippet.addField(\"title\", \"Title\");\n    multiValuedSnippet.addField(\"url\", \"URL\");\n    multiValuedSnippet.addField(\"snippet\", \"First value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Second value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Third value of multi field. Some more text. And still more.\");\n    assertNull(h.validateUpdate(adoc(multiValuedSnippet)));\n\n    // Add a document with multi-field title and snippet\n    final SolrInputDocument multiFieldDoc = new SolrInputDocument();\n    multiFieldDoc.addField(\"id\", numberOfDocs++);\n    multiFieldDoc.addField(\"title\", \"Title field\");\n    multiFieldDoc.addField(\"heading\", \"Heading field\");\n    multiFieldDoc.addField(\"url\", \"URL\");\n    multiFieldDoc.addField(\"snippet\", \"Snippet field: this is the contents of the snippet field.\");\n    multiFieldDoc.addField(\"body\", \"Body field: this is the contents of the body field that will get clustered together with snippet.\");\n    assertNull(h.validateUpdate(adoc(multiFieldDoc)));\n    \n    assertNull(h.validateUpdate(commit()));\n  }\n\n","sourceOld":"  @BeforeClass\n  public static void beforeClass() throws Exception {\n    initCore(\"solrconfig.xml\", \"schema.xml\", \"clustering/solr\");\n    numberOfDocs = 0;\n    for (String[] doc : DOCUMENTS) {\n      assertNull(h.validateUpdate(adoc(\"id\", Integer.toString(numberOfDocs), \"url\", doc[0], \"title\", doc[1], \"snippet\", doc[2])));\n      numberOfDocs++;\n    }\n    \n    // Add a multi-valued snippet\n    final SolrInputDocument multiValuedSnippet = new SolrInputDocument();\n    multiValuedSnippet.addField(\"id\", numberOfDocs++);\n    multiValuedSnippet.addField(\"title\", \"Title\");\n    multiValuedSnippet.addField(\"url\", \"URL\");\n    multiValuedSnippet.addField(\"snippet\", \"First value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Second value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Third value of multi field. Some more text. And still more.\");\n    assertNull(h.validateUpdate(adoc(multiValuedSnippet)));\n\n    assertNull(h.validateUpdate(commit()));\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"57123f858a48ace813624f9da70ca12bd803571f","date":1323446440,"type":3,"author":"Stanisław Osiński","isMerge":false,"pathNew":"solr/contrib/clustering/src/test/org/apache/solr/handler/clustering/AbstractClusteringTestCase#beforeClass().mjava","pathOld":"solr/contrib/clustering/src/test/org/apache/solr/handler/clustering/AbstractClusteringTestCase#beforeClass().mjava","sourceNew":"  @BeforeClass\n  public static void beforeClass() throws Exception {\n    initCore(\"solrconfig.xml\", \"schema.xml\", \"clustering/solr\");\n    numberOfDocs = 0;\n    for (String[] doc : DOCUMENTS) {\n      assertNull(h.validateUpdate(adoc(\"id\", Integer.toString(numberOfDocs), \"url\", doc[0], \"title\", doc[1], \"snippet\", doc[2])));\n      numberOfDocs++;\n    }\n    \n    // Add a multi-valued snippet\n    final SolrInputDocument multiValuedSnippet = new SolrInputDocument();\n    multiValuedSnippet.addField(\"id\", numberOfDocs++);\n    multiValuedSnippet.addField(\"title\", \"Title\");\n    multiValuedSnippet.addField(\"url\", \"URL\");\n    multiValuedSnippet.addField(\"snippet\", \"First value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Second value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Third value of multi field. Some more text. And still more.\");\n    assertNull(h.validateUpdate(adoc(multiValuedSnippet)));\n\n    // Add a document with multi-field title and snippet\n    final SolrInputDocument multiFieldDoc = new SolrInputDocument();\n    multiFieldDoc.addField(\"id\", numberOfDocs++);\n    multiFieldDoc.addField(\"title\", \"Title field\");\n    multiFieldDoc.addField(\"heading\", \"Heading field\");\n    multiFieldDoc.addField(\"url\", \"URL\");\n    multiFieldDoc.addField(\"snippet\", \"Snippet field: this is the contents of the snippet field.\");\n    multiFieldDoc.addField(\"body\", \"Body field: this is the contents of the body field that will get clustered together with snippet.\");\n    assertNull(h.validateUpdate(adoc(multiFieldDoc)));\n    \n    // Add a document with one language supported by Carrot2\n    final SolrInputDocument docWithOneSupprtedLanguage = new SolrInputDocument();\n    docWithOneSupprtedLanguage.addField(\"id\", numberOfDocs++);\n    docWithOneSupprtedLanguage.addField(\"title\", \"\");\n    docWithOneSupprtedLanguage.addField(\"url\", \"one_supported_language\");\n    docWithOneSupprtedLanguage.addField(\"lang\", \"zh-cn\");\n    assertNull(h.validateUpdate(adoc(docWithOneSupprtedLanguage)));\n    \n    // Add a document with more languages, one supported by Carrot2\n    final SolrInputDocument docWithOneSupprtedLanguageOfMany = new SolrInputDocument();\n    docWithOneSupprtedLanguageOfMany.addField(\"id\", numberOfDocs++);\n    docWithOneSupprtedLanguageOfMany.addField(\"url\", \"one_supported_language_of_many\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"zh-tw\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"POLISH\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"de\");\n    assertNull(h.validateUpdate(adoc(docWithOneSupprtedLanguageOfMany)));\n    \n    assertNull(h.validateUpdate(commit()));\n  }\n\n","sourceOld":"  @BeforeClass\n  public static void beforeClass() throws Exception {\n    initCore(\"solrconfig.xml\", \"schema.xml\", \"clustering/solr\");\n    numberOfDocs = 0;\n    for (String[] doc : DOCUMENTS) {\n      assertNull(h.validateUpdate(adoc(\"id\", Integer.toString(numberOfDocs), \"url\", doc[0], \"title\", doc[1], \"snippet\", doc[2])));\n      numberOfDocs++;\n    }\n    \n    // Add a multi-valued snippet\n    final SolrInputDocument multiValuedSnippet = new SolrInputDocument();\n    multiValuedSnippet.addField(\"id\", numberOfDocs++);\n    multiValuedSnippet.addField(\"title\", \"Title\");\n    multiValuedSnippet.addField(\"url\", \"URL\");\n    multiValuedSnippet.addField(\"snippet\", \"First value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Second value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Third value of multi field. Some more text. And still more.\");\n    assertNull(h.validateUpdate(adoc(multiValuedSnippet)));\n\n    // Add a document with multi-field title and snippet\n    final SolrInputDocument multiFieldDoc = new SolrInputDocument();\n    multiFieldDoc.addField(\"id\", numberOfDocs++);\n    multiFieldDoc.addField(\"title\", \"Title field\");\n    multiFieldDoc.addField(\"heading\", \"Heading field\");\n    multiFieldDoc.addField(\"url\", \"URL\");\n    multiFieldDoc.addField(\"snippet\", \"Snippet field: this is the contents of the snippet field.\");\n    multiFieldDoc.addField(\"body\", \"Body field: this is the contents of the body field that will get clustered together with snippet.\");\n    assertNull(h.validateUpdate(adoc(multiFieldDoc)));\n    \n    assertNull(h.validateUpdate(commit()));\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"74acabcbc6eae18c349c56bd385f9e42433afca3","date":1323446529,"type":3,"author":"Stanisław Osiński","isMerge":false,"pathNew":"solr/contrib/clustering/src/test/org/apache/solr/handler/clustering/AbstractClusteringTestCase#beforeClass().mjava","pathOld":"solr/contrib/clustering/src/test/org/apache/solr/handler/clustering/AbstractClusteringTestCase#beforeClass().mjava","sourceNew":"  @BeforeClass\n  public static void beforeClass() throws Exception {\n    initCore(\"solrconfig.xml\", \"schema.xml\", \"clustering/solr\");\n    numberOfDocs = 0;\n    for (String[] doc : DOCUMENTS) {\n      assertNull(h.validateUpdate(adoc(\"id\", Integer.toString(numberOfDocs), \"url\", doc[0], \"title\", doc[1], \"snippet\", doc[2])));\n      numberOfDocs++;\n    }\n    \n    // Add a multi-valued snippet\n    final SolrInputDocument multiValuedSnippet = new SolrInputDocument();\n    multiValuedSnippet.addField(\"id\", numberOfDocs++);\n    multiValuedSnippet.addField(\"title\", \"Title\");\n    multiValuedSnippet.addField(\"url\", \"URL\");\n    multiValuedSnippet.addField(\"snippet\", \"First value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Second value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Third value of multi field. Some more text. And still more.\");\n    assertNull(h.validateUpdate(adoc(multiValuedSnippet)));\n\n    // Add a document with multi-field title and snippet\n    final SolrInputDocument multiFieldDoc = new SolrInputDocument();\n    multiFieldDoc.addField(\"id\", numberOfDocs++);\n    multiFieldDoc.addField(\"title\", \"Title field\");\n    multiFieldDoc.addField(\"heading\", \"Heading field\");\n    multiFieldDoc.addField(\"url\", \"URL\");\n    multiFieldDoc.addField(\"snippet\", \"Snippet field: this is the contents of the snippet field.\");\n    multiFieldDoc.addField(\"body\", \"Body field: this is the contents of the body field that will get clustered together with snippet.\");\n    assertNull(h.validateUpdate(adoc(multiFieldDoc)));\n    \n    // Add a document with one language supported by Carrot2\n    final SolrInputDocument docWithOneSupprtedLanguage = new SolrInputDocument();\n    docWithOneSupprtedLanguage.addField(\"id\", numberOfDocs++);\n    docWithOneSupprtedLanguage.addField(\"title\", \"\");\n    docWithOneSupprtedLanguage.addField(\"url\", \"one_supported_language\");\n    docWithOneSupprtedLanguage.addField(\"lang\", \"zh-cn\");\n    assertNull(h.validateUpdate(adoc(docWithOneSupprtedLanguage)));\n    \n    // Add a document with more languages, one supported by Carrot2\n    final SolrInputDocument docWithOneSupprtedLanguageOfMany = new SolrInputDocument();\n    docWithOneSupprtedLanguageOfMany.addField(\"id\", numberOfDocs++);\n    docWithOneSupprtedLanguageOfMany.addField(\"url\", \"one_supported_language_of_many\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"zh-tw\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"POLISH\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"de\");\n    assertNull(h.validateUpdate(adoc(docWithOneSupprtedLanguageOfMany)));\n    \n    // Add a document with more languages, one supported by Carrot2\n    final SolrInputDocument docWithCustomFields = new SolrInputDocument();\n    docWithCustomFields.addField(\"id\", numberOfDocs++);\n    docWithCustomFields.addField(\"url\", \"custom_fields\");\n    docWithCustomFields.addField(\"intfield_i\", 10);\n    docWithCustomFields.addField(\"floatfield_f\", 10.5);\n    docWithCustomFields.addField(\"heading\", \"first\");\n    docWithCustomFields.addField(\"heading\", \"second\");\n    assertNull(h.validateUpdate(adoc(docWithCustomFields)));\n    \n    assertNull(h.validateUpdate(commit()));\n  }\n\n","sourceOld":"  @BeforeClass\n  public static void beforeClass() throws Exception {\n    initCore(\"solrconfig.xml\", \"schema.xml\", \"clustering/solr\");\n    numberOfDocs = 0;\n    for (String[] doc : DOCUMENTS) {\n      assertNull(h.validateUpdate(adoc(\"id\", Integer.toString(numberOfDocs), \"url\", doc[0], \"title\", doc[1], \"snippet\", doc[2])));\n      numberOfDocs++;\n    }\n    \n    // Add a multi-valued snippet\n    final SolrInputDocument multiValuedSnippet = new SolrInputDocument();\n    multiValuedSnippet.addField(\"id\", numberOfDocs++);\n    multiValuedSnippet.addField(\"title\", \"Title\");\n    multiValuedSnippet.addField(\"url\", \"URL\");\n    multiValuedSnippet.addField(\"snippet\", \"First value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Second value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Third value of multi field. Some more text. And still more.\");\n    assertNull(h.validateUpdate(adoc(multiValuedSnippet)));\n\n    // Add a document with multi-field title and snippet\n    final SolrInputDocument multiFieldDoc = new SolrInputDocument();\n    multiFieldDoc.addField(\"id\", numberOfDocs++);\n    multiFieldDoc.addField(\"title\", \"Title field\");\n    multiFieldDoc.addField(\"heading\", \"Heading field\");\n    multiFieldDoc.addField(\"url\", \"URL\");\n    multiFieldDoc.addField(\"snippet\", \"Snippet field: this is the contents of the snippet field.\");\n    multiFieldDoc.addField(\"body\", \"Body field: this is the contents of the body field that will get clustered together with snippet.\");\n    assertNull(h.validateUpdate(adoc(multiFieldDoc)));\n    \n    // Add a document with one language supported by Carrot2\n    final SolrInputDocument docWithOneSupprtedLanguage = new SolrInputDocument();\n    docWithOneSupprtedLanguage.addField(\"id\", numberOfDocs++);\n    docWithOneSupprtedLanguage.addField(\"title\", \"\");\n    docWithOneSupprtedLanguage.addField(\"url\", \"one_supported_language\");\n    docWithOneSupprtedLanguage.addField(\"lang\", \"zh-cn\");\n    assertNull(h.validateUpdate(adoc(docWithOneSupprtedLanguage)));\n    \n    // Add a document with more languages, one supported by Carrot2\n    final SolrInputDocument docWithOneSupprtedLanguageOfMany = new SolrInputDocument();\n    docWithOneSupprtedLanguageOfMany.addField(\"id\", numberOfDocs++);\n    docWithOneSupprtedLanguageOfMany.addField(\"url\", \"one_supported_language_of_many\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"zh-tw\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"POLISH\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"de\");\n    assertNull(h.validateUpdate(adoc(docWithOneSupprtedLanguageOfMany)));\n    \n    assertNull(h.validateUpdate(commit()));\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"ff99371bc1f34bf1a2ccdb754940ee5fe5cc2565","date":1323540308,"type":3,"author":"Robert Muir","isMerge":true,"pathNew":"solr/contrib/clustering/src/test/org/apache/solr/handler/clustering/AbstractClusteringTestCase#beforeClass().mjava","pathOld":"solr/contrib/clustering/src/test/org/apache/solr/handler/clustering/AbstractClusteringTestCase#beforeClass().mjava","sourceNew":"  @BeforeClass\n  public static void beforeClass() throws Exception {\n    initCore(\"solrconfig.xml\", \"schema.xml\", \"clustering/solr\");\n    numberOfDocs = 0;\n    for (String[] doc : DOCUMENTS) {\n      assertNull(h.validateUpdate(adoc(\"id\", Integer.toString(numberOfDocs), \"url\", doc[0], \"title\", doc[1], \"snippet\", doc[2])));\n      numberOfDocs++;\n    }\n    \n    // Add a multi-valued snippet\n    final SolrInputDocument multiValuedSnippet = new SolrInputDocument();\n    multiValuedSnippet.addField(\"id\", numberOfDocs++);\n    multiValuedSnippet.addField(\"title\", \"Title\");\n    multiValuedSnippet.addField(\"url\", \"URL\");\n    multiValuedSnippet.addField(\"snippet\", \"First value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Second value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Third value of multi field. Some more text. And still more.\");\n    assertNull(h.validateUpdate(adoc(multiValuedSnippet)));\n\n    // Add a document with multi-field title and snippet\n    final SolrInputDocument multiFieldDoc = new SolrInputDocument();\n    multiFieldDoc.addField(\"id\", numberOfDocs++);\n    multiFieldDoc.addField(\"title\", \"Title field\");\n    multiFieldDoc.addField(\"heading\", \"Heading field\");\n    multiFieldDoc.addField(\"url\", \"URL\");\n    multiFieldDoc.addField(\"snippet\", \"Snippet field: this is the contents of the snippet field.\");\n    multiFieldDoc.addField(\"body\", \"Body field: this is the contents of the body field that will get clustered together with snippet.\");\n    assertNull(h.validateUpdate(adoc(multiFieldDoc)));\n    \n    // Add a document with one language supported by Carrot2\n    final SolrInputDocument docWithOneSupprtedLanguage = new SolrInputDocument();\n    docWithOneSupprtedLanguage.addField(\"id\", numberOfDocs++);\n    docWithOneSupprtedLanguage.addField(\"title\", \"\");\n    docWithOneSupprtedLanguage.addField(\"url\", \"one_supported_language\");\n    docWithOneSupprtedLanguage.addField(\"lang\", \"zh-cn\");\n    assertNull(h.validateUpdate(adoc(docWithOneSupprtedLanguage)));\n    \n    // Add a document with more languages, one supported by Carrot2\n    final SolrInputDocument docWithOneSupprtedLanguageOfMany = new SolrInputDocument();\n    docWithOneSupprtedLanguageOfMany.addField(\"id\", numberOfDocs++);\n    docWithOneSupprtedLanguageOfMany.addField(\"url\", \"one_supported_language_of_many\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"zh-tw\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"POLISH\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"de\");\n    assertNull(h.validateUpdate(adoc(docWithOneSupprtedLanguageOfMany)));\n    \n    // Add a document with more languages, one supported by Carrot2\n    final SolrInputDocument docWithCustomFields = new SolrInputDocument();\n    docWithCustomFields.addField(\"id\", numberOfDocs++);\n    docWithCustomFields.addField(\"url\", \"custom_fields\");\n    docWithCustomFields.addField(\"intfield_i\", 10);\n    docWithCustomFields.addField(\"floatfield_f\", 10.5);\n    docWithCustomFields.addField(\"heading\", \"first\");\n    docWithCustomFields.addField(\"heading\", \"second\");\n    assertNull(h.validateUpdate(adoc(docWithCustomFields)));\n    \n    assertNull(h.validateUpdate(commit()));\n  }\n\n","sourceOld":"  @BeforeClass\n  public static void beforeClass() throws Exception {\n    initCore(\"solrconfig.xml\", \"schema.xml\", \"clustering/solr\");\n    numberOfDocs = 0;\n    for (String[] doc : DOCUMENTS) {\n      assertNull(h.validateUpdate(adoc(\"id\", Integer.toString(numberOfDocs), \"url\", doc[0], \"title\", doc[1], \"snippet\", doc[2])));\n      numberOfDocs++;\n    }\n    assertNull(h.validateUpdate(commit()));\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"788184b02a01588fb0bca602e39018a580397a99","date":1378925127,"type":3,"author":"Dawid Weiss","isMerge":false,"pathNew":"solr/contrib/clustering/src/test/org/apache/solr/handler/clustering/AbstractClusteringTestCase#beforeClass().mjava","pathOld":"solr/contrib/clustering/src/test/org/apache/solr/handler/clustering/AbstractClusteringTestCase#beforeClass().mjava","sourceNew":"  @BeforeClass\n  public static void beforeClass() throws Exception {\n    initCore(\"solrconfig.xml\", \"schema.xml\", \"clustering/solr\");\n    numberOfDocs = 0;\n    for (String[] doc : DOCUMENTS) {\n      assertNull(h.validateUpdate(adoc(\"id\", Integer.toString(numberOfDocs), \"url\", doc[0], \"title\", doc[1], \"snippet\", doc[2])));\n      numberOfDocs++;\n    }\n    \n    // Add a multi-valued snippet\n    final SolrInputDocument multiValuedSnippet = new SolrInputDocument();\n    multiValuedSnippet.addField(\"id\", numberOfDocs++);\n    multiValuedSnippet.addField(\"title\", \"Title\");\n    multiValuedSnippet.addField(\"url\", \"URL\");\n    multiValuedSnippet.addField(\"snippet\", \"First value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Second value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Third value of multi field. Some more text. And still more.\");\n    assertNull(h.validateUpdate(adoc(multiValuedSnippet)));\n\n    // Add a document with multi-field title and snippet\n    final SolrInputDocument multiFieldDoc = new SolrInputDocument();\n    multiFieldDoc.addField(\"id\", numberOfDocs++);\n    multiFieldDoc.addField(\"title\", \"Title field\");\n    multiFieldDoc.addField(\"heading\", \"Heading field\");\n    multiFieldDoc.addField(\"url\", \"URL\");\n    multiFieldDoc.addField(\"snippet\", \"Snippet field: this is the contents of the snippet field.\");\n    multiFieldDoc.addField(\"body\", \"Body field: this is the contents of the body field that will get clustered together with snippet.\");\n    assertNull(h.validateUpdate(adoc(multiFieldDoc)));\n    \n    // Add a document with one language supported by Carrot2\n    final SolrInputDocument docWithOneSupprtedLanguage = new SolrInputDocument();\n    docWithOneSupprtedLanguage.addField(\"id\", numberOfDocs++);\n    docWithOneSupprtedLanguage.addField(\"title\", \"\");\n    docWithOneSupprtedLanguage.addField(\"url\", \"one_supported_language\");\n    docWithOneSupprtedLanguage.addField(\"lang\", \"zh-cn\");\n    assertNull(h.validateUpdate(adoc(docWithOneSupprtedLanguage)));\n    \n    // Add a document with more languages, one supported by Carrot2\n    final SolrInputDocument docWithOneSupprtedLanguageOfMany = new SolrInputDocument();\n    docWithOneSupprtedLanguageOfMany.addField(\"id\", numberOfDocs++);\n    docWithOneSupprtedLanguageOfMany.addField(\"url\", \"one_supported_language_of_many\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"zh-tw\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"POLISH\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"de\");\n    assertNull(h.validateUpdate(adoc(docWithOneSupprtedLanguageOfMany)));\n    \n    // Add a document with more languages, one supported by Carrot2\n    final SolrInputDocument docWithCustomFields = new SolrInputDocument();\n    docWithCustomFields.addField(\"id\", numberOfDocs++);\n    docWithCustomFields.addField(\"url\", \"custom_fields\");\n    docWithCustomFields.addField(\"intfield_i\", 10);\n    docWithCustomFields.addField(\"floatfield_f\", 10.5);\n    docWithCustomFields.addField(\"heading\", \"first\");\n    docWithCustomFields.addField(\"heading\", \"second\");\n    assertNull(h.validateUpdate(adoc(docWithCustomFields)));\n    assertNull(h.validateUpdate(commit()));\n  }\n\n","sourceOld":"  @BeforeClass\n  public static void beforeClass() throws Exception {\n    initCore(\"solrconfig.xml\", \"schema.xml\", \"clustering/solr\");\n    numberOfDocs = 0;\n    for (String[] doc : DOCUMENTS) {\n      assertNull(h.validateUpdate(adoc(\"id\", Integer.toString(numberOfDocs), \"url\", doc[0], \"title\", doc[1], \"snippet\", doc[2])));\n      numberOfDocs++;\n    }\n    \n    // Add a multi-valued snippet\n    final SolrInputDocument multiValuedSnippet = new SolrInputDocument();\n    multiValuedSnippet.addField(\"id\", numberOfDocs++);\n    multiValuedSnippet.addField(\"title\", \"Title\");\n    multiValuedSnippet.addField(\"url\", \"URL\");\n    multiValuedSnippet.addField(\"snippet\", \"First value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Second value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Third value of multi field. Some more text. And still more.\");\n    assertNull(h.validateUpdate(adoc(multiValuedSnippet)));\n\n    // Add a document with multi-field title and snippet\n    final SolrInputDocument multiFieldDoc = new SolrInputDocument();\n    multiFieldDoc.addField(\"id\", numberOfDocs++);\n    multiFieldDoc.addField(\"title\", \"Title field\");\n    multiFieldDoc.addField(\"heading\", \"Heading field\");\n    multiFieldDoc.addField(\"url\", \"URL\");\n    multiFieldDoc.addField(\"snippet\", \"Snippet field: this is the contents of the snippet field.\");\n    multiFieldDoc.addField(\"body\", \"Body field: this is the contents of the body field that will get clustered together with snippet.\");\n    assertNull(h.validateUpdate(adoc(multiFieldDoc)));\n    \n    // Add a document with one language supported by Carrot2\n    final SolrInputDocument docWithOneSupprtedLanguage = new SolrInputDocument();\n    docWithOneSupprtedLanguage.addField(\"id\", numberOfDocs++);\n    docWithOneSupprtedLanguage.addField(\"title\", \"\");\n    docWithOneSupprtedLanguage.addField(\"url\", \"one_supported_language\");\n    docWithOneSupprtedLanguage.addField(\"lang\", \"zh-cn\");\n    assertNull(h.validateUpdate(adoc(docWithOneSupprtedLanguage)));\n    \n    // Add a document with more languages, one supported by Carrot2\n    final SolrInputDocument docWithOneSupprtedLanguageOfMany = new SolrInputDocument();\n    docWithOneSupprtedLanguageOfMany.addField(\"id\", numberOfDocs++);\n    docWithOneSupprtedLanguageOfMany.addField(\"url\", \"one_supported_language_of_many\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"zh-tw\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"POLISH\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"de\");\n    assertNull(h.validateUpdate(adoc(docWithOneSupprtedLanguageOfMany)));\n    \n    // Add a document with more languages, one supported by Carrot2\n    final SolrInputDocument docWithCustomFields = new SolrInputDocument();\n    docWithCustomFields.addField(\"id\", numberOfDocs++);\n    docWithCustomFields.addField(\"url\", \"custom_fields\");\n    docWithCustomFields.addField(\"intfield_i\", 10);\n    docWithCustomFields.addField(\"floatfield_f\", 10.5);\n    docWithCustomFields.addField(\"heading\", \"first\");\n    docWithCustomFields.addField(\"heading\", \"second\");\n    assertNull(h.validateUpdate(adoc(docWithCustomFields)));\n    \n    assertNull(h.validateUpdate(commit()));\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"4a9c941a7004ea2e95b10aa67dafa319ff8d8c19","date":1400739326,"type":3,"author":"Dawid Weiss","isMerge":false,"pathNew":"solr/contrib/clustering/src/test/org/apache/solr/handler/clustering/AbstractClusteringTestCase#beforeClass().mjava","pathOld":"solr/contrib/clustering/src/test/org/apache/solr/handler/clustering/AbstractClusteringTestCase#beforeClass().mjava","sourceNew":"  @BeforeClass\n  public static void beforeClass() throws Exception {\n    File testHome = createTempDir();\n    FileUtils.copyDirectory(getFile(\"clustering/solr\"), testHome);\n    initCore(\"solrconfig.xml\", \"schema.xml\", testHome.getAbsolutePath());\n    numberOfDocs = 0;\n    for (String[] doc : DOCUMENTS) {\n      assertNull(h.validateUpdate(adoc(\"id\", Integer.toString(numberOfDocs), \"url\", doc[0], \"title\", doc[1], \"snippet\", doc[2])));\n      numberOfDocs++;\n    }\n    \n    // Add a multi-valued snippet\n    final SolrInputDocument multiValuedSnippet = new SolrInputDocument();\n    multiValuedSnippet.addField(\"id\", numberOfDocs++);\n    multiValuedSnippet.addField(\"title\", \"Title\");\n    multiValuedSnippet.addField(\"url\", \"URL\");\n    multiValuedSnippet.addField(\"snippet\", \"First value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Second value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Third value of multi field. Some more text. And still more.\");\n    assertNull(h.validateUpdate(adoc(multiValuedSnippet)));\n\n    // Add a document with multi-field title and snippet\n    final SolrInputDocument multiFieldDoc = new SolrInputDocument();\n    multiFieldDoc.addField(\"id\", numberOfDocs++);\n    multiFieldDoc.addField(\"title\", \"Title field\");\n    multiFieldDoc.addField(\"heading\", \"Heading field\");\n    multiFieldDoc.addField(\"url\", \"URL\");\n    multiFieldDoc.addField(\"snippet\", \"Snippet field: this is the contents of the snippet field.\");\n    multiFieldDoc.addField(\"body\", \"Body field: this is the contents of the body field that will get clustered together with snippet.\");\n    assertNull(h.validateUpdate(adoc(multiFieldDoc)));\n    \n    // Add a document with one language supported by Carrot2\n    final SolrInputDocument docWithOneSupprtedLanguage = new SolrInputDocument();\n    docWithOneSupprtedLanguage.addField(\"id\", numberOfDocs++);\n    docWithOneSupprtedLanguage.addField(\"title\", \"\");\n    docWithOneSupprtedLanguage.addField(\"url\", \"one_supported_language\");\n    docWithOneSupprtedLanguage.addField(\"lang\", \"zh-cn\");\n    assertNull(h.validateUpdate(adoc(docWithOneSupprtedLanguage)));\n    \n    // Add a document with more languages, one supported by Carrot2\n    final SolrInputDocument docWithOneSupprtedLanguageOfMany = new SolrInputDocument();\n    docWithOneSupprtedLanguageOfMany.addField(\"id\", numberOfDocs++);\n    docWithOneSupprtedLanguageOfMany.addField(\"url\", \"one_supported_language_of_many\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"zh-tw\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"POLISH\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"de\");\n    assertNull(h.validateUpdate(adoc(docWithOneSupprtedLanguageOfMany)));\n    \n    // Add a document with more languages, one supported by Carrot2\n    final SolrInputDocument docWithCustomFields = new SolrInputDocument();\n    docWithCustomFields.addField(\"id\", numberOfDocs++);\n    docWithCustomFields.addField(\"url\", \"custom_fields\");\n    docWithCustomFields.addField(\"intfield_i\", 10);\n    docWithCustomFields.addField(\"floatfield_f\", 10.5);\n    docWithCustomFields.addField(\"heading\", \"first\");\n    docWithCustomFields.addField(\"heading\", \"second\");\n    assertNull(h.validateUpdate(adoc(docWithCustomFields)));\n    assertNull(h.validateUpdate(commit()));\n  }\n\n","sourceOld":"  @BeforeClass\n  public static void beforeClass() throws Exception {\n    initCore(\"solrconfig.xml\", \"schema.xml\", \"clustering/solr\");\n    numberOfDocs = 0;\n    for (String[] doc : DOCUMENTS) {\n      assertNull(h.validateUpdate(adoc(\"id\", Integer.toString(numberOfDocs), \"url\", doc[0], \"title\", doc[1], \"snippet\", doc[2])));\n      numberOfDocs++;\n    }\n    \n    // Add a multi-valued snippet\n    final SolrInputDocument multiValuedSnippet = new SolrInputDocument();\n    multiValuedSnippet.addField(\"id\", numberOfDocs++);\n    multiValuedSnippet.addField(\"title\", \"Title\");\n    multiValuedSnippet.addField(\"url\", \"URL\");\n    multiValuedSnippet.addField(\"snippet\", \"First value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Second value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Third value of multi field. Some more text. And still more.\");\n    assertNull(h.validateUpdate(adoc(multiValuedSnippet)));\n\n    // Add a document with multi-field title and snippet\n    final SolrInputDocument multiFieldDoc = new SolrInputDocument();\n    multiFieldDoc.addField(\"id\", numberOfDocs++);\n    multiFieldDoc.addField(\"title\", \"Title field\");\n    multiFieldDoc.addField(\"heading\", \"Heading field\");\n    multiFieldDoc.addField(\"url\", \"URL\");\n    multiFieldDoc.addField(\"snippet\", \"Snippet field: this is the contents of the snippet field.\");\n    multiFieldDoc.addField(\"body\", \"Body field: this is the contents of the body field that will get clustered together with snippet.\");\n    assertNull(h.validateUpdate(adoc(multiFieldDoc)));\n    \n    // Add a document with one language supported by Carrot2\n    final SolrInputDocument docWithOneSupprtedLanguage = new SolrInputDocument();\n    docWithOneSupprtedLanguage.addField(\"id\", numberOfDocs++);\n    docWithOneSupprtedLanguage.addField(\"title\", \"\");\n    docWithOneSupprtedLanguage.addField(\"url\", \"one_supported_language\");\n    docWithOneSupprtedLanguage.addField(\"lang\", \"zh-cn\");\n    assertNull(h.validateUpdate(adoc(docWithOneSupprtedLanguage)));\n    \n    // Add a document with more languages, one supported by Carrot2\n    final SolrInputDocument docWithOneSupprtedLanguageOfMany = new SolrInputDocument();\n    docWithOneSupprtedLanguageOfMany.addField(\"id\", numberOfDocs++);\n    docWithOneSupprtedLanguageOfMany.addField(\"url\", \"one_supported_language_of_many\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"zh-tw\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"POLISH\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"de\");\n    assertNull(h.validateUpdate(adoc(docWithOneSupprtedLanguageOfMany)));\n    \n    // Add a document with more languages, one supported by Carrot2\n    final SolrInputDocument docWithCustomFields = new SolrInputDocument();\n    docWithCustomFields.addField(\"id\", numberOfDocs++);\n    docWithCustomFields.addField(\"url\", \"custom_fields\");\n    docWithCustomFields.addField(\"intfield_i\", 10);\n    docWithCustomFields.addField(\"floatfield_f\", 10.5);\n    docWithCustomFields.addField(\"heading\", \"first\");\n    docWithCustomFields.addField(\"heading\", \"second\");\n    assertNull(h.validateUpdate(adoc(docWithCustomFields)));\n    assertNull(h.validateUpdate(commit()));\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"b7605579001505896d48b07160075a5c8b8e128e","date":1400758727,"type":3,"author":"Michael McCandless","isMerge":true,"pathNew":"solr/contrib/clustering/src/test/org/apache/solr/handler/clustering/AbstractClusteringTestCase#beforeClass().mjava","pathOld":"solr/contrib/clustering/src/test/org/apache/solr/handler/clustering/AbstractClusteringTestCase#beforeClass().mjava","sourceNew":"  @BeforeClass\n  public static void beforeClass() throws Exception {\n    File testHome = createTempDir();\n    FileUtils.copyDirectory(getFile(\"clustering/solr\"), testHome);\n    initCore(\"solrconfig.xml\", \"schema.xml\", testHome.getAbsolutePath());\n    numberOfDocs = 0;\n    for (String[] doc : DOCUMENTS) {\n      assertNull(h.validateUpdate(adoc(\"id\", Integer.toString(numberOfDocs), \"url\", doc[0], \"title\", doc[1], \"snippet\", doc[2])));\n      numberOfDocs++;\n    }\n    \n    // Add a multi-valued snippet\n    final SolrInputDocument multiValuedSnippet = new SolrInputDocument();\n    multiValuedSnippet.addField(\"id\", numberOfDocs++);\n    multiValuedSnippet.addField(\"title\", \"Title\");\n    multiValuedSnippet.addField(\"url\", \"URL\");\n    multiValuedSnippet.addField(\"snippet\", \"First value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Second value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Third value of multi field. Some more text. And still more.\");\n    assertNull(h.validateUpdate(adoc(multiValuedSnippet)));\n\n    // Add a document with multi-field title and snippet\n    final SolrInputDocument multiFieldDoc = new SolrInputDocument();\n    multiFieldDoc.addField(\"id\", numberOfDocs++);\n    multiFieldDoc.addField(\"title\", \"Title field\");\n    multiFieldDoc.addField(\"heading\", \"Heading field\");\n    multiFieldDoc.addField(\"url\", \"URL\");\n    multiFieldDoc.addField(\"snippet\", \"Snippet field: this is the contents of the snippet field.\");\n    multiFieldDoc.addField(\"body\", \"Body field: this is the contents of the body field that will get clustered together with snippet.\");\n    assertNull(h.validateUpdate(adoc(multiFieldDoc)));\n    \n    // Add a document with one language supported by Carrot2\n    final SolrInputDocument docWithOneSupprtedLanguage = new SolrInputDocument();\n    docWithOneSupprtedLanguage.addField(\"id\", numberOfDocs++);\n    docWithOneSupprtedLanguage.addField(\"title\", \"\");\n    docWithOneSupprtedLanguage.addField(\"url\", \"one_supported_language\");\n    docWithOneSupprtedLanguage.addField(\"lang\", \"zh-cn\");\n    assertNull(h.validateUpdate(adoc(docWithOneSupprtedLanguage)));\n    \n    // Add a document with more languages, one supported by Carrot2\n    final SolrInputDocument docWithOneSupprtedLanguageOfMany = new SolrInputDocument();\n    docWithOneSupprtedLanguageOfMany.addField(\"id\", numberOfDocs++);\n    docWithOneSupprtedLanguageOfMany.addField(\"url\", \"one_supported_language_of_many\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"zh-tw\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"POLISH\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"de\");\n    assertNull(h.validateUpdate(adoc(docWithOneSupprtedLanguageOfMany)));\n    \n    // Add a document with more languages, one supported by Carrot2\n    final SolrInputDocument docWithCustomFields = new SolrInputDocument();\n    docWithCustomFields.addField(\"id\", numberOfDocs++);\n    docWithCustomFields.addField(\"url\", \"custom_fields\");\n    docWithCustomFields.addField(\"intfield_i\", 10);\n    docWithCustomFields.addField(\"floatfield_f\", 10.5);\n    docWithCustomFields.addField(\"heading\", \"first\");\n    docWithCustomFields.addField(\"heading\", \"second\");\n    assertNull(h.validateUpdate(adoc(docWithCustomFields)));\n    assertNull(h.validateUpdate(commit()));\n  }\n\n","sourceOld":"  @BeforeClass\n  public static void beforeClass() throws Exception {\n    initCore(\"solrconfig.xml\", \"schema.xml\", \"clustering/solr\");\n    numberOfDocs = 0;\n    for (String[] doc : DOCUMENTS) {\n      assertNull(h.validateUpdate(adoc(\"id\", Integer.toString(numberOfDocs), \"url\", doc[0], \"title\", doc[1], \"snippet\", doc[2])));\n      numberOfDocs++;\n    }\n    \n    // Add a multi-valued snippet\n    final SolrInputDocument multiValuedSnippet = new SolrInputDocument();\n    multiValuedSnippet.addField(\"id\", numberOfDocs++);\n    multiValuedSnippet.addField(\"title\", \"Title\");\n    multiValuedSnippet.addField(\"url\", \"URL\");\n    multiValuedSnippet.addField(\"snippet\", \"First value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Second value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Third value of multi field. Some more text. And still more.\");\n    assertNull(h.validateUpdate(adoc(multiValuedSnippet)));\n\n    // Add a document with multi-field title and snippet\n    final SolrInputDocument multiFieldDoc = new SolrInputDocument();\n    multiFieldDoc.addField(\"id\", numberOfDocs++);\n    multiFieldDoc.addField(\"title\", \"Title field\");\n    multiFieldDoc.addField(\"heading\", \"Heading field\");\n    multiFieldDoc.addField(\"url\", \"URL\");\n    multiFieldDoc.addField(\"snippet\", \"Snippet field: this is the contents of the snippet field.\");\n    multiFieldDoc.addField(\"body\", \"Body field: this is the contents of the body field that will get clustered together with snippet.\");\n    assertNull(h.validateUpdate(adoc(multiFieldDoc)));\n    \n    // Add a document with one language supported by Carrot2\n    final SolrInputDocument docWithOneSupprtedLanguage = new SolrInputDocument();\n    docWithOneSupprtedLanguage.addField(\"id\", numberOfDocs++);\n    docWithOneSupprtedLanguage.addField(\"title\", \"\");\n    docWithOneSupprtedLanguage.addField(\"url\", \"one_supported_language\");\n    docWithOneSupprtedLanguage.addField(\"lang\", \"zh-cn\");\n    assertNull(h.validateUpdate(adoc(docWithOneSupprtedLanguage)));\n    \n    // Add a document with more languages, one supported by Carrot2\n    final SolrInputDocument docWithOneSupprtedLanguageOfMany = new SolrInputDocument();\n    docWithOneSupprtedLanguageOfMany.addField(\"id\", numberOfDocs++);\n    docWithOneSupprtedLanguageOfMany.addField(\"url\", \"one_supported_language_of_many\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"zh-tw\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"POLISH\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"de\");\n    assertNull(h.validateUpdate(adoc(docWithOneSupprtedLanguageOfMany)));\n    \n    // Add a document with more languages, one supported by Carrot2\n    final SolrInputDocument docWithCustomFields = new SolrInputDocument();\n    docWithCustomFields.addField(\"id\", numberOfDocs++);\n    docWithCustomFields.addField(\"url\", \"custom_fields\");\n    docWithCustomFields.addField(\"intfield_i\", 10);\n    docWithCustomFields.addField(\"floatfield_f\", 10.5);\n    docWithCustomFields.addField(\"heading\", \"first\");\n    docWithCustomFields.addField(\"heading\", \"second\");\n    assertNull(h.validateUpdate(adoc(docWithCustomFields)));\n    assertNull(h.validateUpdate(commit()));\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"f4abec28b874149a7223e32cc7a01704c27790de","date":1410644789,"type":3,"author":"Robert Muir","isMerge":false,"pathNew":"solr/contrib/clustering/src/test/org/apache/solr/handler/clustering/AbstractClusteringTestCase#beforeClass().mjava","pathOld":"solr/contrib/clustering/src/test/org/apache/solr/handler/clustering/AbstractClusteringTestCase#beforeClass().mjava","sourceNew":"  @BeforeClass\n  public static void beforeClass() throws Exception {\n    File testHome = createTempDir().toFile();\n    FileUtils.copyDirectory(getFile(\"clustering/solr\"), testHome);\n    initCore(\"solrconfig.xml\", \"schema.xml\", testHome.getAbsolutePath());\n    numberOfDocs = 0;\n    for (String[] doc : DOCUMENTS) {\n      assertNull(h.validateUpdate(adoc(\"id\", Integer.toString(numberOfDocs), \"url\", doc[0], \"title\", doc[1], \"snippet\", doc[2])));\n      numberOfDocs++;\n    }\n    \n    // Add a multi-valued snippet\n    final SolrInputDocument multiValuedSnippet = new SolrInputDocument();\n    multiValuedSnippet.addField(\"id\", numberOfDocs++);\n    multiValuedSnippet.addField(\"title\", \"Title\");\n    multiValuedSnippet.addField(\"url\", \"URL\");\n    multiValuedSnippet.addField(\"snippet\", \"First value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Second value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Third value of multi field. Some more text. And still more.\");\n    assertNull(h.validateUpdate(adoc(multiValuedSnippet)));\n\n    // Add a document with multi-field title and snippet\n    final SolrInputDocument multiFieldDoc = new SolrInputDocument();\n    multiFieldDoc.addField(\"id\", numberOfDocs++);\n    multiFieldDoc.addField(\"title\", \"Title field\");\n    multiFieldDoc.addField(\"heading\", \"Heading field\");\n    multiFieldDoc.addField(\"url\", \"URL\");\n    multiFieldDoc.addField(\"snippet\", \"Snippet field: this is the contents of the snippet field.\");\n    multiFieldDoc.addField(\"body\", \"Body field: this is the contents of the body field that will get clustered together with snippet.\");\n    assertNull(h.validateUpdate(adoc(multiFieldDoc)));\n    \n    // Add a document with one language supported by Carrot2\n    final SolrInputDocument docWithOneSupprtedLanguage = new SolrInputDocument();\n    docWithOneSupprtedLanguage.addField(\"id\", numberOfDocs++);\n    docWithOneSupprtedLanguage.addField(\"title\", \"\");\n    docWithOneSupprtedLanguage.addField(\"url\", \"one_supported_language\");\n    docWithOneSupprtedLanguage.addField(\"lang\", \"zh-cn\");\n    assertNull(h.validateUpdate(adoc(docWithOneSupprtedLanguage)));\n    \n    // Add a document with more languages, one supported by Carrot2\n    final SolrInputDocument docWithOneSupprtedLanguageOfMany = new SolrInputDocument();\n    docWithOneSupprtedLanguageOfMany.addField(\"id\", numberOfDocs++);\n    docWithOneSupprtedLanguageOfMany.addField(\"url\", \"one_supported_language_of_many\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"zh-tw\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"POLISH\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"de\");\n    assertNull(h.validateUpdate(adoc(docWithOneSupprtedLanguageOfMany)));\n    \n    // Add a document with more languages, one supported by Carrot2\n    final SolrInputDocument docWithCustomFields = new SolrInputDocument();\n    docWithCustomFields.addField(\"id\", numberOfDocs++);\n    docWithCustomFields.addField(\"url\", \"custom_fields\");\n    docWithCustomFields.addField(\"intfield_i\", 10);\n    docWithCustomFields.addField(\"floatfield_f\", 10.5);\n    docWithCustomFields.addField(\"heading\", \"first\");\n    docWithCustomFields.addField(\"heading\", \"second\");\n    assertNull(h.validateUpdate(adoc(docWithCustomFields)));\n    assertNull(h.validateUpdate(commit()));\n  }\n\n","sourceOld":"  @BeforeClass\n  public static void beforeClass() throws Exception {\n    File testHome = createTempDir();\n    FileUtils.copyDirectory(getFile(\"clustering/solr\"), testHome);\n    initCore(\"solrconfig.xml\", \"schema.xml\", testHome.getAbsolutePath());\n    numberOfDocs = 0;\n    for (String[] doc : DOCUMENTS) {\n      assertNull(h.validateUpdate(adoc(\"id\", Integer.toString(numberOfDocs), \"url\", doc[0], \"title\", doc[1], \"snippet\", doc[2])));\n      numberOfDocs++;\n    }\n    \n    // Add a multi-valued snippet\n    final SolrInputDocument multiValuedSnippet = new SolrInputDocument();\n    multiValuedSnippet.addField(\"id\", numberOfDocs++);\n    multiValuedSnippet.addField(\"title\", \"Title\");\n    multiValuedSnippet.addField(\"url\", \"URL\");\n    multiValuedSnippet.addField(\"snippet\", \"First value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Second value of multi field. Some more text. And still more.\");\n    multiValuedSnippet.addField(\"snippet\", \"Third value of multi field. Some more text. And still more.\");\n    assertNull(h.validateUpdate(adoc(multiValuedSnippet)));\n\n    // Add a document with multi-field title and snippet\n    final SolrInputDocument multiFieldDoc = new SolrInputDocument();\n    multiFieldDoc.addField(\"id\", numberOfDocs++);\n    multiFieldDoc.addField(\"title\", \"Title field\");\n    multiFieldDoc.addField(\"heading\", \"Heading field\");\n    multiFieldDoc.addField(\"url\", \"URL\");\n    multiFieldDoc.addField(\"snippet\", \"Snippet field: this is the contents of the snippet field.\");\n    multiFieldDoc.addField(\"body\", \"Body field: this is the contents of the body field that will get clustered together with snippet.\");\n    assertNull(h.validateUpdate(adoc(multiFieldDoc)));\n    \n    // Add a document with one language supported by Carrot2\n    final SolrInputDocument docWithOneSupprtedLanguage = new SolrInputDocument();\n    docWithOneSupprtedLanguage.addField(\"id\", numberOfDocs++);\n    docWithOneSupprtedLanguage.addField(\"title\", \"\");\n    docWithOneSupprtedLanguage.addField(\"url\", \"one_supported_language\");\n    docWithOneSupprtedLanguage.addField(\"lang\", \"zh-cn\");\n    assertNull(h.validateUpdate(adoc(docWithOneSupprtedLanguage)));\n    \n    // Add a document with more languages, one supported by Carrot2\n    final SolrInputDocument docWithOneSupprtedLanguageOfMany = new SolrInputDocument();\n    docWithOneSupprtedLanguageOfMany.addField(\"id\", numberOfDocs++);\n    docWithOneSupprtedLanguageOfMany.addField(\"url\", \"one_supported_language_of_many\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"zh-tw\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"POLISH\");\n    docWithOneSupprtedLanguageOfMany.addField(\"lang\", \"de\");\n    assertNull(h.validateUpdate(adoc(docWithOneSupprtedLanguageOfMany)));\n    \n    // Add a document with more languages, one supported by Carrot2\n    final SolrInputDocument docWithCustomFields = new SolrInputDocument();\n    docWithCustomFields.addField(\"id\", numberOfDocs++);\n    docWithCustomFields.addField(\"url\", \"custom_fields\");\n    docWithCustomFields.addField(\"intfield_i\", 10);\n    docWithCustomFields.addField(\"floatfield_f\", 10.5);\n    docWithCustomFields.addField(\"heading\", \"first\");\n    docWithCustomFields.addField(\"heading\", \"second\");\n    assertNull(h.validateUpdate(adoc(docWithCustomFields)));\n    assertNull(h.validateUpdate(commit()));\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"57123f858a48ace813624f9da70ca12bd803571f":["f25fe5576647e3bdd2a797a9900982532d5e2e97"],"c26f00b574427b55127e869b935845554afde1fa":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","5128b7b3b73fedff05fdc5ea2e6be53c1020bb91"],"3b0bf71278457cb04b0666bf73b8aa71d36be8c4":["abd55340ba9df8b62edcd692b34e46cf0614a52e"],"788184b02a01588fb0bca602e39018a580397a99":["74acabcbc6eae18c349c56bd385f9e42433afca3"],"b7605579001505896d48b07160075a5c8b8e128e":["788184b02a01588fb0bca602e39018a580397a99","4a9c941a7004ea2e95b10aa67dafa319ff8d8c19"],"f4abec28b874149a7223e32cc7a01704c27790de":["4a9c941a7004ea2e95b10aa67dafa319ff8d8c19"],"4a9c941a7004ea2e95b10aa67dafa319ff8d8c19":["788184b02a01588fb0bca602e39018a580397a99"],"74acabcbc6eae18c349c56bd385f9e42433afca3":["57123f858a48ace813624f9da70ca12bd803571f"],"5128b7b3b73fedff05fdc5ea2e6be53c1020bb91":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"ff99371bc1f34bf1a2ccdb754940ee5fe5cc2565":["abd55340ba9df8b62edcd692b34e46cf0614a52e","74acabcbc6eae18c349c56bd385f9e42433afca3"],"f25fe5576647e3bdd2a797a9900982532d5e2e97":["3b0bf71278457cb04b0666bf73b8aa71d36be8c4"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["f4abec28b874149a7223e32cc7a01704c27790de"],"abd55340ba9df8b62edcd692b34e46cf0614a52e":["c26f00b574427b55127e869b935845554afde1fa"]},"commit2Childs":{"57123f858a48ace813624f9da70ca12bd803571f":["74acabcbc6eae18c349c56bd385f9e42433afca3"],"c26f00b574427b55127e869b935845554afde1fa":["abd55340ba9df8b62edcd692b34e46cf0614a52e"],"3b0bf71278457cb04b0666bf73b8aa71d36be8c4":["f25fe5576647e3bdd2a797a9900982532d5e2e97"],"788184b02a01588fb0bca602e39018a580397a99":["b7605579001505896d48b07160075a5c8b8e128e","4a9c941a7004ea2e95b10aa67dafa319ff8d8c19"],"b7605579001505896d48b07160075a5c8b8e128e":[],"f4abec28b874149a7223e32cc7a01704c27790de":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"4a9c941a7004ea2e95b10aa67dafa319ff8d8c19":["b7605579001505896d48b07160075a5c8b8e128e","f4abec28b874149a7223e32cc7a01704c27790de"],"5128b7b3b73fedff05fdc5ea2e6be53c1020bb91":["c26f00b574427b55127e869b935845554afde1fa"],"74acabcbc6eae18c349c56bd385f9e42433afca3":["788184b02a01588fb0bca602e39018a580397a99","ff99371bc1f34bf1a2ccdb754940ee5fe5cc2565"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["c26f00b574427b55127e869b935845554afde1fa","5128b7b3b73fedff05fdc5ea2e6be53c1020bb91"],"ff99371bc1f34bf1a2ccdb754940ee5fe5cc2565":[],"f25fe5576647e3bdd2a797a9900982532d5e2e97":["57123f858a48ace813624f9da70ca12bd803571f"],"abd55340ba9df8b62edcd692b34e46cf0614a52e":["3b0bf71278457cb04b0666bf73b8aa71d36be8c4","ff99371bc1f34bf1a2ccdb754940ee5fe5cc2565"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["b7605579001505896d48b07160075a5c8b8e128e","ff99371bc1f34bf1a2ccdb754940ee5fe5cc2565","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}