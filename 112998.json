{"path":"lucene/suggest/src/java/org/apache/lucene/search/suggest/document/ContextQuery#toContextAutomaton(Map[IntsRef,ContextMetaData],boolean).mjava","commits":[{"id":"d3e870f9bab17325ebf91f7500d2c05596634741","date":1438287049,"type":0,"author":"Areek Zillur","isMerge":false,"pathNew":"lucene/suggest/src/java/org/apache/lucene/search/suggest/document/ContextQuery#toContextAutomaton(Map[IntsRef,ContextMetaData],boolean).mjava","pathOld":"/dev/null","sourceNew":"  private static Automaton toContextAutomaton(final Map<IntsRef, ContextMetaData> contexts, final boolean matchAllContexts) {\n    final Automaton matchAllAutomaton = Operations.repeat(Automata.makeAnyString());\n    final Automaton sep = Automata.makeChar(ContextSuggestField.CONTEXT_SEPARATOR);\n    if (matchAllContexts || contexts.size() == 0) {\n      return Operations.concatenate(matchAllAutomaton, sep);\n    } else {\n      Automaton contextsAutomaton = null;\n      for (Map.Entry<IntsRef, ContextMetaData> entry : contexts.entrySet()) {\n        final ContextMetaData contextMetaData = entry.getValue();\n        final IntsRef ref = entry.getKey();\n        Automaton contextAutomaton = Automata.makeString(ref.ints, ref.offset, ref.length);\n        if (contextMetaData.exact == false) {\n          contextAutomaton = Operations.concatenate(contextAutomaton, matchAllAutomaton);\n        }\n        contextAutomaton = Operations.concatenate(contextAutomaton, sep);\n        if (contextsAutomaton == null) {\n          contextsAutomaton = contextAutomaton;\n        } else {\n          contextsAutomaton = Operations.union(contextsAutomaton, contextAutomaton);\n        }\n      }\n      return contextsAutomaton;\n    }\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"d3e870f9bab17325ebf91f7500d2c05596634741":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["d3e870f9bab17325ebf91f7500d2c05596634741"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["d3e870f9bab17325ebf91f7500d2c05596634741"],"d3e870f9bab17325ebf91f7500d2c05596634741":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}