{"path":"solr/core/src/java/org/apache/solr/update/SolrCmdDistributor.Req#getRfFromResponse(InputStream).mjava","commits":[{"id":"1a77e5e21cbd575a8240b0e3926164f15295f4e8","date":1544979500,"type":1,"author":"Cao Manh Dat","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/update/SolrCmdDistributor.Req#getRfFromResponse(InputStream).mjava","pathOld":"solr/core/src/java/org/apache/solr/update/SolrCmdDistributor.Req#getRfFromResponse(HttpResponse).mjava","sourceNew":"    private int getRfFromResponse(InputStream inputStream) {\n      if (inputStream != null) {\n        try {\n          BinaryResponseParser brp = new BinaryResponseParser();\n          NamedList<Object> nl = brp.processResponse(inputStream, null);\n          Object hdr = nl.get(\"responseHeader\");\n          if (hdr != null && hdr instanceof NamedList) {\n            NamedList<Object> hdrList = (NamedList<Object>) hdr;\n            Object rfObj = hdrList.get(UpdateRequest.REPFACT);\n            if (rfObj != null && rfObj instanceof Integer) {\n              return (Integer) rfObj;\n            }\n          }\n        } catch (Exception e) {\n          log.warn(\"Failed to parse response from {} during replication factor accounting\", node, e);\n        } finally {\n          try {\n            inputStream.close();\n          } catch (Exception ignore) {\n          }\n        }\n      }\n      return Integer.MAX_VALUE;\n    }\n\n","sourceOld":"    private int getRfFromResponse(HttpResponse resp) {\n      if (resp != null) {\n\n        InputStream inputStream = null;\n\n        try {\n          inputStream = resp.getEntity().getContent();\n          BinaryResponseParser brp = new BinaryResponseParser();\n          NamedList<Object> nl = brp.processResponse(inputStream, null);\n          Object hdr = nl.get(\"responseHeader\");\n          if (hdr != null && hdr instanceof NamedList) {\n            NamedList<Object> hdrList = (NamedList<Object>) hdr;\n            Object rfObj = hdrList.get(UpdateRequest.REPFACT);\n            if (rfObj != null && rfObj instanceof Integer) {\n              return (Integer) rfObj;\n            }\n          }\n        } catch (Exception e) {\n          log.warn(\"Failed to parse response from {} during replication factor accounting\", node, e);\n        } finally {\n          if (inputStream != null) {\n            try {\n              inputStream.close();\n            } catch (Exception ignore) {\n            }\n          }\n        }\n      }\n      return Integer.MAX_VALUE;\n    }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"2fd332226a93e244bd33f35c03128eb09cbf3c88","date":1570651010,"type":3,"author":"Cao Manh Dat","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/update/SolrCmdDistributor.Req#getRfFromResponse(InputStream).mjava","pathOld":"solr/core/src/java/org/apache/solr/update/SolrCmdDistributor.Req#getRfFromResponse(InputStream).mjava","sourceNew":"    private int getRfFromResponse(InputStream inputStream) {\n      if (inputStream != null) {\n        try {\n          BinaryResponseParser brp = new BinaryResponseParser();\n          NamedList<Object> nl = brp.processResponse(inputStream, null);\n          Object hdr = nl.get(\"responseHeader\");\n          if (hdr != null && hdr instanceof NamedList) {\n            NamedList<Object> hdrList = (NamedList<Object>) hdr;\n            Object rfObj = hdrList.get(UpdateRequest.REPFACT);\n            if (rfObj != null && rfObj instanceof Integer) {\n              return (Integer) rfObj;\n            }\n          }\n        } catch (Exception e) {\n          log.warn(\"Failed to parse response from {} during replication factor accounting\", node, e);\n        }\n      }\n      return Integer.MAX_VALUE;\n    }\n\n","sourceOld":"    private int getRfFromResponse(InputStream inputStream) {\n      if (inputStream != null) {\n        try {\n          BinaryResponseParser brp = new BinaryResponseParser();\n          NamedList<Object> nl = brp.processResponse(inputStream, null);\n          Object hdr = nl.get(\"responseHeader\");\n          if (hdr != null && hdr instanceof NamedList) {\n            NamedList<Object> hdrList = (NamedList<Object>) hdr;\n            Object rfObj = hdrList.get(UpdateRequest.REPFACT);\n            if (rfObj != null && rfObj instanceof Integer) {\n              return (Integer) rfObj;\n            }\n          }\n        } catch (Exception e) {\n          log.warn(\"Failed to parse response from {} during replication factor accounting\", node, e);\n        } finally {\n          try {\n            inputStream.close();\n          } catch (Exception ignore) {\n          }\n        }\n      }\n      return Integer.MAX_VALUE;\n    }\n\n","bugFix":["1a77e5e21cbd575a8240b0e3926164f15295f4e8"],"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"b0b597c65628ca9e73913a07e81691f8229bae35","date":1571224353,"type":3,"author":"jimczi","isMerge":true,"pathNew":"solr/core/src/java/org/apache/solr/update/SolrCmdDistributor.Req#getRfFromResponse(InputStream).mjava","pathOld":"solr/core/src/java/org/apache/solr/update/SolrCmdDistributor.Req#getRfFromResponse(InputStream).mjava","sourceNew":"    private int getRfFromResponse(InputStream inputStream) {\n      if (inputStream != null) {\n        try {\n          BinaryResponseParser brp = new BinaryResponseParser();\n          NamedList<Object> nl = brp.processResponse(inputStream, null);\n          Object hdr = nl.get(\"responseHeader\");\n          if (hdr != null && hdr instanceof NamedList) {\n            NamedList<Object> hdrList = (NamedList<Object>) hdr;\n            Object rfObj = hdrList.get(UpdateRequest.REPFACT);\n            if (rfObj != null && rfObj instanceof Integer) {\n              return (Integer) rfObj;\n            }\n          }\n        } catch (Exception e) {\n          log.warn(\"Failed to parse response from {} during replication factor accounting\", node, e);\n        }\n      }\n      return Integer.MAX_VALUE;\n    }\n\n","sourceOld":"    private int getRfFromResponse(InputStream inputStream) {\n      if (inputStream != null) {\n        try {\n          BinaryResponseParser brp = new BinaryResponseParser();\n          NamedList<Object> nl = brp.processResponse(inputStream, null);\n          Object hdr = nl.get(\"responseHeader\");\n          if (hdr != null && hdr instanceof NamedList) {\n            NamedList<Object> hdrList = (NamedList<Object>) hdr;\n            Object rfObj = hdrList.get(UpdateRequest.REPFACT);\n            if (rfObj != null && rfObj instanceof Integer) {\n              return (Integer) rfObj;\n            }\n          }\n        } catch (Exception e) {\n          log.warn(\"Failed to parse response from {} during replication factor accounting\", node, e);\n        } finally {\n          try {\n            inputStream.close();\n          } catch (Exception ignore) {\n          }\n        }\n      }\n      return Integer.MAX_VALUE;\n    }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"018a36ff4088cb91ab12cbe44f696d81d1fadd77","date":1591657414,"type":3,"author":"Erick Erickson","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/update/SolrCmdDistributor.Req#getRfFromResponse(InputStream).mjava","pathOld":"solr/core/src/java/org/apache/solr/update/SolrCmdDistributor.Req#getRfFromResponse(InputStream).mjava","sourceNew":"    private int getRfFromResponse(InputStream inputStream) {\n      if (inputStream != null) {\n        try {\n          BinaryResponseParser brp = new BinaryResponseParser();\n          NamedList<Object> nl = brp.processResponse(inputStream, null);\n          Object hdr = nl.get(\"responseHeader\");\n          if (hdr != null && hdr instanceof NamedList) {\n            @SuppressWarnings({\"unchecked\"})\n            NamedList<Object> hdrList = (NamedList<Object>) hdr;\n            Object rfObj = hdrList.get(UpdateRequest.REPFACT);\n            if (rfObj != null && rfObj instanceof Integer) {\n              return (Integer) rfObj;\n            }\n          }\n        } catch (Exception e) {\n          log.warn(\"Failed to parse response from {} during replication factor accounting\", node, e);\n        }\n      }\n      return Integer.MAX_VALUE;\n    }\n\n","sourceOld":"    private int getRfFromResponse(InputStream inputStream) {\n      if (inputStream != null) {\n        try {\n          BinaryResponseParser brp = new BinaryResponseParser();\n          NamedList<Object> nl = brp.processResponse(inputStream, null);\n          Object hdr = nl.get(\"responseHeader\");\n          if (hdr != null && hdr instanceof NamedList) {\n            NamedList<Object> hdrList = (NamedList<Object>) hdr;\n            Object rfObj = hdrList.get(UpdateRequest.REPFACT);\n            if (rfObj != null && rfObj instanceof Integer) {\n              return (Integer) rfObj;\n            }\n          }\n        } catch (Exception e) {\n          log.warn(\"Failed to parse response from {} during replication factor accounting\", node, e);\n        }\n      }\n      return Integer.MAX_VALUE;\n    }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"1a77e5e21cbd575a8240b0e3926164f15295f4e8":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"018a36ff4088cb91ab12cbe44f696d81d1fadd77":["2fd332226a93e244bd33f35c03128eb09cbf3c88"],"2fd332226a93e244bd33f35c03128eb09cbf3c88":["1a77e5e21cbd575a8240b0e3926164f15295f4e8"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["018a36ff4088cb91ab12cbe44f696d81d1fadd77"],"b0b597c65628ca9e73913a07e81691f8229bae35":["1a77e5e21cbd575a8240b0e3926164f15295f4e8","2fd332226a93e244bd33f35c03128eb09cbf3c88"]},"commit2Childs":{"1a77e5e21cbd575a8240b0e3926164f15295f4e8":["2fd332226a93e244bd33f35c03128eb09cbf3c88","b0b597c65628ca9e73913a07e81691f8229bae35"],"018a36ff4088cb91ab12cbe44f696d81d1fadd77":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"2fd332226a93e244bd33f35c03128eb09cbf3c88":["018a36ff4088cb91ab12cbe44f696d81d1fadd77","b0b597c65628ca9e73913a07e81691f8229bae35"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["1a77e5e21cbd575a8240b0e3926164f15295f4e8"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[],"b0b597c65628ca9e73913a07e81691f8229bae35":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817","b0b597c65628ca9e73913a07e81691f8229bae35"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}