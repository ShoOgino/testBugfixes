{"path":"solr/core/src/test/org/apache/solr/search/TestReRankQParserPlugin#testReRankQueriesWithDefType().mjava","commits":[{"id":"eaa9c67a05a203ff23b684274f05fcc22d38dfb3","date":1515440645,"type":0,"author":"Christine Poerschke","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/search/TestReRankQParserPlugin#testReRankQueriesWithDefType().mjava","pathOld":"/dev/null","sourceNew":"  @Test\n  public void testReRankQueriesWithDefType() throws Exception {\n\n    assertU(delQ(\"*:*\"));\n    assertU(commit());\n\n    final String[] doc1 = {\"id\",\"1\"};\n    assertU(adoc(doc1));\n    assertU(commit());\n    final String[] doc2 = {\"id\",\"2\"};\n    assertU(adoc(doc2));\n    assertU(commit());\n\n    final String preferredDocId;\n    final String lessPreferrredDocId;\n    if (random().nextBoolean()) {\n      preferredDocId = \"1\";\n      lessPreferrredDocId = \"2\";\n    } else {\n      preferredDocId = \"2\";\n      lessPreferrredDocId = \"1\";\n    }\n\n    for (final String defType : new String[] {\n        null,\n        LuceneQParserPlugin.NAME,\n        ExtendedDismaxQParserPlugin.NAME\n    }) {\n      final ModifiableSolrParams params = new ModifiableSolrParams();\n      params.add(\"rq\", \"{!\"+ReRankQParserPlugin.NAME+\" \"+ReRankQParserPlugin.RERANK_QUERY+\"=id:\"+preferredDocId+\"}\");\n      params.add(\"q\", \"*:*\");\n      if (defType != null) {\n        params.add(QueryParsing.DEFTYPE, defType);\n      }\n      assertQ(req(params), \"*[count(//doc)=2]\",\n          \"//result/doc[1]/str[@name='id'][.='\"+preferredDocId+\"']\",\n          \"//result/doc[2]/str[@name='id'][.='\"+lessPreferrredDocId+\"']\"\n      );\n    }\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"b94236357aaa22b76c10629851fe4e376e0cea82","date":1516710914,"type":0,"author":"Karl Wright","isMerge":true,"pathNew":"solr/core/src/test/org/apache/solr/search/TestReRankQParserPlugin#testReRankQueriesWithDefType().mjava","pathOld":"/dev/null","sourceNew":"  @Test\n  public void testReRankQueriesWithDefType() throws Exception {\n\n    assertU(delQ(\"*:*\"));\n    assertU(commit());\n\n    final String[] doc1 = {\"id\",\"1\"};\n    assertU(adoc(doc1));\n    assertU(commit());\n    final String[] doc2 = {\"id\",\"2\"};\n    assertU(adoc(doc2));\n    assertU(commit());\n\n    final String preferredDocId;\n    final String lessPreferrredDocId;\n    if (random().nextBoolean()) {\n      preferredDocId = \"1\";\n      lessPreferrredDocId = \"2\";\n    } else {\n      preferredDocId = \"2\";\n      lessPreferrredDocId = \"1\";\n    }\n\n    for (final String defType : new String[] {\n        null,\n        LuceneQParserPlugin.NAME,\n        ExtendedDismaxQParserPlugin.NAME\n    }) {\n      final ModifiableSolrParams params = new ModifiableSolrParams();\n      params.add(\"rq\", \"{!\"+ReRankQParserPlugin.NAME+\" \"+ReRankQParserPlugin.RERANK_QUERY+\"=id:\"+preferredDocId+\"}\");\n      params.add(\"q\", \"*:*\");\n      if (defType != null) {\n        params.add(QueryParsing.DEFTYPE, defType);\n      }\n      assertQ(req(params), \"*[count(//doc)=2]\",\n          \"//result/doc[1]/str[@name='id'][.='\"+preferredDocId+\"']\",\n          \"//result/doc[2]/str[@name='id'][.='\"+lessPreferrredDocId+\"']\"\n      );\n    }\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"b94236357aaa22b76c10629851fe4e376e0cea82":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","eaa9c67a05a203ff23b684274f05fcc22d38dfb3"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["b94236357aaa22b76c10629851fe4e376e0cea82"],"eaa9c67a05a203ff23b684274f05fcc22d38dfb3":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"]},"commit2Childs":{"b94236357aaa22b76c10629851fe4e376e0cea82":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["b94236357aaa22b76c10629851fe4e376e0cea82","eaa9c67a05a203ff23b684274f05fcc22d38dfb3"],"eaa9c67a05a203ff23b684274f05fcc22d38dfb3":["b94236357aaa22b76c10629851fe4e376e0cea82"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}