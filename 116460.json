{"path":"src/java/org/apache/solr/handler/component/StatsComponent#finishStage(ResponseBuilder).mjava","commits":[{"id":"758a0ba5e213f4d1fc89087ae6e4678f7879e450","date":1224361193,"type":0,"author":"Ryan McKinley","isMerge":false,"pathNew":"src/java/org/apache/solr/handler/component/StatsComponent#finishStage(ResponseBuilder).mjava","pathOld":"/dev/null","sourceNew":"  @Override\n  public void finishStage(ResponseBuilder rb) {\n    if (!rb.doStats || rb.stage != ResponseBuilder.STAGE_GET_FIELDS) return;\n    // wait until STAGE_GET_FIELDS\n    // so that \"result\" is already stored in the response (for aesthetics)\n    \n    StatsInfo si = rb._statsInfo;\n    \n    NamedList stats = new SimpleOrderedMap();\n    NamedList stats_fields = new SimpleOrderedMap();\n    stats.add(\"stats_fields\",stats_fields);\n    for(String field : si.statsFields.keySet()){\n      stats_fields.add(field, si.statsFields.get(field).getStatsValues());\n    }\n\n    rb.rsp.add(\"stats\", stats);\n\n    rb._statsInfo = null;\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":["610c97b96420e614c67797fd43822ebc1d4b7ee2","610c97b96420e614c67797fd43822ebc1d4b7ee2","610c97b96420e614c67797fd43822ebc1d4b7ee2"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"c1c2dfb6aa7b4d342a493c0982be96b76f595add","date":1252705594,"type":3,"author":"Grant Ingersoll","isMerge":false,"pathNew":"src/java/org/apache/solr/handler/component/StatsComponent#finishStage(ResponseBuilder).mjava","pathOld":"src/java/org/apache/solr/handler/component/StatsComponent#finishStage(ResponseBuilder).mjava","sourceNew":"  @Override\n  public void finishStage(ResponseBuilder rb) {\n    if (!rb.doStats || rb.stage != ResponseBuilder.STAGE_GET_FIELDS) return;\n    // wait until STAGE_GET_FIELDS\n    // so that \"result\" is already stored in the response (for aesthetics)\n\n    StatsInfo si = rb._statsInfo;\n\n    NamedList stats = new SimpleOrderedMap();\n    NamedList stats_fields = new SimpleOrderedMap();\n    stats.add(\"stats_fields\", stats_fields);\n    for (String field : si.statsFields.keySet()) {\n      NamedList stv = si.statsFields.get(field).getStatsValues();\n      if ((Long) stv.get(\"count\") != 0) {\n        stats_fields.add(field, stv);\n      } else {\n        stats_fields.add(field, null);\n      }\n    }\n\n    rb.rsp.add(\"stats\", stats);\n\n    rb._statsInfo = null;\n  }\n\n","sourceOld":"  @Override\n  public void finishStage(ResponseBuilder rb) {\n    if (!rb.doStats || rb.stage != ResponseBuilder.STAGE_GET_FIELDS) return;\n    // wait until STAGE_GET_FIELDS\n    // so that \"result\" is already stored in the response (for aesthetics)\n    \n    StatsInfo si = rb._statsInfo;\n    \n    NamedList stats = new SimpleOrderedMap();\n    NamedList stats_fields = new SimpleOrderedMap();\n    stats.add(\"stats_fields\",stats_fields);\n    for(String field : si.statsFields.keySet()){\n      stats_fields.add(field, si.statsFields.get(field).getStatsValues());\n    }\n\n    rb.rsp.add(\"stats\", stats);\n\n    rb._statsInfo = null;\n  }\n\n","bugFix":null,"bugIntro":["610c97b96420e614c67797fd43822ebc1d4b7ee2","610c97b96420e614c67797fd43822ebc1d4b7ee2","610c97b96420e614c67797fd43822ebc1d4b7ee2"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"ad94625fb8d088209f46650c8097196fec67f00c","date":1453508319,"type":5,"author":"Dawid Weiss","isMerge":false,"pathNew":"solr/src/java/org/apache/solr/handler/component/StatsComponent#finishStage(ResponseBuilder).mjava","pathOld":"src/java/org/apache/solr/handler/component/StatsComponent#finishStage(ResponseBuilder).mjava","sourceNew":"  @Override\n  public void finishStage(ResponseBuilder rb) {\n    if (!rb.doStats || rb.stage != ResponseBuilder.STAGE_GET_FIELDS) return;\n    // wait until STAGE_GET_FIELDS\n    // so that \"result\" is already stored in the response (for aesthetics)\n\n    StatsInfo si = rb._statsInfo;\n\n    NamedList stats = new SimpleOrderedMap();\n    NamedList stats_fields = new SimpleOrderedMap();\n    stats.add(\"stats_fields\", stats_fields);\n    for (String field : si.statsFields.keySet()) {\n      NamedList stv = si.statsFields.get(field).getStatsValues();\n      if ((Long) stv.get(\"count\") != 0) {\n        stats_fields.add(field, stv);\n      } else {\n        stats_fields.add(field, null);\n      }\n    }\n\n    rb.rsp.add(\"stats\", stats);\n\n    rb._statsInfo = null;\n  }\n\n","sourceOld":"  @Override\n  public void finishStage(ResponseBuilder rb) {\n    if (!rb.doStats || rb.stage != ResponseBuilder.STAGE_GET_FIELDS) return;\n    // wait until STAGE_GET_FIELDS\n    // so that \"result\" is already stored in the response (for aesthetics)\n\n    StatsInfo si = rb._statsInfo;\n\n    NamedList stats = new SimpleOrderedMap();\n    NamedList stats_fields = new SimpleOrderedMap();\n    stats.add(\"stats_fields\", stats_fields);\n    for (String field : si.statsFields.keySet()) {\n      NamedList stv = si.statsFields.get(field).getStatsValues();\n      if ((Long) stv.get(\"count\") != 0) {\n        stats_fields.add(field, stv);\n      } else {\n        stats_fields.add(field, null);\n      }\n    }\n\n    rb.rsp.add(\"stats\", stats);\n\n    rb._statsInfo = null;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null}],"commit2Parents":{"c1c2dfb6aa7b4d342a493c0982be96b76f595add":["758a0ba5e213f4d1fc89087ae6e4678f7879e450"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b":[],"758a0ba5e213f4d1fc89087ae6e4678f7879e450":["3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b"],"ad94625fb8d088209f46650c8097196fec67f00c":["c1c2dfb6aa7b4d342a493c0982be96b76f595add"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"]},"commit2Childs":{"c1c2dfb6aa7b4d342a493c0982be96b76f595add":["ad94625fb8d088209f46650c8097196fec67f00c"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b":["758a0ba5e213f4d1fc89087ae6e4678f7879e450"],"758a0ba5e213f4d1fc89087ae6e4678f7879e450":["c1c2dfb6aa7b4d342a493c0982be96b76f595add"],"ad94625fb8d088209f46650c8097196fec67f00c":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["ad94625fb8d088209f46650c8097196fec67f00c","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b"],"pathCommit":null}