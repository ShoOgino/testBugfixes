{"path":"src/test/org/apache/solr/BasicFunctionalityTest#testSimpleFacetCounts().mjava","commits":[{"id":"d1b4f9f023bf5098df34505adf1ed91daa67c239","date":1157655314,"type":0,"author":"Chris M. Hostetter","isMerge":false,"pathNew":"src/test/org/apache/solr/BasicFunctionalityTest#testSimpleFacetCounts().mjava","pathOld":"/dev/null","sourceNew":"  public void testSimpleFacetCounts() {\n    assertU(adoc(\"id\", \"42\", \"trait_s\", \"Tool\", \"trait_s\", \"Obnoxious\",\n                 \"name\", \"Zapp Brannigan\"));\n    assertU(adoc(\"id\", \"43\" ,\n                 \"title\", \"Democratic Order of Planets\"));\n    assertU(adoc(\"id\", \"44\", \"trait_s\", \"Tool\",\n                 \"name\", \"The Zapper\"));\n    assertU(adoc(\"id\", \"45\", \"trait_s\", \"Chauvinist\",\n                 \"title\", \"25 star General\"));\n    assertU(adoc(\"id\", \"46\", \"trait_s\", \"Obnoxious\",\n                 \"subject\", \"Defeated the pacifists of the Gandhi nebula\"));\n    assertU(adoc(\"id\", \"47\", \"trait_s\", \"Pig\",\n                 \"text\", \"line up and fly directly at the enemy death cannons, clogging them with wreckage!\"));\n    assertU(commit());\n \n    assertQ(\"standard request handler returns all matches\",\n            req(\"id:[42 TO 47]\"),\n            \"*[count(//doc)=6]\"\n            );\n \n    assertQ(\"filter results using fq\",\n            req(\"q\",\"id:[42 TO 46]\",\n                \"fq\", \"id:[43 TO 47]\"),\n            \"*[count(//doc)=4]\"\n            );\n    \n    assertQ(\"don't filter results using blank fq\",\n            req(\"q\",\"id:[42 TO 46]\",\n                \"fq\", \" \"),\n            \"*[count(//doc)=5]\"\n            );\n     \n    assertQ(\"filter results using multiple fq params\",\n            req(\"q\",\"id:[42 TO 46]\",\n                \"fq\", \"trait_s:Obnoxious\",\n                \"fq\", \"id:[43 TO 47]\"),\n            \"*[count(//doc)=1]\"\n            );\n \n    assertQ(\"check counts for facet queries\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"facet.query\", \"trait_s:Obnoxious\"\n                ,\"facet.query\", \"id:[42 TO 45]\"\n                ,\"facet.query\", \"id:[43 TO 47]\"\n                ,\"facet.field\", \"trait_s\"\n                )\n            ,\"*[count(//doc)=6]\"\n \n            ,\"//lst[@name='facet_counts']/lst[@name='facet_queries']\"\n            ,\"//lst[@name='facet_queries']/int[@name='trait_s:Obnoxious'][.='2']\"\n            ,\"//lst[@name='facet_queries']/int[@name='id:[42 TO 45]'][.='4']\"\n            ,\"//lst[@name='facet_queries']/int[@name='id:[43 TO 47]'][.='5']\"\n \n            ,\"//lst[@name='facet_counts']/lst[@name='facet_fields']\"\n            ,\"//lst[@name='facet_fields']/lst[@name='trait_s']\"\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Pig'][.='1']\"\n            );\n \n    assertQ(\"check counts for applied facet queries using filtering (fq)\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                ,\"facet.query\", \"id:[42 TO 45]\"\n                ,\"facet.query\", \"id:[43 TO 47]\"\n                )\n            ,\"*[count(//doc)=4]\"\n            ,\"//lst[@name='facet_counts']/lst[@name='facet_queries']\"\n            ,\"//lst[@name='facet_queries']/int[@name='id:[42 TO 45]'][.='4']\"\n            ,\"//lst[@name='facet_queries']/int[@name='id:[43 TO 47]'][.='3']\"\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Pig'][.='0']\"\n            );\n \n    assertQ(\"check counts with facet.zero=false&facet.missing=true using fq\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"facet.zeros\", \"false\"\n                ,\"f.trait_s.facet.missing\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                )\n            ,\"*[count(//doc)=4]\"\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[not(@name)][.='1']\"\n            );\n \n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"9691bd012f05632bf944115412ed90daae112f68","date":1168971974,"type":3,"author":"Yonik Seeley","isMerge":false,"pathNew":"src/test/org/apache/solr/BasicFunctionalityTest#testSimpleFacetCounts().mjava","pathOld":"src/test/org/apache/solr/BasicFunctionalityTest#testSimpleFacetCounts().mjava","sourceNew":"  public void testSimpleFacetCounts() {\n    assertU(adoc(\"id\", \"42\", \"trait_s\", \"Tool\", \"trait_s\", \"Obnoxious\",\n                 \"name\", \"Zapp Brannigan\"));\n    assertU(adoc(\"id\", \"43\" ,\n                 \"title\", \"Democratic Order of Planets\"));\n    assertU(adoc(\"id\", \"44\", \"trait_s\", \"Tool\",\n                 \"name\", \"The Zapper\"));\n    assertU(adoc(\"id\", \"45\", \"trait_s\", \"Chauvinist\",\n                 \"title\", \"25 star General\"));\n    assertU(adoc(\"id\", \"46\", \"trait_s\", \"Obnoxious\",\n                 \"subject\", \"Defeated the pacifists of the Gandhi nebula\"));\n    assertU(adoc(\"id\", \"47\", \"trait_s\", \"Pig\",\n                 \"text\", \"line up and fly directly at the enemy death cannons, clogging them with wreckage!\"));\n    assertU(commit());\n \n    assertQ(\"standard request handler returns all matches\",\n            req(\"id:[42 TO 47]\"),\n            \"*[count(//doc)=6]\"\n            );\n \n    assertQ(\"filter results using fq\",\n            req(\"q\",\"id:[42 TO 46]\",\n                \"fq\", \"id:[43 TO 47]\"),\n            \"*[count(//doc)=4]\"\n            );\n    \n    assertQ(\"don't filter results using blank fq\",\n            req(\"q\",\"id:[42 TO 46]\",\n                \"fq\", \" \"),\n            \"*[count(//doc)=5]\"\n            );\n     \n    assertQ(\"filter results using multiple fq params\",\n            req(\"q\",\"id:[42 TO 46]\",\n                \"fq\", \"trait_s:Obnoxious\",\n                \"fq\", \"id:[43 TO 47]\"),\n            \"*[count(//doc)=1]\"\n            );\n \n    assertQ(\"check counts for facet queries\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"facet.query\", \"trait_s:Obnoxious\"\n                ,\"facet.query\", \"id:[42 TO 45]\"\n                ,\"facet.query\", \"id:[43 TO 47]\"\n                ,\"facet.field\", \"trait_s\"\n                )\n            ,\"*[count(//doc)=6]\"\n \n            ,\"//lst[@name='facet_counts']/lst[@name='facet_queries']\"\n            ,\"//lst[@name='facet_queries']/int[@name='trait_s:Obnoxious'][.='2']\"\n            ,\"//lst[@name='facet_queries']/int[@name='id:[42 TO 45]'][.='4']\"\n            ,\"//lst[@name='facet_queries']/int[@name='id:[43 TO 47]'][.='5']\"\n \n            ,\"//lst[@name='facet_counts']/lst[@name='facet_fields']\"\n            ,\"//lst[@name='facet_fields']/lst[@name='trait_s']\"\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Pig'][.='1']\"\n            );\n \n    assertQ(\"check counts for applied facet queries using filtering (fq)\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                ,\"facet.query\", \"id:[42 TO 45]\"\n                ,\"facet.query\", \"id:[43 TO 47]\"\n                )\n            ,\"*[count(//doc)=4]\"\n            ,\"//lst[@name='facet_counts']/lst[@name='facet_queries']\"\n            ,\"//lst[@name='facet_queries']/int[@name='id:[42 TO 45]'][.='4']\"\n            ,\"//lst[@name='facet_queries']/int[@name='id:[43 TO 47]'][.='3']\"\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Pig'][.='0']\"\n            );\n \n    assertQ(\"check counts with facet.zero=false&facet.missing=true using fq\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"facet.zeros\", \"false\"\n                ,\"f.trait_s.facet.missing\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                )\n            ,\"*[count(//doc)=4]\"\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[not(@name)][.='1']\"\n            );\n\n    assertQ(\"check counts with facet.mincount=1&facet.missing=true using fq\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"facet.mincount\", \"1\"\n                ,\"f.trait_s.facet.missing\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                )\n            ,\"*[count(//doc)=4]\"\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[not(@name)][.='1']\"\n            );\n\n    assertQ(\"check counts with facet.mincount=2&facet.missing=true using fq\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"facet.mincount\", \"2\"\n                ,\"f.trait_s.facet.missing\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                )\n            ,\"*[count(//doc)=4]\"\n            ,\"*[count(//lst[@name='trait_s']/int)=2]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[not(@name)][.='1']\"               \n            );\n\n    assertQ(\"check sorted paging\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                ,\"facet.mincount\",\"0\"\n                ,\"facet.offset\",\"0\"\n                ,\"facet.limit\",\"4\"\n                )\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Pig'][.='0']\"\n            );\n\n    assertQ(\"check sorted paging\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                ,\"facet.mincount\",\"0\"\n                ,\"facet.offset\",\"0\"\n                ,\"facet.limit\",\"3\"\n                ,\"sort\",\"true\"\n                )\n            ,\"*[count(//lst[@name='trait_s']/int)=3]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            );\n\n  }\n\n","sourceOld":"  public void testSimpleFacetCounts() {\n    assertU(adoc(\"id\", \"42\", \"trait_s\", \"Tool\", \"trait_s\", \"Obnoxious\",\n                 \"name\", \"Zapp Brannigan\"));\n    assertU(adoc(\"id\", \"43\" ,\n                 \"title\", \"Democratic Order of Planets\"));\n    assertU(adoc(\"id\", \"44\", \"trait_s\", \"Tool\",\n                 \"name\", \"The Zapper\"));\n    assertU(adoc(\"id\", \"45\", \"trait_s\", \"Chauvinist\",\n                 \"title\", \"25 star General\"));\n    assertU(adoc(\"id\", \"46\", \"trait_s\", \"Obnoxious\",\n                 \"subject\", \"Defeated the pacifists of the Gandhi nebula\"));\n    assertU(adoc(\"id\", \"47\", \"trait_s\", \"Pig\",\n                 \"text\", \"line up and fly directly at the enemy death cannons, clogging them with wreckage!\"));\n    assertU(commit());\n \n    assertQ(\"standard request handler returns all matches\",\n            req(\"id:[42 TO 47]\"),\n            \"*[count(//doc)=6]\"\n            );\n \n    assertQ(\"filter results using fq\",\n            req(\"q\",\"id:[42 TO 46]\",\n                \"fq\", \"id:[43 TO 47]\"),\n            \"*[count(//doc)=4]\"\n            );\n    \n    assertQ(\"don't filter results using blank fq\",\n            req(\"q\",\"id:[42 TO 46]\",\n                \"fq\", \" \"),\n            \"*[count(//doc)=5]\"\n            );\n     \n    assertQ(\"filter results using multiple fq params\",\n            req(\"q\",\"id:[42 TO 46]\",\n                \"fq\", \"trait_s:Obnoxious\",\n                \"fq\", \"id:[43 TO 47]\"),\n            \"*[count(//doc)=1]\"\n            );\n \n    assertQ(\"check counts for facet queries\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"facet.query\", \"trait_s:Obnoxious\"\n                ,\"facet.query\", \"id:[42 TO 45]\"\n                ,\"facet.query\", \"id:[43 TO 47]\"\n                ,\"facet.field\", \"trait_s\"\n                )\n            ,\"*[count(//doc)=6]\"\n \n            ,\"//lst[@name='facet_counts']/lst[@name='facet_queries']\"\n            ,\"//lst[@name='facet_queries']/int[@name='trait_s:Obnoxious'][.='2']\"\n            ,\"//lst[@name='facet_queries']/int[@name='id:[42 TO 45]'][.='4']\"\n            ,\"//lst[@name='facet_queries']/int[@name='id:[43 TO 47]'][.='5']\"\n \n            ,\"//lst[@name='facet_counts']/lst[@name='facet_fields']\"\n            ,\"//lst[@name='facet_fields']/lst[@name='trait_s']\"\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Pig'][.='1']\"\n            );\n \n    assertQ(\"check counts for applied facet queries using filtering (fq)\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                ,\"facet.query\", \"id:[42 TO 45]\"\n                ,\"facet.query\", \"id:[43 TO 47]\"\n                )\n            ,\"*[count(//doc)=4]\"\n            ,\"//lst[@name='facet_counts']/lst[@name='facet_queries']\"\n            ,\"//lst[@name='facet_queries']/int[@name='id:[42 TO 45]'][.='4']\"\n            ,\"//lst[@name='facet_queries']/int[@name='id:[43 TO 47]'][.='3']\"\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Pig'][.='0']\"\n            );\n \n    assertQ(\"check counts with facet.zero=false&facet.missing=true using fq\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"facet.zeros\", \"false\"\n                ,\"f.trait_s.facet.missing\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                )\n            ,\"*[count(//doc)=4]\"\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[not(@name)][.='1']\"\n            );\n \n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"e6ea410f5b876f6fa92ac261542678209d4a4037","date":1177884620,"type":3,"author":"Ryan McKinley","isMerge":false,"pathNew":"src/test/org/apache/solr/BasicFunctionalityTest#testSimpleFacetCounts().mjava","pathOld":"src/test/org/apache/solr/BasicFunctionalityTest#testSimpleFacetCounts().mjava","sourceNew":"  public void testSimpleFacetCounts() {\n    assertU(adoc(\"id\", \"42\", \"trait_s\", \"Tool\", \"trait_s\", \"Obnoxious\",\n                 \"name\", \"Zapp Brannigan\"));\n    assertU(adoc(\"id\", \"43\" ,\n                 \"title\", \"Democratic Order of Planets\"));\n    assertU(adoc(\"id\", \"44\", \"trait_s\", \"Tool\",\n                 \"name\", \"The Zapper\"));\n    assertU(adoc(\"id\", \"45\", \"trait_s\", \"Chauvinist\",\n                 \"title\", \"25 star General\"));\n    assertU(adoc(\"id\", \"46\", \"trait_s\", \"Obnoxious\",\n                 \"subject\", \"Defeated the pacifists of the Gandhi nebula\"));\n    assertU(adoc(\"id\", \"47\", \"trait_s\", \"Pig\",\n                 \"text\", \"line up and fly directly at the enemy death cannons, clogging them with wreckage!\"));\n    assertU(commit());\n \n    assertQ(\"standard request handler returns all matches\",\n            req(\"id:[42 TO 47]\"),\n            \"*[count(//doc)=6]\"\n            );\n \n    assertQ(\"filter results using fq\",\n            req(\"q\",\"id:[42 TO 46]\",\n                \"fq\", \"id:[43 TO 47]\"),\n            \"*[count(//doc)=4]\"\n            );\n    \n    assertQ(\"don't filter results using blank fq\",\n            req(\"q\",\"id:[42 TO 46]\",\n                \"fq\", \" \"),\n            \"*[count(//doc)=5]\"\n            );\n     \n    assertQ(\"filter results using multiple fq params\",\n            req(\"q\",\"id:[42 TO 46]\",\n                \"fq\", \"trait_s:Obnoxious\",\n                \"fq\", \"id:[43 TO 47]\"),\n            \"*[count(//doc)=1]\"\n            );\n \n    assertQ(\"check counts for facet queries\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"facet.query\", \"trait_s:Obnoxious\"\n                ,\"facet.query\", \"id:[42 TO 45]\"\n                ,\"facet.query\", \"id:[43 TO 47]\"\n                ,\"facet.field\", \"trait_s\"\n                )\n            ,\"*[count(//doc)=6]\"\n \n            ,\"//lst[@name='facet_counts']/lst[@name='facet_queries']\"\n            ,\"//lst[@name='facet_queries']/int[@name='trait_s:Obnoxious'][.='2']\"\n            ,\"//lst[@name='facet_queries']/int[@name='id:[42 TO 45]'][.='4']\"\n            ,\"//lst[@name='facet_queries']/int[@name='id:[43 TO 47]'][.='5']\"\n \n            ,\"//lst[@name='facet_counts']/lst[@name='facet_fields']\"\n            ,\"//lst[@name='facet_fields']/lst[@name='trait_s']\"\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Pig'][.='1']\"\n            );\n \n    assertQ(\"check counts for applied facet queries using filtering (fq)\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                ,\"facet.query\", \"id:[42 TO 45]\"\n                ,\"facet.query\", \"id:[43 TO 47]\"\n                )\n            ,\"*[count(//doc)=4]\"\n            ,\"//lst[@name='facet_counts']/lst[@name='facet_queries']\"\n            ,\"//lst[@name='facet_queries']/int[@name='id:[42 TO 45]'][.='4']\"\n            ,\"//lst[@name='facet_queries']/int[@name='id:[43 TO 47]'][.='3']\"\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Pig'][.='0']\"\n            );\n \n    assertQ(\"check counts with facet.zero=false&facet.missing=true using fq\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"facet.zeros\", \"false\"\n                ,\"f.trait_s.facet.missing\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                )\n            ,\"*[count(//doc)=4]\"\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[not(@name)][.='1']\"\n            );\n\n    assertQ(\"check counts with facet.mincount=1&facet.missing=true using fq\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"facet.mincount\", \"1\"\n                ,\"f.trait_s.facet.missing\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                )\n            ,\"*[count(//doc)=4]\"\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[not(@name)][.='1']\"\n            );\n\n    assertQ(\"check counts with facet.mincount=2&facet.missing=true using fq\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"facet.mincount\", \"2\"\n                ,\"f.trait_s.facet.missing\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                )\n            ,\"*[count(//doc)=4]\"\n            ,\"*[count(//lst[@name='trait_s']/int)=2]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[not(@name)][.='1']\"               \n            );\n\n    assertQ(\"check sorted paging\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                ,\"facet.mincount\",\"0\"\n                ,\"facet.offset\",\"0\"\n                ,\"facet.limit\",\"4\"\n                )\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Pig'][.='0']\"\n            );\n\n    assertQ(\"check sorted paging\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                ,\"facet.mincount\",\"0\"\n                ,\"facet.offset\",\"0\"\n                ,\"facet.limit\",\"3\"\n                )\n            ,\"*[count(//lst[@name='trait_s']/int)=3]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            );\n\n  }\n\n","sourceOld":"  public void testSimpleFacetCounts() {\n    assertU(adoc(\"id\", \"42\", \"trait_s\", \"Tool\", \"trait_s\", \"Obnoxious\",\n                 \"name\", \"Zapp Brannigan\"));\n    assertU(adoc(\"id\", \"43\" ,\n                 \"title\", \"Democratic Order of Planets\"));\n    assertU(adoc(\"id\", \"44\", \"trait_s\", \"Tool\",\n                 \"name\", \"The Zapper\"));\n    assertU(adoc(\"id\", \"45\", \"trait_s\", \"Chauvinist\",\n                 \"title\", \"25 star General\"));\n    assertU(adoc(\"id\", \"46\", \"trait_s\", \"Obnoxious\",\n                 \"subject\", \"Defeated the pacifists of the Gandhi nebula\"));\n    assertU(adoc(\"id\", \"47\", \"trait_s\", \"Pig\",\n                 \"text\", \"line up and fly directly at the enemy death cannons, clogging them with wreckage!\"));\n    assertU(commit());\n \n    assertQ(\"standard request handler returns all matches\",\n            req(\"id:[42 TO 47]\"),\n            \"*[count(//doc)=6]\"\n            );\n \n    assertQ(\"filter results using fq\",\n            req(\"q\",\"id:[42 TO 46]\",\n                \"fq\", \"id:[43 TO 47]\"),\n            \"*[count(//doc)=4]\"\n            );\n    \n    assertQ(\"don't filter results using blank fq\",\n            req(\"q\",\"id:[42 TO 46]\",\n                \"fq\", \" \"),\n            \"*[count(//doc)=5]\"\n            );\n     \n    assertQ(\"filter results using multiple fq params\",\n            req(\"q\",\"id:[42 TO 46]\",\n                \"fq\", \"trait_s:Obnoxious\",\n                \"fq\", \"id:[43 TO 47]\"),\n            \"*[count(//doc)=1]\"\n            );\n \n    assertQ(\"check counts for facet queries\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"facet.query\", \"trait_s:Obnoxious\"\n                ,\"facet.query\", \"id:[42 TO 45]\"\n                ,\"facet.query\", \"id:[43 TO 47]\"\n                ,\"facet.field\", \"trait_s\"\n                )\n            ,\"*[count(//doc)=6]\"\n \n            ,\"//lst[@name='facet_counts']/lst[@name='facet_queries']\"\n            ,\"//lst[@name='facet_queries']/int[@name='trait_s:Obnoxious'][.='2']\"\n            ,\"//lst[@name='facet_queries']/int[@name='id:[42 TO 45]'][.='4']\"\n            ,\"//lst[@name='facet_queries']/int[@name='id:[43 TO 47]'][.='5']\"\n \n            ,\"//lst[@name='facet_counts']/lst[@name='facet_fields']\"\n            ,\"//lst[@name='facet_fields']/lst[@name='trait_s']\"\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Pig'][.='1']\"\n            );\n \n    assertQ(\"check counts for applied facet queries using filtering (fq)\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                ,\"facet.query\", \"id:[42 TO 45]\"\n                ,\"facet.query\", \"id:[43 TO 47]\"\n                )\n            ,\"*[count(//doc)=4]\"\n            ,\"//lst[@name='facet_counts']/lst[@name='facet_queries']\"\n            ,\"//lst[@name='facet_queries']/int[@name='id:[42 TO 45]'][.='4']\"\n            ,\"//lst[@name='facet_queries']/int[@name='id:[43 TO 47]'][.='3']\"\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Pig'][.='0']\"\n            );\n \n    assertQ(\"check counts with facet.zero=false&facet.missing=true using fq\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"facet.zeros\", \"false\"\n                ,\"f.trait_s.facet.missing\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                )\n            ,\"*[count(//doc)=4]\"\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[not(@name)][.='1']\"\n            );\n\n    assertQ(\"check counts with facet.mincount=1&facet.missing=true using fq\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"facet.mincount\", \"1\"\n                ,\"f.trait_s.facet.missing\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                )\n            ,\"*[count(//doc)=4]\"\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[not(@name)][.='1']\"\n            );\n\n    assertQ(\"check counts with facet.mincount=2&facet.missing=true using fq\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"facet.mincount\", \"2\"\n                ,\"f.trait_s.facet.missing\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                )\n            ,\"*[count(//doc)=4]\"\n            ,\"*[count(//lst[@name='trait_s']/int)=2]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[not(@name)][.='1']\"               \n            );\n\n    assertQ(\"check sorted paging\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                ,\"facet.mincount\",\"0\"\n                ,\"facet.offset\",\"0\"\n                ,\"facet.limit\",\"4\"\n                )\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Pig'][.='0']\"\n            );\n\n    assertQ(\"check sorted paging\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                ,\"facet.mincount\",\"0\"\n                ,\"facet.offset\",\"0\"\n                ,\"facet.limit\",\"3\"\n                ,\"sort\",\"true\"\n                )\n            ,\"*[count(//lst[@name='trait_s']/int)=3]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            );\n\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"17f9c12074f42db9f3cff34b42f9c4a60368a97d","date":1216926137,"type":5,"author":"Chris M. Hostetter","isMerge":false,"pathNew":"src/test/org/apache/solr/request/SimpleFacetsTest#testSimpleFacetCounts().mjava","pathOld":"src/test/org/apache/solr/BasicFunctionalityTest#testSimpleFacetCounts().mjava","sourceNew":"  public void testSimpleFacetCounts() {\n    assertU(adoc(\"id\", \"42\", \"trait_s\", \"Tool\", \"trait_s\", \"Obnoxious\",\n                 \"name\", \"Zapp Brannigan\"));\n    assertU(adoc(\"id\", \"43\" ,\n                 \"title\", \"Democratic Order of Planets\"));\n    assertU(adoc(\"id\", \"44\", \"trait_s\", \"Tool\",\n                 \"name\", \"The Zapper\"));\n    assertU(adoc(\"id\", \"45\", \"trait_s\", \"Chauvinist\",\n                 \"title\", \"25 star General\"));\n    assertU(adoc(\"id\", \"46\", \"trait_s\", \"Obnoxious\",\n                 \"subject\", \"Defeated the pacifists of the Gandhi nebula\"));\n    assertU(adoc(\"id\", \"47\", \"trait_s\", \"Pig\",\n                 \"text\", \"line up and fly directly at the enemy death cannons, clogging them with wreckage!\"));\n    assertU(commit());\n \n    assertQ(\"standard request handler returns all matches\",\n            req(\"id:[42 TO 47]\"),\n            \"*[count(//doc)=6]\"\n            );\n \n    assertQ(\"filter results using fq\",\n            req(\"q\",\"id:[42 TO 46]\",\n                \"fq\", \"id:[43 TO 47]\"),\n            \"*[count(//doc)=4]\"\n            );\n    \n    assertQ(\"don't filter results using blank fq\",\n            req(\"q\",\"id:[42 TO 46]\",\n                \"fq\", \" \"),\n            \"*[count(//doc)=5]\"\n            );\n     \n    assertQ(\"filter results using multiple fq params\",\n            req(\"q\",\"id:[42 TO 46]\",\n                \"fq\", \"trait_s:Obnoxious\",\n                \"fq\", \"id:[43 TO 47]\"),\n            \"*[count(//doc)=1]\"\n            );\n \n    assertQ(\"check counts for facet queries\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"facet.query\", \"trait_s:Obnoxious\"\n                ,\"facet.query\", \"id:[42 TO 45]\"\n                ,\"facet.query\", \"id:[43 TO 47]\"\n                ,\"facet.field\", \"trait_s\"\n                )\n            ,\"*[count(//doc)=6]\"\n \n            ,\"//lst[@name='facet_counts']/lst[@name='facet_queries']\"\n            ,\"//lst[@name='facet_queries']/int[@name='trait_s:Obnoxious'][.='2']\"\n            ,\"//lst[@name='facet_queries']/int[@name='id:[42 TO 45]'][.='4']\"\n            ,\"//lst[@name='facet_queries']/int[@name='id:[43 TO 47]'][.='5']\"\n \n            ,\"//lst[@name='facet_counts']/lst[@name='facet_fields']\"\n            ,\"//lst[@name='facet_fields']/lst[@name='trait_s']\"\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Pig'][.='1']\"\n            );\n \n    assertQ(\"check counts for applied facet queries using filtering (fq)\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                ,\"facet.query\", \"id:[42 TO 45]\"\n                ,\"facet.query\", \"id:[43 TO 47]\"\n                )\n            ,\"*[count(//doc)=4]\"\n            ,\"//lst[@name='facet_counts']/lst[@name='facet_queries']\"\n            ,\"//lst[@name='facet_queries']/int[@name='id:[42 TO 45]'][.='4']\"\n            ,\"//lst[@name='facet_queries']/int[@name='id:[43 TO 47]'][.='3']\"\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Pig'][.='0']\"\n            );\n \n    assertQ(\"check counts with facet.zero=false&facet.missing=true using fq\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"facet.zeros\", \"false\"\n                ,\"f.trait_s.facet.missing\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                )\n            ,\"*[count(//doc)=4]\"\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[not(@name)][.='1']\"\n            );\n\n    assertQ(\"check counts with facet.mincount=1&facet.missing=true using fq\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"facet.mincount\", \"1\"\n                ,\"f.trait_s.facet.missing\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                )\n            ,\"*[count(//doc)=4]\"\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[not(@name)][.='1']\"\n            );\n\n    assertQ(\"check counts with facet.mincount=2&facet.missing=true using fq\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"facet.mincount\", \"2\"\n                ,\"f.trait_s.facet.missing\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                )\n            ,\"*[count(//doc)=4]\"\n            ,\"*[count(//lst[@name='trait_s']/int)=2]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[not(@name)][.='1']\"               \n            );\n\n    assertQ(\"check sorted paging\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                ,\"facet.mincount\",\"0\"\n                ,\"facet.offset\",\"0\"\n                ,\"facet.limit\",\"4\"\n                )\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Pig'][.='0']\"\n            );\n\n    assertQ(\"check sorted paging\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                ,\"facet.mincount\",\"0\"\n                ,\"facet.offset\",\"0\"\n                ,\"facet.limit\",\"3\"\n                )\n            ,\"*[count(//lst[@name='trait_s']/int)=3]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            );\n\n  }\n\n","sourceOld":"  public void testSimpleFacetCounts() {\n    assertU(adoc(\"id\", \"42\", \"trait_s\", \"Tool\", \"trait_s\", \"Obnoxious\",\n                 \"name\", \"Zapp Brannigan\"));\n    assertU(adoc(\"id\", \"43\" ,\n                 \"title\", \"Democratic Order of Planets\"));\n    assertU(adoc(\"id\", \"44\", \"trait_s\", \"Tool\",\n                 \"name\", \"The Zapper\"));\n    assertU(adoc(\"id\", \"45\", \"trait_s\", \"Chauvinist\",\n                 \"title\", \"25 star General\"));\n    assertU(adoc(\"id\", \"46\", \"trait_s\", \"Obnoxious\",\n                 \"subject\", \"Defeated the pacifists of the Gandhi nebula\"));\n    assertU(adoc(\"id\", \"47\", \"trait_s\", \"Pig\",\n                 \"text\", \"line up and fly directly at the enemy death cannons, clogging them with wreckage!\"));\n    assertU(commit());\n \n    assertQ(\"standard request handler returns all matches\",\n            req(\"id:[42 TO 47]\"),\n            \"*[count(//doc)=6]\"\n            );\n \n    assertQ(\"filter results using fq\",\n            req(\"q\",\"id:[42 TO 46]\",\n                \"fq\", \"id:[43 TO 47]\"),\n            \"*[count(//doc)=4]\"\n            );\n    \n    assertQ(\"don't filter results using blank fq\",\n            req(\"q\",\"id:[42 TO 46]\",\n                \"fq\", \" \"),\n            \"*[count(//doc)=5]\"\n            );\n     \n    assertQ(\"filter results using multiple fq params\",\n            req(\"q\",\"id:[42 TO 46]\",\n                \"fq\", \"trait_s:Obnoxious\",\n                \"fq\", \"id:[43 TO 47]\"),\n            \"*[count(//doc)=1]\"\n            );\n \n    assertQ(\"check counts for facet queries\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"facet.query\", \"trait_s:Obnoxious\"\n                ,\"facet.query\", \"id:[42 TO 45]\"\n                ,\"facet.query\", \"id:[43 TO 47]\"\n                ,\"facet.field\", \"trait_s\"\n                )\n            ,\"*[count(//doc)=6]\"\n \n            ,\"//lst[@name='facet_counts']/lst[@name='facet_queries']\"\n            ,\"//lst[@name='facet_queries']/int[@name='trait_s:Obnoxious'][.='2']\"\n            ,\"//lst[@name='facet_queries']/int[@name='id:[42 TO 45]'][.='4']\"\n            ,\"//lst[@name='facet_queries']/int[@name='id:[43 TO 47]'][.='5']\"\n \n            ,\"//lst[@name='facet_counts']/lst[@name='facet_fields']\"\n            ,\"//lst[@name='facet_fields']/lst[@name='trait_s']\"\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Pig'][.='1']\"\n            );\n \n    assertQ(\"check counts for applied facet queries using filtering (fq)\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                ,\"facet.query\", \"id:[42 TO 45]\"\n                ,\"facet.query\", \"id:[43 TO 47]\"\n                )\n            ,\"*[count(//doc)=4]\"\n            ,\"//lst[@name='facet_counts']/lst[@name='facet_queries']\"\n            ,\"//lst[@name='facet_queries']/int[@name='id:[42 TO 45]'][.='4']\"\n            ,\"//lst[@name='facet_queries']/int[@name='id:[43 TO 47]'][.='3']\"\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Pig'][.='0']\"\n            );\n \n    assertQ(\"check counts with facet.zero=false&facet.missing=true using fq\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"facet.zeros\", \"false\"\n                ,\"f.trait_s.facet.missing\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                )\n            ,\"*[count(//doc)=4]\"\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[not(@name)][.='1']\"\n            );\n\n    assertQ(\"check counts with facet.mincount=1&facet.missing=true using fq\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"facet.mincount\", \"1\"\n                ,\"f.trait_s.facet.missing\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                )\n            ,\"*[count(//doc)=4]\"\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[not(@name)][.='1']\"\n            );\n\n    assertQ(\"check counts with facet.mincount=2&facet.missing=true using fq\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"facet.mincount\", \"2\"\n                ,\"f.trait_s.facet.missing\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                )\n            ,\"*[count(//doc)=4]\"\n            ,\"*[count(//lst[@name='trait_s']/int)=2]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[not(@name)][.='1']\"               \n            );\n\n    assertQ(\"check sorted paging\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                ,\"facet.mincount\",\"0\"\n                ,\"facet.offset\",\"0\"\n                ,\"facet.limit\",\"4\"\n                )\n            ,\"*[count(//lst[@name='trait_s']/int)=4]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Pig'][.='0']\"\n            );\n\n    assertQ(\"check sorted paging\",\n            req(\"q\", \"id:[42 TO 47]\"\n                ,\"facet\", \"true\"\n                ,\"fq\", \"id:[42 TO 45]\"\n                ,\"facet.field\", \"trait_s\"\n                ,\"facet.mincount\",\"0\"\n                ,\"facet.offset\",\"0\"\n                ,\"facet.limit\",\"3\"\n                )\n            ,\"*[count(//lst[@name='trait_s']/int)=3]\"\n            ,\"//lst[@name='trait_s']/int[@name='Tool'][.='2']\"\n            ,\"//lst[@name='trait_s']/int[@name='Obnoxious'][.='1']\"\n            ,\"//lst[@name='trait_s']/int[@name='Chauvinist'][.='1']\"\n            );\n\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"d1b4f9f023bf5098df34505adf1ed91daa67c239":["3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b"],"e6ea410f5b876f6fa92ac261542678209d4a4037":["9691bd012f05632bf944115412ed90daae112f68"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"9691bd012f05632bf944115412ed90daae112f68":["d1b4f9f023bf5098df34505adf1ed91daa67c239"],"3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b":[],"17f9c12074f42db9f3cff34b42f9c4a60368a97d":["e6ea410f5b876f6fa92ac261542678209d4a4037"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"]},"commit2Childs":{"d1b4f9f023bf5098df34505adf1ed91daa67c239":["9691bd012f05632bf944115412ed90daae112f68"],"e6ea410f5b876f6fa92ac261542678209d4a4037":["17f9c12074f42db9f3cff34b42f9c4a60368a97d"],"3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b":["d1b4f9f023bf5098df34505adf1ed91daa67c239"],"9691bd012f05632bf944115412ed90daae112f68":["e6ea410f5b876f6fa92ac261542678209d4a4037"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"17f9c12074f42db9f3cff34b42f9c4a60368a97d":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["17f9c12074f42db9f3cff34b42f9c4a60368a97d","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b","a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}