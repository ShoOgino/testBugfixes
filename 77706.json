{"path":"solr/core/src/test/org/apache/solr/update/processor/AtomicUpdatesTest#testUpdateNestedDocUnsupported().mjava","commits":[{"id":"2cf7236e10f20245f085d633e82f01bb27a974e0","date":1567739815,"type":0,"author":"David Smiley","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/update/processor/AtomicUpdatesTest#testUpdateNestedDocUnsupported().mjava","pathOld":"/dev/null","sourceNew":"  /**\n   * Test what happens if we try to update the parent of a doc with children.\n   * This fails because _root_ is not stored which is currently required for doing this.\n   */\n  @Test\n  public void testUpdateNestedDocUnsupported() throws Exception {\n    assertU(adoc(sdoc(\n        \"id\", \"1\",\n        \"children\", Arrays.asList(sdoc(\n            \"id\", \"100\",\n            \"cat\", \"childCat1\")\n        )\n    )));\n\n    assertU(commit());\n\n    // update the parent doc to have a category\n    try {\n      assertU(adoc(sdoc(\n          \"id\", \"1\",\n          \"cat\", Collections.singletonMap(\"add\", Arrays.asList(\"parentCat\"))\n      )));\n      fail(\"expected a failure\");\n    } catch (Exception e) {\n      assertEquals(\"org.apache.solr.common.SolrException: \" +\n          \"This schema does not support partial updates to nested docs. See ref guide.\", e.toString());\n    }\n\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"2cf7236e10f20245f085d633e82f01bb27a974e0":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["2cf7236e10f20245f085d633e82f01bb27a974e0"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["2cf7236e10f20245f085d633e82f01bb27a974e0"],"2cf7236e10f20245f085d633e82f01bb27a974e0":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}