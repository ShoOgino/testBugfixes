{"path":"solr/core/src/java/org/apache/solr/update/processor/AtomicUpdateDocumentMerger#doRemoveRegex(SolrInputDocument,SolrInputField,Object).mjava","commits":[{"id":"2d3b450958a83a29a16e492fbff9d094a9a571b6","date":1421525067,"type":1,"author":"Yonik Seeley","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/update/processor/AtomicUpdateDocumentMerger#doRemoveRegex(SolrInputDocument,SolrInputField,Object).mjava","pathOld":"solr/core/src/java/org/apache/solr/update/processor/DistributedUpdateProcessor#doRemoveRegex(SolrInputDocument,SolrInputField,Object).mjava","sourceNew":"  protected void doRemoveRegex(SolrInputDocument toDoc, SolrInputField sif, Object valuePatterns) {\n    final String name = sif.getName();\n    final SolrInputField existingField = toDoc.get(name);\n    if (existingField != null) {\n      final Collection<Object> valueToRemove = new HashSet<>();\n      final Collection<Object> original = existingField.getValues();\n      final Collection<Pattern> patterns = preparePatterns(valuePatterns);\n      for (Object value : original) {\n        for(Pattern pattern : patterns) {\n          final Matcher m = pattern.matcher(value.toString());\n          if (m.matches()) {\n            valueToRemove.add(value);\n          }\n        }\n      }\n      original.removeAll(valueToRemove);\n      toDoc.setField(name, original);\n    }\n  }\n\n","sourceOld":"  private void doRemoveRegex(SolrInputDocument oldDoc, SolrInputField sif, Object valuePatterns) {\n    final String name = sif.getName();\n    final SolrInputField existingField = oldDoc.get(name);\n    if (existingField != null) {\n      final Collection<Object> valueToRemove = new HashSet<>();\n      final Collection<Object> original = existingField.getValues();\n      final Collection<Pattern> patterns = preparePatterns(valuePatterns);\n      for (Object value : original) {\n        for(Pattern pattern : patterns) {\n          final Matcher m = pattern.matcher(value.toString());\n          if (m.matches()) {\n            valueToRemove.add(value);\n          }\n        }\n      }\n      original.removeAll(valueToRemove);\n      oldDoc.setField(name, original);\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"2d3b450958a83a29a16e492fbff9d094a9a571b6":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["2d3b450958a83a29a16e492fbff9d094a9a571b6"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["2d3b450958a83a29a16e492fbff9d094a9a571b6"],"2d3b450958a83a29a16e492fbff9d094a9a571b6":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}