{"path":"solr/core/src/java/org/apache/solr/update/processor/DistributedUpdateProcessor#doRemove(SolrInputDocument,SolrInputField,Object,IndexSchema).mjava","commits":[{"id":"1166b183ba6d2f30d8660b254c6a8255505a44c3","date":1413452503,"type":1,"author":"Noble Paul","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/update/processor/DistributedUpdateProcessor#doRemove(SolrInputDocument,SolrInputField,Object,IndexSchema).mjava","pathOld":"solr/core/src/java/org/apache/solr/update/processor/DistributedUpdateProcessor#doRemove(SolrInputDocument,SolrInputField,Object).mjava","sourceNew":"  private boolean doRemove(SolrInputDocument oldDoc, SolrInputField sif, Object fieldVal, IndexSchema schema) {\n    final String name = sif.getName();\n    SolrInputField existingField = oldDoc.get(name);\n    if(existingField == null) return false;\n    SchemaField sf = schema.getField(name);\n    int oldSize = existingField.getValueCount();\n\n    if (sf != null) {\n      final Collection<Object> original = existingField.getValues();\n      if (fieldVal instanceof Collection) {\n        for (Object object : (Collection)fieldVal){\n          original.remove(sf.getType().toNativeType(object));\n        }\n      } else {\n        original.remove(sf.getType().toNativeType(fieldVal));\n      }\n\n      oldDoc.setField(name, original);\n\n    }\n    \n    return oldSize > existingField.getValueCount();\n  }\n\n","sourceOld":"  private void doRemove(SolrInputDocument oldDoc, SolrInputField sif, Object fieldVal) {\n    final String name = sif.getName();\n    SolrInputField existingField = oldDoc.get(name);\n    if (existingField != null) {\n      final Collection<Object> original = existingField.getValues();\n      if (fieldVal instanceof Collection) {\n        original.removeAll((Collection) fieldVal);\n      } else {\n        original.remove(fieldVal);\n      }\n\n      oldDoc.setField(name, original);\n\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"c93b0dbaa6abe99bc8d1b476bcacc27b324b2b84","date":1413458798,"type":1,"author":"Robert Muir","isMerge":true,"pathNew":"solr/core/src/java/org/apache/solr/update/processor/DistributedUpdateProcessor#doRemove(SolrInputDocument,SolrInputField,Object,IndexSchema).mjava","pathOld":"solr/core/src/java/org/apache/solr/update/processor/DistributedUpdateProcessor#doRemove(SolrInputDocument,SolrInputField,Object).mjava","sourceNew":"  private boolean doRemove(SolrInputDocument oldDoc, SolrInputField sif, Object fieldVal, IndexSchema schema) {\n    final String name = sif.getName();\n    SolrInputField existingField = oldDoc.get(name);\n    if(existingField == null) return false;\n    SchemaField sf = schema.getField(name);\n    int oldSize = existingField.getValueCount();\n\n    if (sf != null) {\n      final Collection<Object> original = existingField.getValues();\n      if (fieldVal instanceof Collection) {\n        for (Object object : (Collection)fieldVal){\n          original.remove(sf.getType().toNativeType(object));\n        }\n      } else {\n        original.remove(sf.getType().toNativeType(fieldVal));\n      }\n\n      oldDoc.setField(name, original);\n\n    }\n    \n    return oldSize > existingField.getValueCount();\n  }\n\n","sourceOld":"  private void doRemove(SolrInputDocument oldDoc, SolrInputField sif, Object fieldVal) {\n    final String name = sif.getName();\n    SolrInputField existingField = oldDoc.get(name);\n    if (existingField != null) {\n      final Collection<Object> original = existingField.getValues();\n      if (fieldVal instanceof Collection) {\n        original.removeAll((Collection) fieldVal);\n      } else {\n        original.remove(fieldVal);\n      }\n\n      oldDoc.setField(name, original);\n\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"2d3b450958a83a29a16e492fbff9d094a9a571b6","date":1421525067,"type":5,"author":"Yonik Seeley","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/update/processor/AtomicUpdateDocumentMerger#doRemove(SolrInputDocument,SolrInputField,Object).mjava","pathOld":"solr/core/src/java/org/apache/solr/update/processor/DistributedUpdateProcessor#doRemove(SolrInputDocument,SolrInputField,Object,IndexSchema).mjava","sourceNew":"  protected void doRemove(SolrInputDocument toDoc, SolrInputField sif, Object fieldVal) {\n    final String name = sif.getName();\n    SolrInputField existingField = toDoc.get(name);\n    if(existingField == null) return;\n    SchemaField sf = schema.getField(name);\n\n    if (sf != null) {\n      final Collection<Object> original = existingField.getValues();\n      if (fieldVal instanceof Collection) {\n        for (Object object : (Collection)fieldVal){\n          original.remove(sf.getType().toNativeType(object));\n        }\n      } else {\n        original.remove(sf.getType().toNativeType(fieldVal));\n      }\n\n      toDoc.setField(name, original);\n    }\n  }\n\n","sourceOld":"  private boolean doRemove(SolrInputDocument oldDoc, SolrInputField sif, Object fieldVal, IndexSchema schema) {\n    final String name = sif.getName();\n    SolrInputField existingField = oldDoc.get(name);\n    if(existingField == null) return false;\n    SchemaField sf = schema.getField(name);\n    int oldSize = existingField.getValueCount();\n\n    if (sf != null) {\n      final Collection<Object> original = existingField.getValues();\n      if (fieldVal instanceof Collection) {\n        for (Object object : (Collection)fieldVal){\n          original.remove(sf.getType().toNativeType(object));\n        }\n      } else {\n        original.remove(sf.getType().toNativeType(fieldVal));\n      }\n\n      oldDoc.setField(name, original);\n\n    }\n    \n    return oldSize > existingField.getValueCount();\n  }\n\n","bugFix":null,"bugIntro":["c8fef7b93de1912f1554371b19f6d4ef5f8c0acd"],"isBuggy":true,"nexts":[],"revCommit":null}],"commit2Parents":{"c93b0dbaa6abe99bc8d1b476bcacc27b324b2b84":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","1166b183ba6d2f30d8660b254c6a8255505a44c3"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"1166b183ba6d2f30d8660b254c6a8255505a44c3":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"2d3b450958a83a29a16e492fbff9d094a9a571b6":["1166b183ba6d2f30d8660b254c6a8255505a44c3"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["2d3b450958a83a29a16e492fbff9d094a9a571b6"]},"commit2Childs":{"c93b0dbaa6abe99bc8d1b476bcacc27b324b2b84":[],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["c93b0dbaa6abe99bc8d1b476bcacc27b324b2b84","1166b183ba6d2f30d8660b254c6a8255505a44c3"],"1166b183ba6d2f30d8660b254c6a8255505a44c3":["c93b0dbaa6abe99bc8d1b476bcacc27b324b2b84","2d3b450958a83a29a16e492fbff9d094a9a571b6"],"2d3b450958a83a29a16e492fbff9d094a9a571b6":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["c93b0dbaa6abe99bc8d1b476bcacc27b324b2b84","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}