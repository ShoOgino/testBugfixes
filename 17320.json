{"path":"solr/core/src/java/org/apache/solr/search/grouping/distributed/responseprocessor/TopGroupsShardResponseProcessor#fillResultIds(ResponseBuilder).mjava","commits":[{"id":"755c262dae0f6ffb923e2eff5845b34ff808032a","date":1561743521,"type":0,"author":"Christine Poerschke","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/search/grouping/distributed/responseprocessor/TopGroupsShardResponseProcessor#fillResultIds(ResponseBuilder).mjava","pathOld":"/dev/null","sourceNew":"  /**\n   * Fill the {@link ResponseBuilder}'s <code>resultIds</code> field.\n   * @param rb the response builder\n   */\n  static void fillResultIds(ResponseBuilder rb) {\n    Map<Object, ShardDoc> resultIds = new HashMap<>();\n    int i = 0;\n    for (TopGroups<BytesRef> topGroups : rb.mergedTopGroups.values()) {\n      for (GroupDocs<BytesRef> group : topGroups.groups) {\n        for (ScoreDoc scoreDoc : group.scoreDocs) {\n          ShardDoc solrDoc = (ShardDoc) scoreDoc;\n          // Include the first if there are duplicate IDs\n          if ( ! resultIds.containsKey(solrDoc.id)) {\n            solrDoc.positionInResponse = i++;\n            resultIds.put(solrDoc.id, solrDoc);\n          }\n        }\n      }\n    }\n    for (QueryCommandResult queryCommandResult : rb.mergedQueryCommandResults.values()) {\n      for (ScoreDoc scoreDoc : queryCommandResult.getTopDocs().scoreDocs) {\n        ShardDoc solrDoc = (ShardDoc) scoreDoc;\n        solrDoc.positionInResponse = i++;\n        resultIds.put(solrDoc.id, solrDoc);\n      }\n    }\n\n    rb.resultIds = resultIds;\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"755c262dae0f6ffb923e2eff5845b34ff808032a":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["755c262dae0f6ffb923e2eff5845b34ff808032a"]},"commit2Childs":{"755c262dae0f6ffb923e2eff5845b34ff808032a":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["755c262dae0f6ffb923e2eff5845b34ff808032a"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}