{"path":"solr/core/src/java/org/apache/solr/search/CollapsingQParserPlugin.IntFieldValueStrategy#getCollapsedSet().mjava","commits":[{"id":"8ced52befdc8d88d90766aadbaac496f3fd0e4ee","date":1421070034,"type":0,"author":"Joel Bernstein","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/search/CollapsingQParserPlugin.IntFieldValueStrategy#getCollapsedSet().mjava","pathOld":"/dev/null","sourceNew":"    public FixedBitSet getCollapsedSet() {\n\n      if(nullDoc > -1) {\n        this.collapsedSet.set(nullDoc);\n      }\n\n      //Handle the boosted docs.\n      if(this.boostKeys != null) {\n        int s = boostKeys.size();\n        for(int i=0; i<s; i++) {\n          int key = this.boostKeys.get(i);\n          if(key != nullValue) {\n            cmap.remove(key);\n          }\n          //Add the boosted docs to the collapsedSet\n          this.collapsedSet.set(boostDocs.get(i));\n        }\n\n        mergeBoost.reset();\n      }\n\n      Iterator<IntLongCursor> it1 = cmap.iterator();\n\n     if(needsScores) {\n       while(it1.hasNext()) {\n         IntLongCursor cursor = it1.next();\n         int pointer = (int)(cursor.value>>32);\n         collapsedSet.set((int)(docScores.get(pointer)>>32));\n       }\n     } else {\n      while(it1.hasNext()) {\n        IntLongCursor cursor = it1.next();\n        int pointer = (int)(cursor.value>>32);\n        collapsedSet.set(docs.get(pointer));\n      }\n     }\n\n      return collapsedSet;\n    }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"0a9c4a5022409b649909f75244642a57739b3598","date":1422812185,"type":3,"author":"Joel Bernstein","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/search/CollapsingQParserPlugin.IntFieldValueStrategy#getCollapsedSet().mjava","pathOld":"solr/core/src/java/org/apache/solr/search/CollapsingQParserPlugin.IntFieldValueStrategy#getCollapsedSet().mjava","sourceNew":"    public FixedBitSet getCollapsedSet() {\n\n      if(nullDoc > -1) {\n        this.collapsedSet.set(nullDoc);\n      }\n\n      //Handle the boosted docs.\n      if(this.boostKeys != null) {\n        int s = boostKeys.size();\n        for(int i=0; i<s; i++) {\n          int key = this.boostKeys.get(i);\n          if(key != nullValue) {\n            cmap.remove(key);\n          }\n          //Add the boosted docs to the collapsedSet\n          this.collapsedSet.set(boostDocs.get(i));\n        }\n\n        mergeBoost.reset();\n      }\n\n      Iterator<IntIntCursor> it1 = cmap.iterator();\n      while(it1.hasNext()) {\n        IntIntCursor cursor = it1.next();\n        int pointer = cursor.value;\n        collapsedSet.set(docs[pointer]);\n      }\n\n      return collapsedSet;\n    }\n\n","sourceOld":"    public FixedBitSet getCollapsedSet() {\n\n      if(nullDoc > -1) {\n        this.collapsedSet.set(nullDoc);\n      }\n\n      //Handle the boosted docs.\n      if(this.boostKeys != null) {\n        int s = boostKeys.size();\n        for(int i=0; i<s; i++) {\n          int key = this.boostKeys.get(i);\n          if(key != nullValue) {\n            cmap.remove(key);\n          }\n          //Add the boosted docs to the collapsedSet\n          this.collapsedSet.set(boostDocs.get(i));\n        }\n\n        mergeBoost.reset();\n      }\n\n      Iterator<IntLongCursor> it1 = cmap.iterator();\n\n     if(needsScores) {\n       while(it1.hasNext()) {\n         IntLongCursor cursor = it1.next();\n         int pointer = (int)(cursor.value>>32);\n         collapsedSet.set((int)(docScores.get(pointer)>>32));\n       }\n     } else {\n      while(it1.hasNext()) {\n        IntLongCursor cursor = it1.next();\n        int pointer = (int)(cursor.value>>32);\n        collapsedSet.set(docs.get(pointer));\n      }\n     }\n\n      return collapsedSet;\n    }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"3575e61fd7df2bbcce8b977a23d3d67aa423ce62","date":1586507050,"type":3,"author":"Cao Manh Dat","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/search/CollapsingQParserPlugin.IntFieldValueStrategy#getCollapsedSet().mjava","pathOld":"solr/core/src/java/org/apache/solr/search/CollapsingQParserPlugin.IntFieldValueStrategy#getCollapsedSet().mjava","sourceNew":"    public FixedBitSet getCollapsedSet() {\n\n      if(nullDoc > -1) {\n        this.collapsedSet.set(nullDoc);\n      }\n\n      //Handle the boosted docs.\n      if(this.boostKeys != null) {\n        int s = boostKeys.size();\n        for(int i=0; i<s; i++) {\n          int key = this.boostKeys.get(i);\n          if(key != nullValue) {\n            cmap.remove(key);\n          }\n          //Add the boosted docs to the collapsedSet\n          this.collapsedSet.set(boostDocs.get(i));\n        }\n\n        mergeBoost.reset();\n      }\n\n      Iterator<IntIntCursor> it1 = cmap.iterator();\n      while(it1.hasNext()) {\n        IntIntCursor cursor = it1.next();\n        int pointer = cursor.value;\n        collapsedSet.set(docs.get(pointer));\n      }\n\n      return collapsedSet;\n    }\n\n","sourceOld":"    public FixedBitSet getCollapsedSet() {\n\n      if(nullDoc > -1) {\n        this.collapsedSet.set(nullDoc);\n      }\n\n      //Handle the boosted docs.\n      if(this.boostKeys != null) {\n        int s = boostKeys.size();\n        for(int i=0; i<s; i++) {\n          int key = this.boostKeys.get(i);\n          if(key != nullValue) {\n            cmap.remove(key);\n          }\n          //Add the boosted docs to the collapsedSet\n          this.collapsedSet.set(boostDocs.get(i));\n        }\n\n        mergeBoost.reset();\n      }\n\n      Iterator<IntIntCursor> it1 = cmap.iterator();\n      while(it1.hasNext()) {\n        IntIntCursor cursor = it1.next();\n        int pointer = cursor.value;\n        collapsedSet.set(docs[pointer]);\n      }\n\n      return collapsedSet;\n    }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"8ced52befdc8d88d90766aadbaac496f3fd0e4ee":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"3575e61fd7df2bbcce8b977a23d3d67aa423ce62":["0a9c4a5022409b649909f75244642a57739b3598"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"0a9c4a5022409b649909f75244642a57739b3598":["8ced52befdc8d88d90766aadbaac496f3fd0e4ee"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["3575e61fd7df2bbcce8b977a23d3d67aa423ce62"]},"commit2Childs":{"8ced52befdc8d88d90766aadbaac496f3fd0e4ee":["0a9c4a5022409b649909f75244642a57739b3598"],"3575e61fd7df2bbcce8b977a23d3d67aa423ce62":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["8ced52befdc8d88d90766aadbaac496f3fd0e4ee"],"0a9c4a5022409b649909f75244642a57739b3598":["3575e61fd7df2bbcce8b977a23d3d67aa423ce62"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}