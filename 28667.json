{"path":"lucene/core/src/test/org/apache/lucene/index/TestAddIndexes#testAddIndexesDVUpdateNewSegmentName().mjava","commits":[{"id":"e165dc2e339428ed06c118109d99acf35e8240de","date":1523200521,"type":0,"author":"Mike McCandless","isMerge":false,"pathNew":"lucene/core/src/test/org/apache/lucene/index/TestAddIndexes#testAddIndexesDVUpdateNewSegmentName().mjava","pathOld":"/dev/null","sourceNew":"  public void testAddIndexesDVUpdateNewSegmentName() throws Exception {\n    Directory dir1 = newDirectory();\n    IndexWriterConfig iwc1 = newIndexWriterConfig(new MockAnalyzer(random()));\n    IndexWriter w1 = new IndexWriter(dir1, iwc1);\n    Document doc = new Document();\n    doc.add(new StringField(\"id\", \"1\", Field.Store.YES));\n    doc.add(new StringField(\"version\", \"1\", Field.Store.YES));\n    doc.add(new NumericDocValuesField(\"soft_delete\", 1));\n    w1.addDocument(doc);\n    w1.flush();\n\n    w1.updateDocValues(new Term(\"id\", \"1\"), new NumericDocValuesField(\"soft_delete\", 1));\n    w1.commit();\n    w1.close();\n\n    IndexWriterConfig iwc2 = newIndexWriterConfig(new MockAnalyzer(random()));\n    Directory dir2 = newDirectory();\n    IndexWriter w2 = new IndexWriter(dir2, iwc2);\n    w2.addDocument(new Document());\n    w2.commit();\n    \n    w2.addIndexes(dir1);\n    w2.commit();\n    w2.close();\n\n    if (VERBOSE) {\n      System.out.println(\"\\nTEST: now open w3\");\n    }\n    IndexWriterConfig iwc3 = newIndexWriterConfig(new MockAnalyzer(random()));\n    if (VERBOSE) {\n      iwc3.setInfoStream(System.out);\n    }        \n    IndexWriter w3 = new IndexWriter(dir2, iwc3);\n    w3.close();\n\n    iwc3 = newIndexWriterConfig(new MockAnalyzer(random()));\n    w3 = new IndexWriter(dir2, iwc3);\n    w3.close();\n    dir1.close();\n    dir2.close();\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"d58e44159788900f4a2113b84463dc3fbbf80f20","date":1523319203,"type":0,"author":"Karl Wright","isMerge":true,"pathNew":"lucene/core/src/test/org/apache/lucene/index/TestAddIndexes#testAddIndexesDVUpdateNewSegmentName().mjava","pathOld":"/dev/null","sourceNew":"  public void testAddIndexesDVUpdateNewSegmentName() throws Exception {\n    Directory dir1 = newDirectory();\n    IndexWriterConfig iwc1 = newIndexWriterConfig(new MockAnalyzer(random()));\n    IndexWriter w1 = new IndexWriter(dir1, iwc1);\n    Document doc = new Document();\n    doc.add(new StringField(\"id\", \"1\", Field.Store.YES));\n    doc.add(new StringField(\"version\", \"1\", Field.Store.YES));\n    doc.add(new NumericDocValuesField(\"soft_delete\", 1));\n    w1.addDocument(doc);\n    w1.flush();\n\n    w1.updateDocValues(new Term(\"id\", \"1\"), new NumericDocValuesField(\"soft_delete\", 1));\n    w1.commit();\n    w1.close();\n\n    IndexWriterConfig iwc2 = newIndexWriterConfig(new MockAnalyzer(random()));\n    Directory dir2 = newDirectory();\n    IndexWriter w2 = new IndexWriter(dir2, iwc2);\n    w2.addDocument(new Document());\n    w2.commit();\n    \n    w2.addIndexes(dir1);\n    w2.commit();\n    w2.close();\n\n    if (VERBOSE) {\n      System.out.println(\"\\nTEST: now open w3\");\n    }\n    IndexWriterConfig iwc3 = newIndexWriterConfig(new MockAnalyzer(random()));\n    if (VERBOSE) {\n      iwc3.setInfoStream(System.out);\n    }        \n    IndexWriter w3 = new IndexWriter(dir2, iwc3);\n    w3.close();\n\n    iwc3 = newIndexWriterConfig(new MockAnalyzer(random()));\n    w3 = new IndexWriter(dir2, iwc3);\n    w3.close();\n    dir1.close();\n    dir2.close();\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"d58e44159788900f4a2113b84463dc3fbbf80f20":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","e165dc2e339428ed06c118109d99acf35e8240de"],"e165dc2e339428ed06c118109d99acf35e8240de":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["d58e44159788900f4a2113b84463dc3fbbf80f20"]},"commit2Childs":{"d58e44159788900f4a2113b84463dc3fbbf80f20":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"e165dc2e339428ed06c118109d99acf35e8240de":["d58e44159788900f4a2113b84463dc3fbbf80f20"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["d58e44159788900f4a2113b84463dc3fbbf80f20","e165dc2e339428ed06c118109d99acf35e8240de"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}