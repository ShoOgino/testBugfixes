{"path":"solr/solr-ref-guide/tools/BuildNavDataFiles.Page#Page(File,DocumentHeader).mjava","commits":[{"id":"580584a6c5fc0f03777842090bc2d2dfb64337e5","date":1574200470,"type":1,"author":"Cassandra Targett","isMerge":false,"pathNew":"solr/solr-ref-guide/tools/BuildNavDataFiles.Page#Page(File,DocumentHeader).mjava","pathOld":"solr/solr-ref-guide/tools/BuildNavAndPDFBody.Page#Page(File,DocumentHeader).mjava","sourceNew":"    public Page(File file, DocumentHeader header) {\n      if (! file.getName().endsWith(\".adoc\")) {\n        throw new RuntimeException(file + \" has does not end in '.adoc' - this code can't be used\");\n      }\n      \n      this.file = file;\n      this.title = header.getDocumentTitle().getMain();\n\n      this.shortname = file.getName().replaceAll(\"\\\\.adoc$\",\"\");\n      this.permalink = this.shortname + \".html\";\n      \n      // TODO: do error checking if attribute metadata we care about is missing\n      Map<String,Object> attrs = header.getAttributes();\n\n      // See SOLR-11541: Fail if a user adds new docs with older missleading attributes we don't use/want\n      for (String attr : Arrays.asList(\"page-shortname\", \"page-permalink\")) {\n        if (attrs.containsKey(attr)) {\n          throw new RuntimeException(file + \": remove the \" + attr + \" attribute, it's no longer needed, and may confuse readers/editors\");\n        }\n      }\n      \n      if (attrs.containsKey(\"page-children\")) {\n        String kidsString = ((String) attrs.get(\"page-children\")).trim();\n        this.kidShortnames = Collections.<String>unmodifiableList\n          (Arrays.asList(kidsString.split(\",\\\\s+\")));\n        this.mutableKids = new ArrayList<Page>(kidShortnames.size());\n      } else {\n        this.kidShortnames = Collections.<String>emptyList();\n        this.mutableKids = Collections.<Page>emptyList();\n      }\n      this.kids = Collections.<Page>unmodifiableList(mutableKids);\n    }\n\n","sourceOld":"    public Page(File file, DocumentHeader header) {\n      if (! file.getName().endsWith(\".adoc\")) {\n        throw new RuntimeException(file + \" has does not end in '.adoc' - this code can't be used\");\n      }\n      \n      this.file = file;\n      this.title = header.getDocumentTitle().getMain();\n\n      this.shortname = file.getName().replaceAll(\"\\\\.adoc$\",\"\");\n      this.permalink = this.shortname + \".html\";\n      \n      // TODO: do error checking if attribute metadata we care about is missing\n      Map<String,Object> attrs = header.getAttributes();\n\n      // See SOLR-11541: Fail if a user adds new docs with older missleading attributes we don't use/want\n      for (String attr : Arrays.asList(\"page-shortname\", \"page-permalink\")) {\n        if (attrs.containsKey(attr)) {\n          throw new RuntimeException(file + \": remove the \" + attr + \" attribute, it's no longer needed, and may confuse readers/editors\");\n        }\n      }\n      \n      if (attrs.containsKey(\"page-children\")) {\n        String kidsString = ((String) attrs.get(\"page-children\")).trim();\n        this.kidShortnames = Collections.<String>unmodifiableList\n          (Arrays.asList(kidsString.split(\",\\\\s+\")));\n        this.mutableKids = new ArrayList<Page>(kidShortnames.size());\n      } else {\n        this.kidShortnames = Collections.<String>emptyList();\n        this.mutableKids = Collections.<Page>emptyList();\n      }\n      this.kids = Collections.<Page>unmodifiableList(mutableKids);\n    }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"580584a6c5fc0f03777842090bc2d2dfb64337e5":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["580584a6c5fc0f03777842090bc2d2dfb64337e5"]},"commit2Childs":{"580584a6c5fc0f03777842090bc2d2dfb64337e5":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["580584a6c5fc0f03777842090bc2d2dfb64337e5"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}