{"path":"solr/core/src/java/org/apache/solr/util/SolrCLI.AuthTool#updateIncludeFileEnableAuth(File,String,String,CommandLine).mjava","commits":[{"id":"86d2df3ca94d97c62f70b0d321f5f597de2d3eb3","date":1503399053,"type":1,"author":"Jan HÃ¸ydahl","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/util/SolrCLI.AuthTool#updateIncludeFileEnableAuth(File,String,String,CommandLine).mjava","pathOld":"solr/core/src/java/org/apache/solr/util/SolrCLI.AuthTool#updateIncludeFileEnableAuth(File,String,String).mjava","sourceNew":"    /**\n     * This will update the include file (e.g. solr.in.sh / solr.in.cmd) with the authentication parameters.\n     * @param includeFile The include file\n     * @param basicAuthConfFile  If basicAuth, the path of the file containing credentials. If not, null.\n     * @param kerberosConfig If kerberos, the config string containing startup parameters. If not, null.\n     */\n    private void updateIncludeFileEnableAuth(File includeFile, String basicAuthConfFile, String kerberosConfig, CommandLine cli) throws IOException {\n      assert !(basicAuthConfFile != null && kerberosConfig != null); // only one of the two needs to be populated\n      List<String> includeFileLines = FileUtils.readLines(includeFile, StandardCharsets.UTF_8);\n      for (int i=0; i<includeFileLines.size(); i++) {\n        String line = includeFileLines.get(i);\n        if (authenticationVariables.contains(line.trim().split(\"=\")[0].trim())) { // Non-Windows\n          includeFileLines.set(i, \"# \" + line);\n        }\n        if (line.trim().split(\"=\")[0].trim().startsWith(\"set \")\n            && authenticationVariables.contains(line.trim().split(\"=\")[0].trim().substring(4))) { // Windows\n          includeFileLines.set(i, \"REM \" + line);\n        }\n      }\n      includeFileLines.add(\"\"); // blank line\n      \n      if (basicAuthConfFile != null) { // for basicAuth\n        if (SystemUtils.IS_OS_WINDOWS) {\n          includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n          includeFileLines.add(\"set SOLR_AUTH_TYPE=basic\");\n          includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        } else {\n          includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n          includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"basic\\\"\");\n          includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        }\n      } else { // for kerberos\n        if (SystemUtils.IS_OS_WINDOWS) {\n          includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n          includeFileLines.add(\"set SOLR_AUTH_TYPE=kerberos\");\n          includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        } else {\n          includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n          includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"kerberos\\\"\");\n          includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"\" + kerberosConfig + \"\\\"\");\n        }        \n      }\n      FileUtils.writeLines(includeFile, StandardCharsets.UTF_8.name(), includeFileLines);\n\n      if (basicAuthConfFile != null) {\n        echoIfVerbose(\"Written out credentials file: \" + basicAuthConfFile, cli);\n      }\n      echoIfVerbose(\"Updated Solr include file: \" + includeFile.getAbsolutePath(), cli);\n    }\n\n","sourceOld":"    /**\n     * This will update the include file (e.g. solr.in.sh / solr.in.cmd) with the authentication parameters.\n     * @param includeFile The include file\n     * @param basicAuthConfFile  If basicAuth, the path of the file containing credentials. If not, null.\n     * @param kerberosConfig If kerberos, the config string containing startup parameters. If not, null.\n     */\n    private void updateIncludeFileEnableAuth(File includeFile, String basicAuthConfFile, String kerberosConfig) throws IOException {\n      assert !(basicAuthConfFile != null && kerberosConfig != null); // only one of the two needs to be populated\n      List<String> includeFileLines = FileUtils.readLines(includeFile, StandardCharsets.UTF_8);\n      for (int i=0; i<includeFileLines.size(); i++) {\n        String line = includeFileLines.get(i);\n        if (authenticationVariables.contains(line.trim().split(\"=\")[0].trim())) { // Non-Windows\n          includeFileLines.set(i, \"# \" + line);\n        }\n        if (line.trim().split(\"=\")[0].trim().startsWith(\"set \")\n            && authenticationVariables.contains(line.trim().split(\"=\")[0].trim().substring(4))) { // Windows\n          includeFileLines.set(i, \"REM \" + line);\n        }\n      }\n      includeFileLines.add(\"\"); // blank line\n      \n      if (basicAuthConfFile != null) { // for basicAuth\n        if (SystemUtils.IS_OS_WINDOWS) {\n          includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n          includeFileLines.add(\"set SOLR_AUTH_TYPE=basic\");\n          includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        } else {\n          includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n          includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"basic\\\"\");\n          includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        }\n      } else { // for kerberos\n        if (SystemUtils.IS_OS_WINDOWS) {\n          includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n          includeFileLines.add(\"set SOLR_AUTH_TYPE=kerberos\");\n          includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        } else {\n          includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n          includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"kerberos\\\"\");\n          includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"\" + kerberosConfig + \"\\\"\");\n        }        \n      }\n      FileUtils.writeLines(includeFile, StandardCharsets.UTF_8.name(), includeFileLines);\n\n      if (basicAuthConfFile != null) {\n        System.out.println(\"Written out credentials file: \" + basicAuthConfFile);\n      }\n      System.out.println(\"Updated Solr include file: \" + includeFile.getAbsolutePath());\n    }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"3a7809d1d753b67f48b1a706e17034bf8b624ea3","date":1504366927,"type":1,"author":"Shalin Shekhar Mangar","isMerge":true,"pathNew":"solr/core/src/java/org/apache/solr/util/SolrCLI.AuthTool#updateIncludeFileEnableAuth(File,String,String,CommandLine).mjava","pathOld":"solr/core/src/java/org/apache/solr/util/SolrCLI.AuthTool#updateIncludeFileEnableAuth(File,String,String).mjava","sourceNew":"    /**\n     * This will update the include file (e.g. solr.in.sh / solr.in.cmd) with the authentication parameters.\n     * @param includeFile The include file\n     * @param basicAuthConfFile  If basicAuth, the path of the file containing credentials. If not, null.\n     * @param kerberosConfig If kerberos, the config string containing startup parameters. If not, null.\n     */\n    private void updateIncludeFileEnableAuth(File includeFile, String basicAuthConfFile, String kerberosConfig, CommandLine cli) throws IOException {\n      assert !(basicAuthConfFile != null && kerberosConfig != null); // only one of the two needs to be populated\n      List<String> includeFileLines = FileUtils.readLines(includeFile, StandardCharsets.UTF_8);\n      for (int i=0; i<includeFileLines.size(); i++) {\n        String line = includeFileLines.get(i);\n        if (authenticationVariables.contains(line.trim().split(\"=\")[0].trim())) { // Non-Windows\n          includeFileLines.set(i, \"# \" + line);\n        }\n        if (line.trim().split(\"=\")[0].trim().startsWith(\"set \")\n            && authenticationVariables.contains(line.trim().split(\"=\")[0].trim().substring(4))) { // Windows\n          includeFileLines.set(i, \"REM \" + line);\n        }\n      }\n      includeFileLines.add(\"\"); // blank line\n      \n      if (basicAuthConfFile != null) { // for basicAuth\n        if (SystemUtils.IS_OS_WINDOWS) {\n          includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n          includeFileLines.add(\"set SOLR_AUTH_TYPE=basic\");\n          includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        } else {\n          includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n          includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"basic\\\"\");\n          includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        }\n      } else { // for kerberos\n        if (SystemUtils.IS_OS_WINDOWS) {\n          includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n          includeFileLines.add(\"set SOLR_AUTH_TYPE=kerberos\");\n          includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        } else {\n          includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n          includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"kerberos\\\"\");\n          includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"\" + kerberosConfig + \"\\\"\");\n        }        \n      }\n      FileUtils.writeLines(includeFile, StandardCharsets.UTF_8.name(), includeFileLines);\n\n      if (basicAuthConfFile != null) {\n        echoIfVerbose(\"Written out credentials file: \" + basicAuthConfFile, cli);\n      }\n      echoIfVerbose(\"Updated Solr include file: \" + includeFile.getAbsolutePath(), cli);\n    }\n\n","sourceOld":"    /**\n     * This will update the include file (e.g. solr.in.sh / solr.in.cmd) with the authentication parameters.\n     * @param includeFile The include file\n     * @param basicAuthConfFile  If basicAuth, the path of the file containing credentials. If not, null.\n     * @param kerberosConfig If kerberos, the config string containing startup parameters. If not, null.\n     */\n    private void updateIncludeFileEnableAuth(File includeFile, String basicAuthConfFile, String kerberosConfig) throws IOException {\n      assert !(basicAuthConfFile != null && kerberosConfig != null); // only one of the two needs to be populated\n      List<String> includeFileLines = FileUtils.readLines(includeFile, StandardCharsets.UTF_8);\n      for (int i=0; i<includeFileLines.size(); i++) {\n        String line = includeFileLines.get(i);\n        if (authenticationVariables.contains(line.trim().split(\"=\")[0].trim())) { // Non-Windows\n          includeFileLines.set(i, \"# \" + line);\n        }\n        if (line.trim().split(\"=\")[0].trim().startsWith(\"set \")\n            && authenticationVariables.contains(line.trim().split(\"=\")[0].trim().substring(4))) { // Windows\n          includeFileLines.set(i, \"REM \" + line);\n        }\n      }\n      includeFileLines.add(\"\"); // blank line\n      \n      if (basicAuthConfFile != null) { // for basicAuth\n        if (SystemUtils.IS_OS_WINDOWS) {\n          includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n          includeFileLines.add(\"set SOLR_AUTH_TYPE=basic\");\n          includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        } else {\n          includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n          includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"basic\\\"\");\n          includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        }\n      } else { // for kerberos\n        if (SystemUtils.IS_OS_WINDOWS) {\n          includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n          includeFileLines.add(\"set SOLR_AUTH_TYPE=kerberos\");\n          includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        } else {\n          includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n          includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"kerberos\\\"\");\n          includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"\" + kerberosConfig + \"\\\"\");\n        }        \n      }\n      FileUtils.writeLines(includeFile, StandardCharsets.UTF_8.name(), includeFileLines);\n\n      if (basicAuthConfFile != null) {\n        System.out.println(\"Written out credentials file: \" + basicAuthConfFile);\n      }\n      System.out.println(\"Updated Solr include file: \" + includeFile.getAbsolutePath());\n    }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"b79a5db147a1c6f95d1625ddbc3561ef56955225","date":1528848080,"type":3,"author":"Steve Rowe","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/util/SolrCLI.AuthTool#updateIncludeFileEnableAuth(File,String,String,CommandLine).mjava","pathOld":"solr/core/src/java/org/apache/solr/util/SolrCLI.AuthTool#updateIncludeFileEnableAuth(File,String,String,CommandLine).mjava","sourceNew":"    /**\n     * This will update the include file (e.g. solr.in.sh / solr.in.cmd) with the authentication parameters.\n     * @param includeFile The include file\n     * @param basicAuthConfFile  If basicAuth, the path of the file containing credentials. If not, null.\n     * @param kerberosConfig If kerberos, the config string containing startup parameters. If not, null.\n     */\n    private void updateIncludeFileEnableAuth(File includeFile, String basicAuthConfFile, String kerberosConfig, CommandLine cli) throws IOException {\n      assert !(basicAuthConfFile != null && kerberosConfig != null); // only one of the two needs to be populated\n      List<String> includeFileLines = FileUtils.readLines(includeFile, StandardCharsets.UTF_8);\n      for (int i=0; i<includeFileLines.size(); i++) {\n        String line = includeFileLines.get(i);\n        if (authenticationVariables.contains(line.trim().split(\"=\")[0].trim())) { // Non-Windows\n          includeFileLines.set(i, \"# \" + line);\n        }\n        if (line.trim().split(\"=\")[0].trim().startsWith(\"set \")\n            && authenticationVariables.contains(line.trim().split(\"=\")[0].trim().substring(4))) { // Windows\n          includeFileLines.set(i, \"REM \" + line);\n        }\n      }\n      includeFileLines.add(\"\"); // blank line\n      \n      if (basicAuthConfFile != null) { // for basicAuth\n        if (SystemUtils.IS_OS_WINDOWS) {\n          includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n          includeFileLines.add(\"set SOLR_AUTH_TYPE=basic\");\n          includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        } else {\n          includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n          includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"basic\\\"\");\n          includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        }\n      } else { // for kerberos\n        if (SystemUtils.IS_OS_WINDOWS) {\n          includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n          includeFileLines.add(\"set SOLR_AUTH_TYPE=kerberos\");\n          includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        } else {\n          includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n          includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"kerberos\\\"\");\n          includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"\" + kerberosConfig + \"\\\"\");\n        }        \n      }\n      FileUtils.writeLines(includeFile, StandardCharsets.UTF_8.name(), includeFileLines);\n\n      if (basicAuthConfFile != null) {\n        echoIfVerbose(\"Written out credentials file: \" + basicAuthConfFile, cli);\n      }\n      echoIfVerbose(\"Updated Solr include file: \" + includeFile.getAbsolutePath(), cli);\n    }\n\n","sourceOld":"    /**\n     * This will update the include file (e.g. solr.in.sh / solr.in.cmd) with the authentication parameters.\n     * @param includeFile The include file\n     * @param basicAuthConfFile  If basicAuth, the path of the file containing credentials. If not, null.\n     * @param kerberosConfig If kerberos, the config string containing startup parameters. If not, null.\n     */\n    private void updateIncludeFileEnableAuth(File includeFile, String basicAuthConfFile, String kerberosConfig, CommandLine cli) throws IOException {\n      assert !(basicAuthConfFile != null && kerberosConfig != null); // only one of the two needs to be populated\n      List<String> includeFileLines = FileUtils.readLines(includeFile, StandardCharsets.UTF_8);\n      for (int i=0; i<includeFileLines.size(); i++) {\n        String line = includeFileLines.get(i);\n        if (authenticationVariables.contains(line.trim().split(\"=\")[0].trim())) { // Non-Windows\n          includeFileLines.set(i, \"# \" + line);\n        }\n        if (line.trim().split(\"=\")[0].trim().startsWith(\"set \")\n            && authenticationVariables.contains(line.trim().split(\"=\")[0].trim().substring(4))) { // Windows\n          includeFileLines.set(i, \"REM \" + line);\n        }\n      }\n      includeFileLines.add(\"\"); // blank line\n      \n      if (basicAuthConfFile != null) { // for basicAuth\n        if (SystemUtils.IS_OS_WINDOWS) {\n          includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n          includeFileLines.add(\"set SOLR_AUTH_TYPE=basic\");\n          includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        } else {\n          includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n          includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"basic\\\"\");\n          includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        }\n      } else { // for kerberos\n        if (SystemUtils.IS_OS_WINDOWS) {\n          includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n          includeFileLines.add(\"set SOLR_AUTH_TYPE=kerberos\");\n          includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        } else {\n          includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n          includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"kerberos\\\"\");\n          includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"\" + kerberosConfig + \"\\\"\");\n        }        \n      }\n      FileUtils.writeLines(includeFile, StandardCharsets.UTF_8.name(), includeFileLines);\n\n      if (basicAuthConfFile != null) {\n        echoIfVerbose(\"Written out credentials file: \" + basicAuthConfFile, cli);\n      }\n      echoIfVerbose(\"Updated Solr include file: \" + includeFile.getAbsolutePath(), cli);\n    }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"7eeaaea0106c7d6a2de50acfc8d357121ef8bd26","date":1531589977,"type":3,"author":"Michael Braun","isMerge":true,"pathNew":"solr/core/src/java/org/apache/solr/util/SolrCLI.AuthTool#updateIncludeFileEnableAuth(File,String,String,CommandLine).mjava","pathOld":"solr/core/src/java/org/apache/solr/util/SolrCLI.AuthTool#updateIncludeFileEnableAuth(File,String,String,CommandLine).mjava","sourceNew":"    /**\n     * This will update the include file (e.g. solr.in.sh / solr.in.cmd) with the authentication parameters.\n     * @param includeFile The include file\n     * @param basicAuthConfFile  If basicAuth, the path of the file containing credentials. If not, null.\n     * @param kerberosConfig If kerberos, the config string containing startup parameters. If not, null.\n     */\n    private void updateIncludeFileEnableAuth(File includeFile, String basicAuthConfFile, String kerberosConfig, CommandLine cli) throws IOException {\n      assert !(basicAuthConfFile != null && kerberosConfig != null); // only one of the two needs to be populated\n      List<String> includeFileLines = FileUtils.readLines(includeFile, StandardCharsets.UTF_8);\n      for (int i=0; i<includeFileLines.size(); i++) {\n        String line = includeFileLines.get(i);\n        if (authenticationVariables.contains(line.trim().split(\"=\")[0].trim())) { // Non-Windows\n          includeFileLines.set(i, \"# \" + line);\n        }\n        if (line.trim().split(\"=\")[0].trim().startsWith(\"set \")\n            && authenticationVariables.contains(line.trim().split(\"=\")[0].trim().substring(4))) { // Windows\n          includeFileLines.set(i, \"REM \" + line);\n        }\n      }\n      includeFileLines.add(\"\"); // blank line\n      \n      if (basicAuthConfFile != null) { // for basicAuth\n        if (SystemUtils.IS_OS_WINDOWS) {\n          includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n          includeFileLines.add(\"set SOLR_AUTH_TYPE=basic\");\n          includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        } else {\n          includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n          includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"basic\\\"\");\n          includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        }\n      } else { // for kerberos\n        if (SystemUtils.IS_OS_WINDOWS) {\n          includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n          includeFileLines.add(\"set SOLR_AUTH_TYPE=kerberos\");\n          includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        } else {\n          includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n          includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"kerberos\\\"\");\n          includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"\" + kerberosConfig + \"\\\"\");\n        }        \n      }\n      FileUtils.writeLines(includeFile, StandardCharsets.UTF_8.name(), includeFileLines);\n\n      if (basicAuthConfFile != null) {\n        echoIfVerbose(\"Written out credentials file: \" + basicAuthConfFile, cli);\n      }\n      echoIfVerbose(\"Updated Solr include file: \" + includeFile.getAbsolutePath(), cli);\n    }\n\n","sourceOld":"    /**\n     * This will update the include file (e.g. solr.in.sh / solr.in.cmd) with the authentication parameters.\n     * @param includeFile The include file\n     * @param basicAuthConfFile  If basicAuth, the path of the file containing credentials. If not, null.\n     * @param kerberosConfig If kerberos, the config string containing startup parameters. If not, null.\n     */\n    private void updateIncludeFileEnableAuth(File includeFile, String basicAuthConfFile, String kerberosConfig, CommandLine cli) throws IOException {\n      assert !(basicAuthConfFile != null && kerberosConfig != null); // only one of the two needs to be populated\n      List<String> includeFileLines = FileUtils.readLines(includeFile, StandardCharsets.UTF_8);\n      for (int i=0; i<includeFileLines.size(); i++) {\n        String line = includeFileLines.get(i);\n        if (authenticationVariables.contains(line.trim().split(\"=\")[0].trim())) { // Non-Windows\n          includeFileLines.set(i, \"# \" + line);\n        }\n        if (line.trim().split(\"=\")[0].trim().startsWith(\"set \")\n            && authenticationVariables.contains(line.trim().split(\"=\")[0].trim().substring(4))) { // Windows\n          includeFileLines.set(i, \"REM \" + line);\n        }\n      }\n      includeFileLines.add(\"\"); // blank line\n      \n      if (basicAuthConfFile != null) { // for basicAuth\n        if (SystemUtils.IS_OS_WINDOWS) {\n          includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n          includeFileLines.add(\"set SOLR_AUTH_TYPE=basic\");\n          includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        } else {\n          includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n          includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"basic\\\"\");\n          includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        }\n      } else { // for kerberos\n        if (SystemUtils.IS_OS_WINDOWS) {\n          includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n          includeFileLines.add(\"set SOLR_AUTH_TYPE=kerberos\");\n          includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        } else {\n          includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n          includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"kerberos\\\"\");\n          includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"\" + kerberosConfig + \"\\\"\");\n        }        \n      }\n      FileUtils.writeLines(includeFile, StandardCharsets.UTF_8.name(), includeFileLines);\n\n      if (basicAuthConfFile != null) {\n        echoIfVerbose(\"Written out credentials file: \" + basicAuthConfFile, cli);\n      }\n      echoIfVerbose(\"Updated Solr include file: \" + includeFile.getAbsolutePath(), cli);\n    }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"0efc9f2cae117418f13ba9035f5e1d516ea7a2b5","date":1531905561,"type":3,"author":"Alessandro Benedetti","isMerge":true,"pathNew":"solr/core/src/java/org/apache/solr/util/SolrCLI.AuthTool#updateIncludeFileEnableAuth(File,String,String,CommandLine).mjava","pathOld":"solr/core/src/java/org/apache/solr/util/SolrCLI.AuthTool#updateIncludeFileEnableAuth(File,String,String,CommandLine).mjava","sourceNew":"    /**\n     * This will update the include file (e.g. solr.in.sh / solr.in.cmd) with the authentication parameters.\n     * @param includeFile The include file\n     * @param basicAuthConfFile  If basicAuth, the path of the file containing credentials. If not, null.\n     * @param kerberosConfig If kerberos, the config string containing startup parameters. If not, null.\n     */\n    private void updateIncludeFileEnableAuth(File includeFile, String basicAuthConfFile, String kerberosConfig, CommandLine cli) throws IOException {\n      assert !(basicAuthConfFile != null && kerberosConfig != null); // only one of the two needs to be populated\n      List<String> includeFileLines = FileUtils.readLines(includeFile, StandardCharsets.UTF_8);\n      for (int i=0; i<includeFileLines.size(); i++) {\n        String line = includeFileLines.get(i);\n        if (authenticationVariables.contains(line.trim().split(\"=\")[0].trim())) { // Non-Windows\n          includeFileLines.set(i, \"# \" + line);\n        }\n        if (line.trim().split(\"=\")[0].trim().startsWith(\"set \")\n            && authenticationVariables.contains(line.trim().split(\"=\")[0].trim().substring(4))) { // Windows\n          includeFileLines.set(i, \"REM \" + line);\n        }\n      }\n      includeFileLines.add(\"\"); // blank line\n      \n      if (basicAuthConfFile != null) { // for basicAuth\n        if (SystemUtils.IS_OS_WINDOWS) {\n          includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n          includeFileLines.add(\"set SOLR_AUTH_TYPE=basic\");\n          includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        } else {\n          includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n          includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"basic\\\"\");\n          includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        }\n      } else { // for kerberos\n        if (SystemUtils.IS_OS_WINDOWS) {\n          includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n          includeFileLines.add(\"set SOLR_AUTH_TYPE=kerberos\");\n          includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        } else {\n          includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n          includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"kerberos\\\"\");\n          includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"\" + kerberosConfig + \"\\\"\");\n        }        \n      }\n      FileUtils.writeLines(includeFile, StandardCharsets.UTF_8.name(), includeFileLines);\n\n      if (basicAuthConfFile != null) {\n        echoIfVerbose(\"Written out credentials file: \" + basicAuthConfFile, cli);\n      }\n      echoIfVerbose(\"Updated Solr include file: \" + includeFile.getAbsolutePath(), cli);\n    }\n\n","sourceOld":"    /**\n     * This will update the include file (e.g. solr.in.sh / solr.in.cmd) with the authentication parameters.\n     * @param includeFile The include file\n     * @param basicAuthConfFile  If basicAuth, the path of the file containing credentials. If not, null.\n     * @param kerberosConfig If kerberos, the config string containing startup parameters. If not, null.\n     */\n    private void updateIncludeFileEnableAuth(File includeFile, String basicAuthConfFile, String kerberosConfig, CommandLine cli) throws IOException {\n      assert !(basicAuthConfFile != null && kerberosConfig != null); // only one of the two needs to be populated\n      List<String> includeFileLines = FileUtils.readLines(includeFile, StandardCharsets.UTF_8);\n      for (int i=0; i<includeFileLines.size(); i++) {\n        String line = includeFileLines.get(i);\n        if (authenticationVariables.contains(line.trim().split(\"=\")[0].trim())) { // Non-Windows\n          includeFileLines.set(i, \"# \" + line);\n        }\n        if (line.trim().split(\"=\")[0].trim().startsWith(\"set \")\n            && authenticationVariables.contains(line.trim().split(\"=\")[0].trim().substring(4))) { // Windows\n          includeFileLines.set(i, \"REM \" + line);\n        }\n      }\n      includeFileLines.add(\"\"); // blank line\n      \n      if (basicAuthConfFile != null) { // for basicAuth\n        if (SystemUtils.IS_OS_WINDOWS) {\n          includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n          includeFileLines.add(\"set SOLR_AUTH_TYPE=basic\");\n          includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        } else {\n          includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n          includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"basic\\\"\");\n          includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        }\n      } else { // for kerberos\n        if (SystemUtils.IS_OS_WINDOWS) {\n          includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n          includeFileLines.add(\"set SOLR_AUTH_TYPE=kerberos\");\n          includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        } else {\n          includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n          includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"kerberos\\\"\");\n          includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"\" + kerberosConfig + \"\\\"\");\n        }        \n      }\n      FileUtils.writeLines(includeFile, StandardCharsets.UTF_8.name(), includeFileLines);\n\n      if (basicAuthConfFile != null) {\n        echoIfVerbose(\"Written out credentials file: \" + basicAuthConfFile, cli);\n      }\n      echoIfVerbose(\"Updated Solr include file: \" + includeFile.getAbsolutePath(), cli);\n    }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"0db83f1bb855a4ac824c9a2a8e1ee9b29a039c15","date":1554259533,"type":3,"author":"Gus Heck","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/util/SolrCLI.AuthTool#updateIncludeFileEnableAuth(File,String,String,CommandLine).mjava","pathOld":"solr/core/src/java/org/apache/solr/util/SolrCLI.AuthTool#updateIncludeFileEnableAuth(File,String,String,CommandLine).mjava","sourceNew":"    /**\n     * This will update the include file (e.g. solr.in.sh / solr.in.cmd) with the authentication parameters.\n     * @param includeFile The include file\n     * @param basicAuthConfFile  If basicAuth, the path of the file containing credentials. If not, null.\n     * @param kerberosConfig If kerberos, the config string containing startup parameters. If not, null.\n     */\n    private void updateIncludeFileEnableAuth(File includeFile, String basicAuthConfFile, String kerberosConfig, CommandLine cli) throws IOException {\n      assert !(basicAuthConfFile != null && kerberosConfig != null); // only one of the two needs to be populated\n      List<String> includeFileLines = FileUtils.readLines(includeFile, StandardCharsets.UTF_8);\n      for (int i=0; i<includeFileLines.size(); i++) {\n        String line = includeFileLines.get(i);\n        if (authenticationVariables.contains(line.trim().split(\"=\")[0].trim())) { // Non-Windows\n          includeFileLines.set(i, \"# \" + line);\n        }\n        if (line.trim().split(\"=\")[0].trim().startsWith(\"set \")\n            && authenticationVariables.contains(line.trim().split(\"=\")[0].trim().substring(4))) { // Windows\n          includeFileLines.set(i, \"REM \" + line);\n        }\n      }\n      includeFileLines.add(\"\"); // blank line\n\n      if (basicAuthConfFile != null) { // for basicAuth\n        if (SystemUtils.IS_OS_WINDOWS) {\n          includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n          includeFileLines.add(\"set SOLR_AUTH_TYPE=basic\");\n          includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        } else {\n          includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n          includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"basic\\\"\");\n          includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        }\n      } else { // for kerberos\n        if (SystemUtils.IS_OS_WINDOWS) {\n          includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n          includeFileLines.add(\"set SOLR_AUTH_TYPE=kerberos\");\n          includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        } else {\n          includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n          includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"kerberos\\\"\");\n          includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"\" + kerberosConfig + \"\\\"\");\n        }\n      }\n      FileUtils.writeLines(includeFile, StandardCharsets.UTF_8.name(), includeFileLines);\n\n      if (basicAuthConfFile != null) {\n        echoIfVerbose(\"Written out credentials file: \" + basicAuthConfFile, cli);\n      }\n      echoIfVerbose(\"Updated Solr include file: \" + includeFile.getAbsolutePath(), cli);\n    }\n\n","sourceOld":"    /**\n     * This will update the include file (e.g. solr.in.sh / solr.in.cmd) with the authentication parameters.\n     * @param includeFile The include file\n     * @param basicAuthConfFile  If basicAuth, the path of the file containing credentials. If not, null.\n     * @param kerberosConfig If kerberos, the config string containing startup parameters. If not, null.\n     */\n    private void updateIncludeFileEnableAuth(File includeFile, String basicAuthConfFile, String kerberosConfig, CommandLine cli) throws IOException {\n      assert !(basicAuthConfFile != null && kerberosConfig != null); // only one of the two needs to be populated\n      List<String> includeFileLines = FileUtils.readLines(includeFile, StandardCharsets.UTF_8);\n      for (int i=0; i<includeFileLines.size(); i++) {\n        String line = includeFileLines.get(i);\n        if (authenticationVariables.contains(line.trim().split(\"=\")[0].trim())) { // Non-Windows\n          includeFileLines.set(i, \"# \" + line);\n        }\n        if (line.trim().split(\"=\")[0].trim().startsWith(\"set \")\n            && authenticationVariables.contains(line.trim().split(\"=\")[0].trim().substring(4))) { // Windows\n          includeFileLines.set(i, \"REM \" + line);\n        }\n      }\n      includeFileLines.add(\"\"); // blank line\n      \n      if (basicAuthConfFile != null) { // for basicAuth\n        if (SystemUtils.IS_OS_WINDOWS) {\n          includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n          includeFileLines.add(\"set SOLR_AUTH_TYPE=basic\");\n          includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        } else {\n          includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n          includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"basic\\\"\");\n          includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        }\n      } else { // for kerberos\n        if (SystemUtils.IS_OS_WINDOWS) {\n          includeFileLines.add(\"REM The following lines added by solr.cmd for enabling BasicAuth\");\n          includeFileLines.add(\"set SOLR_AUTH_TYPE=kerberos\");\n          includeFileLines.add(\"set SOLR_AUTHENTICATION_OPTS=\\\"-Dsolr.httpclient.config=\" + basicAuthConfFile + \"\\\"\");\n        } else {\n          includeFileLines.add(\"# The following lines added by ./solr for enabling BasicAuth\");\n          includeFileLines.add(\"SOLR_AUTH_TYPE=\\\"kerberos\\\"\");\n          includeFileLines.add(\"SOLR_AUTHENTICATION_OPTS=\\\"\" + kerberosConfig + \"\\\"\");\n        }        \n      }\n      FileUtils.writeLines(includeFile, StandardCharsets.UTF_8.name(), includeFileLines);\n\n      if (basicAuthConfFile != null) {\n        echoIfVerbose(\"Written out credentials file: \" + basicAuthConfFile, cli);\n      }\n      echoIfVerbose(\"Updated Solr include file: \" + includeFile.getAbsolutePath(), cli);\n    }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"0efc9f2cae117418f13ba9035f5e1d516ea7a2b5":["86d2df3ca94d97c62f70b0d321f5f597de2d3eb3","b79a5db147a1c6f95d1625ddbc3561ef56955225"],"3a7809d1d753b67f48b1a706e17034bf8b624ea3":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","86d2df3ca94d97c62f70b0d321f5f597de2d3eb3"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"86d2df3ca94d97c62f70b0d321f5f597de2d3eb3":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"0db83f1bb855a4ac824c9a2a8e1ee9b29a039c15":["b79a5db147a1c6f95d1625ddbc3561ef56955225"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["0db83f1bb855a4ac824c9a2a8e1ee9b29a039c15"],"b79a5db147a1c6f95d1625ddbc3561ef56955225":["86d2df3ca94d97c62f70b0d321f5f597de2d3eb3"],"7eeaaea0106c7d6a2de50acfc8d357121ef8bd26":["86d2df3ca94d97c62f70b0d321f5f597de2d3eb3","b79a5db147a1c6f95d1625ddbc3561ef56955225"]},"commit2Childs":{"0efc9f2cae117418f13ba9035f5e1d516ea7a2b5":[],"3a7809d1d753b67f48b1a706e17034bf8b624ea3":[],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["3a7809d1d753b67f48b1a706e17034bf8b624ea3","86d2df3ca94d97c62f70b0d321f5f597de2d3eb3"],"86d2df3ca94d97c62f70b0d321f5f597de2d3eb3":["0efc9f2cae117418f13ba9035f5e1d516ea7a2b5","3a7809d1d753b67f48b1a706e17034bf8b624ea3","b79a5db147a1c6f95d1625ddbc3561ef56955225","7eeaaea0106c7d6a2de50acfc8d357121ef8bd26"],"0db83f1bb855a4ac824c9a2a8e1ee9b29a039c15":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"b79a5db147a1c6f95d1625ddbc3561ef56955225":["0efc9f2cae117418f13ba9035f5e1d516ea7a2b5","0db83f1bb855a4ac824c9a2a8e1ee9b29a039c15","7eeaaea0106c7d6a2de50acfc8d357121ef8bd26"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[],"7eeaaea0106c7d6a2de50acfc8d357121ef8bd26":[]},"heads":["0efc9f2cae117418f13ba9035f5e1d516ea7a2b5","3a7809d1d753b67f48b1a706e17034bf8b624ea3","cd5edd1f2b162a5cfa08efd17851a07373a96817","7eeaaea0106c7d6a2de50acfc8d357121ef8bd26"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}