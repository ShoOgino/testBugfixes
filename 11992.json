{"path":"contrib/dataimporthandler/src/main/java/org/apache/solr/handler/dataimport/DocBuilder#addFieldValue(DataConfig.Field,Map[String,Object],Map[String,Object],SolrInputDocument).mjava","commits":[{"id":"157728c1f42b384dfc049157cc95adc767da3415","date":1224572739,"type":1,"author":"Shalin Shekhar Mangar","isMerge":false,"pathNew":"contrib/dataimporthandler/src/main/java/org/apache/solr/handler/dataimport/DocBuilder#addFieldValue(DataConfig.Field,Map[String,Object],Map[String,Object],SolrInputDocument).mjava","pathOld":"contrib/dataimporthandler/src/main/java/org/apache/solr/handler/dataimport/DocBuilder#addFieldValue(DataConfig.Field,Map[String,Object],Map[String,Object],SolrWriter.SolrDoc).mjava","sourceNew":"  private void addFieldValue(DataConfig.Field field, Map<String, Object> arow,\n                             Map<String, Object> lowerCaseMap, SolrInputDocument doc) {\n    if (!field.toWrite)\n      return;\n    Object value = arow.get(field.column);\n    if (value == null) {\n      if (lowerCaseMap != null) {\n        value = lowerCaseMap.get(field.column.toLowerCase());\n      }\n      if (value == null)\n        return;\n    }\n\n    if (value instanceof Collection) {\n      Collection collection = (Collection) value;\n      if (field.multiValued) {\n        for (Object o : collection) {\n          doc.addField(field.nameOrColName, o, field.boost);\n        }\n      } else {\n        if (doc.getField(field.nameOrColName) == null)\n          for (Object o : collection) {\n            doc.addField(field.nameOrColName, o, field.boost);\n            break;\n          }\n      }\n    } else if (field.multiValued) {\n      doc.addField(field.nameOrColName, value, field.boost);\n    } else {\n      if (doc.getField(field.nameOrColName) == null)\n        doc.addField(field.nameOrColName, value, field.boost);\n    }\n  }\n\n","sourceOld":"  private void addFieldValue(DataConfig.Field field, Map<String, Object> arow,\n                             Map<String, Object> lowerCaseMap, SolrWriter.SolrDoc doc) {\n    if (!field.toWrite)\n      return;\n    Object value = arow.get(field.column);\n    if (value == null) {\n      if (lowerCaseMap != null) {\n        value = lowerCaseMap.get(field.column.toLowerCase());\n      }\n      if (value == null)\n        return;\n    }\n\n    if (value instanceof Collection) {\n      Collection collection = (Collection) value;\n      if (field.multiValued) {\n        for (Object o : collection) {\n          doc.addField(field.nameOrColName, o, field.boost);\n        }\n      } else {\n        if (doc.getField(field.nameOrColName) == null)\n          for (Object o : collection) {\n            doc.addField(field.nameOrColName, o, field.boost);\n            break;\n          }\n      }\n    } else if (field.multiValued) {\n      doc.addField(field.nameOrColName, value, field.boost);\n    } else {\n      if (doc.getField(field.nameOrColName) == null)\n        doc.addField(field.nameOrColName, value, field.boost);\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"e46bf22400b9cd12540418cd46bfa17c100f983a","date":1225303526,"type":4,"author":"Shalin Shekhar Mangar","isMerge":false,"pathNew":"/dev/null","pathOld":"contrib/dataimporthandler/src/main/java/org/apache/solr/handler/dataimport/DocBuilder#addFieldValue(DataConfig.Field,Map[String,Object],Map[String,Object],SolrInputDocument).mjava","sourceNew":null,"sourceOld":"  private void addFieldValue(DataConfig.Field field, Map<String, Object> arow,\n                             Map<String, Object> lowerCaseMap, SolrInputDocument doc) {\n    if (!field.toWrite)\n      return;\n    Object value = arow.get(field.column);\n    if (value == null) {\n      if (lowerCaseMap != null) {\n        value = lowerCaseMap.get(field.column.toLowerCase());\n      }\n      if (value == null)\n        return;\n    }\n\n    if (value instanceof Collection) {\n      Collection collection = (Collection) value;\n      if (field.multiValued) {\n        for (Object o : collection) {\n          doc.addField(field.nameOrColName, o, field.boost);\n        }\n      } else {\n        if (doc.getField(field.nameOrColName) == null)\n          for (Object o : collection) {\n            doc.addField(field.nameOrColName, o, field.boost);\n            break;\n          }\n      }\n    } else if (field.multiValued) {\n      doc.addField(field.nameOrColName, value, field.boost);\n    } else {\n      if (doc.getField(field.nameOrColName) == null)\n        doc.addField(field.nameOrColName, value, field.boost);\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"e46bf22400b9cd12540418cd46bfa17c100f983a":["157728c1f42b384dfc049157cc95adc767da3415"],"3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b":[],"157728c1f42b384dfc049157cc95adc767da3415":["3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"e46bf22400b9cd12540418cd46bfa17c100f983a":[],"3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b":["157728c1f42b384dfc049157cc95adc767da3415"],"157728c1f42b384dfc049157cc95adc767da3415":["e46bf22400b9cd12540418cd46bfa17c100f983a"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["e46bf22400b9cd12540418cd46bfa17c100f983a","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b"],"pathCommit":null}