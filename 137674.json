{"path":"solr/core/src/test/org/apache/solr/security/BasicAuthDistributedTest#testAuth().mjava","commits":[{"id":"1214bb624eb41181e5c8e260e0050c7e973ba0f4","date":1487943042,"type":0,"author":"Jan HÃ¸ydahl","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/security/BasicAuthDistributedTest#testAuth().mjava","pathOld":"/dev/null","sourceNew":"  private void testAuth() throws Exception {\n    QueryResponse rsp = query(\"q\",\"text:doc\", \"fl\", \"id,text\", \"sort\", \"id asc\");\n    assertEquals(10, rsp.getResults().getNumFound());\n\n    // Enable authentication\n    for (JettySolrRunner j : jettys) {\n      writeSecurityJson(j.getCoreContainer());\n    }\n\n    HttpSolrClient.RemoteSolrException expected = expectThrows(HttpSolrClient.RemoteSolrException.class, () -> {\n      query(\"q\",\"text:doc-fail\", \"fl\", \"id,text\", \"sort\", \"id asc\");\n    });\n    assertEquals(401, expected.code());\n\n    // Add auth\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.add(\"q\", \"text:doc\").add(\"fl\", \"id,text\").add(\"sort\", \"id asc\");\n    QueryRequest req = new QueryRequest(params);\n    req.setBasicAuthCredentials(\"solr\", \"SolrRocks\");\n    rsp = req.process(clients.get(0), null);\n    if (jettys.size() > 1) {\n      assertTrue(rsp.getResults().getNumFound() < 10);\n      rsp = query(true, params, \"solr\", \"SolrRocks\");\n    }\n    assertEquals(10, rsp.getResults().getNumFound());\n\n    // Disable auth\n    for (JettySolrRunner j : jettys) {\n      deleteSecurityJson(j.getCoreContainer());\n    }\n\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"b61ef53ee9899b83a89bf97542c28a4cfd0a64bf","date":1487979822,"type":4,"author":"Jan HÃ¸ydahl","isMerge":false,"pathNew":"/dev/null","pathOld":"solr/core/src/test/org/apache/solr/security/BasicAuthDistributedTest#testAuth().mjava","sourceNew":null,"sourceOld":"  private void testAuth() throws Exception {\n    QueryResponse rsp = query(\"q\",\"text:doc\", \"fl\", \"id,text\", \"sort\", \"id asc\");\n    assertEquals(10, rsp.getResults().getNumFound());\n\n    // Enable authentication\n    for (JettySolrRunner j : jettys) {\n      writeSecurityJson(j.getCoreContainer());\n    }\n\n    HttpSolrClient.RemoteSolrException expected = expectThrows(HttpSolrClient.RemoteSolrException.class, () -> {\n      query(\"q\",\"text:doc-fail\", \"fl\", \"id,text\", \"sort\", \"id asc\");\n    });\n    assertEquals(401, expected.code());\n\n    // Add auth\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.add(\"q\", \"text:doc\").add(\"fl\", \"id,text\").add(\"sort\", \"id asc\");\n    QueryRequest req = new QueryRequest(params);\n    req.setBasicAuthCredentials(\"solr\", \"SolrRocks\");\n    rsp = req.process(clients.get(0), null);\n    if (jettys.size() > 1) {\n      assertTrue(rsp.getResults().getNumFound() < 10);\n      rsp = query(true, params, \"solr\", \"SolrRocks\");\n    }\n    assertEquals(10, rsp.getResults().getNumFound());\n\n    // Disable auth\n    for (JettySolrRunner j : jettys) {\n      deleteSecurityJson(j.getCoreContainer());\n    }\n\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"b61ef53ee9899b83a89bf97542c28a4cfd0a64bf":["1214bb624eb41181e5c8e260e0050c7e973ba0f4"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["b61ef53ee9899b83a89bf97542c28a4cfd0a64bf"],"1214bb624eb41181e5c8e260e0050c7e973ba0f4":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"]},"commit2Childs":{"b61ef53ee9899b83a89bf97542c28a4cfd0a64bf":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["1214bb624eb41181e5c8e260e0050c7e973ba0f4"],"1214bb624eb41181e5c8e260e0050c7e973ba0f4":["b61ef53ee9899b83a89bf97542c28a4cfd0a64bf"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}