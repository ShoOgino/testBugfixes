{"path":"solr/solrj/src/java/org/apache/solr/common/cloud/ZkMaintenanceUtils#clean(SolrZkClient,String,Predicate[String]).mjava","commits":[{"id":"06263309947a9804c326e35ce627be8768e123a4","date":1517286624,"type":0,"author":"Cao Manh Dat","isMerge":false,"pathNew":"solr/solrj/src/java/org/apache/solr/common/cloud/ZkMaintenanceUtils#clean(SolrZkClient,String,Predicate[String]).mjava","pathOld":"/dev/null","sourceNew":"  /**\n   * Delete a path and all of its sub nodes\n   * @param filter for node to be deleted\n   */\n  public static void clean(SolrZkClient zkClient, String path, Predicate<String> filter) throws InterruptedException, KeeperException {\n    if (filter == null) {\n      clean(zkClient, path);\n      return;\n    }\n\n    TreeSet<String> paths = new TreeSet<>(Comparator.comparingInt(String::length).reversed());\n\n    traverseZkTree(zkClient, path, VISIT_ORDER.VISIT_POST, znode -> {\n      if (!znode.equals(\"/\") && filter.test(znode)) paths.add(znode);\n    });\n\n    for (String subpath : paths) {\n      if (!subpath.equals(\"/\")) {\n        try {\n          zkClient.delete(subpath, -1, true);\n        } catch (KeeperException.NotEmptyException | KeeperException.NoNodeException e) {\n          // expected\n        }\n      }\n    }\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"06263309947a9804c326e35ce627be8768e123a4":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["06263309947a9804c326e35ce627be8768e123a4"]},"commit2Childs":{"06263309947a9804c326e35ce627be8768e123a4":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["06263309947a9804c326e35ce627be8768e123a4"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}