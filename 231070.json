{"path":"lucene/core/src/java/org/apache/lucene/index/SegmentInfo#findMatchingFiles(String,Directory,Set[String]).mjava","commits":[{"id":"4a8b14bc4241c302311422d5c6f7627f8febb86e","date":1337291675,"type":1,"author":"Michael McCandless","isMerge":false,"pathNew":"lucene/core/src/java/org/apache/lucene/index/SegmentInfo#findMatchingFiles(String,Directory,Set[String]).mjava","pathOld":"lucene/core/src/java/org/apache/lucene/index/SegmentInfo#findMatchingFiles(Directory,Set[String]).mjava","sourceNew":"  // nocommit move elsewhere?  IndexFileNames?\n  public static List<String> findMatchingFiles(String segmentName, Directory dir, Set<String> namesOrPatterns) {\n    // nocommit need more efficient way to do this?\n    List<String> files = new ArrayList<String>();\n    final String[] existingFiles;\n    try {\n      existingFiles = dir.listAll();\n    } catch (IOException ioe) {\n      // nocommit maybe just throw IOE...? not sure how far up we'd have to change sigs...\n      throw new RuntimeException(ioe);\n    }\n    List<Pattern> compiledPatterns = new ArrayList<Pattern>();\n    for(String nameOrPattern : namesOrPatterns) {\n      boolean exists = false;\n      try {\n        exists = dir.fileExists(nameOrPattern);\n      } catch (IOException ioe) {\n        // nocommit maybe just throw IOE...?\n        // Ignore\n      }\n      if (exists) {\n        files.add(nameOrPattern);\n      } else {\n        // nocommit can i test whether the regexp matches only 1 string...?  maybe... make into autamaton and union them all....?\n        compiledPatterns.add(Pattern.compile(nameOrPattern));\n      }\n    }\n\n    // nocommit this is DOG SLOW: try TestBoolean2 w/ seed 1F7F3638C719C665\n    for(String file : existingFiles) {\n      if (file.startsWith(segmentName)) {\n        for(Pattern pattern : compiledPatterns) {\n          if (pattern.matcher(file).matches()) {\n            files.add(file);\n            break;\n          }\n        }\n      }\n    }\n\n    return files;\n  }\n\n","sourceOld":"  // nocommit move elsewhere?  IndexFileNames?\n  public static List<String> findMatchingFiles(Directory dir, Set<String> namesOrPatterns) {\n    // nocommit need more efficient way to do this?\n    List<String> files = new ArrayList<String>();\n    final String[] existingFiles;\n    try {\n      existingFiles = dir.listAll();\n    } catch (IOException ioe) {\n      // nocommit maybe just throw IOE...? not sure how far up we'd have to change sigs...\n      throw new RuntimeException(ioe);\n    }\n    for(String nameOrPattern : namesOrPatterns) {\n      boolean exists = false;\n      try {\n        exists = dir.fileExists(nameOrPattern);\n      } catch (IOException ioe) {\n        // nocommit maybe just throw IOE...?\n        // Ignore\n      }\n      if (exists) {\n        files.add(nameOrPattern);\n      } else {\n        for(String file : existingFiles) {\n          if (Pattern.matches(nameOrPattern, file)) {\n            files.add(file);\n          }\n        }\n      }\n    }\n\n    return files;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"4356000e349e38c9fb48034695b7c309abd54557","date":1337460341,"type":3,"author":"Michael McCandless","isMerge":false,"pathNew":"lucene/core/src/java/org/apache/lucene/index/SegmentInfo#findMatchingFiles(String,Directory,Set[String]).mjava","pathOld":"lucene/core/src/java/org/apache/lucene/index/SegmentInfo#findMatchingFiles(String,Directory,Set[String]).mjava","sourceNew":"  // noocmmit nuke this and require, once again, that a codec puts PRECISELY the files that exist into the file set...\n  public static List<String> findMatchingFiles(String segmentName, Directory dir, Set<String> namesOrPatterns) {\n    // nocommit need more efficient way to do this?\n    List<String> files = new ArrayList<String>();\n    final String[] existingFiles;\n    try {\n      existingFiles = dir.listAll();\n    } catch (IOException ioe) {\n      // nocommit maybe just throw IOE...? not sure how far up we'd have to change sigs...\n      throw new RuntimeException(ioe);\n    }\n    List<Pattern> compiledPatterns = new ArrayList<Pattern>();\n    for(String nameOrPattern : namesOrPatterns) {\n      boolean exists = false;\n      // nocommit hack -- remove (needed now because si's -1 gen will return null file name):\n      if (nameOrPattern == null) {\n        continue;\n      }\n      try {\n        exists = dir.fileExists(nameOrPattern);\n      } catch (IOException ioe) {\n        // nocommit maybe just throw IOE...?\n        // Ignore\n      }\n      if (exists) {\n        files.add(nameOrPattern);\n      } else {\n        // nocommit can i test whether the regexp matches only 1 string...?  maybe... make into autamaton and union them all....?\n        compiledPatterns.add(Pattern.compile(nameOrPattern));\n      }\n    }\n\n    // nocommit this is DOG SLOW: try TestBoolean2 w/ seed 1F7F3638C719C665\n    for(String file : existingFiles) {\n      if (file.startsWith(segmentName)) {\n        for(Pattern pattern : compiledPatterns) {\n          if (pattern.matcher(file).matches()) {\n            files.add(file);\n            break;\n          }\n        }\n      }\n    }\n\n    return files;\n  }\n\n","sourceOld":"  // nocommit move elsewhere?  IndexFileNames?\n  public static List<String> findMatchingFiles(String segmentName, Directory dir, Set<String> namesOrPatterns) {\n    // nocommit need more efficient way to do this?\n    List<String> files = new ArrayList<String>();\n    final String[] existingFiles;\n    try {\n      existingFiles = dir.listAll();\n    } catch (IOException ioe) {\n      // nocommit maybe just throw IOE...? not sure how far up we'd have to change sigs...\n      throw new RuntimeException(ioe);\n    }\n    List<Pattern> compiledPatterns = new ArrayList<Pattern>();\n    for(String nameOrPattern : namesOrPatterns) {\n      boolean exists = false;\n      try {\n        exists = dir.fileExists(nameOrPattern);\n      } catch (IOException ioe) {\n        // nocommit maybe just throw IOE...?\n        // Ignore\n      }\n      if (exists) {\n        files.add(nameOrPattern);\n      } else {\n        // nocommit can i test whether the regexp matches only 1 string...?  maybe... make into autamaton and union them all....?\n        compiledPatterns.add(Pattern.compile(nameOrPattern));\n      }\n    }\n\n    // nocommit this is DOG SLOW: try TestBoolean2 w/ seed 1F7F3638C719C665\n    for(String file : existingFiles) {\n      if (file.startsWith(segmentName)) {\n        for(Pattern pattern : compiledPatterns) {\n          if (pattern.matcher(file).matches()) {\n            files.add(file);\n            break;\n          }\n        }\n      }\n    }\n\n    return files;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"158aaabb931562cac88d162045176b17cf7b15a2","date":1337619251,"type":4,"author":"Michael McCandless","isMerge":false,"pathNew":"/dev/null","pathOld":"lucene/core/src/java/org/apache/lucene/index/SegmentInfo#findMatchingFiles(String,Directory,Set[String]).mjava","sourceNew":null,"sourceOld":"  // noocmmit nuke this and require, once again, that a codec puts PRECISELY the files that exist into the file set...\n  public static List<String> findMatchingFiles(String segmentName, Directory dir, Set<String> namesOrPatterns) {\n    // nocommit need more efficient way to do this?\n    List<String> files = new ArrayList<String>();\n    final String[] existingFiles;\n    try {\n      existingFiles = dir.listAll();\n    } catch (IOException ioe) {\n      // nocommit maybe just throw IOE...? not sure how far up we'd have to change sigs...\n      throw new RuntimeException(ioe);\n    }\n    List<Pattern> compiledPatterns = new ArrayList<Pattern>();\n    for(String nameOrPattern : namesOrPatterns) {\n      boolean exists = false;\n      // nocommit hack -- remove (needed now because si's -1 gen will return null file name):\n      if (nameOrPattern == null) {\n        continue;\n      }\n      try {\n        exists = dir.fileExists(nameOrPattern);\n      } catch (IOException ioe) {\n        // nocommit maybe just throw IOE...?\n        // Ignore\n      }\n      if (exists) {\n        files.add(nameOrPattern);\n      } else {\n        // nocommit can i test whether the regexp matches only 1 string...?  maybe... make into autamaton and union them all....?\n        compiledPatterns.add(Pattern.compile(nameOrPattern));\n      }\n    }\n\n    // nocommit this is DOG SLOW: try TestBoolean2 w/ seed 1F7F3638C719C665\n    for(String file : existingFiles) {\n      if (file.startsWith(segmentName)) {\n        for(Pattern pattern : compiledPatterns) {\n          if (pattern.matcher(file).matches()) {\n            files.add(file);\n            break;\n          }\n        }\n      }\n    }\n\n    return files;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"4a8b14bc4241c302311422d5c6f7627f8febb86e":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"4356000e349e38c9fb48034695b7c309abd54557":["4a8b14bc4241c302311422d5c6f7627f8febb86e"],"158aaabb931562cac88d162045176b17cf7b15a2":["4356000e349e38c9fb48034695b7c309abd54557"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"]},"commit2Childs":{"4a8b14bc4241c302311422d5c6f7627f8febb86e":["4356000e349e38c9fb48034695b7c309abd54557"],"4356000e349e38c9fb48034695b7c309abd54557":["158aaabb931562cac88d162045176b17cf7b15a2"],"158aaabb931562cac88d162045176b17cf7b15a2":[],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["4a8b14bc4241c302311422d5c6f7627f8febb86e","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["158aaabb931562cac88d162045176b17cf7b15a2","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}