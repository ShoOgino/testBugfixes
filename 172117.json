{"path":"solr/core/src/java/org/apache/solr/update/processor/AtomicUpdateDocumentMerger#doRemove(SolrInputDocument,SolrInputField,Object).mjava","commits":[{"id":"2d3b450958a83a29a16e492fbff9d094a9a571b6","date":1421525067,"type":1,"author":"Yonik Seeley","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/update/processor/AtomicUpdateDocumentMerger#doRemove(SolrInputDocument,SolrInputField,Object).mjava","pathOld":"solr/core/src/java/org/apache/solr/update/processor/DistributedUpdateProcessor#doRemove(SolrInputDocument,SolrInputField,Object,IndexSchema).mjava","sourceNew":"  protected void doRemove(SolrInputDocument toDoc, SolrInputField sif, Object fieldVal) {\n    final String name = sif.getName();\n    SolrInputField existingField = toDoc.get(name);\n    if(existingField == null) return;\n    SchemaField sf = schema.getField(name);\n\n    if (sf != null) {\n      final Collection<Object> original = existingField.getValues();\n      if (fieldVal instanceof Collection) {\n        for (Object object : (Collection)fieldVal){\n          original.remove(sf.getType().toNativeType(object));\n        }\n      } else {\n        original.remove(sf.getType().toNativeType(fieldVal));\n      }\n\n      toDoc.setField(name, original);\n    }\n  }\n\n","sourceOld":"  private boolean doRemove(SolrInputDocument oldDoc, SolrInputField sif, Object fieldVal, IndexSchema schema) {\n    final String name = sif.getName();\n    SolrInputField existingField = oldDoc.get(name);\n    if(existingField == null) return false;\n    SchemaField sf = schema.getField(name);\n    int oldSize = existingField.getValueCount();\n\n    if (sf != null) {\n      final Collection<Object> original = existingField.getValues();\n      if (fieldVal instanceof Collection) {\n        for (Object object : (Collection)fieldVal){\n          original.remove(sf.getType().toNativeType(object));\n        }\n      } else {\n        original.remove(sf.getType().toNativeType(fieldVal));\n      }\n\n      oldDoc.setField(name, original);\n\n    }\n    \n    return oldSize > existingField.getValueCount();\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"c8fef7b93de1912f1554371b19f6d4ef5f8c0acd","date":1445009862,"type":3,"author":"Shalin Shekhar Mangar","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/update/processor/AtomicUpdateDocumentMerger#doRemove(SolrInputDocument,SolrInputField,Object).mjava","pathOld":"solr/core/src/java/org/apache/solr/update/processor/AtomicUpdateDocumentMerger#doRemove(SolrInputDocument,SolrInputField,Object).mjava","sourceNew":"  protected void doRemove(SolrInputDocument toDoc, SolrInputField sif, Object fieldVal) {\n    final String name = sif.getName();\n    SolrInputField existingField = toDoc.get(name);\n    if (existingField == null) return;\n    SchemaField sf = schema.getField(name);\n\n    if (sf != null) {\n      final Collection<Object> original = existingField.getValues();\n      if (fieldVal instanceof Collection) {\n        for (Object object : (Collection) fieldVal) {\n          Object o = sf.getType().toNativeType(object);\n          original.remove(o);\n        }\n      } else {\n        original.remove(sf.getType().toNativeType(fieldVal));\n      }\n\n      toDoc.setField(name, original);\n    }\n  }\n\n","sourceOld":"  protected void doRemove(SolrInputDocument toDoc, SolrInputField sif, Object fieldVal) {\n    final String name = sif.getName();\n    SolrInputField existingField = toDoc.get(name);\n    if(existingField == null) return;\n    SchemaField sf = schema.getField(name);\n\n    if (sf != null) {\n      final Collection<Object> original = existingField.getValues();\n      if (fieldVal instanceof Collection) {\n        for (Object object : (Collection)fieldVal){\n          original.remove(sf.getType().toNativeType(object));\n        }\n      } else {\n        original.remove(sf.getType().toNativeType(fieldVal));\n      }\n\n      toDoc.setField(name, original);\n    }\n  }\n\n","bugFix":["2d3b450958a83a29a16e492fbff9d094a9a571b6"],"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"07749612bed4eb54dd05255c1434c301133310c1","date":1554879779,"type":3,"author":"Moshe","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/update/processor/AtomicUpdateDocumentMerger#doRemove(SolrInputDocument,SolrInputField,Object).mjava","pathOld":"solr/core/src/java/org/apache/solr/update/processor/AtomicUpdateDocumentMerger#doRemove(SolrInputDocument,SolrInputField,Object).mjava","sourceNew":"  protected void doRemove(SolrInputDocument toDoc, SolrInputField sif, Object fieldVal) {\n    final String name = sif.getName();\n    SolrInputField existingField = toDoc.get(name);\n    if (existingField == null) return;\n    final Collection original = existingField.getValues();\n    if (fieldVal instanceof Collection) {\n      for (Object object : (Collection) fieldVal) {\n        removeObj(original, object, name);\n      }\n    } else {\n      removeObj(original, fieldVal, name);\n    }\n\n    toDoc.setField(name, original);\n  }\n\n","sourceOld":"  protected void doRemove(SolrInputDocument toDoc, SolrInputField sif, Object fieldVal) {\n    final String name = sif.getName();\n    SolrInputField existingField = toDoc.get(name);\n    if (existingField == null) return;\n    SchemaField sf = schema.getField(name);\n\n    if (sf != null) {\n      final Collection<Object> original = existingField.getValues();\n      if (fieldVal instanceof Collection) {\n        for (Object object : (Collection) fieldVal) {\n          Object o = sf.getType().toNativeType(object);\n          original.remove(o);\n        }\n      } else {\n        original.remove(sf.getType().toNativeType(fieldVal));\n      }\n\n      toDoc.setField(name, original);\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"018a36ff4088cb91ab12cbe44f696d81d1fadd77","date":1591657414,"type":3,"author":"Erick Erickson","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/update/processor/AtomicUpdateDocumentMerger#doRemove(SolrInputDocument,SolrInputField,Object).mjava","pathOld":"solr/core/src/java/org/apache/solr/update/processor/AtomicUpdateDocumentMerger#doRemove(SolrInputDocument,SolrInputField,Object).mjava","sourceNew":"  protected void doRemove(SolrInputDocument toDoc, SolrInputField sif, Object fieldVal) {\n    final String name = sif.getName();\n    SolrInputField existingField = toDoc.get(name);\n    if (existingField == null) return;\n    @SuppressWarnings({\"rawtypes\"})\n    final Collection original = existingField.getValues();\n    if (fieldVal instanceof Collection) {\n      for (Object object : (Collection) fieldVal) {\n        removeObj(original, object, name);\n      }\n    } else {\n      removeObj(original, fieldVal, name);\n    }\n\n    toDoc.setField(name, original);\n  }\n\n","sourceOld":"  protected void doRemove(SolrInputDocument toDoc, SolrInputField sif, Object fieldVal) {\n    final String name = sif.getName();\n    SolrInputField existingField = toDoc.get(name);\n    if (existingField == null) return;\n    final Collection original = existingField.getValues();\n    if (fieldVal instanceof Collection) {\n      for (Object object : (Collection) fieldVal) {\n        removeObj(original, object, name);\n      }\n    } else {\n      removeObj(original, fieldVal, name);\n    }\n\n    toDoc.setField(name, original);\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"c8fef7b93de1912f1554371b19f6d4ef5f8c0acd":["2d3b450958a83a29a16e492fbff9d094a9a571b6"],"018a36ff4088cb91ab12cbe44f696d81d1fadd77":["07749612bed4eb54dd05255c1434c301133310c1"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"2d3b450958a83a29a16e492fbff9d094a9a571b6":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"07749612bed4eb54dd05255c1434c301133310c1":["c8fef7b93de1912f1554371b19f6d4ef5f8c0acd"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["018a36ff4088cb91ab12cbe44f696d81d1fadd77"]},"commit2Childs":{"c8fef7b93de1912f1554371b19f6d4ef5f8c0acd":["07749612bed4eb54dd05255c1434c301133310c1"],"018a36ff4088cb91ab12cbe44f696d81d1fadd77":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["2d3b450958a83a29a16e492fbff9d094a9a571b6"],"2d3b450958a83a29a16e492fbff9d094a9a571b6":["c8fef7b93de1912f1554371b19f6d4ef5f8c0acd"],"07749612bed4eb54dd05255c1434c301133310c1":["018a36ff4088cb91ab12cbe44f696d81d1fadd77"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}