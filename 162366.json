{"path":"solr/core/src/test/org/apache/solr/update/processor/TolerantUpdateProcessorTest#testResponse().mjava","commits":[{"id":"f57cf082c4d2ee975c6a2034fcf3c13f9514e6ef","date":1458928975,"type":0,"author":"Chris Hostetter","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/update/processor/TolerantUpdateProcessorTest#testResponse().mjava","pathOld":"/dev/null","sourceNew":"  @Test\n  public void testResponse() throws SAXException, XPathExpressionException, IOException {\n    String response = update(\"tolerant-chain-max-errors-10\", adoc(\"id\", \"1\", \"text\", \"the quick brown fox\"));\n    assertNull(BaseTestHarness.validateXPath(response,\n                                             \"//int[@name='status']=0\",\n                                             \"//arr[@name='errors']\",\n                                             \"count(//arr[@name='errors']/lst)=0\"));\n    response = update(\"tolerant-chain-max-errors-10\", adoc(\"text\", \"the quick brown fox\"));\n    assertNull(BaseTestHarness.validateXPath(response, \"//int[@name='status']=0\",\n        \"//int[@name='maxErrors']/text()='10'\",\n        \"count(//arr[@name='errors']/lst)=1\",\n        \"//arr[@name='errors']/lst/str[@name='id']/text()='(unknown)'\",\n        \"//arr[@name='errors']/lst/str[@name='message']/text()='Document is missing mandatory uniqueKey field: id'\"));\n    \n    response = update(\"tolerant-chain-max-errors-10\", adoc(\"text\", \"the quick brown fox\"));\n    StringWriter builder = new StringWriter();\n    builder.append(\"<add>\");\n    for (SolrInputDocument doc:docs) {\n      ClientUtils.writeXML(doc, builder);\n    }\n    builder.append(\"</add>\");\n    response = update(\"tolerant-chain-max-errors-10\", builder.toString());\n    assertNull(BaseTestHarness.validateXPath(response, \"//int[@name='status']=0\",\n        \"//int[@name='maxErrors']/text()='10'\",\n        \"count(//arr[@name='errors']/lst)=10\",\n        \"not(//arr[@name='errors']/lst/str[@name='id']/text()='0')\",\n        \"//arr[@name='errors']/lst/str[@name='id']/text()='1'\",\n        \"not(//arr[@name='errors']/lst/str[@name='id']/text()='2')\",\n        \"//arr[@name='errors']/lst/str[@name='id']/text()='3'\",\n        \"not(//arr[@name='errors']/lst/str[@name='id']/text()='4')\",\n        \"//arr[@name='errors']/lst/str[@name='id']/text()='5'\",\n        \"not(//arr[@name='errors']/lst/str[@name='id']/text()='6')\",\n        \"//arr[@name='errors']/lst/str[@name='id']/text()='7'\",\n        \"not(//arr[@name='errors']/lst/str[@name='id']/text()='8')\",\n        \"//arr[@name='errors']/lst/str[@name='id']/text()='9'\",\n        \"not(//arr[@name='errors']/lst/str[@name='id']/text()='10')\",\n        \"//arr[@name='errors']/lst/str[@name='id']/text()='11'\",\n        \"not(//arr[@name='errors']/lst/str[@name='id']/text()='12')\",\n        \"//arr[@name='errors']/lst/str[@name='id']/text()='13'\",\n        \"not(//arr[@name='errors']/lst/str[@name='id']/text()='14')\",\n        \"//arr[@name='errors']/lst/str[@name='id']/text()='15'\",\n        \"not(//arr[@name='errors']/lst/str[@name='id']/text()='16')\",\n        \"//arr[@name='errors']/lst/str[@name='id']/text()='17'\",\n        \"not(//arr[@name='errors']/lst/str[@name='id']/text()='18')\",\n        \"//arr[@name='errors']/lst/str[@name='id']/text()='19'\"));\n\n    // spot check response when effective maxErrors is unlimited\n    response = update(\"tolerant-chain-max-errors-not-set\", builder.toString());\n    assertNull(BaseTestHarness.validateXPath(response, \"//int[@name='maxErrors']/text()='-1'\"));\n                                             \n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"f57cf082c4d2ee975c6a2034fcf3c13f9514e6ef":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["f57cf082c4d2ee975c6a2034fcf3c13f9514e6ef"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["f57cf082c4d2ee975c6a2034fcf3c13f9514e6ef"],"f57cf082c4d2ee975c6a2034fcf3c13f9514e6ef":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}