{"path":"solr/core/src/java/org/apache/solr/handler/CalciteJDBCStream#determineValueSelector(int,ResultSetMetaData).mjava","commits":[{"id":"17361387c1023c3b72fb3bcf3d258318ab54deb7","date":1494596656,"type":0,"author":"jdyer1","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/handler/CalciteJDBCStream#determineValueSelector(int,ResultSetMetaData).mjava","pathOld":"/dev/null","sourceNew":"  @Override\n  protected ResultSetValueSelector determineValueSelector(int columnIdx, ResultSetMetaData metadata)\n      throws SQLException {\n    ResultSetValueSelector valueSelector = super.determineValueSelector(columnIdx, metadata);\n    if (valueSelector == null) {\n      final int columnNumber = columnIdx + 1;\n      final String columnName = metadata.getColumnLabel(columnNumber);\n      final String className = metadata.getColumnClassName(columnNumber);\n      if (Array.class.getName().equals(className)) {\n        valueSelector = new ResultSetValueSelector() {\n          @Override\n          public Object selectValue(ResultSet resultSet) throws SQLException {\n            Object o = resultSet.getObject(columnNumber);\n            if (resultSet.wasNull()) {\n              return null;\n            }\n            if (o instanceof Array) {\n              Array array = (Array) o;\n              return array.getArray();\n            } else {\n              return o;\n            }\n          }\n\n          @Override\n          public String getColumnName() {\n            return columnName;\n          }\n        };\n      }\n    }\n    return valueSelector;\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"e9017cf144952056066919f1ebc7897ff9bd71b1","date":1496757600,"type":0,"author":"Shalin Shekhar Mangar","isMerge":true,"pathNew":"solr/core/src/java/org/apache/solr/handler/CalciteJDBCStream#determineValueSelector(int,ResultSetMetaData).mjava","pathOld":"/dev/null","sourceNew":"  @Override\n  protected ResultSetValueSelector determineValueSelector(int columnIdx, ResultSetMetaData metadata)\n      throws SQLException {\n    ResultSetValueSelector valueSelector = super.determineValueSelector(columnIdx, metadata);\n    if (valueSelector == null) {\n      final int columnNumber = columnIdx + 1;\n      final String columnName = metadata.getColumnLabel(columnNumber);\n      final String className = metadata.getColumnClassName(columnNumber);\n      if (Array.class.getName().equals(className)) {\n        valueSelector = new ResultSetValueSelector() {\n          @Override\n          public Object selectValue(ResultSet resultSet) throws SQLException {\n            Object o = resultSet.getObject(columnNumber);\n            if (resultSet.wasNull()) {\n              return null;\n            }\n            if (o instanceof Array) {\n              Array array = (Array) o;\n              return array.getArray();\n            } else {\n              return o;\n            }\n          }\n\n          @Override\n          public String getColumnName() {\n            return columnName;\n          }\n        };\n      }\n    }\n    return valueSelector;\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"17361387c1023c3b72fb3bcf3d258318ab54deb7":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"e9017cf144952056066919f1ebc7897ff9bd71b1":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","17361387c1023c3b72fb3bcf3d258318ab54deb7"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["17361387c1023c3b72fb3bcf3d258318ab54deb7"]},"commit2Childs":{"17361387c1023c3b72fb3bcf3d258318ab54deb7":["e9017cf144952056066919f1ebc7897ff9bd71b1","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"e9017cf144952056066919f1ebc7897ff9bd71b1":[],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["17361387c1023c3b72fb3bcf3d258318ab54deb7","e9017cf144952056066919f1ebc7897ff9bd71b1"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["e9017cf144952056066919f1ebc7897ff9bd71b1","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}