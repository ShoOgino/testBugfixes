{"path":"solr/core/src/java/org/apache/solr/search/grouping/distributed/shardresultserializer/SearchGroupsResultTransformer#serializeSearchGroup(Collection[SearchGroup[BytesRef]],Sort).mjava","commits":[{"id":"ccc08aa684aee4964baee0644a6ba047bfd70829","date":1316263707,"type":0,"author":"Martijn van Groningen","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/search/grouping/distributed/shardresultserializer/SearchGroupsResultTransformer#serializeSearchGroup(Collection[SearchGroup[BytesRef]],Sort).mjava","pathOld":"/dev/null","sourceNew":"  private NamedList serializeSearchGroup(Collection<SearchGroup<BytesRef>> data, Sort groupSort) {\n    NamedList<Comparable[]> result = new NamedList<Comparable[]>();\n    CharsRef spare = new CharsRef();\n\n    for (SearchGroup<BytesRef> searchGroup : data) {\n      Comparable[] convertedSortValues = new Comparable[searchGroup.sortValues.length];\n      for (int i = 0; i < searchGroup.sortValues.length; i++) {\n        Comparable sortValue = (Comparable) searchGroup.sortValues[i];\n        SchemaField field = groupSort.getSort()[i].getField() != null ? searcher.getSchema().getFieldOrNull(groupSort.getSort()[i].getField()) : null;\n        if (field != null) {\n          FieldType fieldType = field.getType();\n          if (sortValue instanceof BytesRef) {\n            String indexedValue = ((BytesRef) sortValue).utf8ToChars(spare).toString();\n            sortValue = (Comparable) fieldType.toObject(field.createField(fieldType.indexedToReadable(indexedValue), 0.0f));\n          } else if (sortValue instanceof String) {\n            sortValue = (Comparable) fieldType.toObject(field.createField(fieldType.indexedToReadable((String) sortValue), 0.0f));\n          }\n        }\n        convertedSortValues[i] = sortValue;\n      }\n      String groupValue = searchGroup.groupValue != null ? searchGroup.groupValue.utf8ToString() : null;\n      result.add(groupValue, convertedSortValues);\n    }\n\n    return result;\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":["a485770e19d1ea7a458aa6b08bd2ff0c4b5bec25"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"da6c07e76d701edbcc45c3e83ad8464a5e44a4c0","date":1322229341,"type":3,"author":"Robert Muir","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/search/grouping/distributed/shardresultserializer/SearchGroupsResultTransformer#serializeSearchGroup(Collection[SearchGroup[BytesRef]],Sort).mjava","pathOld":"solr/core/src/java/org/apache/solr/search/grouping/distributed/shardresultserializer/SearchGroupsResultTransformer#serializeSearchGroup(Collection[SearchGroup[BytesRef]],Sort).mjava","sourceNew":"  private NamedList serializeSearchGroup(Collection<SearchGroup<BytesRef>> data, Sort groupSort) {\n    NamedList<Comparable[]> result = new NamedList<Comparable[]>();\n    CharsRef spare = new CharsRef();\n\n    for (SearchGroup<BytesRef> searchGroup : data) {\n      Comparable[] convertedSortValues = new Comparable[searchGroup.sortValues.length];\n      for (int i = 0; i < searchGroup.sortValues.length; i++) {\n        Comparable sortValue = (Comparable) searchGroup.sortValues[i];\n        SchemaField field = groupSort.getSort()[i].getField() != null ? searcher.getSchema().getFieldOrNull(groupSort.getSort()[i].getField()) : null;\n        if (field != null) {\n          FieldType fieldType = field.getType();\n          if (sortValue instanceof BytesRef) {\n            UnicodeUtil.UTF8toUTF16((BytesRef)sortValue, spare);\n            String indexedValue = spare.toString();\n            sortValue = (Comparable) fieldType.toObject(field.createField(fieldType.indexedToReadable(indexedValue), 0.0f));\n          } else if (sortValue instanceof String) {\n            sortValue = (Comparable) fieldType.toObject(field.createField(fieldType.indexedToReadable((String) sortValue), 0.0f));\n          }\n        }\n        convertedSortValues[i] = sortValue;\n      }\n      String groupValue = searchGroup.groupValue != null ? searchGroup.groupValue.utf8ToString() : null;\n      result.add(groupValue, convertedSortValues);\n    }\n\n    return result;\n  }\n\n","sourceOld":"  private NamedList serializeSearchGroup(Collection<SearchGroup<BytesRef>> data, Sort groupSort) {\n    NamedList<Comparable[]> result = new NamedList<Comparable[]>();\n    CharsRef spare = new CharsRef();\n\n    for (SearchGroup<BytesRef> searchGroup : data) {\n      Comparable[] convertedSortValues = new Comparable[searchGroup.sortValues.length];\n      for (int i = 0; i < searchGroup.sortValues.length; i++) {\n        Comparable sortValue = (Comparable) searchGroup.sortValues[i];\n        SchemaField field = groupSort.getSort()[i].getField() != null ? searcher.getSchema().getFieldOrNull(groupSort.getSort()[i].getField()) : null;\n        if (field != null) {\n          FieldType fieldType = field.getType();\n          if (sortValue instanceof BytesRef) {\n            String indexedValue = ((BytesRef) sortValue).utf8ToChars(spare).toString();\n            sortValue = (Comparable) fieldType.toObject(field.createField(fieldType.indexedToReadable(indexedValue), 0.0f));\n          } else if (sortValue instanceof String) {\n            sortValue = (Comparable) fieldType.toObject(field.createField(fieldType.indexedToReadable((String) sortValue), 0.0f));\n          }\n        }\n        convertedSortValues[i] = sortValue;\n      }\n      String groupValue = searchGroup.groupValue != null ? searchGroup.groupValue.utf8ToString() : null;\n      result.add(groupValue, convertedSortValues);\n    }\n\n    return result;\n  }\n\n","bugFix":null,"bugIntro":["a485770e19d1ea7a458aa6b08bd2ff0c4b5bec25"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"f9adff53c0ebbe9ea861e28bc9f40208dfbc7a72","date":1344218343,"type":3,"author":"Robert Muir","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/search/grouping/distributed/shardresultserializer/SearchGroupsResultTransformer#serializeSearchGroup(Collection[SearchGroup[BytesRef]],Sort).mjava","pathOld":"solr/core/src/java/org/apache/solr/search/grouping/distributed/shardresultserializer/SearchGroupsResultTransformer#serializeSearchGroup(Collection[SearchGroup[BytesRef]],Sort).mjava","sourceNew":"  private NamedList serializeSearchGroup(Collection<SearchGroup<BytesRef>> data, Sort groupSort) {\n    NamedList<Comparable[]> result = new NamedList<Comparable[]>();\n    CharsRef spare = new CharsRef();\n\n    for (SearchGroup<BytesRef> searchGroup : data) {\n      Comparable[] convertedSortValues = new Comparable[searchGroup.sortValues.length];\n      for (int i = 0; i < searchGroup.sortValues.length; i++) {\n        Comparable sortValue = (Comparable) searchGroup.sortValues[i];\n        SchemaField field = groupSort.getSort()[i].getField() != null ? searcher.getSchema().getFieldOrNull(groupSort.getSort()[i].getField()) : null;\n        if (field != null) {\n          FieldType fieldType = field.getType();\n          if (sortValue instanceof BytesRef) {\n            UnicodeUtil.UTF8toUTF16((BytesRef)sortValue, spare);\n            String indexedValue = spare.toString();\n            sortValue = (Comparable) fieldType.toObject(field.createField(fieldType.indexedToReadable(indexedValue), 1.0f));\n          } else if (sortValue instanceof String) {\n            sortValue = (Comparable) fieldType.toObject(field.createField(fieldType.indexedToReadable((String) sortValue), 1.0f));\n          }\n        }\n        convertedSortValues[i] = sortValue;\n      }\n      String groupValue = searchGroup.groupValue != null ? searchGroup.groupValue.utf8ToString() : null;\n      result.add(groupValue, convertedSortValues);\n    }\n\n    return result;\n  }\n\n","sourceOld":"  private NamedList serializeSearchGroup(Collection<SearchGroup<BytesRef>> data, Sort groupSort) {\n    NamedList<Comparable[]> result = new NamedList<Comparable[]>();\n    CharsRef spare = new CharsRef();\n\n    for (SearchGroup<BytesRef> searchGroup : data) {\n      Comparable[] convertedSortValues = new Comparable[searchGroup.sortValues.length];\n      for (int i = 0; i < searchGroup.sortValues.length; i++) {\n        Comparable sortValue = (Comparable) searchGroup.sortValues[i];\n        SchemaField field = groupSort.getSort()[i].getField() != null ? searcher.getSchema().getFieldOrNull(groupSort.getSort()[i].getField()) : null;\n        if (field != null) {\n          FieldType fieldType = field.getType();\n          if (sortValue instanceof BytesRef) {\n            UnicodeUtil.UTF8toUTF16((BytesRef)sortValue, spare);\n            String indexedValue = spare.toString();\n            sortValue = (Comparable) fieldType.toObject(field.createField(fieldType.indexedToReadable(indexedValue), 0.0f));\n          } else if (sortValue instanceof String) {\n            sortValue = (Comparable) fieldType.toObject(field.createField(fieldType.indexedToReadable((String) sortValue), 0.0f));\n          }\n        }\n        convertedSortValues[i] = sortValue;\n      }\n      String groupValue = searchGroup.groupValue != null ? searchGroup.groupValue.utf8ToString() : null;\n      result.add(groupValue, convertedSortValues);\n    }\n\n    return result;\n  }\n\n","bugFix":null,"bugIntro":["a485770e19d1ea7a458aa6b08bd2ff0c4b5bec25"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"d6f074e73200c07d54f242d3880a8da5a35ff97b","date":1344507653,"type":3,"author":"Uwe Schindler","isMerge":true,"pathNew":"solr/core/src/java/org/apache/solr/search/grouping/distributed/shardresultserializer/SearchGroupsResultTransformer#serializeSearchGroup(Collection[SearchGroup[BytesRef]],Sort).mjava","pathOld":"solr/core/src/java/org/apache/solr/search/grouping/distributed/shardresultserializer/SearchGroupsResultTransformer#serializeSearchGroup(Collection[SearchGroup[BytesRef]],Sort).mjava","sourceNew":"  private NamedList serializeSearchGroup(Collection<SearchGroup<BytesRef>> data, Sort groupSort) {\n    NamedList<Comparable[]> result = new NamedList<Comparable[]>();\n    CharsRef spare = new CharsRef();\n\n    for (SearchGroup<BytesRef> searchGroup : data) {\n      Comparable[] convertedSortValues = new Comparable[searchGroup.sortValues.length];\n      for (int i = 0; i < searchGroup.sortValues.length; i++) {\n        Comparable sortValue = (Comparable) searchGroup.sortValues[i];\n        SchemaField field = groupSort.getSort()[i].getField() != null ? searcher.getSchema().getFieldOrNull(groupSort.getSort()[i].getField()) : null;\n        if (field != null) {\n          FieldType fieldType = field.getType();\n          if (sortValue instanceof BytesRef) {\n            UnicodeUtil.UTF8toUTF16((BytesRef)sortValue, spare);\n            String indexedValue = spare.toString();\n            sortValue = (Comparable) fieldType.toObject(field.createField(fieldType.indexedToReadable(indexedValue), 1.0f));\n          } else if (sortValue instanceof String) {\n            sortValue = (Comparable) fieldType.toObject(field.createField(fieldType.indexedToReadable((String) sortValue), 1.0f));\n          }\n        }\n        convertedSortValues[i] = sortValue;\n      }\n      String groupValue = searchGroup.groupValue != null ? searchGroup.groupValue.utf8ToString() : null;\n      result.add(groupValue, convertedSortValues);\n    }\n\n    return result;\n  }\n\n","sourceOld":"  private NamedList serializeSearchGroup(Collection<SearchGroup<BytesRef>> data, Sort groupSort) {\n    NamedList<Comparable[]> result = new NamedList<Comparable[]>();\n    CharsRef spare = new CharsRef();\n\n    for (SearchGroup<BytesRef> searchGroup : data) {\n      Comparable[] convertedSortValues = new Comparable[searchGroup.sortValues.length];\n      for (int i = 0; i < searchGroup.sortValues.length; i++) {\n        Comparable sortValue = (Comparable) searchGroup.sortValues[i];\n        SchemaField field = groupSort.getSort()[i].getField() != null ? searcher.getSchema().getFieldOrNull(groupSort.getSort()[i].getField()) : null;\n        if (field != null) {\n          FieldType fieldType = field.getType();\n          if (sortValue instanceof BytesRef) {\n            UnicodeUtil.UTF8toUTF16((BytesRef)sortValue, spare);\n            String indexedValue = spare.toString();\n            sortValue = (Comparable) fieldType.toObject(field.createField(fieldType.indexedToReadable(indexedValue), 0.0f));\n          } else if (sortValue instanceof String) {\n            sortValue = (Comparable) fieldType.toObject(field.createField(fieldType.indexedToReadable((String) sortValue), 0.0f));\n          }\n        }\n        convertedSortValues[i] = sortValue;\n      }\n      String groupValue = searchGroup.groupValue != null ? searchGroup.groupValue.utf8ToString() : null;\n      result.add(groupValue, convertedSortValues);\n    }\n\n    return result;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"c7869f64c874ebf7f317d22c00baf2b6857797a6","date":1344856617,"type":3,"author":"Michael McCandless","isMerge":true,"pathNew":"solr/core/src/java/org/apache/solr/search/grouping/distributed/shardresultserializer/SearchGroupsResultTransformer#serializeSearchGroup(Collection[SearchGroup[BytesRef]],Sort).mjava","pathOld":"solr/core/src/java/org/apache/solr/search/grouping/distributed/shardresultserializer/SearchGroupsResultTransformer#serializeSearchGroup(Collection[SearchGroup[BytesRef]],Sort).mjava","sourceNew":"  private NamedList serializeSearchGroup(Collection<SearchGroup<BytesRef>> data, Sort groupSort) {\n    NamedList<Comparable[]> result = new NamedList<Comparable[]>();\n    CharsRef spare = new CharsRef();\n\n    for (SearchGroup<BytesRef> searchGroup : data) {\n      Comparable[] convertedSortValues = new Comparable[searchGroup.sortValues.length];\n      for (int i = 0; i < searchGroup.sortValues.length; i++) {\n        Comparable sortValue = (Comparable) searchGroup.sortValues[i];\n        SchemaField field = groupSort.getSort()[i].getField() != null ? searcher.getSchema().getFieldOrNull(groupSort.getSort()[i].getField()) : null;\n        if (field != null) {\n          FieldType fieldType = field.getType();\n          if (sortValue instanceof BytesRef) {\n            UnicodeUtil.UTF8toUTF16((BytesRef)sortValue, spare);\n            String indexedValue = spare.toString();\n            sortValue = (Comparable) fieldType.toObject(field.createField(fieldType.indexedToReadable(indexedValue), 1.0f));\n          } else if (sortValue instanceof String) {\n            sortValue = (Comparable) fieldType.toObject(field.createField(fieldType.indexedToReadable((String) sortValue), 1.0f));\n          }\n        }\n        convertedSortValues[i] = sortValue;\n      }\n      String groupValue = searchGroup.groupValue != null ? searchGroup.groupValue.utf8ToString() : null;\n      result.add(groupValue, convertedSortValues);\n    }\n\n    return result;\n  }\n\n","sourceOld":"  private NamedList serializeSearchGroup(Collection<SearchGroup<BytesRef>> data, Sort groupSort) {\n    NamedList<Comparable[]> result = new NamedList<Comparable[]>();\n    CharsRef spare = new CharsRef();\n\n    for (SearchGroup<BytesRef> searchGroup : data) {\n      Comparable[] convertedSortValues = new Comparable[searchGroup.sortValues.length];\n      for (int i = 0; i < searchGroup.sortValues.length; i++) {\n        Comparable sortValue = (Comparable) searchGroup.sortValues[i];\n        SchemaField field = groupSort.getSort()[i].getField() != null ? searcher.getSchema().getFieldOrNull(groupSort.getSort()[i].getField()) : null;\n        if (field != null) {\n          FieldType fieldType = field.getType();\n          if (sortValue instanceof BytesRef) {\n            UnicodeUtil.UTF8toUTF16((BytesRef)sortValue, spare);\n            String indexedValue = spare.toString();\n            sortValue = (Comparable) fieldType.toObject(field.createField(fieldType.indexedToReadable(indexedValue), 0.0f));\n          } else if (sortValue instanceof String) {\n            sortValue = (Comparable) fieldType.toObject(field.createField(fieldType.indexedToReadable((String) sortValue), 0.0f));\n          }\n        }\n        convertedSortValues[i] = sortValue;\n      }\n      String groupValue = searchGroup.groupValue != null ? searchGroup.groupValue.utf8ToString() : null;\n      result.add(groupValue, convertedSortValues);\n    }\n\n    return result;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"a485770e19d1ea7a458aa6b08bd2ff0c4b5bec25","date":1389830331,"type":3,"author":"Robert Muir","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/search/grouping/distributed/shardresultserializer/SearchGroupsResultTransformer#serializeSearchGroup(Collection[SearchGroup[BytesRef]],Sort).mjava","pathOld":"solr/core/src/java/org/apache/solr/search/grouping/distributed/shardresultserializer/SearchGroupsResultTransformer#serializeSearchGroup(Collection[SearchGroup[BytesRef]],Sort).mjava","sourceNew":"  private NamedList serializeSearchGroup(Collection<SearchGroup<BytesRef>> data, Sort groupSort) {\n    NamedList<Object[]> result = new NamedList<Object[]>();\n\n    for (SearchGroup<BytesRef> searchGroup : data) {\n      Object[] convertedSortValues = new Object[searchGroup.sortValues.length];\n      for (int i = 0; i < searchGroup.sortValues.length; i++) {\n        Object sortValue = searchGroup.sortValues[i];\n        SchemaField field = groupSort.getSort()[i].getField() != null ? searcher.getSchema().getFieldOrNull(groupSort.getSort()[i].getField()) : null;\n        if (field != null) {\n          FieldType fieldType = field.getType();\n          if (sortValue != null) {\n            sortValue = fieldType.marshalSortValue(sortValue);\n          }\n        }\n        convertedSortValues[i] = sortValue;\n      }\n      String groupValue = searchGroup.groupValue != null ? searchGroup.groupValue.utf8ToString() : null;\n      result.add(groupValue, convertedSortValues);\n    }\n\n    return result;\n  }\n\n","sourceOld":"  private NamedList serializeSearchGroup(Collection<SearchGroup<BytesRef>> data, Sort groupSort) {\n    NamedList<Comparable[]> result = new NamedList<Comparable[]>();\n    CharsRef spare = new CharsRef();\n\n    for (SearchGroup<BytesRef> searchGroup : data) {\n      Comparable[] convertedSortValues = new Comparable[searchGroup.sortValues.length];\n      for (int i = 0; i < searchGroup.sortValues.length; i++) {\n        Comparable sortValue = (Comparable) searchGroup.sortValues[i];\n        SchemaField field = groupSort.getSort()[i].getField() != null ? searcher.getSchema().getFieldOrNull(groupSort.getSort()[i].getField()) : null;\n        if (field != null) {\n          FieldType fieldType = field.getType();\n          if (sortValue instanceof BytesRef) {\n            UnicodeUtil.UTF8toUTF16((BytesRef)sortValue, spare);\n            String indexedValue = spare.toString();\n            sortValue = (Comparable) fieldType.toObject(field.createField(fieldType.indexedToReadable(indexedValue), 1.0f));\n          } else if (sortValue instanceof String) {\n            sortValue = (Comparable) fieldType.toObject(field.createField(fieldType.indexedToReadable((String) sortValue), 1.0f));\n          }\n        }\n        convertedSortValues[i] = sortValue;\n      }\n      String groupValue = searchGroup.groupValue != null ? searchGroup.groupValue.utf8ToString() : null;\n      result.add(groupValue, convertedSortValues);\n    }\n\n    return result;\n  }\n\n","bugFix":["f9adff53c0ebbe9ea861e28bc9f40208dfbc7a72","ccc08aa684aee4964baee0644a6ba047bfd70829","da6c07e76d701edbcc45c3e83ad8464a5e44a4c0"],"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"27ab7b234eab0cbc020836989b96ed430e1065bb","date":1389894025,"type":3,"author":"Michael McCandless","isMerge":true,"pathNew":"solr/core/src/java/org/apache/solr/search/grouping/distributed/shardresultserializer/SearchGroupsResultTransformer#serializeSearchGroup(Collection[SearchGroup[BytesRef]],Sort).mjava","pathOld":"solr/core/src/java/org/apache/solr/search/grouping/distributed/shardresultserializer/SearchGroupsResultTransformer#serializeSearchGroup(Collection[SearchGroup[BytesRef]],Sort).mjava","sourceNew":"  private NamedList serializeSearchGroup(Collection<SearchGroup<BytesRef>> data, Sort groupSort) {\n    NamedList<Object[]> result = new NamedList<Object[]>();\n\n    for (SearchGroup<BytesRef> searchGroup : data) {\n      Object[] convertedSortValues = new Object[searchGroup.sortValues.length];\n      for (int i = 0; i < searchGroup.sortValues.length; i++) {\n        Object sortValue = searchGroup.sortValues[i];\n        SchemaField field = groupSort.getSort()[i].getField() != null ? searcher.getSchema().getFieldOrNull(groupSort.getSort()[i].getField()) : null;\n        if (field != null) {\n          FieldType fieldType = field.getType();\n          if (sortValue != null) {\n            sortValue = fieldType.marshalSortValue(sortValue);\n          }\n        }\n        convertedSortValues[i] = sortValue;\n      }\n      String groupValue = searchGroup.groupValue != null ? searchGroup.groupValue.utf8ToString() : null;\n      result.add(groupValue, convertedSortValues);\n    }\n\n    return result;\n  }\n\n","sourceOld":"  private NamedList serializeSearchGroup(Collection<SearchGroup<BytesRef>> data, Sort groupSort) {\n    NamedList<Comparable[]> result = new NamedList<Comparable[]>();\n    CharsRef spare = new CharsRef();\n\n    for (SearchGroup<BytesRef> searchGroup : data) {\n      Comparable[] convertedSortValues = new Comparable[searchGroup.sortValues.length];\n      for (int i = 0; i < searchGroup.sortValues.length; i++) {\n        Comparable sortValue = (Comparable) searchGroup.sortValues[i];\n        SchemaField field = groupSort.getSort()[i].getField() != null ? searcher.getSchema().getFieldOrNull(groupSort.getSort()[i].getField()) : null;\n        if (field != null) {\n          FieldType fieldType = field.getType();\n          if (sortValue instanceof BytesRef) {\n            UnicodeUtil.UTF8toUTF16((BytesRef)sortValue, spare);\n            String indexedValue = spare.toString();\n            sortValue = (Comparable) fieldType.toObject(field.createField(fieldType.indexedToReadable(indexedValue), 1.0f));\n          } else if (sortValue instanceof String) {\n            sortValue = (Comparable) fieldType.toObject(field.createField(fieldType.indexedToReadable((String) sortValue), 1.0f));\n          }\n        }\n        convertedSortValues[i] = sortValue;\n      }\n      String groupValue = searchGroup.groupValue != null ? searchGroup.groupValue.utf8ToString() : null;\n      result.add(groupValue, convertedSortValues);\n    }\n\n    return result;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"634f330c54fd3f9f491d52036dc3f40b4f4d8934","date":1394635157,"type":3,"author":"Robert Muir","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/search/grouping/distributed/shardresultserializer/SearchGroupsResultTransformer#serializeSearchGroup(Collection[SearchGroup[BytesRef]],Sort).mjava","pathOld":"solr/core/src/java/org/apache/solr/search/grouping/distributed/shardresultserializer/SearchGroupsResultTransformer#serializeSearchGroup(Collection[SearchGroup[BytesRef]],Sort).mjava","sourceNew":"  private NamedList serializeSearchGroup(Collection<SearchGroup<BytesRef>> data, Sort groupSort) {\n    NamedList<Object[]> result = new NamedList<>();\n\n    for (SearchGroup<BytesRef> searchGroup : data) {\n      Object[] convertedSortValues = new Object[searchGroup.sortValues.length];\n      for (int i = 0; i < searchGroup.sortValues.length; i++) {\n        Object sortValue = searchGroup.sortValues[i];\n        SchemaField field = groupSort.getSort()[i].getField() != null ? searcher.getSchema().getFieldOrNull(groupSort.getSort()[i].getField()) : null;\n        if (field != null) {\n          FieldType fieldType = field.getType();\n          if (sortValue != null) {\n            sortValue = fieldType.marshalSortValue(sortValue);\n          }\n        }\n        convertedSortValues[i] = sortValue;\n      }\n      String groupValue = searchGroup.groupValue != null ? searchGroup.groupValue.utf8ToString() : null;\n      result.add(groupValue, convertedSortValues);\n    }\n\n    return result;\n  }\n\n","sourceOld":"  private NamedList serializeSearchGroup(Collection<SearchGroup<BytesRef>> data, Sort groupSort) {\n    NamedList<Object[]> result = new NamedList<Object[]>();\n\n    for (SearchGroup<BytesRef> searchGroup : data) {\n      Object[] convertedSortValues = new Object[searchGroup.sortValues.length];\n      for (int i = 0; i < searchGroup.sortValues.length; i++) {\n        Object sortValue = searchGroup.sortValues[i];\n        SchemaField field = groupSort.getSort()[i].getField() != null ? searcher.getSchema().getFieldOrNull(groupSort.getSort()[i].getField()) : null;\n        if (field != null) {\n          FieldType fieldType = field.getType();\n          if (sortValue != null) {\n            sortValue = fieldType.marshalSortValue(sortValue);\n          }\n        }\n        convertedSortValues[i] = sortValue;\n      }\n      String groupValue = searchGroup.groupValue != null ? searchGroup.groupValue.utf8ToString() : null;\n      result.add(groupValue, convertedSortValues);\n    }\n\n    return result;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"f8352a83d5332dd7e172d6ceb8872f47f2f31ceb","date":1444852275,"type":3,"author":"Christine Poerschke","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/search/grouping/distributed/shardresultserializer/SearchGroupsResultTransformer#serializeSearchGroup(Collection[SearchGroup[BytesRef]],Sort).mjava","pathOld":"solr/core/src/java/org/apache/solr/search/grouping/distributed/shardresultserializer/SearchGroupsResultTransformer#serializeSearchGroup(Collection[SearchGroup[BytesRef]],Sort).mjava","sourceNew":"  private NamedList serializeSearchGroup(Collection<SearchGroup<BytesRef>> data, Sort groupSort) {\n    final NamedList<Object[]> result = new NamedList<>(data.size());\n\n    for (SearchGroup<BytesRef> searchGroup : data) {\n      Object[] convertedSortValues = new Object[searchGroup.sortValues.length];\n      for (int i = 0; i < searchGroup.sortValues.length; i++) {\n        Object sortValue = searchGroup.sortValues[i];\n        SchemaField field = groupSort.getSort()[i].getField() != null ? searcher.getSchema().getFieldOrNull(groupSort.getSort()[i].getField()) : null;\n        if (field != null) {\n          FieldType fieldType = field.getType();\n          if (sortValue != null) {\n            sortValue = fieldType.marshalSortValue(sortValue);\n          }\n        }\n        convertedSortValues[i] = sortValue;\n      }\n      String groupValue = searchGroup.groupValue != null ? searchGroup.groupValue.utf8ToString() : null;\n      result.add(groupValue, convertedSortValues);\n    }\n\n    return result;\n  }\n\n","sourceOld":"  private NamedList serializeSearchGroup(Collection<SearchGroup<BytesRef>> data, Sort groupSort) {\n    NamedList<Object[]> result = new NamedList<>();\n\n    for (SearchGroup<BytesRef> searchGroup : data) {\n      Object[] convertedSortValues = new Object[searchGroup.sortValues.length];\n      for (int i = 0; i < searchGroup.sortValues.length; i++) {\n        Object sortValue = searchGroup.sortValues[i];\n        SchemaField field = groupSort.getSort()[i].getField() != null ? searcher.getSchema().getFieldOrNull(groupSort.getSort()[i].getField()) : null;\n        if (field != null) {\n          FieldType fieldType = field.getType();\n          if (sortValue != null) {\n            sortValue = fieldType.marshalSortValue(sortValue);\n          }\n        }\n        convertedSortValues[i] = sortValue;\n      }\n      String groupValue = searchGroup.groupValue != null ? searchGroup.groupValue.utf8ToString() : null;\n      result.add(groupValue, convertedSortValues);\n    }\n\n    return result;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"5bab0702ffbb627ce10bd5af1c669b3c1f999002","date":1487156075,"type":3,"author":"Christine Poerschke","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/search/grouping/distributed/shardresultserializer/SearchGroupsResultTransformer#serializeSearchGroup(Collection[SearchGroup[BytesRef]],Sort).mjava","pathOld":"solr/core/src/java/org/apache/solr/search/grouping/distributed/shardresultserializer/SearchGroupsResultTransformer#serializeSearchGroup(Collection[SearchGroup[BytesRef]],Sort).mjava","sourceNew":"  private NamedList serializeSearchGroup(Collection<SearchGroup<BytesRef>> data, Sort groupSort) {\n    final NamedList<Object[]> result = new NamedList<>(data.size());\n\n    for (SearchGroup<BytesRef> searchGroup : data) {\n      Object[] convertedSortValues = new Object[searchGroup.sortValues.length];\n      for (int i = 0; i < searchGroup.sortValues.length; i++) {\n        Object sortValue = searchGroup.sortValues[i];\n        SchemaField field = groupSort.getSort()[i].getField() != null ? searcher.getSchema().getFieldOrNull(groupSort.getSort()[i].getField()) : null;\n        convertedSortValues[i] = ShardResultTransformerUtils.marshalSortValue(sortValue, field);\n      }\n      String groupValue = searchGroup.groupValue != null ? searchGroup.groupValue.utf8ToString() : null;\n      result.add(groupValue, convertedSortValues);\n    }\n\n    return result;\n  }\n\n","sourceOld":"  private NamedList serializeSearchGroup(Collection<SearchGroup<BytesRef>> data, Sort groupSort) {\n    final NamedList<Object[]> result = new NamedList<>(data.size());\n\n    for (SearchGroup<BytesRef> searchGroup : data) {\n      Object[] convertedSortValues = new Object[searchGroup.sortValues.length];\n      for (int i = 0; i < searchGroup.sortValues.length; i++) {\n        Object sortValue = searchGroup.sortValues[i];\n        SchemaField field = groupSort.getSort()[i].getField() != null ? searcher.getSchema().getFieldOrNull(groupSort.getSort()[i].getField()) : null;\n        if (field != null) {\n          FieldType fieldType = field.getType();\n          if (sortValue != null) {\n            sortValue = fieldType.marshalSortValue(sortValue);\n          }\n        }\n        convertedSortValues[i] = sortValue;\n      }\n      String groupValue = searchGroup.groupValue != null ? searchGroup.groupValue.utf8ToString() : null;\n      result.add(groupValue, convertedSortValues);\n    }\n\n    return result;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"6ce489ffe249d0942d3dd9d8f0b46d3a5385ca01","date":1489998096,"type":5,"author":"Cao Manh Dat","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/search/grouping/distributed/shardresultserializer/SearchGroupsResultTransformer#serializeSearchGroup(Collection[SearchGroup[BytesRef]],SearchGroupsFieldCommand).mjava","pathOld":"solr/core/src/java/org/apache/solr/search/grouping/distributed/shardresultserializer/SearchGroupsResultTransformer#serializeSearchGroup(Collection[SearchGroup[BytesRef]],Sort).mjava","sourceNew":"  private NamedList serializeSearchGroup(Collection<SearchGroup<BytesRef>> data, SearchGroupsFieldCommand command) {\n    final NamedList<Object[]> result = new NamedList<>(data.size());\n\n    for (SearchGroup<BytesRef> searchGroup : data) {\n      Object[] convertedSortValues = new Object[searchGroup.sortValues.length];\n      for (int i = 0; i < searchGroup.sortValues.length; i++) {\n        Object sortValue = searchGroup.sortValues[i];\n        SchemaField field = command.getGroupSort().getSort()[i].getField() != null ?\n            searcher.getSchema().getFieldOrNull(command.getGroupSort().getSort()[i].getField()) : null;\n        convertedSortValues[i] = ShardResultTransformerUtils.marshalSortValue(sortValue, field);\n      }\n      SchemaField field = searcher.getSchema().getFieldOrNull(command.getKey());\n      String groupValue = searchGroup.groupValue != null ? field.getType().indexedToReadable(searchGroup.groupValue, new CharsRefBuilder()).toString() : null;\n      result.add(groupValue, convertedSortValues);\n    }\n\n    return result;\n  }\n\n","sourceOld":"  private NamedList serializeSearchGroup(Collection<SearchGroup<BytesRef>> data, Sort groupSort) {\n    final NamedList<Object[]> result = new NamedList<>(data.size());\n\n    for (SearchGroup<BytesRef> searchGroup : data) {\n      Object[] convertedSortValues = new Object[searchGroup.sortValues.length];\n      for (int i = 0; i < searchGroup.sortValues.length; i++) {\n        Object sortValue = searchGroup.sortValues[i];\n        SchemaField field = groupSort.getSort()[i].getField() != null ? searcher.getSchema().getFieldOrNull(groupSort.getSort()[i].getField()) : null;\n        convertedSortValues[i] = ShardResultTransformerUtils.marshalSortValue(sortValue, field);\n      }\n      String groupValue = searchGroup.groupValue != null ? searchGroup.groupValue.utf8ToString() : null;\n      result.add(groupValue, convertedSortValues);\n    }\n\n    return result;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"06f29c9961912220543423aa6fc6f64362874871","date":1490280012,"type":5,"author":"Cao Manh Dat","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/search/grouping/distributed/shardresultserializer/SearchGroupsResultTransformer#serializeSearchGroup(Collection[SearchGroup[BytesRef]],SearchGroupsFieldCommand).mjava","pathOld":"solr/core/src/java/org/apache/solr/search/grouping/distributed/shardresultserializer/SearchGroupsResultTransformer#serializeSearchGroup(Collection[SearchGroup[BytesRef]],Sort).mjava","sourceNew":"  private NamedList serializeSearchGroup(Collection<SearchGroup<BytesRef>> data, SearchGroupsFieldCommand command) {\n    final NamedList<Object[]> result = new NamedList<>(data.size());\n\n    for (SearchGroup<BytesRef> searchGroup : data) {\n      Object[] convertedSortValues = new Object[searchGroup.sortValues.length];\n      for (int i = 0; i < searchGroup.sortValues.length; i++) {\n        Object sortValue = searchGroup.sortValues[i];\n        SchemaField field = command.getGroupSort().getSort()[i].getField() != null ?\n            searcher.getSchema().getFieldOrNull(command.getGroupSort().getSort()[i].getField()) : null;\n        convertedSortValues[i] = ShardResultTransformerUtils.marshalSortValue(sortValue, field);\n      }\n      SchemaField field = searcher.getSchema().getFieldOrNull(command.getKey());\n      String groupValue = searchGroup.groupValue != null ? field.getType().indexedToReadable(searchGroup.groupValue, new CharsRefBuilder()).toString() : null;\n      result.add(groupValue, convertedSortValues);\n    }\n\n    return result;\n  }\n\n","sourceOld":"  private NamedList serializeSearchGroup(Collection<SearchGroup<BytesRef>> data, Sort groupSort) {\n    final NamedList<Object[]> result = new NamedList<>(data.size());\n\n    for (SearchGroup<BytesRef> searchGroup : data) {\n      Object[] convertedSortValues = new Object[searchGroup.sortValues.length];\n      for (int i = 0; i < searchGroup.sortValues.length; i++) {\n        Object sortValue = searchGroup.sortValues[i];\n        SchemaField field = groupSort.getSort()[i].getField() != null ? searcher.getSchema().getFieldOrNull(groupSort.getSort()[i].getField()) : null;\n        convertedSortValues[i] = ShardResultTransformerUtils.marshalSortValue(sortValue, field);\n      }\n      String groupValue = searchGroup.groupValue != null ? searchGroup.groupValue.utf8ToString() : null;\n      result.add(groupValue, convertedSortValues);\n    }\n\n    return result;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"634f330c54fd3f9f491d52036dc3f40b4f4d8934":["27ab7b234eab0cbc020836989b96ed430e1065bb"],"da6c07e76d701edbcc45c3e83ad8464a5e44a4c0":["ccc08aa684aee4964baee0644a6ba047bfd70829"],"f8352a83d5332dd7e172d6ceb8872f47f2f31ceb":["634f330c54fd3f9f491d52036dc3f40b4f4d8934"],"27ab7b234eab0cbc020836989b96ed430e1065bb":["f9adff53c0ebbe9ea861e28bc9f40208dfbc7a72","a485770e19d1ea7a458aa6b08bd2ff0c4b5bec25"],"ccc08aa684aee4964baee0644a6ba047bfd70829":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"5bab0702ffbb627ce10bd5af1c669b3c1f999002":["f8352a83d5332dd7e172d6ceb8872f47f2f31ceb"],"a485770e19d1ea7a458aa6b08bd2ff0c4b5bec25":["f9adff53c0ebbe9ea861e28bc9f40208dfbc7a72"],"6ce489ffe249d0942d3dd9d8f0b46d3a5385ca01":["5bab0702ffbb627ce10bd5af1c669b3c1f999002"],"f9adff53c0ebbe9ea861e28bc9f40208dfbc7a72":["da6c07e76d701edbcc45c3e83ad8464a5e44a4c0"],"c7869f64c874ebf7f317d22c00baf2b6857797a6":["da6c07e76d701edbcc45c3e83ad8464a5e44a4c0","f9adff53c0ebbe9ea861e28bc9f40208dfbc7a72"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"d6f074e73200c07d54f242d3880a8da5a35ff97b":["da6c07e76d701edbcc45c3e83ad8464a5e44a4c0","f9adff53c0ebbe9ea861e28bc9f40208dfbc7a72"],"06f29c9961912220543423aa6fc6f64362874871":["5bab0702ffbb627ce10bd5af1c669b3c1f999002"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["6ce489ffe249d0942d3dd9d8f0b46d3a5385ca01"]},"commit2Childs":{"634f330c54fd3f9f491d52036dc3f40b4f4d8934":["f8352a83d5332dd7e172d6ceb8872f47f2f31ceb"],"da6c07e76d701edbcc45c3e83ad8464a5e44a4c0":["f9adff53c0ebbe9ea861e28bc9f40208dfbc7a72","c7869f64c874ebf7f317d22c00baf2b6857797a6","d6f074e73200c07d54f242d3880a8da5a35ff97b"],"f8352a83d5332dd7e172d6ceb8872f47f2f31ceb":["5bab0702ffbb627ce10bd5af1c669b3c1f999002"],"27ab7b234eab0cbc020836989b96ed430e1065bb":["634f330c54fd3f9f491d52036dc3f40b4f4d8934"],"ccc08aa684aee4964baee0644a6ba047bfd70829":["da6c07e76d701edbcc45c3e83ad8464a5e44a4c0"],"5bab0702ffbb627ce10bd5af1c669b3c1f999002":["6ce489ffe249d0942d3dd9d8f0b46d3a5385ca01","06f29c9961912220543423aa6fc6f64362874871"],"a485770e19d1ea7a458aa6b08bd2ff0c4b5bec25":["27ab7b234eab0cbc020836989b96ed430e1065bb"],"6ce489ffe249d0942d3dd9d8f0b46d3a5385ca01":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"f9adff53c0ebbe9ea861e28bc9f40208dfbc7a72":["27ab7b234eab0cbc020836989b96ed430e1065bb","a485770e19d1ea7a458aa6b08bd2ff0c4b5bec25","c7869f64c874ebf7f317d22c00baf2b6857797a6","d6f074e73200c07d54f242d3880a8da5a35ff97b"],"c7869f64c874ebf7f317d22c00baf2b6857797a6":[],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["ccc08aa684aee4964baee0644a6ba047bfd70829"],"d6f074e73200c07d54f242d3880a8da5a35ff97b":[],"06f29c9961912220543423aa6fc6f64362874871":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["c7869f64c874ebf7f317d22c00baf2b6857797a6","d6f074e73200c07d54f242d3880a8da5a35ff97b","06f29c9961912220543423aa6fc6f64362874871","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}