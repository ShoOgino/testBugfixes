{"path":"src/java/org/apache/solr/update/DirectUpdateHandler2.CommitTracker#addedDocument().mjava","commits":[{"id":"2562fab31a7b144e6187859bfa09e363dc6de268","date":1170358826,"type":0,"author":"Mike Klaas","isMerge":false,"pathNew":"src/java/org/apache/solr/update/DirectUpdateHandler2.CommitTracker#addedDocument().mjava","pathOld":"/dev/null","sourceNew":"    /** Indicate that documents have been added\n     */\n    public void addedDocument() {\n      docsSinceCommit++;\n      lastAddedTime = System.currentTimeMillis();\n      if( pending == null ) {  // Don't start a new event if one is already waiting \n        if( timeUpperBound > 0 ) { \n          pending = scheduler.schedule( this, timeUpperBound, TimeUnit.MILLISECONDS );\n        }\n        else if( docsUpperBound > 0 && (docsSinceCommit > docsUpperBound) ) {\n          // 1/4 second seems fast enough for anyone using maxDocs\n          pending = scheduler.schedule( this, 250, TimeUnit.MILLISECONDS );\n        }\n      }\n    }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"c99d95b0b616799770db2542d6eb9a3338198fb4","date":1182798614,"type":3,"author":"Mike Klaas","isMerge":false,"pathNew":"src/java/org/apache/solr/update/DirectUpdateHandler2.CommitTracker#addedDocument().mjava","pathOld":"src/java/org/apache/solr/update/DirectUpdateHandler2.CommitTracker#addedDocument().mjava","sourceNew":"    /** Indicate that documents have been added\n     */\n    public void addedDocument() {\n      docsSinceCommit++;\n      lastAddedTime = System.currentTimeMillis();\n      // maxDocs-triggered autoCommit\n      if( docsUpperBound > 0 && (docsSinceCommit > docsUpperBound) ) {\n        if (pending != null && \n            pending.getDelay(TimeUnit.MILLISECONDS) > DOC_COMMIT_DELAY_MS) {\n          // another commit is pending, but too far away (probably due to\n          // maxTime)\n          pending.cancel(false);\n          pending = null;\n        }\n        if (pending == null) {\n          // 1/4 second seems fast enough for anyone using maxDocs\n          pending = scheduler.schedule(this, DOC_COMMIT_DELAY_MS, \n                                       TimeUnit.MILLISECONDS);\n        }\n      }\n      // maxTime-triggered autoCommit\n      if( pending == null && timeUpperBound > 0 ) { \n        // Don't start a new event if one is already waiting \n        pending = scheduler.schedule( this, timeUpperBound, TimeUnit.MILLISECONDS );\n      }\n      \n    }\n\n","sourceOld":"    /** Indicate that documents have been added\n     */\n    public void addedDocument() {\n      docsSinceCommit++;\n      lastAddedTime = System.currentTimeMillis();\n      if( pending == null ) {  // Don't start a new event if one is already waiting \n        if( timeUpperBound > 0 ) { \n          pending = scheduler.schedule( this, timeUpperBound, TimeUnit.MILLISECONDS );\n        }\n        else if( docsUpperBound > 0 && (docsSinceCommit > docsUpperBound) ) {\n          // 1/4 second seems fast enough for anyone using maxDocs\n          pending = scheduler.schedule( this, 250, TimeUnit.MILLISECONDS );\n        }\n      }\n    }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"2e97a7d6ce275d5deea94b74ce25d8551202f9ba","date":1223943844,"type":4,"author":"Ryan McKinley","isMerge":false,"pathNew":"/dev/null","pathOld":"src/java/org/apache/solr/update/DirectUpdateHandler2.CommitTracker#addedDocument().mjava","sourceNew":null,"sourceOld":"    /** Indicate that documents have been added\n     */\n    public void addedDocument() {\n      docsSinceCommit++;\n      lastAddedTime = System.currentTimeMillis();\n      // maxDocs-triggered autoCommit\n      if( docsUpperBound > 0 && (docsSinceCommit > docsUpperBound) ) {\n        if (pending != null && \n            pending.getDelay(TimeUnit.MILLISECONDS) > DOC_COMMIT_DELAY_MS) {\n          // another commit is pending, but too far away (probably due to\n          // maxTime)\n          pending.cancel(false);\n          pending = null;\n        }\n        if (pending == null) {\n          // 1/4 second seems fast enough for anyone using maxDocs\n          pending = scheduler.schedule(this, DOC_COMMIT_DELAY_MS, \n                                       TimeUnit.MILLISECONDS);\n        }\n      }\n      // maxTime-triggered autoCommit\n      if( pending == null && timeUpperBound > 0 ) { \n        // Don't start a new event if one is already waiting \n        pending = scheduler.schedule( this, timeUpperBound, TimeUnit.MILLISECONDS );\n      }\n      \n    }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"2e97a7d6ce275d5deea94b74ce25d8551202f9ba":["c99d95b0b616799770db2542d6eb9a3338198fb4"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b":[],"2562fab31a7b144e6187859bfa09e363dc6de268":["3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b"],"c99d95b0b616799770db2542d6eb9a3338198fb4":["2562fab31a7b144e6187859bfa09e363dc6de268"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"]},"commit2Childs":{"2e97a7d6ce275d5deea94b74ce25d8551202f9ba":[],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b":["2562fab31a7b144e6187859bfa09e363dc6de268"],"2562fab31a7b144e6187859bfa09e363dc6de268":["c99d95b0b616799770db2542d6eb9a3338198fb4"],"c99d95b0b616799770db2542d6eb9a3338198fb4":["2e97a7d6ce275d5deea94b74ce25d8551202f9ba"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["2e97a7d6ce275d5deea94b74ce25d8551202f9ba","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b"],"pathCommit":null}