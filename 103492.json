{"path":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#testNoCollectionSpecified().mjava","commits":[{"id":"ca7a6123388cbbfe986d2b83de386ca6c89e0ad4","date":1394041707,"type":0,"author":"Mark Robert Miller","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#testNoCollectionSpecified().mjava","pathOld":"/dev/null","sourceNew":"  private void testNoCollectionSpecified() throws Exception {\n    \n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertFalse(cloudClient.getZkStateReader().getAllCollections().contains(\"corewithnocollection\"));\n    assertFalse(cloudClient.getZkStateReader().getAllCollections().contains(\"corewithnocollection2\"));\n    \n    // try and create a SolrCore with no collection name\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"corewithnocollection\");\n    createCmd.setCollection(\"\");\n    String dataDir = SolrTestCaseJ4.dataDir.getAbsolutePath() + File.separator\n        + System.currentTimeMillis() + \"corewithnocollection\" + \"_1v\";\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(1);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    \n    createNewSolrServer(\"\", getBaseUrl((HttpSolrServer) clients.get(1)))\n        .request(createCmd);\n    \n    // try and create a SolrCore with no collection name\n    createCmd.setCollection(null);\n    createCmd.setCoreName(\"corewithnocollection2\");\n    \n    createNewSolrServer(\"\", getBaseUrl((HttpSolrServer) clients.get(1)))\n        .request(createCmd);\n    \n    // in both cases, the collection should have default to the core name\n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertTrue(cloudClient.getZkStateReader().getAllCollections().contains(\"corewithnocollection\"));\n    assertTrue(cloudClient.getZkStateReader().getAllCollections().contains(\"corewithnocollection2\"));\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":["9942a098be9e045925c48c55fe39f6ffb9667744","6784d0cc613dc1ee97030eaaa5e0754edc22d164"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"96ea64d994d340044e0d57aeb6a5871539d10ca5","date":1394225445,"type":0,"author":"Michael McCandless","isMerge":true,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#testNoCollectionSpecified().mjava","pathOld":"/dev/null","sourceNew":"  private void testNoCollectionSpecified() throws Exception {\n    \n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertFalse(cloudClient.getZkStateReader().getAllCollections().contains(\"corewithnocollection\"));\n    assertFalse(cloudClient.getZkStateReader().getAllCollections().contains(\"corewithnocollection2\"));\n    \n    // try and create a SolrCore with no collection name\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"corewithnocollection\");\n    createCmd.setCollection(\"\");\n    String dataDir = SolrTestCaseJ4.dataDir.getAbsolutePath() + File.separator\n        + System.currentTimeMillis() + \"corewithnocollection\" + \"_1v\";\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(1);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    \n    createNewSolrServer(\"\", getBaseUrl((HttpSolrServer) clients.get(1)))\n        .request(createCmd);\n    \n    // try and create a SolrCore with no collection name\n    createCmd.setCollection(null);\n    createCmd.setCoreName(\"corewithnocollection2\");\n    \n    createNewSolrServer(\"\", getBaseUrl((HttpSolrServer) clients.get(1)))\n        .request(createCmd);\n    \n    // in both cases, the collection should have default to the core name\n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertTrue(cloudClient.getZkStateReader().getAllCollections().contains(\"corewithnocollection\"));\n    assertTrue(cloudClient.getZkStateReader().getAllCollections().contains(\"corewithnocollection2\"));\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"bb1f22cfa77230b5f05b7784feae5367f6bbb488","date":1395968145,"type":3,"author":"Mark Robert Miller","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#testNoCollectionSpecified().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#testNoCollectionSpecified().mjava","sourceNew":"  private void testNoCollectionSpecified() throws Exception {\n    \n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertFalse(cloudClient.getZkStateReader().getAllCollections().contains(\"corewithnocollection\"));\n    assertFalse(cloudClient.getZkStateReader().getAllCollections().contains(\"corewithnocollection2\"));\n    \n    // try and create a SolrCore with no collection name\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"corewithnocollection\");\n    createCmd.setCollection(\"\");\n    String dataDir = createTempDir().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(1);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    \n    createNewSolrServer(\"\", getBaseUrl((HttpSolrServer) clients.get(1)))\n        .request(createCmd);\n    \n    // try and create a SolrCore with no collection name\n    createCmd.setCollection(null);\n    createCmd.setCoreName(\"corewithnocollection2\");\n    \n    createNewSolrServer(\"\", getBaseUrl((HttpSolrServer) clients.get(1)))\n        .request(createCmd);\n    \n    // in both cases, the collection should have default to the core name\n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertTrue(cloudClient.getZkStateReader().getAllCollections().contains(\"corewithnocollection\"));\n    assertTrue(cloudClient.getZkStateReader().getAllCollections().contains(\"corewithnocollection2\"));\n  }\n\n","sourceOld":"  private void testNoCollectionSpecified() throws Exception {\n    \n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertFalse(cloudClient.getZkStateReader().getAllCollections().contains(\"corewithnocollection\"));\n    assertFalse(cloudClient.getZkStateReader().getAllCollections().contains(\"corewithnocollection2\"));\n    \n    // try and create a SolrCore with no collection name\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"corewithnocollection\");\n    createCmd.setCollection(\"\");\n    String dataDir = SolrTestCaseJ4.dataDir.getAbsolutePath() + File.separator\n        + System.currentTimeMillis() + \"corewithnocollection\" + \"_1v\";\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(1);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    \n    createNewSolrServer(\"\", getBaseUrl((HttpSolrServer) clients.get(1)))\n        .request(createCmd);\n    \n    // try and create a SolrCore with no collection name\n    createCmd.setCollection(null);\n    createCmd.setCoreName(\"corewithnocollection2\");\n    \n    createNewSolrServer(\"\", getBaseUrl((HttpSolrServer) clients.get(1)))\n        .request(createCmd);\n    \n    // in both cases, the collection should have default to the core name\n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertTrue(cloudClient.getZkStateReader().getAllCollections().contains(\"corewithnocollection\"));\n    assertTrue(cloudClient.getZkStateReader().getAllCollections().contains(\"corewithnocollection2\"));\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"2a0f5bb79c600763ffe7b8141df59a3169d31e48","date":1396689440,"type":3,"author":"Dawid Weiss","isMerge":true,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#testNoCollectionSpecified().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#testNoCollectionSpecified().mjava","sourceNew":"  private void testNoCollectionSpecified() throws Exception {\n    \n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertFalse(cloudClient.getZkStateReader().getAllCollections().contains(\"corewithnocollection\"));\n    assertFalse(cloudClient.getZkStateReader().getAllCollections().contains(\"corewithnocollection2\"));\n    \n    // try and create a SolrCore with no collection name\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"corewithnocollection\");\n    createCmd.setCollection(\"\");\n    String dataDir = createTempDir().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(1);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    \n    createNewSolrServer(\"\", getBaseUrl((HttpSolrServer) clients.get(1)))\n        .request(createCmd);\n    \n    // try and create a SolrCore with no collection name\n    createCmd.setCollection(null);\n    createCmd.setCoreName(\"corewithnocollection2\");\n    \n    createNewSolrServer(\"\", getBaseUrl((HttpSolrServer) clients.get(1)))\n        .request(createCmd);\n    \n    // in both cases, the collection should have default to the core name\n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertTrue(cloudClient.getZkStateReader().getAllCollections().contains(\"corewithnocollection\"));\n    assertTrue(cloudClient.getZkStateReader().getAllCollections().contains(\"corewithnocollection2\"));\n  }\n\n","sourceOld":"  private void testNoCollectionSpecified() throws Exception {\n    \n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertFalse(cloudClient.getZkStateReader().getAllCollections().contains(\"corewithnocollection\"));\n    assertFalse(cloudClient.getZkStateReader().getAllCollections().contains(\"corewithnocollection2\"));\n    \n    // try and create a SolrCore with no collection name\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"corewithnocollection\");\n    createCmd.setCollection(\"\");\n    String dataDir = SolrTestCaseJ4.dataDir.getAbsolutePath() + File.separator\n        + System.currentTimeMillis() + \"corewithnocollection\" + \"_1v\";\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(1);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    \n    createNewSolrServer(\"\", getBaseUrl((HttpSolrServer) clients.get(1)))\n        .request(createCmd);\n    \n    // try and create a SolrCore with no collection name\n    createCmd.setCollection(null);\n    createCmd.setCoreName(\"corewithnocollection2\");\n    \n    createNewSolrServer(\"\", getBaseUrl((HttpSolrServer) clients.get(1)))\n        .request(createCmd);\n    \n    // in both cases, the collection should have default to the core name\n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertTrue(cloudClient.getZkStateReader().getAllCollections().contains(\"corewithnocollection\"));\n    assertTrue(cloudClient.getZkStateReader().getAllCollections().contains(\"corewithnocollection2\"));\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"a5a233896b7f16ac9b4ed601ef8207d98f1f0500","date":1398857046,"type":3,"author":"Noble Paul","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#testNoCollectionSpecified().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#testNoCollectionSpecified().mjava","sourceNew":"  private void testNoCollectionSpecified() throws Exception {\n    \n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n    \n    // try and create a SolrCore with no collection name\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"corewithnocollection\");\n    createCmd.setCollection(\"\");\n    String dataDir = createTempDir().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(1);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    \n    createNewSolrServer(\"\", getBaseUrl((HttpSolrServer) clients.get(1)))\n        .request(createCmd);\n    \n    // try and create a SolrCore with no collection name\n    createCmd.setCollection(null);\n    createCmd.setCoreName(\"corewithnocollection2\");\n    \n    createNewSolrServer(\"\", getBaseUrl((HttpSolrServer) clients.get(1)))\n        .request(createCmd);\n    \n    // in both cases, the collection should have default to the core name\n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertTrue( cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertTrue(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n  }\n\n","sourceOld":"  private void testNoCollectionSpecified() throws Exception {\n    \n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertFalse(cloudClient.getZkStateReader().getAllCollections().contains(\"corewithnocollection\"));\n    assertFalse(cloudClient.getZkStateReader().getAllCollections().contains(\"corewithnocollection2\"));\n    \n    // try and create a SolrCore with no collection name\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"corewithnocollection\");\n    createCmd.setCollection(\"\");\n    String dataDir = createTempDir().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(1);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    \n    createNewSolrServer(\"\", getBaseUrl((HttpSolrServer) clients.get(1)))\n        .request(createCmd);\n    \n    // try and create a SolrCore with no collection name\n    createCmd.setCollection(null);\n    createCmd.setCoreName(\"corewithnocollection2\");\n    \n    createNewSolrServer(\"\", getBaseUrl((HttpSolrServer) clients.get(1)))\n        .request(createCmd);\n    \n    // in both cases, the collection should have default to the core name\n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertTrue(cloudClient.getZkStateReader().getAllCollections().contains(\"corewithnocollection\"));\n    assertTrue(cloudClient.getZkStateReader().getAllCollections().contains(\"corewithnocollection2\"));\n  }\n\n","bugFix":null,"bugIntro":["9942a098be9e045925c48c55fe39f6ffb9667744"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"f4abec28b874149a7223e32cc7a01704c27790de","date":1410644789,"type":3,"author":"Robert Muir","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#testNoCollectionSpecified().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#testNoCollectionSpecified().mjava","sourceNew":"  private void testNoCollectionSpecified() throws Exception {\n    \n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n    \n    // try and create a SolrCore with no collection name\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"corewithnocollection\");\n    createCmd.setCollection(\"\");\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(1);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    \n    createNewSolrServer(\"\", getBaseUrl((HttpSolrServer) clients.get(1)))\n        .request(createCmd);\n    \n    // try and create a SolrCore with no collection name\n    createCmd.setCollection(null);\n    createCmd.setCoreName(\"corewithnocollection2\");\n    \n    createNewSolrServer(\"\", getBaseUrl((HttpSolrServer) clients.get(1)))\n        .request(createCmd);\n    \n    // in both cases, the collection should have default to the core name\n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertTrue( cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertTrue(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n  }\n\n","sourceOld":"  private void testNoCollectionSpecified() throws Exception {\n    \n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n    \n    // try and create a SolrCore with no collection name\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"corewithnocollection\");\n    createCmd.setCollection(\"\");\n    String dataDir = createTempDir().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(1);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    \n    createNewSolrServer(\"\", getBaseUrl((HttpSolrServer) clients.get(1)))\n        .request(createCmd);\n    \n    // try and create a SolrCore with no collection name\n    createCmd.setCollection(null);\n    createCmd.setCoreName(\"corewithnocollection2\");\n    \n    createNewSolrServer(\"\", getBaseUrl((HttpSolrServer) clients.get(1)))\n        .request(createCmd);\n    \n    // in both cases, the collection should have default to the core name\n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertTrue( cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertTrue(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"bafca15d8e408346a67f4282ad1143b88023893b","date":1420034748,"type":3,"author":"Alan Woodward","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#testNoCollectionSpecified().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#testNoCollectionSpecified().mjava","sourceNew":"  private void testNoCollectionSpecified() throws Exception {\n    \n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n    \n    // try and create a SolrCore with no collection name\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"corewithnocollection\");\n    createCmd.setCollection(\"\");\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(1);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    \n    createNewSolrClient(\"\", getBaseUrl((HttpSolrClient) clients.get(1)))\n        .request(createCmd);\n    \n    // try and create a SolrCore with no collection name\n    createCmd.setCollection(null);\n    createCmd.setCoreName(\"corewithnocollection2\");\n    \n    createNewSolrClient(\"\", getBaseUrl((HttpSolrClient) clients.get(1)))\n        .request(createCmd);\n    \n    // in both cases, the collection should have default to the core name\n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertTrue( cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertTrue(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n  }\n\n","sourceOld":"  private void testNoCollectionSpecified() throws Exception {\n    \n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n    \n    // try and create a SolrCore with no collection name\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"corewithnocollection\");\n    createCmd.setCollection(\"\");\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(1);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    \n    createNewSolrServer(\"\", getBaseUrl((HttpSolrServer) clients.get(1)))\n        .request(createCmd);\n    \n    // try and create a SolrCore with no collection name\n    createCmd.setCollection(null);\n    createCmd.setCoreName(\"corewithnocollection2\");\n    \n    createNewSolrServer(\"\", getBaseUrl((HttpSolrServer) clients.get(1)))\n        .request(createCmd);\n    \n    // in both cases, the collection should have default to the core name\n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertTrue( cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertTrue(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n  }\n\n","bugFix":null,"bugIntro":["6784d0cc613dc1ee97030eaaa5e0754edc22d164"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"6784d0cc613dc1ee97030eaaa5e0754edc22d164","date":1420824784,"type":3,"author":"Mark Robert Miller","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#testNoCollectionSpecified().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#testNoCollectionSpecified().mjava","sourceNew":"  private void testNoCollectionSpecified() throws Exception {\n    \n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n    \n    // try and create a SolrCore with no collection name\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"corewithnocollection\");\n    createCmd.setCollection(\"\");\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(1);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    \n    makeRequest(getBaseUrl((HttpSolrClient) clients.get(1)), createCmd);\n    \n    // try and create a SolrCore with no collection name\n    createCmd.setCollection(null);\n    createCmd.setCoreName(\"corewithnocollection2\");\n    \n    makeRequest(getBaseUrl((HttpSolrClient) clients.get(1)), createCmd);\n    \n    // in both cases, the collection should have default to the core name\n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertTrue( cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertTrue(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n  }\n\n","sourceOld":"  private void testNoCollectionSpecified() throws Exception {\n    \n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n    \n    // try and create a SolrCore with no collection name\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"corewithnocollection\");\n    createCmd.setCollection(\"\");\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(1);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    \n    createNewSolrClient(\"\", getBaseUrl((HttpSolrClient) clients.get(1)))\n        .request(createCmd);\n    \n    // try and create a SolrCore with no collection name\n    createCmd.setCollection(null);\n    createCmd.setCoreName(\"corewithnocollection2\");\n    \n    createNewSolrClient(\"\", getBaseUrl((HttpSolrClient) clients.get(1)))\n        .request(createCmd);\n    \n    // in both cases, the collection should have default to the core name\n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertTrue( cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertTrue(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n  }\n\n","bugFix":["ca7a6123388cbbfe986d2b83de386ca6c89e0ad4","bafca15d8e408346a67f4282ad1143b88023893b"],"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"9942a098be9e045925c48c55fe39f6ffb9667744","date":1436492864,"type":3,"author":"Erick Erickson","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#testNoCollectionSpecified().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#testNoCollectionSpecified().mjava","sourceNew":"  private void testNoCollectionSpecified() throws Exception {\n    \n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n    \n    // try and create a SolrCore with no collection name\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"corewithnocollection\");\n    createCmd.setCollection(\"\");\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(1);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n\n    makeRequest(getBaseUrl((HttpSolrClient) clients.get(1)), createCmd);\n    \n    // try and create a SolrCore with no collection name\n    createCmd.setCollection(null);\n    createCmd.setCoreName(\"corewithnocollection2\");\n\n    makeRequest(getBaseUrl((HttpSolrClient) clients.get(1)), createCmd);\n    \n    // in both cases, the collection should have default to the core name\n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertTrue(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertTrue(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n  }\n\n","sourceOld":"  private void testNoCollectionSpecified() throws Exception {\n    \n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n    \n    // try and create a SolrCore with no collection name\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"corewithnocollection\");\n    createCmd.setCollection(\"\");\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(1);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    \n    makeRequest(getBaseUrl((HttpSolrClient) clients.get(1)), createCmd);\n    \n    // try and create a SolrCore with no collection name\n    createCmd.setCollection(null);\n    createCmd.setCoreName(\"corewithnocollection2\");\n    \n    makeRequest(getBaseUrl((HttpSolrClient) clients.get(1)), createCmd);\n    \n    // in both cases, the collection should have default to the core name\n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertTrue( cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertTrue(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n  }\n\n","bugFix":["ca7a6123388cbbfe986d2b83de386ca6c89e0ad4","a5a233896b7f16ac9b4ed601ef8207d98f1f0500"],"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"102da6baafc0f534a59f31729343dbab9d3b9e9a","date":1438410244,"type":3,"author":"Shalin Shekhar Mangar","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#testNoCollectionSpecified().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#testNoCollectionSpecified().mjava","sourceNew":"  private void testNoCollectionSpecified() throws Exception {\n    \n    cloudClient.getZkStateReader().updateClusterState();\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n    \n    // try and create a SolrCore with no collection name\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"corewithnocollection\");\n    createCmd.setCollection(\"\");\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(1);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n\n    makeRequest(getBaseUrl((HttpSolrClient) clients.get(1)), createCmd);\n    \n    // try and create a SolrCore with no collection name\n    createCmd.setCollection(null);\n    createCmd.setCoreName(\"corewithnocollection2\");\n\n    makeRequest(getBaseUrl((HttpSolrClient) clients.get(1)), createCmd);\n    \n    // in both cases, the collection should have default to the core name\n    cloudClient.getZkStateReader().updateClusterState();\n    assertTrue(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertTrue(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n  }\n\n","sourceOld":"  private void testNoCollectionSpecified() throws Exception {\n    \n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n    \n    // try and create a SolrCore with no collection name\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"corewithnocollection\");\n    createCmd.setCollection(\"\");\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(1);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n\n    makeRequest(getBaseUrl((HttpSolrClient) clients.get(1)), createCmd);\n    \n    // try and create a SolrCore with no collection name\n    createCmd.setCollection(null);\n    createCmd.setCoreName(\"corewithnocollection2\");\n\n    makeRequest(getBaseUrl((HttpSolrClient) clients.get(1)), createCmd);\n    \n    // in both cases, the collection should have default to the core name\n    cloudClient.getZkStateReader().updateClusterState(true);\n    assertTrue(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertTrue(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"7c3f4fed97dabfe4bcddc3566fd190a7c909bc4f","date":1457343183,"type":3,"author":"Shalin Shekhar Mangar","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#testNoCollectionSpecified().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#testNoCollectionSpecified().mjava","sourceNew":"  private void testNoCollectionSpecified() throws Exception {\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n    \n    // try and create a SolrCore with no collection name\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"corewithnocollection\");\n    createCmd.setCollection(\"\");\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(1);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n\n    makeRequest(getBaseUrl((HttpSolrClient) clients.get(1)), createCmd);\n    \n    // try and create a SolrCore with no collection name\n    createCmd.setCollection(null);\n    createCmd.setCoreName(\"corewithnocollection2\");\n\n    makeRequest(getBaseUrl((HttpSolrClient) clients.get(1)), createCmd);\n    \n    // in both cases, the collection should have default to the core name\n    cloudClient.getZkStateReader().forceUpdateCollection(\"corewithnocollection\");\n    cloudClient.getZkStateReader().forceUpdateCollection(\"corewithnocollection2\");\n    assertTrue(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertTrue(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n  }\n\n","sourceOld":"  private void testNoCollectionSpecified() throws Exception {\n    \n    cloudClient.getZkStateReader().updateClusterState();\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n    \n    // try and create a SolrCore with no collection name\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"corewithnocollection\");\n    createCmd.setCollection(\"\");\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(1);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n\n    makeRequest(getBaseUrl((HttpSolrClient) clients.get(1)), createCmd);\n    \n    // try and create a SolrCore with no collection name\n    createCmd.setCollection(null);\n    createCmd.setCoreName(\"corewithnocollection2\");\n\n    makeRequest(getBaseUrl((HttpSolrClient) clients.get(1)), createCmd);\n    \n    // in both cases, the collection should have default to the core name\n    cloudClient.getZkStateReader().updateClusterState();\n    assertTrue(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertTrue(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"a4efd3fffdd7acd625bb88e455c8097e17f75735","date":1477647201,"type":3,"author":"Alan Woodward","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#testNoCollectionSpecified().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#testNoCollectionSpecified().mjava","sourceNew":"  @Test\n  public void testNoCollectionSpecified() throws Exception {\n\n    // TODO - should we remove this behaviour?\n\n    assertFalse(cluster.getSolrClient().getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertFalse(cluster.getSolrClient().getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n    \n    // try and create a SolrCore with no collection name\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"corewithnocollection\");\n    createCmd.setCollection(\"\");\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(1);\n    createCmd.setCollectionConfigName(\"conf\");\n\n    cluster.getSolrClient().request(createCmd);\n    \n    // try and create a SolrCore with no collection name\n    createCmd.setCollection(null);\n    createCmd.setCoreName(\"corewithnocollection2\");\n\n    cluster.getSolrClient().request(createCmd);\n    \n    // in both cases, the collection should have default to the core name\n    cluster.getSolrClient().getZkStateReader().forceUpdateCollection(\"corewithnocollection\");\n    cluster.getSolrClient().getZkStateReader().forceUpdateCollection(\"corewithnocollection2\");\n    assertTrue(cluster.getSolrClient().getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertTrue(cluster.getSolrClient().getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n  }\n\n","sourceOld":"  private void testNoCollectionSpecified() throws Exception {\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n    \n    // try and create a SolrCore with no collection name\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"corewithnocollection\");\n    createCmd.setCollection(\"\");\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(1);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n\n    makeRequest(getBaseUrl((HttpSolrClient) clients.get(1)), createCmd);\n    \n    // try and create a SolrCore with no collection name\n    createCmd.setCollection(null);\n    createCmd.setCoreName(\"corewithnocollection2\");\n\n    makeRequest(getBaseUrl((HttpSolrClient) clients.get(1)), createCmd);\n    \n    // in both cases, the collection should have default to the core name\n    cloudClient.getZkStateReader().forceUpdateCollection(\"corewithnocollection\");\n    cloudClient.getZkStateReader().forceUpdateCollection(\"corewithnocollection2\");\n    assertTrue(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertTrue(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"59dce44d6a0b58c171de1d47ad8c0a75831f94fd","date":1477668573,"type":3,"author":"Kevin Risden","isMerge":true,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#testNoCollectionSpecified().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#testNoCollectionSpecified().mjava","sourceNew":"  @Test\n  public void testNoCollectionSpecified() throws Exception {\n\n    // TODO - should we remove this behaviour?\n\n    assertFalse(cluster.getSolrClient().getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertFalse(cluster.getSolrClient().getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n    \n    // try and create a SolrCore with no collection name\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"corewithnocollection\");\n    createCmd.setCollection(\"\");\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(1);\n    createCmd.setCollectionConfigName(\"conf\");\n\n    cluster.getSolrClient().request(createCmd);\n    \n    // try and create a SolrCore with no collection name\n    createCmd.setCollection(null);\n    createCmd.setCoreName(\"corewithnocollection2\");\n\n    cluster.getSolrClient().request(createCmd);\n    \n    // in both cases, the collection should have default to the core name\n    cluster.getSolrClient().getZkStateReader().forceUpdateCollection(\"corewithnocollection\");\n    cluster.getSolrClient().getZkStateReader().forceUpdateCollection(\"corewithnocollection2\");\n    assertTrue(cluster.getSolrClient().getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertTrue(cluster.getSolrClient().getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n  }\n\n","sourceOld":"  private void testNoCollectionSpecified() throws Exception {\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n    \n    // try and create a SolrCore with no collection name\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"corewithnocollection\");\n    createCmd.setCollection(\"\");\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(1);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n\n    makeRequest(getBaseUrl((HttpSolrClient) clients.get(1)), createCmd);\n    \n    // try and create a SolrCore with no collection name\n    createCmd.setCollection(null);\n    createCmd.setCoreName(\"corewithnocollection2\");\n\n    makeRequest(getBaseUrl((HttpSolrClient) clients.get(1)), createCmd);\n    \n    // in both cases, the collection should have default to the core name\n    cloudClient.getZkStateReader().forceUpdateCollection(\"corewithnocollection\");\n    cloudClient.getZkStateReader().forceUpdateCollection(\"corewithnocollection2\");\n    assertTrue(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertTrue(cloudClient.getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"a9b4296bd51ca61b482138791478afdd0f7d3a3d","date":1498058739,"type":4,"author":"Cao Manh Dat","isMerge":false,"pathNew":"/dev/null","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#testNoCollectionSpecified().mjava","sourceNew":null,"sourceOld":"  @Test\n  public void testNoCollectionSpecified() throws Exception {\n\n    // TODO - should we remove this behaviour?\n\n    assertFalse(cluster.getSolrClient().getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertFalse(cluster.getSolrClient().getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n    \n    // try and create a SolrCore with no collection name\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"corewithnocollection\");\n    createCmd.setCollection(\"\");\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(1);\n    createCmd.setCollectionConfigName(\"conf\");\n\n    cluster.getSolrClient().request(createCmd);\n    \n    // try and create a SolrCore with no collection name\n    createCmd.setCollection(null);\n    createCmd.setCoreName(\"corewithnocollection2\");\n\n    cluster.getSolrClient().request(createCmd);\n    \n    // in both cases, the collection should have default to the core name\n    cluster.getSolrClient().getZkStateReader().forceUpdateCollection(\"corewithnocollection\");\n    cluster.getSolrClient().getZkStateReader().forceUpdateCollection(\"corewithnocollection2\");\n    assertTrue(cluster.getSolrClient().getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertTrue(cluster.getSolrClient().getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"b7dfa64bc2074fb87d0ca70095a644c1ead107e1","date":1498356339,"type":4,"author":"Shalin Shekhar Mangar","isMerge":true,"pathNew":"/dev/null","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#testNoCollectionSpecified().mjava","sourceNew":null,"sourceOld":"  @Test\n  public void testNoCollectionSpecified() throws Exception {\n\n    // TODO - should we remove this behaviour?\n\n    assertFalse(cluster.getSolrClient().getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertFalse(cluster.getSolrClient().getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n    \n    // try and create a SolrCore with no collection name\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"corewithnocollection\");\n    createCmd.setCollection(\"\");\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(1);\n    createCmd.setCollectionConfigName(\"conf\");\n\n    cluster.getSolrClient().request(createCmd);\n    \n    // try and create a SolrCore with no collection name\n    createCmd.setCollection(null);\n    createCmd.setCoreName(\"corewithnocollection2\");\n\n    cluster.getSolrClient().request(createCmd);\n    \n    // in both cases, the collection should have default to the core name\n    cluster.getSolrClient().getZkStateReader().forceUpdateCollection(\"corewithnocollection\");\n    cluster.getSolrClient().getZkStateReader().forceUpdateCollection(\"corewithnocollection2\");\n    assertTrue(cluster.getSolrClient().getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertTrue(cluster.getSolrClient().getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"28288370235ed02234a64753cdbf0c6ec096304a","date":1498726817,"type":4,"author":"Karl Wright","isMerge":true,"pathNew":"/dev/null","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#testNoCollectionSpecified().mjava","sourceNew":null,"sourceOld":"  @Test\n  public void testNoCollectionSpecified() throws Exception {\n\n    // TODO - should we remove this behaviour?\n\n    assertFalse(cluster.getSolrClient().getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertFalse(cluster.getSolrClient().getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n    \n    // try and create a SolrCore with no collection name\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"corewithnocollection\");\n    createCmd.setCollection(\"\");\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(1);\n    createCmd.setCollectionConfigName(\"conf\");\n\n    cluster.getSolrClient().request(createCmd);\n    \n    // try and create a SolrCore with no collection name\n    createCmd.setCollection(null);\n    createCmd.setCoreName(\"corewithnocollection2\");\n\n    cluster.getSolrClient().request(createCmd);\n    \n    // in both cases, the collection should have default to the core name\n    cluster.getSolrClient().getZkStateReader().forceUpdateCollection(\"corewithnocollection\");\n    cluster.getSolrClient().getZkStateReader().forceUpdateCollection(\"corewithnocollection2\");\n    assertTrue(cluster.getSolrClient().getZkStateReader().getClusterState().hasCollection(\"corewithnocollection\"));\n    assertTrue(cluster.getSolrClient().getZkStateReader().getClusterState().hasCollection(\"corewithnocollection2\"));\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a4efd3fffdd7acd625bb88e455c8097e17f75735":["7c3f4fed97dabfe4bcddc3566fd190a7c909bc4f"],"59dce44d6a0b58c171de1d47ad8c0a75831f94fd":["7c3f4fed97dabfe4bcddc3566fd190a7c909bc4f","a4efd3fffdd7acd625bb88e455c8097e17f75735"],"96ea64d994d340044e0d57aeb6a5871539d10ca5":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","ca7a6123388cbbfe986d2b83de386ca6c89e0ad4"],"bb1f22cfa77230b5f05b7784feae5367f6bbb488":["ca7a6123388cbbfe986d2b83de386ca6c89e0ad4"],"a9b4296bd51ca61b482138791478afdd0f7d3a3d":["a4efd3fffdd7acd625bb88e455c8097e17f75735"],"2a0f5bb79c600763ffe7b8141df59a3169d31e48":["ca7a6123388cbbfe986d2b83de386ca6c89e0ad4","bb1f22cfa77230b5f05b7784feae5367f6bbb488"],"102da6baafc0f534a59f31729343dbab9d3b9e9a":["9942a098be9e045925c48c55fe39f6ffb9667744"],"a5a233896b7f16ac9b4ed601ef8207d98f1f0500":["2a0f5bb79c600763ffe7b8141df59a3169d31e48"],"9942a098be9e045925c48c55fe39f6ffb9667744":["6784d0cc613dc1ee97030eaaa5e0754edc22d164"],"bafca15d8e408346a67f4282ad1143b88023893b":["f4abec28b874149a7223e32cc7a01704c27790de"],"7c3f4fed97dabfe4bcddc3566fd190a7c909bc4f":["102da6baafc0f534a59f31729343dbab9d3b9e9a"],"f4abec28b874149a7223e32cc7a01704c27790de":["a5a233896b7f16ac9b4ed601ef8207d98f1f0500"],"b7dfa64bc2074fb87d0ca70095a644c1ead107e1":["a4efd3fffdd7acd625bb88e455c8097e17f75735","a9b4296bd51ca61b482138791478afdd0f7d3a3d"],"ca7a6123388cbbfe986d2b83de386ca6c89e0ad4":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"28288370235ed02234a64753cdbf0c6ec096304a":["a4efd3fffdd7acd625bb88e455c8097e17f75735","a9b4296bd51ca61b482138791478afdd0f7d3a3d"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"6784d0cc613dc1ee97030eaaa5e0754edc22d164":["bafca15d8e408346a67f4282ad1143b88023893b"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["28288370235ed02234a64753cdbf0c6ec096304a"]},"commit2Childs":{"a4efd3fffdd7acd625bb88e455c8097e17f75735":["59dce44d6a0b58c171de1d47ad8c0a75831f94fd","a9b4296bd51ca61b482138791478afdd0f7d3a3d","b7dfa64bc2074fb87d0ca70095a644c1ead107e1","28288370235ed02234a64753cdbf0c6ec096304a"],"59dce44d6a0b58c171de1d47ad8c0a75831f94fd":[],"96ea64d994d340044e0d57aeb6a5871539d10ca5":[],"bb1f22cfa77230b5f05b7784feae5367f6bbb488":["2a0f5bb79c600763ffe7b8141df59a3169d31e48"],"a9b4296bd51ca61b482138791478afdd0f7d3a3d":["b7dfa64bc2074fb87d0ca70095a644c1ead107e1","28288370235ed02234a64753cdbf0c6ec096304a"],"2a0f5bb79c600763ffe7b8141df59a3169d31e48":["a5a233896b7f16ac9b4ed601ef8207d98f1f0500"],"102da6baafc0f534a59f31729343dbab9d3b9e9a":["7c3f4fed97dabfe4bcddc3566fd190a7c909bc4f"],"a5a233896b7f16ac9b4ed601ef8207d98f1f0500":["f4abec28b874149a7223e32cc7a01704c27790de"],"9942a098be9e045925c48c55fe39f6ffb9667744":["102da6baafc0f534a59f31729343dbab9d3b9e9a"],"bafca15d8e408346a67f4282ad1143b88023893b":["6784d0cc613dc1ee97030eaaa5e0754edc22d164"],"7c3f4fed97dabfe4bcddc3566fd190a7c909bc4f":["a4efd3fffdd7acd625bb88e455c8097e17f75735","59dce44d6a0b58c171de1d47ad8c0a75831f94fd"],"f4abec28b874149a7223e32cc7a01704c27790de":["bafca15d8e408346a67f4282ad1143b88023893b"],"b7dfa64bc2074fb87d0ca70095a644c1ead107e1":[],"ca7a6123388cbbfe986d2b83de386ca6c89e0ad4":["96ea64d994d340044e0d57aeb6a5871539d10ca5","bb1f22cfa77230b5f05b7784feae5367f6bbb488","2a0f5bb79c600763ffe7b8141df59a3169d31e48"],"28288370235ed02234a64753cdbf0c6ec096304a":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["96ea64d994d340044e0d57aeb6a5871539d10ca5","ca7a6123388cbbfe986d2b83de386ca6c89e0ad4"],"6784d0cc613dc1ee97030eaaa5e0754edc22d164":["9942a098be9e045925c48c55fe39f6ffb9667744"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["59dce44d6a0b58c171de1d47ad8c0a75831f94fd","96ea64d994d340044e0d57aeb6a5871539d10ca5","b7dfa64bc2074fb87d0ca70095a644c1ead107e1","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}