{"path":"src/java/org/apache/solr/handler/component/DebugComponent#finishStage(ResponseBuilder).mjava","commits":[{"id":"5bb29c260c4bbaf4ce8a95d362844ebf77ec1f76","date":1204055227,"type":0,"author":"Yonik Seeley","isMerge":false,"pathNew":"src/java/org/apache/solr/handler/component/DebugComponent#finishStage(ResponseBuilder).mjava","pathOld":"/dev/null","sourceNew":"  @Override\n  public void finishStage(ResponseBuilder rb) {\n    if (rb.isDebug() && rb.stage == ResponseBuilder.STAGE_GET_FIELDS) {\n      NamedList info = null;\n      NamedList explain = new SimpleOrderedMap();\n\n      Object[] arr = new Object[rb.resultIds.size() * 2];\n\n      for (ShardRequest sreq : rb.finished) {\n        if ((sreq.purpose & ShardRequest.PURPOSE_GET_DEBUG) == 0) continue;\n        for (ShardResponse srsp : sreq.responses) {\n          NamedList sdebug = (NamedList)srsp.rsp.getResponse().get(\"debug\");\n          info = (NamedList)merge(sdebug, info, excludeSet);\n\n          NamedList sexplain = (NamedList)sdebug.get(\"explain\");\n\n          for (int i=0; i<sexplain.size(); i++) {\n            String id = sexplain.getName(i);\n            // TODO: lookup won't work for non-string ids... String vs Float\n            ShardDoc sdoc = rb.resultIds.get(id);\n            int idx = sdoc.positionInResponse;\n            arr[idx<<1] = id;\n            arr[(idx<<1)+1] = sexplain.getVal(i);\n          }\n        }\n      }\n\n      explain = HighlightComponent.removeNulls(new NamedList(Arrays.asList(arr)));\n      int idx = info.indexOf(\"explain\",0);\n      if (idx>=0) {\n        info.setVal(idx, explain);\n      } else {\n        info.add(\"explain\", explain);\n      }\n      \n      rb.setDebugInfo(info);\n      rb.rsp.add(\"debug\", rb.getDebugInfo() );      \n    }\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":["53153d3c5d39cd6b824fa6413fa8c7ee0f1b6d3e","53153d3c5d39cd6b824fa6413fa8c7ee0f1b6d3e","53153d3c5d39cd6b824fa6413fa8c7ee0f1b6d3e","0e69935771ba8cb2303a86bf8a42be7861eaf1da"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"da0acfe5ceed804451d76c8f887855b3d060e132","date":1208287358,"type":3,"author":"Yonik Seeley","isMerge":false,"pathNew":"src/java/org/apache/solr/handler/component/DebugComponent#finishStage(ResponseBuilder).mjava","pathOld":"src/java/org/apache/solr/handler/component/DebugComponent#finishStage(ResponseBuilder).mjava","sourceNew":"  @Override\n  public void finishStage(ResponseBuilder rb) {\n    if (rb.isDebug() && rb.stage == ResponseBuilder.STAGE_GET_FIELDS) {\n      NamedList info = null;\n      NamedList explain = new SimpleOrderedMap();\n\n      Object[] arr = new Object[rb.resultIds.size() * 2];\n\n      for (ShardRequest sreq : rb.finished) {\n        if ((sreq.purpose & ShardRequest.PURPOSE_GET_DEBUG) == 0) continue;\n        for (ShardResponse srsp : sreq.responses) {\n          NamedList sdebug = (NamedList)srsp.rsp.getResponse().get(\"debug\");\n          info = (NamedList)merge(sdebug, info, excludeSet);\n\n          NamedList sexplain = (NamedList)sdebug.get(\"explain\");\n\n          for (int i=0; i<sexplain.size(); i++) {\n            String id = sexplain.getName(i);\n            // TODO: lookup won't work for non-string ids... String vs Float\n            ShardDoc sdoc = rb.resultIds.get(id);\n            int idx = sdoc.positionInResponse;\n            arr[idx<<1] = id;\n            arr[(idx<<1)+1] = sexplain.getVal(i);\n          }\n        }\n      }\n\n      explain = HighlightComponent.removeNulls(new SimpleOrderedMap(Arrays.asList(arr)));\n      int idx = info.indexOf(\"explain\",0);\n      if (idx>=0) {\n        info.setVal(idx, explain);\n      } else {\n        info.add(\"explain\", explain);\n      }\n      \n      rb.setDebugInfo(info);\n      rb.rsp.add(\"debug\", rb.getDebugInfo() );      \n    }\n  }\n\n","sourceOld":"  @Override\n  public void finishStage(ResponseBuilder rb) {\n    if (rb.isDebug() && rb.stage == ResponseBuilder.STAGE_GET_FIELDS) {\n      NamedList info = null;\n      NamedList explain = new SimpleOrderedMap();\n\n      Object[] arr = new Object[rb.resultIds.size() * 2];\n\n      for (ShardRequest sreq : rb.finished) {\n        if ((sreq.purpose & ShardRequest.PURPOSE_GET_DEBUG) == 0) continue;\n        for (ShardResponse srsp : sreq.responses) {\n          NamedList sdebug = (NamedList)srsp.rsp.getResponse().get(\"debug\");\n          info = (NamedList)merge(sdebug, info, excludeSet);\n\n          NamedList sexplain = (NamedList)sdebug.get(\"explain\");\n\n          for (int i=0; i<sexplain.size(); i++) {\n            String id = sexplain.getName(i);\n            // TODO: lookup won't work for non-string ids... String vs Float\n            ShardDoc sdoc = rb.resultIds.get(id);\n            int idx = sdoc.positionInResponse;\n            arr[idx<<1] = id;\n            arr[(idx<<1)+1] = sexplain.getVal(i);\n          }\n        }\n      }\n\n      explain = HighlightComponent.removeNulls(new NamedList(Arrays.asList(arr)));\n      int idx = info.indexOf(\"explain\",0);\n      if (idx>=0) {\n        info.setVal(idx, explain);\n      } else {\n        info.add(\"explain\", explain);\n      }\n      \n      rb.setDebugInfo(info);\n      rb.rsp.add(\"debug\", rb.getDebugInfo() );      \n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"a65fafd2cd022da518bb7ee43dcef8d80014c57d","date":1215448650,"type":3,"author":"Yonik Seeley","isMerge":false,"pathNew":"src/java/org/apache/solr/handler/component/DebugComponent#finishStage(ResponseBuilder).mjava","pathOld":"src/java/org/apache/solr/handler/component/DebugComponent#finishStage(ResponseBuilder).mjava","sourceNew":"  @Override\n  public void finishStage(ResponseBuilder rb) {\n    if (rb.isDebug() && rb.stage == ResponseBuilder.STAGE_GET_FIELDS) {\n      NamedList info = null;\n      NamedList explain = new SimpleOrderedMap();\n\n      Object[] arr = new Object[rb.resultIds.size() * 2];\n\n      for (ShardRequest sreq : rb.finished) {\n        if ((sreq.purpose & ShardRequest.PURPOSE_GET_DEBUG) == 0) continue;\n        for (ShardResponse srsp : sreq.responses) {\n          NamedList sdebug = (NamedList)srsp.rsp.getResponse().get(\"debug\");\n          info = (NamedList)merge(sdebug, info, excludeSet);\n\n          NamedList sexplain = (NamedList)sdebug.get(\"explain\");\n\n          for (int i=0; i<sexplain.size(); i++) {\n            String id = sexplain.getName(i);\n            // TODO: lookup won't work for non-string ids... String vs Float\n            ShardDoc sdoc = rb.resultIds.get(id);\n            int idx = sdoc.positionInResponse;\n            arr[idx<<1] = id;\n            arr[(idx<<1)+1] = sexplain.getVal(i);\n          }\n        }\n      }\n\n      explain = HighlightComponent.removeNulls(new SimpleOrderedMap(Arrays.asList(arr)));\n\n      if (info == null) {\n        info = new NamedList();\n      }\n      int idx = info.indexOf(\"explain\",0);\n      if (idx>=0) {\n        info.setVal(idx, explain);\n      } else {\n        info.add(\"explain\", explain);\n      }\n      \n      rb.setDebugInfo(info);\n      rb.rsp.add(\"debug\", rb.getDebugInfo() );      \n    }\n  }\n\n","sourceOld":"  @Override\n  public void finishStage(ResponseBuilder rb) {\n    if (rb.isDebug() && rb.stage == ResponseBuilder.STAGE_GET_FIELDS) {\n      NamedList info = null;\n      NamedList explain = new SimpleOrderedMap();\n\n      Object[] arr = new Object[rb.resultIds.size() * 2];\n\n      for (ShardRequest sreq : rb.finished) {\n        if ((sreq.purpose & ShardRequest.PURPOSE_GET_DEBUG) == 0) continue;\n        for (ShardResponse srsp : sreq.responses) {\n          NamedList sdebug = (NamedList)srsp.rsp.getResponse().get(\"debug\");\n          info = (NamedList)merge(sdebug, info, excludeSet);\n\n          NamedList sexplain = (NamedList)sdebug.get(\"explain\");\n\n          for (int i=0; i<sexplain.size(); i++) {\n            String id = sexplain.getName(i);\n            // TODO: lookup won't work for non-string ids... String vs Float\n            ShardDoc sdoc = rb.resultIds.get(id);\n            int idx = sdoc.positionInResponse;\n            arr[idx<<1] = id;\n            arr[(idx<<1)+1] = sexplain.getVal(i);\n          }\n        }\n      }\n\n      explain = HighlightComponent.removeNulls(new SimpleOrderedMap(Arrays.asList(arr)));\n      int idx = info.indexOf(\"explain\",0);\n      if (idx>=0) {\n        info.setVal(idx, explain);\n      } else {\n        info.add(\"explain\", explain);\n      }\n      \n      rb.setDebugInfo(info);\n      rb.rsp.add(\"debug\", rb.getDebugInfo() );      \n    }\n  }\n\n","bugFix":null,"bugIntro":["53153d3c5d39cd6b824fa6413fa8c7ee0f1b6d3e","53153d3c5d39cd6b824fa6413fa8c7ee0f1b6d3e","53153d3c5d39cd6b824fa6413fa8c7ee0f1b6d3e"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"a7ece81fd961b5823f973fbab684e46a9502b446","date":1215449117,"type":3,"author":"Yonik Seeley","isMerge":false,"pathNew":"src/java/org/apache/solr/handler/component/DebugComponent#finishStage(ResponseBuilder).mjava","pathOld":"src/java/org/apache/solr/handler/component/DebugComponent#finishStage(ResponseBuilder).mjava","sourceNew":"  @Override\n  public void finishStage(ResponseBuilder rb) {\n    if (rb.isDebug() && rb.stage == ResponseBuilder.STAGE_GET_FIELDS) {\n      NamedList info = null;\n      NamedList explain = new SimpleOrderedMap();\n\n      Object[] arr = new Object[rb.resultIds.size() * 2];\n\n      for (ShardRequest sreq : rb.finished) {\n        if ((sreq.purpose & ShardRequest.PURPOSE_GET_DEBUG) == 0) continue;\n        for (ShardResponse srsp : sreq.responses) {\n          NamedList sdebug = (NamedList)srsp.rsp.getResponse().get(\"debug\");\n          info = (NamedList)merge(sdebug, info, excludeSet);\n\n          NamedList sexplain = (NamedList)sdebug.get(\"explain\");\n\n          for (int i=0; i<sexplain.size(); i++) {\n            String id = sexplain.getName(i);\n            // TODO: lookup won't work for non-string ids... String vs Float\n            ShardDoc sdoc = rb.resultIds.get(id);\n            int idx = sdoc.positionInResponse;\n            arr[idx<<1] = id;\n            arr[(idx<<1)+1] = sexplain.getVal(i);\n          }\n        }\n      }\n\n      explain = HighlightComponent.removeNulls(new SimpleOrderedMap(Arrays.asList(arr)));\n\n      if (info == null) {\n        info = new SimpleOrderedMap();\n      }\n      int idx = info.indexOf(\"explain\",0);\n      if (idx>=0) {\n        info.setVal(idx, explain);\n      } else {\n        info.add(\"explain\", explain);\n      }\n      \n      rb.setDebugInfo(info);\n      rb.rsp.add(\"debug\", rb.getDebugInfo() );      \n    }\n  }\n\n","sourceOld":"  @Override\n  public void finishStage(ResponseBuilder rb) {\n    if (rb.isDebug() && rb.stage == ResponseBuilder.STAGE_GET_FIELDS) {\n      NamedList info = null;\n      NamedList explain = new SimpleOrderedMap();\n\n      Object[] arr = new Object[rb.resultIds.size() * 2];\n\n      for (ShardRequest sreq : rb.finished) {\n        if ((sreq.purpose & ShardRequest.PURPOSE_GET_DEBUG) == 0) continue;\n        for (ShardResponse srsp : sreq.responses) {\n          NamedList sdebug = (NamedList)srsp.rsp.getResponse().get(\"debug\");\n          info = (NamedList)merge(sdebug, info, excludeSet);\n\n          NamedList sexplain = (NamedList)sdebug.get(\"explain\");\n\n          for (int i=0; i<sexplain.size(); i++) {\n            String id = sexplain.getName(i);\n            // TODO: lookup won't work for non-string ids... String vs Float\n            ShardDoc sdoc = rb.resultIds.get(id);\n            int idx = sdoc.positionInResponse;\n            arr[idx<<1] = id;\n            arr[(idx<<1)+1] = sexplain.getVal(i);\n          }\n        }\n      }\n\n      explain = HighlightComponent.removeNulls(new SimpleOrderedMap(Arrays.asList(arr)));\n\n      if (info == null) {\n        info = new NamedList();\n      }\n      int idx = info.indexOf(\"explain\",0);\n      if (idx>=0) {\n        info.setVal(idx, explain);\n      } else {\n        info.add(\"explain\", explain);\n      }\n      \n      rb.setDebugInfo(info);\n      rb.rsp.add(\"debug\", rb.getDebugInfo() );      \n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"0e69935771ba8cb2303a86bf8a42be7861eaf1da","date":1216694040,"type":3,"author":"Yonik Seeley","isMerge":false,"pathNew":"src/java/org/apache/solr/handler/component/DebugComponent#finishStage(ResponseBuilder).mjava","pathOld":"src/java/org/apache/solr/handler/component/DebugComponent#finishStage(ResponseBuilder).mjava","sourceNew":"  @Override\n  public void finishStage(ResponseBuilder rb) {\n    if (rb.isDebug() && rb.stage == ResponseBuilder.STAGE_GET_FIELDS) {\n      NamedList info = null;\n      NamedList explain = new SimpleOrderedMap();\n\n      Object[] arr = new Object[rb.resultIds.size() * 2];\n\n      for (ShardRequest sreq : rb.finished) {\n        if ((sreq.purpose & ShardRequest.PURPOSE_GET_DEBUG) == 0) continue;\n        for (ShardResponse srsp : sreq.responses) {\n          NamedList sdebug = (NamedList)srsp.getSolrResponse().getResponse().get(\"debug\");\n          info = (NamedList)merge(sdebug, info, excludeSet);\n\n          NamedList sexplain = (NamedList)sdebug.get(\"explain\");\n\n          for (int i=0; i<sexplain.size(); i++) {\n            String id = sexplain.getName(i);\n            // TODO: lookup won't work for non-string ids... String vs Float\n            ShardDoc sdoc = rb.resultIds.get(id);\n            int idx = sdoc.positionInResponse;\n            arr[idx<<1] = id;\n            arr[(idx<<1)+1] = sexplain.getVal(i);\n          }\n        }\n      }\n\n      explain = HighlightComponent.removeNulls(new SimpleOrderedMap(Arrays.asList(arr)));\n\n      if (info == null) {\n        info = new SimpleOrderedMap();\n      }\n      int idx = info.indexOf(\"explain\",0);\n      if (idx>=0) {\n        info.setVal(idx, explain);\n      } else {\n        info.add(\"explain\", explain);\n      }\n      \n      rb.setDebugInfo(info);\n      rb.rsp.add(\"debug\", rb.getDebugInfo() );      \n    }\n  }\n\n","sourceOld":"  @Override\n  public void finishStage(ResponseBuilder rb) {\n    if (rb.isDebug() && rb.stage == ResponseBuilder.STAGE_GET_FIELDS) {\n      NamedList info = null;\n      NamedList explain = new SimpleOrderedMap();\n\n      Object[] arr = new Object[rb.resultIds.size() * 2];\n\n      for (ShardRequest sreq : rb.finished) {\n        if ((sreq.purpose & ShardRequest.PURPOSE_GET_DEBUG) == 0) continue;\n        for (ShardResponse srsp : sreq.responses) {\n          NamedList sdebug = (NamedList)srsp.rsp.getResponse().get(\"debug\");\n          info = (NamedList)merge(sdebug, info, excludeSet);\n\n          NamedList sexplain = (NamedList)sdebug.get(\"explain\");\n\n          for (int i=0; i<sexplain.size(); i++) {\n            String id = sexplain.getName(i);\n            // TODO: lookup won't work for non-string ids... String vs Float\n            ShardDoc sdoc = rb.resultIds.get(id);\n            int idx = sdoc.positionInResponse;\n            arr[idx<<1] = id;\n            arr[(idx<<1)+1] = sexplain.getVal(i);\n          }\n        }\n      }\n\n      explain = HighlightComponent.removeNulls(new SimpleOrderedMap(Arrays.asList(arr)));\n\n      if (info == null) {\n        info = new SimpleOrderedMap();\n      }\n      int idx = info.indexOf(\"explain\",0);\n      if (idx>=0) {\n        info.setVal(idx, explain);\n      } else {\n        info.add(\"explain\", explain);\n      }\n      \n      rb.setDebugInfo(info);\n      rb.rsp.add(\"debug\", rb.getDebugInfo() );      \n    }\n  }\n\n","bugFix":["5bb29c260c4bbaf4ce8a95d362844ebf77ec1f76"],"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"1b2d92924883e6f7ae47b7654e37f54545916304","date":1235082032,"type":3,"author":"Chris M. Hostetter","isMerge":false,"pathNew":"src/java/org/apache/solr/handler/component/DebugComponent#finishStage(ResponseBuilder).mjava","pathOld":"src/java/org/apache/solr/handler/component/DebugComponent#finishStage(ResponseBuilder).mjava","sourceNew":"  @Override\n  public void finishStage(ResponseBuilder rb) {\n    if (rb.isDebug() && rb.stage == ResponseBuilder.STAGE_GET_FIELDS) {\n      NamedList info = null;\n      NamedList explain = new SimpleOrderedMap();\n\n      Map.Entry<String, Object>[]  arr =  new NamedList.NamedListEntry[rb.resultIds.size()];\n\n      for (ShardRequest sreq : rb.finished) {\n        if ((sreq.purpose & ShardRequest.PURPOSE_GET_DEBUG) == 0) continue;\n        for (ShardResponse srsp : sreq.responses) {\n          NamedList sdebug = (NamedList)srsp.getSolrResponse().getResponse().get(\"debug\");\n          info = (NamedList)merge(sdebug, info, excludeSet);\n\n          NamedList sexplain = (NamedList)sdebug.get(\"explain\");\n\n          for (int i=0; i<sexplain.size(); i++) {\n            String id = sexplain.getName(i);\n            // TODO: lookup won't work for non-string ids... String vs Float\n            ShardDoc sdoc = rb.resultIds.get(id);\n            int idx = sdoc.positionInResponse;\n            arr[idx] = new NamedList.NamedListEntry<Object>( id, sexplain.getVal(i)); \n          }\n        }\n      }\n\n      explain = HighlightComponent.removeNulls(new SimpleOrderedMap(arr));\n\n      if (info == null) {\n        info = new SimpleOrderedMap();\n      }\n      int idx = info.indexOf(\"explain\",0);\n      if (idx>=0) {\n        info.setVal(idx, explain);\n      } else {\n        info.add(\"explain\", explain);\n      }\n      \n      rb.setDebugInfo(info);\n      rb.rsp.add(\"debug\", rb.getDebugInfo() );      \n    }\n  }\n\n","sourceOld":"  @Override\n  public void finishStage(ResponseBuilder rb) {\n    if (rb.isDebug() && rb.stage == ResponseBuilder.STAGE_GET_FIELDS) {\n      NamedList info = null;\n      NamedList explain = new SimpleOrderedMap();\n\n      Object[] arr = new Object[rb.resultIds.size() * 2];\n\n      for (ShardRequest sreq : rb.finished) {\n        if ((sreq.purpose & ShardRequest.PURPOSE_GET_DEBUG) == 0) continue;\n        for (ShardResponse srsp : sreq.responses) {\n          NamedList sdebug = (NamedList)srsp.getSolrResponse().getResponse().get(\"debug\");\n          info = (NamedList)merge(sdebug, info, excludeSet);\n\n          NamedList sexplain = (NamedList)sdebug.get(\"explain\");\n\n          for (int i=0; i<sexplain.size(); i++) {\n            String id = sexplain.getName(i);\n            // TODO: lookup won't work for non-string ids... String vs Float\n            ShardDoc sdoc = rb.resultIds.get(id);\n            int idx = sdoc.positionInResponse;\n            arr[idx<<1] = id;\n            arr[(idx<<1)+1] = sexplain.getVal(i);\n          }\n        }\n      }\n\n      explain = HighlightComponent.removeNulls(new SimpleOrderedMap(Arrays.asList(arr)));\n\n      if (info == null) {\n        info = new SimpleOrderedMap();\n      }\n      int idx = info.indexOf(\"explain\",0);\n      if (idx>=0) {\n        info.setVal(idx, explain);\n      } else {\n        info.add(\"explain\", explain);\n      }\n      \n      rb.setDebugInfo(info);\n      rb.rsp.add(\"debug\", rb.getDebugInfo() );      \n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"ad94625fb8d088209f46650c8097196fec67f00c","date":1453508319,"type":5,"author":"Dawid Weiss","isMerge":false,"pathNew":"solr/src/java/org/apache/solr/handler/component/DebugComponent#finishStage(ResponseBuilder).mjava","pathOld":"src/java/org/apache/solr/handler/component/DebugComponent#finishStage(ResponseBuilder).mjava","sourceNew":"  @Override\n  public void finishStage(ResponseBuilder rb) {\n    if (rb.isDebug() && rb.stage == ResponseBuilder.STAGE_GET_FIELDS) {\n      NamedList info = null;\n      NamedList explain = new SimpleOrderedMap();\n\n      Map.Entry<String, Object>[]  arr =  new NamedList.NamedListEntry[rb.resultIds.size()];\n\n      for (ShardRequest sreq : rb.finished) {\n        if ((sreq.purpose & ShardRequest.PURPOSE_GET_DEBUG) == 0) continue;\n        for (ShardResponse srsp : sreq.responses) {\n          NamedList sdebug = (NamedList)srsp.getSolrResponse().getResponse().get(\"debug\");\n          info = (NamedList)merge(sdebug, info, excludeSet);\n\n          NamedList sexplain = (NamedList)sdebug.get(\"explain\");\n\n          for (int i=0; i<sexplain.size(); i++) {\n            String id = sexplain.getName(i);\n            // TODO: lookup won't work for non-string ids... String vs Float\n            ShardDoc sdoc = rb.resultIds.get(id);\n            int idx = sdoc.positionInResponse;\n            arr[idx] = new NamedList.NamedListEntry<Object>( id, sexplain.getVal(i)); \n          }\n        }\n      }\n\n      explain = HighlightComponent.removeNulls(new SimpleOrderedMap(arr));\n\n      if (info == null) {\n        info = new SimpleOrderedMap();\n      }\n      int idx = info.indexOf(\"explain\",0);\n      if (idx>=0) {\n        info.setVal(idx, explain);\n      } else {\n        info.add(\"explain\", explain);\n      }\n      \n      rb.setDebugInfo(info);\n      rb.rsp.add(\"debug\", rb.getDebugInfo() );      \n    }\n  }\n\n","sourceOld":"  @Override\n  public void finishStage(ResponseBuilder rb) {\n    if (rb.isDebug() && rb.stage == ResponseBuilder.STAGE_GET_FIELDS) {\n      NamedList info = null;\n      NamedList explain = new SimpleOrderedMap();\n\n      Map.Entry<String, Object>[]  arr =  new NamedList.NamedListEntry[rb.resultIds.size()];\n\n      for (ShardRequest sreq : rb.finished) {\n        if ((sreq.purpose & ShardRequest.PURPOSE_GET_DEBUG) == 0) continue;\n        for (ShardResponse srsp : sreq.responses) {\n          NamedList sdebug = (NamedList)srsp.getSolrResponse().getResponse().get(\"debug\");\n          info = (NamedList)merge(sdebug, info, excludeSet);\n\n          NamedList sexplain = (NamedList)sdebug.get(\"explain\");\n\n          for (int i=0; i<sexplain.size(); i++) {\n            String id = sexplain.getName(i);\n            // TODO: lookup won't work for non-string ids... String vs Float\n            ShardDoc sdoc = rb.resultIds.get(id);\n            int idx = sdoc.positionInResponse;\n            arr[idx] = new NamedList.NamedListEntry<Object>( id, sexplain.getVal(i)); \n          }\n        }\n      }\n\n      explain = HighlightComponent.removeNulls(new SimpleOrderedMap(arr));\n\n      if (info == null) {\n        info = new SimpleOrderedMap();\n      }\n      int idx = info.indexOf(\"explain\",0);\n      if (idx>=0) {\n        info.setVal(idx, explain);\n      } else {\n        info.add(\"explain\", explain);\n      }\n      \n      rb.setDebugInfo(info);\n      rb.rsp.add(\"debug\", rb.getDebugInfo() );      \n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null}],"commit2Parents":{"1b2d92924883e6f7ae47b7654e37f54545916304":["0e69935771ba8cb2303a86bf8a42be7861eaf1da"],"da0acfe5ceed804451d76c8f887855b3d060e132":["5bb29c260c4bbaf4ce8a95d362844ebf77ec1f76"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b":[],"0e69935771ba8cb2303a86bf8a42be7861eaf1da":["a7ece81fd961b5823f973fbab684e46a9502b446"],"a65fafd2cd022da518bb7ee43dcef8d80014c57d":["da0acfe5ceed804451d76c8f887855b3d060e132"],"a7ece81fd961b5823f973fbab684e46a9502b446":["a65fafd2cd022da518bb7ee43dcef8d80014c57d"],"ad94625fb8d088209f46650c8097196fec67f00c":["1b2d92924883e6f7ae47b7654e37f54545916304"],"5bb29c260c4bbaf4ce8a95d362844ebf77ec1f76":["3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"]},"commit2Childs":{"1b2d92924883e6f7ae47b7654e37f54545916304":["ad94625fb8d088209f46650c8097196fec67f00c"],"da0acfe5ceed804451d76c8f887855b3d060e132":["a65fafd2cd022da518bb7ee43dcef8d80014c57d"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b":["5bb29c260c4bbaf4ce8a95d362844ebf77ec1f76"],"0e69935771ba8cb2303a86bf8a42be7861eaf1da":["1b2d92924883e6f7ae47b7654e37f54545916304"],"a65fafd2cd022da518bb7ee43dcef8d80014c57d":["a7ece81fd961b5823f973fbab684e46a9502b446"],"a7ece81fd961b5823f973fbab684e46a9502b446":["0e69935771ba8cb2303a86bf8a42be7861eaf1da"],"ad94625fb8d088209f46650c8097196fec67f00c":[],"5bb29c260c4bbaf4ce8a95d362844ebf77ec1f76":["da0acfe5ceed804451d76c8f887855b3d060e132"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["ad94625fb8d088209f46650c8097196fec67f00c","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b"],"pathCommit":null}