{"path":"solr/solrj/src/java/org/apache/solr/client/solrj/io/stream/StatsStream#fillTuple(Tuple,NamedList,Metric[]).mjava","commits":[{"id":"570664407cd3123a8039f1b4f2f6c6693bdaee31","date":1589893823,"type":0,"author":"Joel Bernstein","isMerge":false,"pathNew":"solr/solrj/src/java/org/apache/solr/client/solrj/io/stream/StatsStream#fillTuple(Tuple,NamedList,Metric[]).mjava","pathOld":"/dev/null","sourceNew":"  private void fillTuple(Tuple t,\n                         NamedList nl,\n                         Metric[] _metrics) {\n\n    if(nl == null) {\n      return;\n    }\n\n    int m = 0;\n    for(Metric metric : _metrics) {\n      String identifier = metric.getIdentifier();\n      if(!identifier.startsWith(\"count(\")) {\n        if(nl.get(\"facet_\"+m) != null) {\n          Object d = nl.get(\"facet_\" + m);\n          if(d instanceof Number) {\n            if (metric.outputLong) {\n              t.put(identifier, Math.round(((Number)d).doubleValue()));\n            } else {\n              t.put(identifier, ((Number)d).doubleValue());\n            }\n          } else {\n            t.put(identifier, d);\n          }\n        }\n        ++m;\n      } else {\n        long l = ((Number)nl.get(\"count\")).longValue();\n        t.put(\"count(*)\", l);\n      }\n    }\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"2b7d28aa15134f77b3a8f4c2724bdc7cb402ab75","date":1591744896,"type":3,"author":"Erick Erickson","isMerge":false,"pathNew":"solr/solrj/src/java/org/apache/solr/client/solrj/io/stream/StatsStream#fillTuple(Tuple,NamedList,Metric[]).mjava","pathOld":"solr/solrj/src/java/org/apache/solr/client/solrj/io/stream/StatsStream#fillTuple(Tuple,NamedList,Metric[]).mjava","sourceNew":"  private void fillTuple(Tuple t,\n                         @SuppressWarnings({\"rawtypes\"})NamedList nl,\n                         Metric[] _metrics) {\n\n    if(nl == null) {\n      return;\n    }\n\n    int m = 0;\n    for(Metric metric : _metrics) {\n      String identifier = metric.getIdentifier();\n      if(!identifier.startsWith(\"count(\")) {\n        if(nl.get(\"facet_\"+m) != null) {\n          Object d = nl.get(\"facet_\" + m);\n          if(d instanceof Number) {\n            if (metric.outputLong) {\n              t.put(identifier, Math.round(((Number)d).doubleValue()));\n            } else {\n              t.put(identifier, ((Number)d).doubleValue());\n            }\n          } else {\n            t.put(identifier, d);\n          }\n        }\n        ++m;\n      } else {\n        long l = ((Number)nl.get(\"count\")).longValue();\n        t.put(\"count(*)\", l);\n      }\n    }\n  }\n\n","sourceOld":"  private void fillTuple(Tuple t,\n                         NamedList nl,\n                         Metric[] _metrics) {\n\n    if(nl == null) {\n      return;\n    }\n\n    int m = 0;\n    for(Metric metric : _metrics) {\n      String identifier = metric.getIdentifier();\n      if(!identifier.startsWith(\"count(\")) {\n        if(nl.get(\"facet_\"+m) != null) {\n          Object d = nl.get(\"facet_\" + m);\n          if(d instanceof Number) {\n            if (metric.outputLong) {\n              t.put(identifier, Math.round(((Number)d).doubleValue()));\n            } else {\n              t.put(identifier, ((Number)d).doubleValue());\n            }\n          } else {\n            t.put(identifier, d);\n          }\n        }\n        ++m;\n      } else {\n        long l = ((Number)nl.get(\"count\")).longValue();\n        t.put(\"count(*)\", l);\n      }\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"570664407cd3123a8039f1b4f2f6c6693bdaee31":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"2b7d28aa15134f77b3a8f4c2724bdc7cb402ab75":["570664407cd3123a8039f1b4f2f6c6693bdaee31"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["2b7d28aa15134f77b3a8f4c2724bdc7cb402ab75"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["570664407cd3123a8039f1b4f2f6c6693bdaee31"],"570664407cd3123a8039f1b4f2f6c6693bdaee31":["2b7d28aa15134f77b3a8f4c2724bdc7cb402ab75"],"2b7d28aa15134f77b3a8f4c2724bdc7cb402ab75":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}