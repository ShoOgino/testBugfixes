{"path":"lucene/facet/src/test/org/apache/lucene/facet/taxonomy/TestOrdinalMappingLeafReader#testTaxonomyMergeUtils().mjava","commits":[{"id":"c9644a32526f2e2ae87543b00e8be543aa25f29c","date":1411548458,"type":1,"author":"Ryan Ernst","isMerge":false,"pathNew":"lucene/facet/src/test/org/apache/lucene/facet/taxonomy/TestOrdinalMappingLeafReader#testTaxonomyMergeUtils().mjava","pathOld":"lucene/facet/src/test/org/apache/lucene/facet/taxonomy/TestOrdinalMappingAtomicReader#testTaxonomyMergeUtils().mjava","sourceNew":"  @Test\n  public void testTaxonomyMergeUtils() throws Exception {\n    Directory srcIndexDir = newDirectory();\n    Directory srcTaxoDir = newDirectory();\n    buildIndexWithFacets(srcIndexDir, srcTaxoDir, true);\n    \n    Directory targetIndexDir = newDirectory();\n    Directory targetTaxoDir = newDirectory();\n    buildIndexWithFacets(targetIndexDir, targetTaxoDir, false);\n    \n    IndexWriter destIndexWriter = new IndexWriter(targetIndexDir, newIndexWriterConfig(null));\n    DirectoryTaxonomyWriter destTaxoWriter = new DirectoryTaxonomyWriter(targetTaxoDir);\n    try {\n      TaxonomyMergeUtils.merge(srcIndexDir, srcTaxoDir, new MemoryOrdinalMap(), destIndexWriter, destTaxoWriter, facetConfig);\n    } finally {\n      IOUtils.close(destIndexWriter, destTaxoWriter);\n    }\n    verifyResults(targetIndexDir, targetTaxoDir);\n    \n    IOUtils.close(targetIndexDir, targetTaxoDir, srcIndexDir, srcTaxoDir);\n  }\n\n","sourceOld":"  @Test\n  public void testTaxonomyMergeUtils() throws Exception {\n    Directory srcIndexDir = newDirectory();\n    Directory srcTaxoDir = newDirectory();\n    buildIndexWithFacets(srcIndexDir, srcTaxoDir, true);\n    \n    Directory targetIndexDir = newDirectory();\n    Directory targetTaxoDir = newDirectory();\n    buildIndexWithFacets(targetIndexDir, targetTaxoDir, false);\n    \n    IndexWriter destIndexWriter = new IndexWriter(targetIndexDir, newIndexWriterConfig(null));\n    DirectoryTaxonomyWriter destTaxoWriter = new DirectoryTaxonomyWriter(targetTaxoDir);\n    try {\n      TaxonomyMergeUtils.merge(srcIndexDir, srcTaxoDir, new MemoryOrdinalMap(), destIndexWriter, destTaxoWriter, facetConfig);\n    } finally {\n      IOUtils.close(destIndexWriter, destTaxoWriter);\n    }\n    verifyResults(targetIndexDir, targetTaxoDir);\n    \n    IOUtils.close(targetIndexDir, targetTaxoDir, srcIndexDir, srcTaxoDir);\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"c9644a32526f2e2ae87543b00e8be543aa25f29c":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["c9644a32526f2e2ae87543b00e8be543aa25f29c"]},"commit2Childs":{"c9644a32526f2e2ae87543b00e8be543aa25f29c":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["c9644a32526f2e2ae87543b00e8be543aa25f29c"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}