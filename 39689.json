{"path":"solr/core/src/java/org/apache/solr/update/SolrIndexSplitter.SplittingQuery#findDocsToDelete(LeafReaderContext).mjava","commits":[{"id":"20c968c14aace7cf49843bf2c1fafc7fd3845659","date":1533133859,"type":0,"author":"Andrzej Bialecki","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/update/SolrIndexSplitter.SplittingQuery#findDocsToDelete(LeafReaderContext).mjava","pathOld":"/dev/null","sourceNew":"    private FixedBitSet findDocsToDelete(LeafReaderContext readerContext) throws IOException {\n      // check whether a cached copy of bitsets already exists for this reader\n      FixedBitSet[] perPartition = docsToDelete.get(readerContext.reader().getCoreCacheHelper().getKey());\n      if (perPartition != null) {\n        return perPartition[partition];\n      }\n      synchronized (docsToDelete) {\n        perPartition = docsToDelete.get(readerContext.reader().getCoreCacheHelper().getKey());\n        if (perPartition != null) {\n          return perPartition[partition];\n        }\n\n        perPartition = split(readerContext, numPieces, field, rangesArr, splitKey, hashRouter, true);\n        docsToDelete.put(readerContext.reader().getCoreCacheHelper().getKey(), perPartition);\n        return perPartition[partition];\n      }\n    }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"6aafdd2b981170a4d391e52d7cfd3d53a626cc7c","date":1533237435,"type":3,"author":"Andrzej Bialecki","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/update/SolrIndexSplitter.SplittingQuery#findDocsToDelete(LeafReaderContext).mjava","pathOld":"solr/core/src/java/org/apache/solr/update/SolrIndexSplitter.SplittingQuery#findDocsToDelete(LeafReaderContext).mjava","sourceNew":"    private FixedBitSet findDocsToDelete(LeafReaderContext readerContext) throws IOException {\n      // check whether a cached copy of bitsets already exists for this reader\n      FixedBitSet[] perPartition = docsToDelete.get(readerContext.reader().getCoreCacheHelper().getKey());\n      if (perPartition != null) {\n        return perPartition[partition];\n      }\n      synchronized (docsToDelete) {\n        perPartition = docsToDelete.get(readerContext.reader().getCoreCacheHelper().getKey());\n        if (perPartition != null) {\n          return perPartition[partition];\n        }\n\n        perPartition = split(readerContext, numPieces, field, rangesArr, splitKey, hashRouter, currentPartition, true);\n        docsToDelete.put(readerContext.reader().getCoreCacheHelper().getKey(), perPartition);\n        return perPartition[partition];\n      }\n    }\n\n","sourceOld":"    private FixedBitSet findDocsToDelete(LeafReaderContext readerContext) throws IOException {\n      // check whether a cached copy of bitsets already exists for this reader\n      FixedBitSet[] perPartition = docsToDelete.get(readerContext.reader().getCoreCacheHelper().getKey());\n      if (perPartition != null) {\n        return perPartition[partition];\n      }\n      synchronized (docsToDelete) {\n        perPartition = docsToDelete.get(readerContext.reader().getCoreCacheHelper().getKey());\n        if (perPartition != null) {\n          return perPartition[partition];\n        }\n\n        perPartition = split(readerContext, numPieces, field, rangesArr, splitKey, hashRouter, true);\n        docsToDelete.put(readerContext.reader().getCoreCacheHelper().getKey(), perPartition);\n        return perPartition[partition];\n      }\n    }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"6aafdd2b981170a4d391e52d7cfd3d53a626cc7c":["20c968c14aace7cf49843bf2c1fafc7fd3845659"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"20c968c14aace7cf49843bf2c1fafc7fd3845659":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["6aafdd2b981170a4d391e52d7cfd3d53a626cc7c"]},"commit2Childs":{"6aafdd2b981170a4d391e52d7cfd3d53a626cc7c":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["20c968c14aace7cf49843bf2c1fafc7fd3845659"],"20c968c14aace7cf49843bf2c1fafc7fd3845659":["6aafdd2b981170a4d391e52d7cfd3d53a626cc7c"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}