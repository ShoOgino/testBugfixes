{"path":"modules/analysis/kuromoji/src/java/org/apache/lucene/analysis/ja/util/ToStringUtil#getRomanization(Appendable,CharSequence).mjava","commits":[{"id":"98d45c1ff2c99694b6de2201175f9b8b8b27b597","date":1332757908,"type":1,"author":"Christian Moen","isMerge":false,"pathNew":"modules/analysis/kuromoji/src/java/org/apache/lucene/analysis/ja/util/ToStringUtil#getRomanization(Appendable,CharSequence).mjava","pathOld":"modules/analysis/kuromoji/src/java/org/apache/lucene/analysis/kuromoji/util/ToStringUtil#getRomanization(Appendable,CharSequence).mjava","sourceNew":"  /**\n   * Romanize katakana with modified hepburn\n   */\n  public static void getRomanization(Appendable builder, CharSequence s) throws IOException {\n    final int len = s.length();\n    for (int i = 0; i < len; i++) {\n      // maximum lookahead: 3\n      char ch = s.charAt(i);\n      char ch2 = (i < len - 1) ? s.charAt(i + 1) : 0;\n      char ch3 = (i < len - 2) ? s.charAt(i + 2) : 0;\n      \n      main: switch (ch) {\n        case 'ッ':\n          switch (ch2) {\n            case 'カ':\n            case 'キ':\n            case 'ク':\n            case 'ケ':\n            case 'コ':\n              builder.append('k');\n              break main;\n            case 'サ':\n            case 'シ':\n            case 'ス':\n            case 'セ':\n            case 'ソ':\n              builder.append('s');\n              break main;\n            case 'タ':\n            case 'チ':\n            case 'ツ':\n            case 'テ':\n            case 'ト':\n              builder.append('t');\n              break main;\n            case 'パ':\n            case 'ピ':\n            case 'プ':\n            case 'ペ':\n            case 'ポ':\n              builder.append('p');\n              break main;\n          }\n          break;\n        case 'ア':\n          builder.append('a');\n          break;\n        case 'イ':\n          if (ch2 == 'ィ') {\n            builder.append(\"yi\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"ye\");\n            i++;\n          } else {\n            builder.append('i');\n          }\n          break;\n        case 'ウ':\n          switch(ch2) {\n            case 'ァ':\n              builder.append(\"wa\");\n              i++;\n              break;\n            case 'ィ':\n              builder.append(\"wi\");\n              i++;\n              break;\n            case 'ゥ':\n              builder.append(\"wu\");\n              i++;\n              break;\n            case 'ェ':\n              builder.append(\"we\");\n              i++;\n              break;\n            case 'ォ':\n              builder.append(\"wo\");\n              i++;\n              break;\n            case 'ュ':\n              builder.append(\"wyu\");\n              i++;\n              break;\n            default:\n              builder.append('u');\n              break;\n          }\n          break;\n        case 'エ':\n          builder.append('e');\n          break;\n        case 'オ':\n          if (ch2 == 'ウ') {\n            builder.append('ō');\n            i++;\n          } else {\n            builder.append('o');\n          }\n          break;\n        case 'カ':\n          builder.append(\"ka\");\n          break;\n        case 'キ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"kyō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"kyū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"kya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"kyo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"kyu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"kye\");\n            i++;\n          } else {\n            builder.append(\"ki\");\n          }\n          break;\n        case 'ク':\n          switch(ch2) {\n            case 'ァ':\n              builder.append(\"kwa\");\n              i++;\n              break;\n            case 'ィ':\n              builder.append(\"kwi\");\n              i++;\n              break;\n            case 'ェ':\n              builder.append(\"kwe\");\n              i++;\n              break;\n            case 'ォ':\n              builder.append(\"kwo\");\n              i++;\n              break;\n            case 'ヮ':\n              builder.append(\"kwa\");\n              i++;\n              break;\n            default:\n              builder.append(\"ku\");\n              break;\n          }\n          break;\n        case 'ケ':\n          builder.append(\"ke\");\n          break;\n        case 'コ':\n          if (ch2 == 'ウ') {\n            builder.append(\"kō\");\n            i++;\n          } else {\n            builder.append(\"ko\");\n          }\n          break;\n        case 'サ':\n          builder.append(\"sa\");\n          break;\n        case 'シ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"shō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"shū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"sha\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"sho\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"shu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"she\");\n            i++;\n          } else {\n            builder.append(\"shi\");\n          }\n          break;\n        case 'ス':\n          if (ch2 == 'ィ') {\n            builder.append(\"si\");\n            i++;\n          } else {\n            builder.append(\"su\");\n          }\n          break;\n        case 'セ':\n          builder.append(\"se\");\n          break;\n        case 'ソ':\n          if (ch2 == 'ウ') {\n            builder.append(\"sō\");\n            i++;\n          } else {\n            builder.append(\"so\");\n          }\n          break;\n        case 'タ':\n          builder.append(\"ta\");\n          break;\n        case 'チ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"chō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"chū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"cha\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"cho\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"chu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"che\");\n            i++;\n          } else {\n            builder.append(\"chi\");\n          }\n          break;\n        case 'ツ':\n          if (ch2 == 'ァ') {\n            builder.append(\"tsa\");\n            i++;\n          } else if (ch2 == 'ィ') {\n            builder.append(\"tsi\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"tse\");\n            i++;\n          } else if (ch2 == 'ォ') {\n            builder.append(\"tso\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"tsyu\");\n            i++;\n          } else {\n            builder.append(\"tsu\");\n          }\n          break;\n        case 'テ':\n          if (ch2 == 'ィ') {\n            builder.append(\"ti\");\n            i++;\n          } else if (ch2 == 'ゥ') {\n            builder.append(\"tu\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"tyu\");\n            i++;\n          } else {\n            builder.append(\"te\");\n          }\n          break;\n        case 'ト':\n          if (ch2 == 'ウ') {\n            builder.append(\"tō\");\n            i++;\n          } else {\n            builder.append(\"to\");\n          }\n          break;\n        case 'ナ':\n          builder.append(\"na\");\n          break;\n        case 'ニ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"nyō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"nyū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"nya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"nyo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"nyu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"nye\");\n            i++;\n          } else {\n            builder.append(\"ni\");\n          }\n          break;\n        case 'ヌ':\n          builder.append(\"nu\");\n          break;\n        case 'ネ':\n          builder.append(\"ne\");\n          break;\n        case 'ノ':\n          if (ch2 == 'ウ') {\n            builder.append(\"nō\");\n            i++;\n          } else {\n            builder.append(\"no\");\n          }\n          break;\n        case 'ハ':\n          builder.append(\"ha\");\n          break;\n        case 'ヒ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"hyō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"hyū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"hya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"hyo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"hyu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"hye\");\n            i++;\n          } else {\n            builder.append(\"hi\");\n          }\n          break;\n        case 'フ':\n          if (ch2 == 'ャ') {\n            builder.append(\"fya\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"fyu\");\n            i++;\n          } else if (ch2 == 'ィ' && ch3 == 'ェ') {\n            builder.append(\"fye\");\n            i+=2;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"fyo\");\n            i++;\n          } else if (ch2 == 'ァ') {\n            builder.append(\"fa\");\n            i++;\n          } else if (ch2 == 'ィ') {\n            builder.append(\"fi\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"fe\");\n            i++;\n          } else if (ch2 == 'ォ') {\n            builder.append(\"fo\");\n            i++;\n          } else {\n            builder.append(\"fu\");\n          }\n          break;\n        case 'ヘ':\n          builder.append(\"he\");\n          break;\n        case 'ホ':\n          if (ch2 == 'ウ') {\n            builder.append(\"hō\");\n            i++;\n          } else if (ch2 == 'ゥ') {\n            builder.append(\"hu\");\n            i++;\n          } else {\n            builder.append(\"ho\");\n          }\n          break;\n        case 'マ':\n          builder.append(\"ma\");\n          break;\n        case 'ミ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"myō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"myū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"mya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"myo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"myu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"mye\");\n            i++;\n          } else {\n            builder.append(\"mi\");\n          }\n          break;\n        case 'ム':\n          builder.append(\"mu\");\n          break;\n        case 'メ':\n          builder.append(\"mi\");\n          break;\n        case 'モ':\n          if (ch2 == 'ウ') {\n            builder.append(\"mō\");\n            i++;\n          } else {\n            builder.append(\"mo\");\n          }\n          break;\n        case 'ヤ':\n          builder.append(\"ya\");\n          break;\n        case 'ユ':\n          builder.append(\"yu\");\n          break;\n        case 'ヨ':\n          if (ch2 == 'ウ') {\n            builder.append(\"yō\");\n            i++;\n          } else {\n            builder.append(\"yo\");\n          }\n          break;\n        case 'ラ':\n          builder.append(\"ra\");\n          break;\n        case 'リ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"ryō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"ryū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"rya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"ryo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"ryu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"rye\");\n            i++;\n          } else {\n            builder.append(\"ri\");\n          }\n          break;\n        case 'ル':\n          builder.append(\"ru\");\n          break;\n        case 'レ':\n          builder.append(\"re\");\n          break;\n        case 'ロ':\n          if (ch2 == 'ウ') {\n            builder.append(\"rō\");\n            i++;\n          } else {\n            builder.append(\"ro\");\n          }\n          break;\n        case 'ワ':\n          builder.append(\"wa\");\n          break;\n        case 'ヰ':\n          builder.append(\"i\");\n          break;\n        case 'ヱ':\n          builder.append(\"e\");\n          break;\n        case 'ヲ':\n          builder.append(\"o\");\n          break;\n        case 'ン':\n          switch (ch2) {\n            case 'バ':\n            case 'ビ':\n            case 'ブ':\n            case 'ベ':\n            case 'ボ':\n            case 'パ':\n            case 'ピ':\n            case 'プ':\n            case 'ペ':\n            case 'ポ':\n            case 'マ':\n            case 'ミ':\n            case 'ム':\n            case 'メ':\n            case 'モ':\n              builder.append('m');\n              break main;\n            case 'ヤ':\n            case 'ユ':\n            case 'ヨ':\n            case 'ア':\n            case 'イ':\n            case 'ウ':\n            case 'エ':\n            case 'オ':\n              builder.append(\"n'\");\n              break main;\n            default:\n              builder.append(\"n\");\n              break main;\n          }\n        case 'ガ':\n          builder.append(\"ga\");\n          break;\n        case 'ギ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"gyō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"gyū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"gya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"gyo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"gyu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"gye\");\n            i++;\n          } else {\n            builder.append(\"gi\");\n          }\n          break;\n        case 'グ':\n          switch(ch2) {\n            case 'ァ':\n              builder.append(\"gwa\");\n              i++;\n              break;\n            case 'ィ':\n              builder.append(\"gwi\");\n              i++;\n              break;\n            case 'ェ':\n              builder.append(\"gwe\");\n              i++;\n              break;\n            case 'ォ':\n              builder.append(\"gwo\");\n              i++;\n              break;\n            case 'ヮ':\n              builder.append(\"gwa\");\n              i++;\n              break;\n            default:\n              builder.append(\"gu\");\n              break;\n          }\n          break;\n        case 'ゲ':\n          builder.append(\"ge\");\n          break;\n        case 'ゴ':\n          if (ch2 == 'ウ') {\n            builder.append(\"gō\");\n            i++;\n          } else {\n            builder.append(\"go\");\n          }\n          break;\n        case 'ザ':\n          builder.append(\"za\");\n          break;\n        case 'ジ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"jō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"jū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"ja\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"jo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"ju\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"je\");\n            i++;\n          } else {\n            builder.append(\"ji\");\n          }\n          break;\n        case 'ズ':\n          if (ch2 == 'ィ') {\n            builder.append(\"zi\");\n            i++;\n          } else {\n            builder.append(\"zu\");\n          }\n          break;\n        case 'ゼ':\n          builder.append(\"ze\");\n          break;\n        case 'ゾ':\n          if (ch2 == 'ウ') {\n            builder.append(\"zō\");\n            i++;\n          } else {\n            builder.append(\"zo\");\n          }\n          break;\n        case 'ダ':\n          builder.append(\"da\");\n          break;\n        case 'ヂ':\n          builder.append(\"ji\");\n          break;\n        case 'ヅ':\n          builder.append(\"zu\");\n          break;\n        case 'デ':\n          if (ch2 == 'ィ') {\n            builder.append(\"di\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"dyu\");\n            i++;\n          } else {\n            builder.append(\"de\");\n          }\n          break;\n        case 'ド':\n          if (ch2 == 'ウ') {\n            builder.append(\"dō\");\n            i++;\n          } else if (ch2 == 'ゥ') {\n            builder.append(\"du\");\n            i++;\n          } else {\n            builder.append(\"do\");\n          }\n          break;\n        case 'バ':\n          builder.append(\"ba\");\n          break;\n        case 'ビ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"byō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"byū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"bya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"byo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"byu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"bye\");\n            i++;\n          } else {\n            builder.append(\"bi\");\n          }\n          break;\n        case 'ブ':\n          builder.append(\"bu\");\n          break;\n        case 'ベ':\n          builder.append(\"be\");\n          break;\n        case 'ボ':\n          if (ch2 == 'ウ') {\n            builder.append(\"bō\");\n            i++;\n          } else {\n            builder.append(\"bo\");\n          }\n          break;\n        case 'パ':\n          builder.append(\"pa\");\n          break;\n        case 'ピ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"pyō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"pyū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"pya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"pyo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"pyu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"pye\");\n            i++;\n          } else {\n            builder.append(\"pi\");\n          }\n          break;\n        case 'プ':\n          builder.append(\"pu\");\n          break;\n        case 'ペ':\n          builder.append(\"pe\");\n          break;\n        case 'ポ':\n          if (ch2 == 'ウ') {\n            builder.append(\"pō\");\n            i++;\n          } else {\n            builder.append(\"po\");\n          }\n          break;\n        case 'ヴ':\n          if (ch2 == 'ィ' && ch3 == 'ェ') {\n            builder.append(\"vye\");\n            i+= 2;\n          } else {\n            builder.append('v');\n          }\n          break;\n        case 'ァ':\n          builder.append('a');\n          break;\n        case 'ィ':\n          builder.append('i');\n          break;\n        case 'ゥ':\n          builder.append('u');\n          break;\n        case 'ェ':\n          builder.append('e');\n          break;\n        case 'ォ':\n          builder.append('o');\n          break;\n        case 'ヮ':\n          builder.append(\"wa\");\n          break;\n        case 'ャ':\n          builder.append(\"ya\");\n          break;\n        case 'ュ':\n          builder.append(\"yu\");\n          break;\n        case 'ョ':\n          builder.append(\"yo\");\n          break;\n        case 'ー':\n          break;\n        default:\n          builder.append(ch);\n      }\n    }\n  }\n\n","sourceOld":"  /**\n   * Romanize katakana with modified hepburn\n   */\n  public static void getRomanization(Appendable builder, CharSequence s) throws IOException {\n    final int len = s.length();\n    for (int i = 0; i < len; i++) {\n      // maximum lookahead: 3\n      char ch = s.charAt(i);\n      char ch2 = (i < len - 1) ? s.charAt(i + 1) : 0;\n      char ch3 = (i < len - 2) ? s.charAt(i + 2) : 0;\n      \n      main: switch (ch) {\n        case 'ッ':\n          switch (ch2) {\n            case 'カ':\n            case 'キ':\n            case 'ク':\n            case 'ケ':\n            case 'コ':\n              builder.append('k');\n              break main;\n            case 'サ':\n            case 'シ':\n            case 'ス':\n            case 'セ':\n            case 'ソ':\n              builder.append('s');\n              break main;\n            case 'タ':\n            case 'チ':\n            case 'ツ':\n            case 'テ':\n            case 'ト':\n              builder.append('t');\n              break main;\n            case 'パ':\n            case 'ピ':\n            case 'プ':\n            case 'ペ':\n            case 'ポ':\n              builder.append('p');\n              break main;\n          }\n          break;\n        case 'ア':\n          builder.append('a');\n          break;\n        case 'イ':\n          if (ch2 == 'ィ') {\n            builder.append(\"yi\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"ye\");\n            i++;\n          } else {\n            builder.append('i');\n          }\n          break;\n        case 'ウ':\n          switch(ch2) {\n            case 'ァ':\n              builder.append(\"wa\");\n              i++;\n              break;\n            case 'ィ':\n              builder.append(\"wi\");\n              i++;\n              break;\n            case 'ゥ':\n              builder.append(\"wu\");\n              i++;\n              break;\n            case 'ェ':\n              builder.append(\"we\");\n              i++;\n              break;\n            case 'ォ':\n              builder.append(\"wo\");\n              i++;\n              break;\n            case 'ュ':\n              builder.append(\"wyu\");\n              i++;\n              break;\n            default:\n              builder.append('u');\n              break;\n          }\n          break;\n        case 'エ':\n          builder.append('e');\n          break;\n        case 'オ':\n          if (ch2 == 'ウ') {\n            builder.append('ō');\n            i++;\n          } else {\n            builder.append('o');\n          }\n          break;\n        case 'カ':\n          builder.append(\"ka\");\n          break;\n        case 'キ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"kyō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"kyū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"kya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"kyo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"kyu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"kye\");\n            i++;\n          } else {\n            builder.append(\"ki\");\n          }\n          break;\n        case 'ク':\n          switch(ch2) {\n            case 'ァ':\n              builder.append(\"kwa\");\n              i++;\n              break;\n            case 'ィ':\n              builder.append(\"kwi\");\n              i++;\n              break;\n            case 'ェ':\n              builder.append(\"kwe\");\n              i++;\n              break;\n            case 'ォ':\n              builder.append(\"kwo\");\n              i++;\n              break;\n            case 'ヮ':\n              builder.append(\"kwa\");\n              i++;\n              break;\n            default:\n              builder.append(\"ku\");\n              break;\n          }\n          break;\n        case 'ケ':\n          builder.append(\"ke\");\n          break;\n        case 'コ':\n          if (ch2 == 'ウ') {\n            builder.append(\"kō\");\n            i++;\n          } else {\n            builder.append(\"ko\");\n          }\n          break;\n        case 'サ':\n          builder.append(\"sa\");\n          break;\n        case 'シ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"shō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"shū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"sha\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"sho\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"shu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"she\");\n            i++;\n          } else {\n            builder.append(\"shi\");\n          }\n          break;\n        case 'ス':\n          if (ch2 == 'ィ') {\n            builder.append(\"si\");\n            i++;\n          } else {\n            builder.append(\"su\");\n          }\n          break;\n        case 'セ':\n          builder.append(\"se\");\n          break;\n        case 'ソ':\n          if (ch2 == 'ウ') {\n            builder.append(\"sō\");\n            i++;\n          } else {\n            builder.append(\"so\");\n          }\n          break;\n        case 'タ':\n          builder.append(\"ta\");\n          break;\n        case 'チ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"chō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"chū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"cha\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"cho\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"chu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"che\");\n            i++;\n          } else {\n            builder.append(\"chi\");\n          }\n          break;\n        case 'ツ':\n          if (ch2 == 'ァ') {\n            builder.append(\"tsa\");\n            i++;\n          } else if (ch2 == 'ィ') {\n            builder.append(\"tsi\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"tse\");\n            i++;\n          } else if (ch2 == 'ォ') {\n            builder.append(\"tso\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"tsyu\");\n            i++;\n          } else {\n            builder.append(\"tsu\");\n          }\n          break;\n        case 'テ':\n          if (ch2 == 'ィ') {\n            builder.append(\"ti\");\n            i++;\n          } else if (ch2 == 'ゥ') {\n            builder.append(\"tu\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"tyu\");\n            i++;\n          } else {\n            builder.append(\"te\");\n          }\n          break;\n        case 'ト':\n          if (ch2 == 'ウ') {\n            builder.append(\"tō\");\n            i++;\n          } else {\n            builder.append(\"to\");\n          }\n          break;\n        case 'ナ':\n          builder.append(\"na\");\n          break;\n        case 'ニ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"nyō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"nyū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"nya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"nyo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"nyu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"nye\");\n            i++;\n          } else {\n            builder.append(\"ni\");\n          }\n          break;\n        case 'ヌ':\n          builder.append(\"nu\");\n          break;\n        case 'ネ':\n          builder.append(\"ne\");\n          break;\n        case 'ノ':\n          if (ch2 == 'ウ') {\n            builder.append(\"nō\");\n            i++;\n          } else {\n            builder.append(\"no\");\n          }\n          break;\n        case 'ハ':\n          builder.append(\"ha\");\n          break;\n        case 'ヒ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"hyō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"hyū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"hya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"hyo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"hyu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"hye\");\n            i++;\n          } else {\n            builder.append(\"hi\");\n          }\n          break;\n        case 'フ':\n          if (ch2 == 'ャ') {\n            builder.append(\"fya\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"fyu\");\n            i++;\n          } else if (ch2 == 'ィ' && ch3 == 'ェ') {\n            builder.append(\"fye\");\n            i+=2;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"fyo\");\n            i++;\n          } else if (ch2 == 'ァ') {\n            builder.append(\"fa\");\n            i++;\n          } else if (ch2 == 'ィ') {\n            builder.append(\"fi\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"fe\");\n            i++;\n          } else if (ch2 == 'ォ') {\n            builder.append(\"fo\");\n            i++;\n          } else {\n            builder.append(\"fu\");\n          }\n          break;\n        case 'ヘ':\n          builder.append(\"he\");\n          break;\n        case 'ホ':\n          if (ch2 == 'ウ') {\n            builder.append(\"hō\");\n            i++;\n          } else if (ch2 == 'ゥ') {\n            builder.append(\"hu\");\n            i++;\n          } else {\n            builder.append(\"ho\");\n          }\n          break;\n        case 'マ':\n          builder.append(\"ma\");\n          break;\n        case 'ミ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"myō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"myū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"mya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"myo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"myu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"mye\");\n            i++;\n          } else {\n            builder.append(\"mi\");\n          }\n          break;\n        case 'ム':\n          builder.append(\"mu\");\n          break;\n        case 'メ':\n          builder.append(\"mi\");\n          break;\n        case 'モ':\n          if (ch2 == 'ウ') {\n            builder.append(\"mō\");\n            i++;\n          } else {\n            builder.append(\"mo\");\n          }\n          break;\n        case 'ヤ':\n          builder.append(\"ya\");\n          break;\n        case 'ユ':\n          builder.append(\"yu\");\n          break;\n        case 'ヨ':\n          if (ch2 == 'ウ') {\n            builder.append(\"yō\");\n            i++;\n          } else {\n            builder.append(\"yo\");\n          }\n          break;\n        case 'ラ':\n          builder.append(\"ra\");\n          break;\n        case 'リ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"ryō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"ryū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"rya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"ryo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"ryu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"rye\");\n            i++;\n          } else {\n            builder.append(\"ri\");\n          }\n          break;\n        case 'ル':\n          builder.append(\"ru\");\n          break;\n        case 'レ':\n          builder.append(\"re\");\n          break;\n        case 'ロ':\n          if (ch2 == 'ウ') {\n            builder.append(\"rō\");\n            i++;\n          } else {\n            builder.append(\"ro\");\n          }\n          break;\n        case 'ワ':\n          builder.append(\"wa\");\n          break;\n        case 'ヰ':\n          builder.append(\"i\");\n          break;\n        case 'ヱ':\n          builder.append(\"e\");\n          break;\n        case 'ヲ':\n          builder.append(\"o\");\n          break;\n        case 'ン':\n          switch (ch2) {\n            case 'バ':\n            case 'ビ':\n            case 'ブ':\n            case 'ベ':\n            case 'ボ':\n            case 'パ':\n            case 'ピ':\n            case 'プ':\n            case 'ペ':\n            case 'ポ':\n            case 'マ':\n            case 'ミ':\n            case 'ム':\n            case 'メ':\n            case 'モ':\n              builder.append('m');\n              break main;\n            case 'ヤ':\n            case 'ユ':\n            case 'ヨ':\n            case 'ア':\n            case 'イ':\n            case 'ウ':\n            case 'エ':\n            case 'オ':\n              builder.append(\"n'\");\n              break main;\n            default:\n              builder.append(\"n\");\n              break main;\n          }\n        case 'ガ':\n          builder.append(\"ga\");\n          break;\n        case 'ギ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"gyō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"gyū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"gya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"gyo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"gyu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"gye\");\n            i++;\n          } else {\n            builder.append(\"gi\");\n          }\n          break;\n        case 'グ':\n          switch(ch2) {\n            case 'ァ':\n              builder.append(\"gwa\");\n              i++;\n              break;\n            case 'ィ':\n              builder.append(\"gwi\");\n              i++;\n              break;\n            case 'ェ':\n              builder.append(\"gwe\");\n              i++;\n              break;\n            case 'ォ':\n              builder.append(\"gwo\");\n              i++;\n              break;\n            case 'ヮ':\n              builder.append(\"gwa\");\n              i++;\n              break;\n            default:\n              builder.append(\"gu\");\n              break;\n          }\n          break;\n        case 'ゲ':\n          builder.append(\"ge\");\n          break;\n        case 'ゴ':\n          if (ch2 == 'ウ') {\n            builder.append(\"gō\");\n            i++;\n          } else {\n            builder.append(\"go\");\n          }\n          break;\n        case 'ザ':\n          builder.append(\"za\");\n          break;\n        case 'ジ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"jō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"jū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"ja\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"jo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"ju\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"je\");\n            i++;\n          } else {\n            builder.append(\"ji\");\n          }\n          break;\n        case 'ズ':\n          if (ch2 == 'ィ') {\n            builder.append(\"zi\");\n            i++;\n          } else {\n            builder.append(\"zu\");\n          }\n          break;\n        case 'ゼ':\n          builder.append(\"ze\");\n          break;\n        case 'ゾ':\n          if (ch2 == 'ウ') {\n            builder.append(\"zō\");\n            i++;\n          } else {\n            builder.append(\"zo\");\n          }\n          break;\n        case 'ダ':\n          builder.append(\"da\");\n          break;\n        case 'ヂ':\n          builder.append(\"ji\");\n          break;\n        case 'ヅ':\n          builder.append(\"zu\");\n          break;\n        case 'デ':\n          if (ch2 == 'ィ') {\n            builder.append(\"di\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"dyu\");\n            i++;\n          } else {\n            builder.append(\"de\");\n          }\n          break;\n        case 'ド':\n          if (ch2 == 'ウ') {\n            builder.append(\"dō\");\n            i++;\n          } else if (ch2 == 'ゥ') {\n            builder.append(\"du\");\n            i++;\n          } else {\n            builder.append(\"do\");\n          }\n          break;\n        case 'バ':\n          builder.append(\"ba\");\n          break;\n        case 'ビ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"byō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"byū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"bya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"byo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"byu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"bye\");\n            i++;\n          } else {\n            builder.append(\"bi\");\n          }\n          break;\n        case 'ブ':\n          builder.append(\"bu\");\n          break;\n        case 'ベ':\n          builder.append(\"be\");\n          break;\n        case 'ボ':\n          if (ch2 == 'ウ') {\n            builder.append(\"bō\");\n            i++;\n          } else {\n            builder.append(\"bo\");\n          }\n          break;\n        case 'パ':\n          builder.append(\"pa\");\n          break;\n        case 'ピ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"pyō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"pyū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"pya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"pyo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"pyu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"pye\");\n            i++;\n          } else {\n            builder.append(\"pi\");\n          }\n          break;\n        case 'プ':\n          builder.append(\"pu\");\n          break;\n        case 'ペ':\n          builder.append(\"pe\");\n          break;\n        case 'ポ':\n          if (ch2 == 'ウ') {\n            builder.append(\"pō\");\n            i++;\n          } else {\n            builder.append(\"po\");\n          }\n          break;\n        case 'ヴ':\n          if (ch2 == 'ィ' && ch3 == 'ェ') {\n            builder.append(\"vye\");\n            i+= 2;\n          } else {\n            builder.append('v');\n          }\n          break;\n        case 'ァ':\n          builder.append('a');\n          break;\n        case 'ィ':\n          builder.append('i');\n          break;\n        case 'ゥ':\n          builder.append('u');\n          break;\n        case 'ェ':\n          builder.append('e');\n          break;\n        case 'ォ':\n          builder.append('o');\n          break;\n        case 'ヮ':\n          builder.append(\"wa\");\n          break;\n        case 'ャ':\n          builder.append(\"ya\");\n          break;\n        case 'ュ':\n          builder.append(\"yu\");\n          break;\n        case 'ョ':\n          builder.append(\"yo\");\n          break;\n        case 'ー':\n          break;\n        default:\n          builder.append(ch);\n      }\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"b89678825b68eccaf09e6ab71675fc0b0af1e099","date":1334669779,"type":5,"author":"Robert Muir","isMerge":false,"pathNew":"lucene/analysis/kuromoji/src/java/org/apache/lucene/analysis/ja/util/ToStringUtil#getRomanization(Appendable,CharSequence).mjava","pathOld":"modules/analysis/kuromoji/src/java/org/apache/lucene/analysis/ja/util/ToStringUtil#getRomanization(Appendable,CharSequence).mjava","sourceNew":"  /**\n   * Romanize katakana with modified hepburn\n   */\n  public static void getRomanization(Appendable builder, CharSequence s) throws IOException {\n    final int len = s.length();\n    for (int i = 0; i < len; i++) {\n      // maximum lookahead: 3\n      char ch = s.charAt(i);\n      char ch2 = (i < len - 1) ? s.charAt(i + 1) : 0;\n      char ch3 = (i < len - 2) ? s.charAt(i + 2) : 0;\n      \n      main: switch (ch) {\n        case 'ッ':\n          switch (ch2) {\n            case 'カ':\n            case 'キ':\n            case 'ク':\n            case 'ケ':\n            case 'コ':\n              builder.append('k');\n              break main;\n            case 'サ':\n            case 'シ':\n            case 'ス':\n            case 'セ':\n            case 'ソ':\n              builder.append('s');\n              break main;\n            case 'タ':\n            case 'チ':\n            case 'ツ':\n            case 'テ':\n            case 'ト':\n              builder.append('t');\n              break main;\n            case 'パ':\n            case 'ピ':\n            case 'プ':\n            case 'ペ':\n            case 'ポ':\n              builder.append('p');\n              break main;\n          }\n          break;\n        case 'ア':\n          builder.append('a');\n          break;\n        case 'イ':\n          if (ch2 == 'ィ') {\n            builder.append(\"yi\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"ye\");\n            i++;\n          } else {\n            builder.append('i');\n          }\n          break;\n        case 'ウ':\n          switch(ch2) {\n            case 'ァ':\n              builder.append(\"wa\");\n              i++;\n              break;\n            case 'ィ':\n              builder.append(\"wi\");\n              i++;\n              break;\n            case 'ゥ':\n              builder.append(\"wu\");\n              i++;\n              break;\n            case 'ェ':\n              builder.append(\"we\");\n              i++;\n              break;\n            case 'ォ':\n              builder.append(\"wo\");\n              i++;\n              break;\n            case 'ュ':\n              builder.append(\"wyu\");\n              i++;\n              break;\n            default:\n              builder.append('u');\n              break;\n          }\n          break;\n        case 'エ':\n          builder.append('e');\n          break;\n        case 'オ':\n          if (ch2 == 'ウ') {\n            builder.append('ō');\n            i++;\n          } else {\n            builder.append('o');\n          }\n          break;\n        case 'カ':\n          builder.append(\"ka\");\n          break;\n        case 'キ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"kyō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"kyū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"kya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"kyo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"kyu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"kye\");\n            i++;\n          } else {\n            builder.append(\"ki\");\n          }\n          break;\n        case 'ク':\n          switch(ch2) {\n            case 'ァ':\n              builder.append(\"kwa\");\n              i++;\n              break;\n            case 'ィ':\n              builder.append(\"kwi\");\n              i++;\n              break;\n            case 'ェ':\n              builder.append(\"kwe\");\n              i++;\n              break;\n            case 'ォ':\n              builder.append(\"kwo\");\n              i++;\n              break;\n            case 'ヮ':\n              builder.append(\"kwa\");\n              i++;\n              break;\n            default:\n              builder.append(\"ku\");\n              break;\n          }\n          break;\n        case 'ケ':\n          builder.append(\"ke\");\n          break;\n        case 'コ':\n          if (ch2 == 'ウ') {\n            builder.append(\"kō\");\n            i++;\n          } else {\n            builder.append(\"ko\");\n          }\n          break;\n        case 'サ':\n          builder.append(\"sa\");\n          break;\n        case 'シ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"shō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"shū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"sha\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"sho\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"shu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"she\");\n            i++;\n          } else {\n            builder.append(\"shi\");\n          }\n          break;\n        case 'ス':\n          if (ch2 == 'ィ') {\n            builder.append(\"si\");\n            i++;\n          } else {\n            builder.append(\"su\");\n          }\n          break;\n        case 'セ':\n          builder.append(\"se\");\n          break;\n        case 'ソ':\n          if (ch2 == 'ウ') {\n            builder.append(\"sō\");\n            i++;\n          } else {\n            builder.append(\"so\");\n          }\n          break;\n        case 'タ':\n          builder.append(\"ta\");\n          break;\n        case 'チ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"chō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"chū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"cha\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"cho\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"chu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"che\");\n            i++;\n          } else {\n            builder.append(\"chi\");\n          }\n          break;\n        case 'ツ':\n          if (ch2 == 'ァ') {\n            builder.append(\"tsa\");\n            i++;\n          } else if (ch2 == 'ィ') {\n            builder.append(\"tsi\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"tse\");\n            i++;\n          } else if (ch2 == 'ォ') {\n            builder.append(\"tso\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"tsyu\");\n            i++;\n          } else {\n            builder.append(\"tsu\");\n          }\n          break;\n        case 'テ':\n          if (ch2 == 'ィ') {\n            builder.append(\"ti\");\n            i++;\n          } else if (ch2 == 'ゥ') {\n            builder.append(\"tu\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"tyu\");\n            i++;\n          } else {\n            builder.append(\"te\");\n          }\n          break;\n        case 'ト':\n          if (ch2 == 'ウ') {\n            builder.append(\"tō\");\n            i++;\n          } else {\n            builder.append(\"to\");\n          }\n          break;\n        case 'ナ':\n          builder.append(\"na\");\n          break;\n        case 'ニ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"nyō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"nyū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"nya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"nyo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"nyu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"nye\");\n            i++;\n          } else {\n            builder.append(\"ni\");\n          }\n          break;\n        case 'ヌ':\n          builder.append(\"nu\");\n          break;\n        case 'ネ':\n          builder.append(\"ne\");\n          break;\n        case 'ノ':\n          if (ch2 == 'ウ') {\n            builder.append(\"nō\");\n            i++;\n          } else {\n            builder.append(\"no\");\n          }\n          break;\n        case 'ハ':\n          builder.append(\"ha\");\n          break;\n        case 'ヒ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"hyō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"hyū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"hya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"hyo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"hyu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"hye\");\n            i++;\n          } else {\n            builder.append(\"hi\");\n          }\n          break;\n        case 'フ':\n          if (ch2 == 'ャ') {\n            builder.append(\"fya\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"fyu\");\n            i++;\n          } else if (ch2 == 'ィ' && ch3 == 'ェ') {\n            builder.append(\"fye\");\n            i+=2;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"fyo\");\n            i++;\n          } else if (ch2 == 'ァ') {\n            builder.append(\"fa\");\n            i++;\n          } else if (ch2 == 'ィ') {\n            builder.append(\"fi\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"fe\");\n            i++;\n          } else if (ch2 == 'ォ') {\n            builder.append(\"fo\");\n            i++;\n          } else {\n            builder.append(\"fu\");\n          }\n          break;\n        case 'ヘ':\n          builder.append(\"he\");\n          break;\n        case 'ホ':\n          if (ch2 == 'ウ') {\n            builder.append(\"hō\");\n            i++;\n          } else if (ch2 == 'ゥ') {\n            builder.append(\"hu\");\n            i++;\n          } else {\n            builder.append(\"ho\");\n          }\n          break;\n        case 'マ':\n          builder.append(\"ma\");\n          break;\n        case 'ミ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"myō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"myū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"mya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"myo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"myu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"mye\");\n            i++;\n          } else {\n            builder.append(\"mi\");\n          }\n          break;\n        case 'ム':\n          builder.append(\"mu\");\n          break;\n        case 'メ':\n          builder.append(\"mi\");\n          break;\n        case 'モ':\n          if (ch2 == 'ウ') {\n            builder.append(\"mō\");\n            i++;\n          } else {\n            builder.append(\"mo\");\n          }\n          break;\n        case 'ヤ':\n          builder.append(\"ya\");\n          break;\n        case 'ユ':\n          builder.append(\"yu\");\n          break;\n        case 'ヨ':\n          if (ch2 == 'ウ') {\n            builder.append(\"yō\");\n            i++;\n          } else {\n            builder.append(\"yo\");\n          }\n          break;\n        case 'ラ':\n          builder.append(\"ra\");\n          break;\n        case 'リ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"ryō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"ryū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"rya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"ryo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"ryu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"rye\");\n            i++;\n          } else {\n            builder.append(\"ri\");\n          }\n          break;\n        case 'ル':\n          builder.append(\"ru\");\n          break;\n        case 'レ':\n          builder.append(\"re\");\n          break;\n        case 'ロ':\n          if (ch2 == 'ウ') {\n            builder.append(\"rō\");\n            i++;\n          } else {\n            builder.append(\"ro\");\n          }\n          break;\n        case 'ワ':\n          builder.append(\"wa\");\n          break;\n        case 'ヰ':\n          builder.append(\"i\");\n          break;\n        case 'ヱ':\n          builder.append(\"e\");\n          break;\n        case 'ヲ':\n          builder.append(\"o\");\n          break;\n        case 'ン':\n          switch (ch2) {\n            case 'バ':\n            case 'ビ':\n            case 'ブ':\n            case 'ベ':\n            case 'ボ':\n            case 'パ':\n            case 'ピ':\n            case 'プ':\n            case 'ペ':\n            case 'ポ':\n            case 'マ':\n            case 'ミ':\n            case 'ム':\n            case 'メ':\n            case 'モ':\n              builder.append('m');\n              break main;\n            case 'ヤ':\n            case 'ユ':\n            case 'ヨ':\n            case 'ア':\n            case 'イ':\n            case 'ウ':\n            case 'エ':\n            case 'オ':\n              builder.append(\"n'\");\n              break main;\n            default:\n              builder.append(\"n\");\n              break main;\n          }\n        case 'ガ':\n          builder.append(\"ga\");\n          break;\n        case 'ギ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"gyō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"gyū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"gya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"gyo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"gyu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"gye\");\n            i++;\n          } else {\n            builder.append(\"gi\");\n          }\n          break;\n        case 'グ':\n          switch(ch2) {\n            case 'ァ':\n              builder.append(\"gwa\");\n              i++;\n              break;\n            case 'ィ':\n              builder.append(\"gwi\");\n              i++;\n              break;\n            case 'ェ':\n              builder.append(\"gwe\");\n              i++;\n              break;\n            case 'ォ':\n              builder.append(\"gwo\");\n              i++;\n              break;\n            case 'ヮ':\n              builder.append(\"gwa\");\n              i++;\n              break;\n            default:\n              builder.append(\"gu\");\n              break;\n          }\n          break;\n        case 'ゲ':\n          builder.append(\"ge\");\n          break;\n        case 'ゴ':\n          if (ch2 == 'ウ') {\n            builder.append(\"gō\");\n            i++;\n          } else {\n            builder.append(\"go\");\n          }\n          break;\n        case 'ザ':\n          builder.append(\"za\");\n          break;\n        case 'ジ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"jō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"jū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"ja\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"jo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"ju\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"je\");\n            i++;\n          } else {\n            builder.append(\"ji\");\n          }\n          break;\n        case 'ズ':\n          if (ch2 == 'ィ') {\n            builder.append(\"zi\");\n            i++;\n          } else {\n            builder.append(\"zu\");\n          }\n          break;\n        case 'ゼ':\n          builder.append(\"ze\");\n          break;\n        case 'ゾ':\n          if (ch2 == 'ウ') {\n            builder.append(\"zō\");\n            i++;\n          } else {\n            builder.append(\"zo\");\n          }\n          break;\n        case 'ダ':\n          builder.append(\"da\");\n          break;\n        case 'ヂ':\n          builder.append(\"ji\");\n          break;\n        case 'ヅ':\n          builder.append(\"zu\");\n          break;\n        case 'デ':\n          if (ch2 == 'ィ') {\n            builder.append(\"di\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"dyu\");\n            i++;\n          } else {\n            builder.append(\"de\");\n          }\n          break;\n        case 'ド':\n          if (ch2 == 'ウ') {\n            builder.append(\"dō\");\n            i++;\n          } else if (ch2 == 'ゥ') {\n            builder.append(\"du\");\n            i++;\n          } else {\n            builder.append(\"do\");\n          }\n          break;\n        case 'バ':\n          builder.append(\"ba\");\n          break;\n        case 'ビ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"byō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"byū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"bya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"byo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"byu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"bye\");\n            i++;\n          } else {\n            builder.append(\"bi\");\n          }\n          break;\n        case 'ブ':\n          builder.append(\"bu\");\n          break;\n        case 'ベ':\n          builder.append(\"be\");\n          break;\n        case 'ボ':\n          if (ch2 == 'ウ') {\n            builder.append(\"bō\");\n            i++;\n          } else {\n            builder.append(\"bo\");\n          }\n          break;\n        case 'パ':\n          builder.append(\"pa\");\n          break;\n        case 'ピ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"pyō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"pyū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"pya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"pyo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"pyu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"pye\");\n            i++;\n          } else {\n            builder.append(\"pi\");\n          }\n          break;\n        case 'プ':\n          builder.append(\"pu\");\n          break;\n        case 'ペ':\n          builder.append(\"pe\");\n          break;\n        case 'ポ':\n          if (ch2 == 'ウ') {\n            builder.append(\"pō\");\n            i++;\n          } else {\n            builder.append(\"po\");\n          }\n          break;\n        case 'ヴ':\n          if (ch2 == 'ィ' && ch3 == 'ェ') {\n            builder.append(\"vye\");\n            i+= 2;\n          } else {\n            builder.append('v');\n          }\n          break;\n        case 'ァ':\n          builder.append('a');\n          break;\n        case 'ィ':\n          builder.append('i');\n          break;\n        case 'ゥ':\n          builder.append('u');\n          break;\n        case 'ェ':\n          builder.append('e');\n          break;\n        case 'ォ':\n          builder.append('o');\n          break;\n        case 'ヮ':\n          builder.append(\"wa\");\n          break;\n        case 'ャ':\n          builder.append(\"ya\");\n          break;\n        case 'ュ':\n          builder.append(\"yu\");\n          break;\n        case 'ョ':\n          builder.append(\"yo\");\n          break;\n        case 'ー':\n          break;\n        default:\n          builder.append(ch);\n      }\n    }\n  }\n\n","sourceOld":"  /**\n   * Romanize katakana with modified hepburn\n   */\n  public static void getRomanization(Appendable builder, CharSequence s) throws IOException {\n    final int len = s.length();\n    for (int i = 0; i < len; i++) {\n      // maximum lookahead: 3\n      char ch = s.charAt(i);\n      char ch2 = (i < len - 1) ? s.charAt(i + 1) : 0;\n      char ch3 = (i < len - 2) ? s.charAt(i + 2) : 0;\n      \n      main: switch (ch) {\n        case 'ッ':\n          switch (ch2) {\n            case 'カ':\n            case 'キ':\n            case 'ク':\n            case 'ケ':\n            case 'コ':\n              builder.append('k');\n              break main;\n            case 'サ':\n            case 'シ':\n            case 'ス':\n            case 'セ':\n            case 'ソ':\n              builder.append('s');\n              break main;\n            case 'タ':\n            case 'チ':\n            case 'ツ':\n            case 'テ':\n            case 'ト':\n              builder.append('t');\n              break main;\n            case 'パ':\n            case 'ピ':\n            case 'プ':\n            case 'ペ':\n            case 'ポ':\n              builder.append('p');\n              break main;\n          }\n          break;\n        case 'ア':\n          builder.append('a');\n          break;\n        case 'イ':\n          if (ch2 == 'ィ') {\n            builder.append(\"yi\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"ye\");\n            i++;\n          } else {\n            builder.append('i');\n          }\n          break;\n        case 'ウ':\n          switch(ch2) {\n            case 'ァ':\n              builder.append(\"wa\");\n              i++;\n              break;\n            case 'ィ':\n              builder.append(\"wi\");\n              i++;\n              break;\n            case 'ゥ':\n              builder.append(\"wu\");\n              i++;\n              break;\n            case 'ェ':\n              builder.append(\"we\");\n              i++;\n              break;\n            case 'ォ':\n              builder.append(\"wo\");\n              i++;\n              break;\n            case 'ュ':\n              builder.append(\"wyu\");\n              i++;\n              break;\n            default:\n              builder.append('u');\n              break;\n          }\n          break;\n        case 'エ':\n          builder.append('e');\n          break;\n        case 'オ':\n          if (ch2 == 'ウ') {\n            builder.append('ō');\n            i++;\n          } else {\n            builder.append('o');\n          }\n          break;\n        case 'カ':\n          builder.append(\"ka\");\n          break;\n        case 'キ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"kyō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"kyū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"kya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"kyo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"kyu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"kye\");\n            i++;\n          } else {\n            builder.append(\"ki\");\n          }\n          break;\n        case 'ク':\n          switch(ch2) {\n            case 'ァ':\n              builder.append(\"kwa\");\n              i++;\n              break;\n            case 'ィ':\n              builder.append(\"kwi\");\n              i++;\n              break;\n            case 'ェ':\n              builder.append(\"kwe\");\n              i++;\n              break;\n            case 'ォ':\n              builder.append(\"kwo\");\n              i++;\n              break;\n            case 'ヮ':\n              builder.append(\"kwa\");\n              i++;\n              break;\n            default:\n              builder.append(\"ku\");\n              break;\n          }\n          break;\n        case 'ケ':\n          builder.append(\"ke\");\n          break;\n        case 'コ':\n          if (ch2 == 'ウ') {\n            builder.append(\"kō\");\n            i++;\n          } else {\n            builder.append(\"ko\");\n          }\n          break;\n        case 'サ':\n          builder.append(\"sa\");\n          break;\n        case 'シ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"shō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"shū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"sha\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"sho\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"shu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"she\");\n            i++;\n          } else {\n            builder.append(\"shi\");\n          }\n          break;\n        case 'ス':\n          if (ch2 == 'ィ') {\n            builder.append(\"si\");\n            i++;\n          } else {\n            builder.append(\"su\");\n          }\n          break;\n        case 'セ':\n          builder.append(\"se\");\n          break;\n        case 'ソ':\n          if (ch2 == 'ウ') {\n            builder.append(\"sō\");\n            i++;\n          } else {\n            builder.append(\"so\");\n          }\n          break;\n        case 'タ':\n          builder.append(\"ta\");\n          break;\n        case 'チ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"chō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"chū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"cha\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"cho\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"chu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"che\");\n            i++;\n          } else {\n            builder.append(\"chi\");\n          }\n          break;\n        case 'ツ':\n          if (ch2 == 'ァ') {\n            builder.append(\"tsa\");\n            i++;\n          } else if (ch2 == 'ィ') {\n            builder.append(\"tsi\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"tse\");\n            i++;\n          } else if (ch2 == 'ォ') {\n            builder.append(\"tso\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"tsyu\");\n            i++;\n          } else {\n            builder.append(\"tsu\");\n          }\n          break;\n        case 'テ':\n          if (ch2 == 'ィ') {\n            builder.append(\"ti\");\n            i++;\n          } else if (ch2 == 'ゥ') {\n            builder.append(\"tu\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"tyu\");\n            i++;\n          } else {\n            builder.append(\"te\");\n          }\n          break;\n        case 'ト':\n          if (ch2 == 'ウ') {\n            builder.append(\"tō\");\n            i++;\n          } else {\n            builder.append(\"to\");\n          }\n          break;\n        case 'ナ':\n          builder.append(\"na\");\n          break;\n        case 'ニ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"nyō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"nyū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"nya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"nyo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"nyu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"nye\");\n            i++;\n          } else {\n            builder.append(\"ni\");\n          }\n          break;\n        case 'ヌ':\n          builder.append(\"nu\");\n          break;\n        case 'ネ':\n          builder.append(\"ne\");\n          break;\n        case 'ノ':\n          if (ch2 == 'ウ') {\n            builder.append(\"nō\");\n            i++;\n          } else {\n            builder.append(\"no\");\n          }\n          break;\n        case 'ハ':\n          builder.append(\"ha\");\n          break;\n        case 'ヒ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"hyō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"hyū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"hya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"hyo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"hyu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"hye\");\n            i++;\n          } else {\n            builder.append(\"hi\");\n          }\n          break;\n        case 'フ':\n          if (ch2 == 'ャ') {\n            builder.append(\"fya\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"fyu\");\n            i++;\n          } else if (ch2 == 'ィ' && ch3 == 'ェ') {\n            builder.append(\"fye\");\n            i+=2;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"fyo\");\n            i++;\n          } else if (ch2 == 'ァ') {\n            builder.append(\"fa\");\n            i++;\n          } else if (ch2 == 'ィ') {\n            builder.append(\"fi\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"fe\");\n            i++;\n          } else if (ch2 == 'ォ') {\n            builder.append(\"fo\");\n            i++;\n          } else {\n            builder.append(\"fu\");\n          }\n          break;\n        case 'ヘ':\n          builder.append(\"he\");\n          break;\n        case 'ホ':\n          if (ch2 == 'ウ') {\n            builder.append(\"hō\");\n            i++;\n          } else if (ch2 == 'ゥ') {\n            builder.append(\"hu\");\n            i++;\n          } else {\n            builder.append(\"ho\");\n          }\n          break;\n        case 'マ':\n          builder.append(\"ma\");\n          break;\n        case 'ミ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"myō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"myū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"mya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"myo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"myu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"mye\");\n            i++;\n          } else {\n            builder.append(\"mi\");\n          }\n          break;\n        case 'ム':\n          builder.append(\"mu\");\n          break;\n        case 'メ':\n          builder.append(\"mi\");\n          break;\n        case 'モ':\n          if (ch2 == 'ウ') {\n            builder.append(\"mō\");\n            i++;\n          } else {\n            builder.append(\"mo\");\n          }\n          break;\n        case 'ヤ':\n          builder.append(\"ya\");\n          break;\n        case 'ユ':\n          builder.append(\"yu\");\n          break;\n        case 'ヨ':\n          if (ch2 == 'ウ') {\n            builder.append(\"yō\");\n            i++;\n          } else {\n            builder.append(\"yo\");\n          }\n          break;\n        case 'ラ':\n          builder.append(\"ra\");\n          break;\n        case 'リ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"ryō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"ryū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"rya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"ryo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"ryu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"rye\");\n            i++;\n          } else {\n            builder.append(\"ri\");\n          }\n          break;\n        case 'ル':\n          builder.append(\"ru\");\n          break;\n        case 'レ':\n          builder.append(\"re\");\n          break;\n        case 'ロ':\n          if (ch2 == 'ウ') {\n            builder.append(\"rō\");\n            i++;\n          } else {\n            builder.append(\"ro\");\n          }\n          break;\n        case 'ワ':\n          builder.append(\"wa\");\n          break;\n        case 'ヰ':\n          builder.append(\"i\");\n          break;\n        case 'ヱ':\n          builder.append(\"e\");\n          break;\n        case 'ヲ':\n          builder.append(\"o\");\n          break;\n        case 'ン':\n          switch (ch2) {\n            case 'バ':\n            case 'ビ':\n            case 'ブ':\n            case 'ベ':\n            case 'ボ':\n            case 'パ':\n            case 'ピ':\n            case 'プ':\n            case 'ペ':\n            case 'ポ':\n            case 'マ':\n            case 'ミ':\n            case 'ム':\n            case 'メ':\n            case 'モ':\n              builder.append('m');\n              break main;\n            case 'ヤ':\n            case 'ユ':\n            case 'ヨ':\n            case 'ア':\n            case 'イ':\n            case 'ウ':\n            case 'エ':\n            case 'オ':\n              builder.append(\"n'\");\n              break main;\n            default:\n              builder.append(\"n\");\n              break main;\n          }\n        case 'ガ':\n          builder.append(\"ga\");\n          break;\n        case 'ギ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"gyō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"gyū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"gya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"gyo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"gyu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"gye\");\n            i++;\n          } else {\n            builder.append(\"gi\");\n          }\n          break;\n        case 'グ':\n          switch(ch2) {\n            case 'ァ':\n              builder.append(\"gwa\");\n              i++;\n              break;\n            case 'ィ':\n              builder.append(\"gwi\");\n              i++;\n              break;\n            case 'ェ':\n              builder.append(\"gwe\");\n              i++;\n              break;\n            case 'ォ':\n              builder.append(\"gwo\");\n              i++;\n              break;\n            case 'ヮ':\n              builder.append(\"gwa\");\n              i++;\n              break;\n            default:\n              builder.append(\"gu\");\n              break;\n          }\n          break;\n        case 'ゲ':\n          builder.append(\"ge\");\n          break;\n        case 'ゴ':\n          if (ch2 == 'ウ') {\n            builder.append(\"gō\");\n            i++;\n          } else {\n            builder.append(\"go\");\n          }\n          break;\n        case 'ザ':\n          builder.append(\"za\");\n          break;\n        case 'ジ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"jō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"jū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"ja\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"jo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"ju\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"je\");\n            i++;\n          } else {\n            builder.append(\"ji\");\n          }\n          break;\n        case 'ズ':\n          if (ch2 == 'ィ') {\n            builder.append(\"zi\");\n            i++;\n          } else {\n            builder.append(\"zu\");\n          }\n          break;\n        case 'ゼ':\n          builder.append(\"ze\");\n          break;\n        case 'ゾ':\n          if (ch2 == 'ウ') {\n            builder.append(\"zō\");\n            i++;\n          } else {\n            builder.append(\"zo\");\n          }\n          break;\n        case 'ダ':\n          builder.append(\"da\");\n          break;\n        case 'ヂ':\n          builder.append(\"ji\");\n          break;\n        case 'ヅ':\n          builder.append(\"zu\");\n          break;\n        case 'デ':\n          if (ch2 == 'ィ') {\n            builder.append(\"di\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"dyu\");\n            i++;\n          } else {\n            builder.append(\"de\");\n          }\n          break;\n        case 'ド':\n          if (ch2 == 'ウ') {\n            builder.append(\"dō\");\n            i++;\n          } else if (ch2 == 'ゥ') {\n            builder.append(\"du\");\n            i++;\n          } else {\n            builder.append(\"do\");\n          }\n          break;\n        case 'バ':\n          builder.append(\"ba\");\n          break;\n        case 'ビ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"byō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"byū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"bya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"byo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"byu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"bye\");\n            i++;\n          } else {\n            builder.append(\"bi\");\n          }\n          break;\n        case 'ブ':\n          builder.append(\"bu\");\n          break;\n        case 'ベ':\n          builder.append(\"be\");\n          break;\n        case 'ボ':\n          if (ch2 == 'ウ') {\n            builder.append(\"bō\");\n            i++;\n          } else {\n            builder.append(\"bo\");\n          }\n          break;\n        case 'パ':\n          builder.append(\"pa\");\n          break;\n        case 'ピ':\n          if (ch2 == 'ョ' && ch3 == 'ウ') {\n            builder.append(\"pyō\");\n            i += 2;\n          } else if (ch2 == 'ュ' && ch3 == 'ウ') {\n            builder.append(\"pyū\");\n            i += 2;\n          } else if (ch2 == 'ャ') {\n            builder.append(\"pya\");\n            i++;\n          } else if (ch2 == 'ョ') {\n            builder.append(\"pyo\");\n            i++;\n          } else if (ch2 == 'ュ') {\n            builder.append(\"pyu\");\n            i++;\n          } else if (ch2 == 'ェ') {\n            builder.append(\"pye\");\n            i++;\n          } else {\n            builder.append(\"pi\");\n          }\n          break;\n        case 'プ':\n          builder.append(\"pu\");\n          break;\n        case 'ペ':\n          builder.append(\"pe\");\n          break;\n        case 'ポ':\n          if (ch2 == 'ウ') {\n            builder.append(\"pō\");\n            i++;\n          } else {\n            builder.append(\"po\");\n          }\n          break;\n        case 'ヴ':\n          if (ch2 == 'ィ' && ch3 == 'ェ') {\n            builder.append(\"vye\");\n            i+= 2;\n          } else {\n            builder.append('v');\n          }\n          break;\n        case 'ァ':\n          builder.append('a');\n          break;\n        case 'ィ':\n          builder.append('i');\n          break;\n        case 'ゥ':\n          builder.append('u');\n          break;\n        case 'ェ':\n          builder.append('e');\n          break;\n        case 'ォ':\n          builder.append('o');\n          break;\n        case 'ヮ':\n          builder.append(\"wa\");\n          break;\n        case 'ャ':\n          builder.append(\"ya\");\n          break;\n        case 'ュ':\n          builder.append(\"yu\");\n          break;\n        case 'ョ':\n          builder.append(\"yo\");\n          break;\n        case 'ー':\n          break;\n        default:\n          builder.append(ch);\n      }\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"b89678825b68eccaf09e6ab71675fc0b0af1e099":["98d45c1ff2c99694b6de2201175f9b8b8b27b597"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"98d45c1ff2c99694b6de2201175f9b8b8b27b597":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["b89678825b68eccaf09e6ab71675fc0b0af1e099"]},"commit2Childs":{"b89678825b68eccaf09e6ab71675fc0b0af1e099":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["98d45c1ff2c99694b6de2201175f9b8b8b27b597"],"98d45c1ff2c99694b6de2201175f9b8b8b27b597":["b89678825b68eccaf09e6ab71675fc0b0af1e099"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}