{"path":"lucene/analysis/kuromoji/src/java/org/apache/lucene/analysis/ja/JapaneseTokenizer#backtraceNBest(Position,boolean).mjava","commits":[{"id":"f2b45d6769cfaeb4456b4b66cdd5e25c8940f2a4","date":1449124064,"type":0,"author":"Christian Moen","isMerge":false,"pathNew":"lucene/analysis/kuromoji/src/java/org/apache/lucene/analysis/ja/JapaneseTokenizer#backtraceNBest(Position,boolean).mjava","pathOld":"/dev/null","sourceNew":"  private void backtraceNBest(final Position endPosData, final boolean useEOS) throws IOException {\n    if (lattice == null) {\n      lattice = new Lattice();\n    }\n\n    final int endPos = endPosData.pos;\n    char[] fragment = buffer.get(lastBackTracePos, endPos - lastBackTracePos);\n    lattice.setup(fragment, dictionaryMap, positions, lastBackTracePos, endPos, useEOS);\n    lattice.markUnreachable();\n    lattice.calcLeftCost(costs);\n    lattice.calcRightCost(costs);\n\n    int bestCost = lattice.bestCost();\n    if (VERBOSE) {\n      System.out.printf(\"DEBUG: 1-BEST COST: %d\\n\", bestCost);\n    }\n    for (int node : lattice.bestPathNodeList()) {\n      registerNode(node, fragment);\n    }\n\n    for (int n = 2;; ++n) {\n      List<Integer> nbest = lattice.nBestNodeList(n);\n      if (nbest.isEmpty()) {\n        break;\n      }\n      int cost = lattice.cost(nbest.get(0));\n      if (VERBOSE) {\n        System.out.printf(\"DEBUG: %d-BEST COST: %d\\n\", n, cost);\n      }\n      if (bestCost + nBestCost < cost) {\n        break;\n      }\n      for (int node : nbest) {\n        registerNode(node, fragment);\n      }\n    }\n    if (VERBOSE) {\n      lattice.debugPrint();\n    }\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"f2b45d6769cfaeb4456b4b66cdd5e25c8940f2a4":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["f2b45d6769cfaeb4456b4b66cdd5e25c8940f2a4"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["f2b45d6769cfaeb4456b4b66cdd5e25c8940f2a4"],"f2b45d6769cfaeb4456b4b66cdd5e25c8940f2a4":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}