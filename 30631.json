{"path":"solr/core/src/java/org/apache/solr/search/facet/SweepDocIterator#newInstance(SweepCountAccStruct,List[SweepCountAccStruct]).mjava","commits":[{"id":"2f9e4bd10604489b5817ee29e35ac96a3148cbec","date":1594345357,"type":0,"author":"Michael Gibney","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/search/facet/SweepDocIterator#newInstance(SweepCountAccStruct,List[SweepCountAccStruct]).mjava","pathOld":"/dev/null","sourceNew":"  static SweepIteratorAndCounts newInstance(SweepCountAccStruct base, List<SweepCountAccStruct> others) throws IOException {\n    final int activeCt;\n    SweepCountAccStruct entry;\n    if (base == null) {\n      activeCt = others.size();\n      entry = others.get(0);\n    } else {\n      activeCt = others.size() + 1;\n      entry = base;\n    }\n    if (activeCt == 1) {\n      final CountSlotAcc[] countAccs = new CountSlotAcc[] {entry.countAcc};\n      return new SweepIteratorAndCounts(new SingletonDocIterator(entry.docSet.iterator(), base != null), countAccs);\n    } else {\n      final DocIterator[] subIterators = new DocIterator[activeCt];\n      final CountSlotAcc[] countAccs = new CountSlotAcc[activeCt];\n      Iterator<SweepCountAccStruct> othersIter = others.iterator();\n      int i = 0;\n      for (;;) {\n        subIterators[i] = entry.docSet.iterator();\n        countAccs[i] = entry.countAcc;\n        if (++i == activeCt) {\n          break;\n        }\n        entry = othersIter.next();\n      }\n      return new SweepIteratorAndCounts(new UnionDocIterator(subIterators, base == null ? -1 : 0), countAccs);\n    }\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"2f9e4bd10604489b5817ee29e35ac96a3148cbec":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["2f9e4bd10604489b5817ee29e35ac96a3148cbec"]},"commit2Childs":{"2f9e4bd10604489b5817ee29e35ac96a3148cbec":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["2f9e4bd10604489b5817ee29e35ac96a3148cbec"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}