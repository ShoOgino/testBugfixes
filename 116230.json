{"path":"solr/core/src/test/org/apache/solr/handler/component/DistributedSuggestComponentTest#test().mjava","commits":[{"id":"abb23fcc2461782ab204e61213240feb77d355aa","date":1422029612,"type":1,"author":"Erick Erickson","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/handler/component/DistributedSuggestComponentTest#test().mjava","pathOld":"solr/core/src/test/org/apache/solr/handler/component/DistributedSuggestComponentTest#doTest().mjava","sourceNew":"  @Test\n  public void test() throws Exception {\n    del(\"*:*\");\n    index(id, \"1\", \"cat\", \"This is another title\", \"price\", \"10\", \"weight\", \"10\");\n    index(id, \"2\", \"cat\", \"Yet another\", \"price\", \"15\", \"weight\", \"10\");\n    index(id, \"3\", \"cat\", \"Yet another title\", \"price\", \"20\", \"weight\", \"20\");\n    index(id, \"4\", \"cat\", \"suggestions for suggest\", \"price\", \"25\", \"weight\", \"20\");\n    index(id, \"5\", \"cat\", \"Red fox\", \"price\", \"30\", \"weight\", \"20\");\n    index(id, \"6\", \"cat\", \"Rad fox\", \"price\", \"35\", \"weight\", \"30\");\n    index(id, \"7\", \"cat\", \"example data\", \"price\", \"40\", \"weight\", \"30\");\n    index(id, \"8\", \"cat\", \"example inputdata\", \"price\", \"45\", \"weight\", \"30\");\n    index(id, \"9\", \"cat\", \"blah in blah\", \"price\", \"50\", \"weight\", \"40\");\n    index(id, \"10\", \"cat\", \"another blah in blah\", \"price\", \"55\", \"weight\", \"40\");\n    commit();\n\n    handle.clear();\n    handle.put(\"timestamp\", SKIPVAL);\n    handle.put(\"maxScore\", SKIPVAL);\n    handle.put(\"response\", SKIP);\n    \n    String requestHandlerName = \"/suggest\";\n    String docDictName = \"suggest_fuzzy_doc_dict\";\n    String docExprDictName = \"suggest_fuzzy_doc_expr_dict\";\n    \n    //Shortcut names\n    String build = SuggesterParams.SUGGEST_BUILD;\n    String buildAll = SuggesterParams.SUGGEST_BUILD_ALL;\n    String count = SuggesterParams.SUGGEST_COUNT;\n    String dictionaryName = SuggesterParams.SUGGEST_DICT;\n    \n    //Build the suggest dictionary\n    if (random().nextBoolean()) { // build all the suggesters in one go\n      query(buildRequest(\"\", true, requestHandlerName, buildAll, \"true\"));\n    } else { // build suggesters individually\n      query(buildRequest(\"\", true, requestHandlerName, build, \"true\", dictionaryName, docDictName));\n      query(buildRequest(\"\", true, requestHandlerName, build, \"true\", dictionaryName, docExprDictName)); \n    }\n    \n    //Test Basic Functionality\n    query(buildRequest(\"exampel\", false, requestHandlerName, dictionaryName, docDictName, count, \"2\"));\n    query(buildRequest(\"Yet\", false, requestHandlerName, dictionaryName, docExprDictName, count, \"2\"));\n    query(buildRequest(\"blah\", true, requestHandlerName, dictionaryName, docExprDictName, count, \"2\"));\n    query(buildRequest(\"blah\", true, requestHandlerName, dictionaryName, docDictName, count, \"2\"));\n    \n    //Test multiSuggester\n    query(buildRequest(\"exampel\", false, requestHandlerName, dictionaryName, docDictName, dictionaryName, docExprDictName, count, \"2\"));\n    \n  }\n\n","sourceOld":"  @Override\n  public void doTest() throws Exception {\n    del(\"*:*\");\n    index(id, \"1\", \"cat\", \"This is another title\", \"price\", \"10\", \"weight\", \"10\");\n    index(id, \"2\", \"cat\", \"Yet another\", \"price\", \"15\", \"weight\", \"10\");\n    index(id, \"3\", \"cat\", \"Yet another title\", \"price\", \"20\", \"weight\", \"20\");\n    index(id, \"4\", \"cat\", \"suggestions for suggest\", \"price\", \"25\", \"weight\", \"20\");\n    index(id, \"5\", \"cat\", \"Red fox\", \"price\", \"30\", \"weight\", \"20\");\n    index(id, \"6\", \"cat\", \"Rad fox\", \"price\", \"35\", \"weight\", \"30\");\n    index(id, \"7\", \"cat\", \"example data\", \"price\", \"40\", \"weight\", \"30\");\n    index(id, \"8\", \"cat\", \"example inputdata\", \"price\", \"45\", \"weight\", \"30\");\n    index(id, \"9\", \"cat\", \"blah in blah\", \"price\", \"50\", \"weight\", \"40\");\n    index(id, \"10\", \"cat\", \"another blah in blah\", \"price\", \"55\", \"weight\", \"40\");\n    commit();\n\n    handle.clear();\n    handle.put(\"timestamp\", SKIPVAL);\n    handle.put(\"maxScore\", SKIPVAL);\n    handle.put(\"response\", SKIP);\n    \n    String requestHandlerName = \"/suggest\";\n    String docDictName = \"suggest_fuzzy_doc_dict\";\n    String docExprDictName = \"suggest_fuzzy_doc_expr_dict\";\n    \n    //Shortcut names\n    String build = SuggesterParams.SUGGEST_BUILD;\n    String buildAll = SuggesterParams.SUGGEST_BUILD_ALL;\n    String count = SuggesterParams.SUGGEST_COUNT;\n    String dictionaryName = SuggesterParams.SUGGEST_DICT;\n    \n    //Build the suggest dictionary\n    if (random().nextBoolean()) { // build all the suggesters in one go\n      query(buildRequest(\"\", true, requestHandlerName, buildAll, \"true\"));\n    } else { // build suggesters individually\n      query(buildRequest(\"\", true, requestHandlerName, build, \"true\", dictionaryName, docDictName));\n      query(buildRequest(\"\", true, requestHandlerName, build, \"true\", dictionaryName, docExprDictName)); \n    }\n    \n    //Test Basic Functionality\n    query(buildRequest(\"exampel\", false, requestHandlerName, dictionaryName, docDictName, count, \"2\"));\n    query(buildRequest(\"Yet\", false, requestHandlerName, dictionaryName, docExprDictName, count, \"2\"));\n    query(buildRequest(\"blah\", true, requestHandlerName, dictionaryName, docExprDictName, count, \"2\"));\n    query(buildRequest(\"blah\", true, requestHandlerName, dictionaryName, docDictName, count, \"2\"));\n    \n    //Test multiSuggester\n    query(buildRequest(\"exampel\", false, requestHandlerName, dictionaryName, docDictName, dictionaryName, docExprDictName, count, \"2\"));\n    \n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"abb23fcc2461782ab204e61213240feb77d355aa":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["abb23fcc2461782ab204e61213240feb77d355aa"]},"commit2Childs":{"abb23fcc2461782ab204e61213240feb77d355aa":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["abb23fcc2461782ab204e61213240feb77d355aa"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}