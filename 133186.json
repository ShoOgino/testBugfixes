{"path":"lucene/backward-codecs/src/test/org/apache/lucene/codecs/lucene46/TestLucene46UndeadNorms#testReadUndeadNorms().mjava","commits":[{"id":"05da2d758a6089e737cdfc230e57a51b472b94b6","date":1413392310,"type":0,"author":"Michael McCandless","isMerge":false,"pathNew":"lucene/backward-codecs/src/test/org/apache/lucene/codecs/lucene46/TestLucene46UndeadNorms#testReadUndeadNorms().mjava","pathOld":"/dev/null","sourceNew":"  /** Copy this back to /l/461/lucene/CreateUndeadNorms.java, then:\n   *   - ant clean\n   *   - pushd analysis/common; ant jar; popd\n   *   - pushd core; ant jar; popd\n   *   - javac -cp build/analysis/common/lucene-analyzers-common-4.6-SNAPSHOT.jar:build/core/lucene-core-4.6-SNAPSHOT.jar CreateUndeadNorms.java\n   *   - java -cp .:build/analysis/common/lucene-analyzers-common-4.6-SNAPSHOT.jar:build/core/lucene-core-4.6-SNAPSHOT.jar CreateUndeadNorms\n   *   - cd /tmp/undeadnorms  ; zip index.46.undeadnorms.zip *\n\nimport java.io.File;\nimport java.io.IOException;\n\nimport org.apache.lucene.analysis.TokenStream;\nimport org.apache.lucene.analysis.core.WhitespaceAnalyzer;\nimport org.apache.lucene.document.Document;\nimport org.apache.lucene.document.Field;\nimport org.apache.lucene.document.StringField;\nimport org.apache.lucene.document.TextField;\nimport org.apache.lucene.index.IndexWriter;\nimport org.apache.lucene.index.IndexWriterConfig;\nimport org.apache.lucene.index.Term;\nimport org.apache.lucene.store.Directory;\nimport org.apache.lucene.store.FSDirectory;\nimport org.apache.lucene.util.Version;\n\npublic class CreateUndeadNorms {\n  public static void main(String[] args) throws Exception {\n    File file = new File(\"/tmp/undeadnorms\");\n    if (file.exists()) {\n      throw new RuntimeException(\"please remove /tmp/undeadnorms first\");\n    }\n    Directory dir = FSDirectory.open(file);\n    IndexWriter w = new IndexWriter(dir, new IndexWriterConfig(Version.LUCENE_46, new WhitespaceAnalyzer(Version.LUCENE_46)));\n    Document doc = new Document();\n    doc.add(new StringField(\"id\", \"0\", Field.Store.NO));\n    w.addDocument(doc);\n    doc = new Document();\n    doc.add(new StringField(\"id\", \"1\", Field.Store.NO));\n    Field content = new TextField(\"content\", \"some content\", Field.Store.NO);\n    content.setTokenStream(new TokenStream() {\n        @Override\n        public boolean incrementToken() throws IOException {\n          throw new IOException(\"brains brains!\");\n        }\n      });\n\n    doc.add(content);\n    try {\n      w.addDocument(doc);\n      throw new RuntimeException(\"didn't hit exception\");\n    } catch (IOException ioe) {\n      // perfect\n    }\n    w.close();\n    dir.close();\n  }\n}\n*/\n  /** \n   * LUCENE-6006: Test undead norms.\n   *                                 .....            \n   *                             C C  /            \n   *                            /<   /             \n   *             ___ __________/_#__=o             \n   *            /(- /(\\_\\________   \\              \n   *            \\ ) \\ )_      \\o     \\             \n   *            /|\\ /|\\       |'     |             \n   *                          |     _|             \n   *                          /o   __\\             \n   *                         / '     |             \n   *                        / /      |             \n   *                       /_/\\______|             \n   *                      (   _(    <              \n   *                       \\    \\    \\             \n   *                        \\    \\    |            \n   *                         \\____\\____\\           \n   *                         ____\\_\\__\\_\\          \n   *                       /`   /`     o\\          \n   *                       |___ |_______|\n   *\n   */\n  public void testReadUndeadNorms() throws Exception {\n    InputStream resource = TestLucene46UndeadNorms.class.getResourceAsStream(\"index.46.undeadnorms.zip\");\n    assertNotNull(resource);\n    Path path = createTempDir(\"undeadnorms\");\n    TestUtil.unzip(resource, path);\n    Directory dir = FSDirectory.open(path);\n    IndexReader r = DirectoryReader.open(dir);\n    NumericDocValues undeadNorms = MultiDocValues.getNormValues(r, \"content\");\n    assertNotNull(undeadNorms);\n    assertEquals(2, r.maxDoc());\n    assertEquals(0, undeadNorms.get(0));\n    assertEquals(0, undeadNorms.get(1));\n    dir.close();\n    r.close();\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"c93b0dbaa6abe99bc8d1b476bcacc27b324b2b84","date":1413458798,"type":0,"author":"Robert Muir","isMerge":true,"pathNew":"lucene/backward-codecs/src/test/org/apache/lucene/codecs/lucene46/TestLucene46UndeadNorms#testReadUndeadNorms().mjava","pathOld":"/dev/null","sourceNew":"  /** Copy this back to /l/461/lucene/CreateUndeadNorms.java, then:\n   *   - ant clean\n   *   - pushd analysis/common; ant jar; popd\n   *   - pushd core; ant jar; popd\n   *   - javac -cp build/analysis/common/lucene-analyzers-common-4.6-SNAPSHOT.jar:build/core/lucene-core-4.6-SNAPSHOT.jar CreateUndeadNorms.java\n   *   - java -cp .:build/analysis/common/lucene-analyzers-common-4.6-SNAPSHOT.jar:build/core/lucene-core-4.6-SNAPSHOT.jar CreateUndeadNorms\n   *   - cd /tmp/undeadnorms  ; zip index.46.undeadnorms.zip *\n\nimport java.io.File;\nimport java.io.IOException;\n\nimport org.apache.lucene.analysis.TokenStream;\nimport org.apache.lucene.analysis.core.WhitespaceAnalyzer;\nimport org.apache.lucene.document.Document;\nimport org.apache.lucene.document.Field;\nimport org.apache.lucene.document.StringField;\nimport org.apache.lucene.document.TextField;\nimport org.apache.lucene.index.IndexWriter;\nimport org.apache.lucene.index.IndexWriterConfig;\nimport org.apache.lucene.index.Term;\nimport org.apache.lucene.store.Directory;\nimport org.apache.lucene.store.FSDirectory;\nimport org.apache.lucene.util.Version;\n\npublic class CreateUndeadNorms {\n  public static void main(String[] args) throws Exception {\n    File file = new File(\"/tmp/undeadnorms\");\n    if (file.exists()) {\n      throw new RuntimeException(\"please remove /tmp/undeadnorms first\");\n    }\n    Directory dir = FSDirectory.open(file);\n    IndexWriter w = new IndexWriter(dir, new IndexWriterConfig(Version.LUCENE_46, new WhitespaceAnalyzer(Version.LUCENE_46)));\n    Document doc = new Document();\n    doc.add(new StringField(\"id\", \"0\", Field.Store.NO));\n    w.addDocument(doc);\n    doc = new Document();\n    doc.add(new StringField(\"id\", \"1\", Field.Store.NO));\n    Field content = new TextField(\"content\", \"some content\", Field.Store.NO);\n    content.setTokenStream(new TokenStream() {\n        @Override\n        public boolean incrementToken() throws IOException {\n          throw new IOException(\"brains brains!\");\n        }\n      });\n\n    doc.add(content);\n    try {\n      w.addDocument(doc);\n      throw new RuntimeException(\"didn't hit exception\");\n    } catch (IOException ioe) {\n      // perfect\n    }\n    w.close();\n    dir.close();\n  }\n}\n*/\n  /** \n   * LUCENE-6006: Test undead norms.\n   *                                 .....            \n   *                             C C  /            \n   *                            /<   /             \n   *             ___ __________/_#__=o             \n   *            /(- /(\\_\\________   \\              \n   *            \\ ) \\ )_      \\o     \\             \n   *            /|\\ /|\\       |'     |             \n   *                          |     _|             \n   *                          /o   __\\             \n   *                         / '     |             \n   *                        / /      |             \n   *                       /_/\\______|             \n   *                      (   _(    <              \n   *                       \\    \\    \\             \n   *                        \\    \\    |            \n   *                         \\____\\____\\           \n   *                         ____\\_\\__\\_\\          \n   *                       /`   /`     o\\          \n   *                       |___ |_______|\n   *\n   */\n  public void testReadUndeadNorms() throws Exception {\n    InputStream resource = TestLucene46UndeadNorms.class.getResourceAsStream(\"index.46.undeadnorms.zip\");\n    assertNotNull(resource);\n    Path path = createTempDir(\"undeadnorms\");\n    TestUtil.unzip(resource, path);\n    Directory dir = FSDirectory.open(path);\n    IndexReader r = DirectoryReader.open(dir);\n    NumericDocValues undeadNorms = MultiDocValues.getNormValues(r, \"content\");\n    assertNotNull(undeadNorms);\n    assertEquals(2, r.maxDoc());\n    assertEquals(0, undeadNorms.get(0));\n    assertEquals(0, undeadNorms.get(1));\n    dir.close();\n    r.close();\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"71387d8cb6923eb831b17a8b734608ba2e21c653","date":1414126093,"type":4,"author":"Robert Muir","isMerge":false,"pathNew":"/dev/null","pathOld":"lucene/backward-codecs/src/test/org/apache/lucene/codecs/lucene46/TestLucene46UndeadNorms#testReadUndeadNorms().mjava","sourceNew":null,"sourceOld":"  /** Copy this back to /l/461/lucene/CreateUndeadNorms.java, then:\n   *   - ant clean\n   *   - pushd analysis/common; ant jar; popd\n   *   - pushd core; ant jar; popd\n   *   - javac -cp build/analysis/common/lucene-analyzers-common-4.6-SNAPSHOT.jar:build/core/lucene-core-4.6-SNAPSHOT.jar CreateUndeadNorms.java\n   *   - java -cp .:build/analysis/common/lucene-analyzers-common-4.6-SNAPSHOT.jar:build/core/lucene-core-4.6-SNAPSHOT.jar CreateUndeadNorms\n   *   - cd /tmp/undeadnorms  ; zip index.46.undeadnorms.zip *\n\nimport java.io.File;\nimport java.io.IOException;\n\nimport org.apache.lucene.analysis.TokenStream;\nimport org.apache.lucene.analysis.core.WhitespaceAnalyzer;\nimport org.apache.lucene.document.Document;\nimport org.apache.lucene.document.Field;\nimport org.apache.lucene.document.StringField;\nimport org.apache.lucene.document.TextField;\nimport org.apache.lucene.index.IndexWriter;\nimport org.apache.lucene.index.IndexWriterConfig;\nimport org.apache.lucene.index.Term;\nimport org.apache.lucene.store.Directory;\nimport org.apache.lucene.store.FSDirectory;\nimport org.apache.lucene.util.Version;\n\npublic class CreateUndeadNorms {\n  public static void main(String[] args) throws Exception {\n    File file = new File(\"/tmp/undeadnorms\");\n    if (file.exists()) {\n      throw new RuntimeException(\"please remove /tmp/undeadnorms first\");\n    }\n    Directory dir = FSDirectory.open(file);\n    IndexWriter w = new IndexWriter(dir, new IndexWriterConfig(Version.LUCENE_46, new WhitespaceAnalyzer(Version.LUCENE_46)));\n    Document doc = new Document();\n    doc.add(new StringField(\"id\", \"0\", Field.Store.NO));\n    w.addDocument(doc);\n    doc = new Document();\n    doc.add(new StringField(\"id\", \"1\", Field.Store.NO));\n    Field content = new TextField(\"content\", \"some content\", Field.Store.NO);\n    content.setTokenStream(new TokenStream() {\n        @Override\n        public boolean incrementToken() throws IOException {\n          throw new IOException(\"brains brains!\");\n        }\n      });\n\n    doc.add(content);\n    try {\n      w.addDocument(doc);\n      throw new RuntimeException(\"didn't hit exception\");\n    } catch (IOException ioe) {\n      // perfect\n    }\n    w.close();\n    dir.close();\n  }\n}\n*/\n  /** \n   * LUCENE-6006: Test undead norms.\n   *                                 .....            \n   *                             C C  /            \n   *                            /<   /             \n   *             ___ __________/_#__=o             \n   *            /(- /(\\_\\________   \\              \n   *            \\ ) \\ )_      \\o     \\             \n   *            /|\\ /|\\       |'     |             \n   *                          |     _|             \n   *                          /o   __\\             \n   *                         / '     |             \n   *                        / /      |             \n   *                       /_/\\______|             \n   *                      (   _(    <              \n   *                       \\    \\    \\             \n   *                        \\    \\    |            \n   *                         \\____\\____\\           \n   *                         ____\\_\\__\\_\\          \n   *                       /`   /`     o\\          \n   *                       |___ |_______|\n   *\n   */\n  public void testReadUndeadNorms() throws Exception {\n    InputStream resource = TestLucene46UndeadNorms.class.getResourceAsStream(\"index.46.undeadnorms.zip\");\n    assertNotNull(resource);\n    Path path = createTempDir(\"undeadnorms\");\n    TestUtil.unzip(resource, path);\n    Directory dir = FSDirectory.open(path);\n    IndexReader r = DirectoryReader.open(dir);\n    NumericDocValues undeadNorms = MultiDocValues.getNormValues(r, \"content\");\n    assertNotNull(undeadNorms);\n    assertEquals(2, r.maxDoc());\n    assertEquals(0, undeadNorms.get(0));\n    assertEquals(0, undeadNorms.get(1));\n    dir.close();\n    r.close();\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"05da2d758a6089e737cdfc230e57a51b472b94b6":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"c93b0dbaa6abe99bc8d1b476bcacc27b324b2b84":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","05da2d758a6089e737cdfc230e57a51b472b94b6"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"71387d8cb6923eb831b17a8b734608ba2e21c653":["05da2d758a6089e737cdfc230e57a51b472b94b6"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["71387d8cb6923eb831b17a8b734608ba2e21c653"]},"commit2Childs":{"05da2d758a6089e737cdfc230e57a51b472b94b6":["c93b0dbaa6abe99bc8d1b476bcacc27b324b2b84","71387d8cb6923eb831b17a8b734608ba2e21c653"],"c93b0dbaa6abe99bc8d1b476bcacc27b324b2b84":[],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["05da2d758a6089e737cdfc230e57a51b472b94b6","c93b0dbaa6abe99bc8d1b476bcacc27b324b2b84"],"71387d8cb6923eb831b17a8b734608ba2e21c653":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["c93b0dbaa6abe99bc8d1b476bcacc27b324b2b84","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}