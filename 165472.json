{"path":"contrib/fast-vector-highlighter/src/test/org/apache/lucene/search/vectorhighlight/FieldQueryTest#testQueryPhraseMapOverlap2gram().mjava","commits":[{"id":"d64148a458eb3ddf4d1bb1f1753cb9af194e1707","date":1247144811,"type":0,"author":"Michael McCandless","isMerge":false,"pathNew":"contrib/fast-vector-highlighter/src/test/org/apache/lucene/search/vectorhighlight/FieldQueryTest#testQueryPhraseMapOverlap2gram().mjava","pathOld":"/dev/null","sourceNew":"  public void testQueryPhraseMapOverlap2gram() throws Exception {\n    Query query = paB.parse( \"abc AND bcd\" );\n    \n    // phraseHighlight = true, fieldMatch = true\n    FieldQuery fq = new FieldQuery( query, true, true );\n    Map<String, QueryPhraseMap> map = fq.rootMaps;\n    assertEquals( 1, map.size() );\n    assertNull( map.get( null ) );\n    assertNotNull( map.get( F ) );\n    QueryPhraseMap qpm = map.get( F );\n    assertEquals( 2, qpm.subMap.size() );\n\n    // \"ab bc\"\n    assertNotNull( qpm.subMap.get( \"ab\" ) );\n    QueryPhraseMap qpm2 = qpm.subMap.get( \"ab\" );\n    assertFalse( qpm2.terminal );\n    assertEquals( 1, qpm2.subMap.size() );\n    assertNotNull( qpm2.subMap.get( \"bc\" ) );\n    QueryPhraseMap qpm3 = qpm2.subMap.get( \"bc\" );\n    assertTrue( qpm3.terminal );\n    assertEquals( 1F, qpm3.boost );\n\n    // \"ab bc cd\"\n    assertEquals( 1, qpm3.subMap.size() );\n    assertNotNull( qpm3.subMap.get( \"cd\" ) );\n    QueryPhraseMap qpm4 = qpm3.subMap.get( \"cd\" );\n    assertTrue( qpm4.terminal );\n    assertEquals( 1F, qpm4.boost );\n\n    // \"bc cd\"\n    assertNotNull( qpm.subMap.get( \"bc\" ) );\n    qpm2 = qpm.subMap.get( \"bc\" );\n    assertFalse( qpm2.terminal );\n    assertEquals( 1, qpm2.subMap.size() );\n    assertNotNull( qpm2.subMap.get( \"cd\" ) );\n    qpm3 = qpm2.subMap.get( \"cd\" );\n    assertTrue( qpm3.terminal );\n    assertEquals( 1F, qpm3.boost );\n    \n    // phraseHighlight = false, fieldMatch = true\n    fq = new FieldQuery( query, false, true );\n    map = fq.rootMaps;\n    assertEquals( 1, map.size() );\n    assertNull( map.get( null ) );\n    assertNotNull( map.get( F ) );\n    qpm = map.get( F );\n    assertEquals( 3, qpm.subMap.size() );\n\n    // \"ab bc\"\n    assertNotNull( qpm.subMap.get( \"ab\" ) );\n    qpm2 = qpm.subMap.get( \"ab\" );\n    assertTrue( qpm2.terminal );\n    assertEquals( 1F, qpm2.boost );\n    assertEquals( 1, qpm2.subMap.size() );\n    assertNotNull( qpm2.subMap.get( \"bc\" ) );\n    qpm3 = qpm2.subMap.get( \"bc\" );\n    assertTrue( qpm3.terminal );\n    assertEquals( 1F, qpm3.boost );\n\n    // \"ab bc cd\"\n    assertEquals( 1, qpm3.subMap.size() );\n    assertNotNull( qpm3.subMap.get( \"cd\" ) );\n    qpm4 = qpm3.subMap.get( \"cd\" );\n    assertTrue( qpm4.terminal );\n    assertEquals( 1F, qpm4.boost );\n\n    // \"bc cd\"\n    assertNotNull( qpm.subMap.get( \"bc\" ) );\n    qpm2 = qpm.subMap.get( \"bc\" );\n    assertTrue( qpm2.terminal );\n    assertEquals( 1F, qpm2.boost );\n    assertEquals( 1, qpm2.subMap.size() );\n    assertNotNull( qpm2.subMap.get( \"cd\" ) );\n    qpm3 = qpm2.subMap.get( \"cd\" );\n    assertTrue( qpm3.terminal );\n    assertEquals( 1F, qpm3.boost );\n\n    // \"cd\"\n    assertNotNull( qpm.subMap.get( \"cd\" ) );\n    qpm2 = qpm.subMap.get( \"cd\" );\n    assertTrue( qpm2.terminal );\n    assertEquals( 1F, qpm2.boost );\n    assertEquals( 0, qpm2.subMap.size() );\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"9454a6510e2db155fb01faa5c049b06ece95fab9","date":1453508333,"type":5,"author":"Dawid Weiss","isMerge":false,"pathNew":"lucene/contrib/fast-vector-highlighter/src/test/org/apache/lucene/search/vectorhighlight/FieldQueryTest#testQueryPhraseMapOverlap2gram().mjava","pathOld":"contrib/fast-vector-highlighter/src/test/org/apache/lucene/search/vectorhighlight/FieldQueryTest#testQueryPhraseMapOverlap2gram().mjava","sourceNew":"  public void testQueryPhraseMapOverlap2gram() throws Exception {\n    Query query = paB.parse( \"abc AND bcd\" );\n    \n    // phraseHighlight = true, fieldMatch = true\n    FieldQuery fq = new FieldQuery( query, true, true );\n    Map<String, QueryPhraseMap> map = fq.rootMaps;\n    assertEquals( 1, map.size() );\n    assertNull( map.get( null ) );\n    assertNotNull( map.get( F ) );\n    QueryPhraseMap qpm = map.get( F );\n    assertEquals( 2, qpm.subMap.size() );\n\n    // \"ab bc\"\n    assertNotNull( qpm.subMap.get( \"ab\" ) );\n    QueryPhraseMap qpm2 = qpm.subMap.get( \"ab\" );\n    assertFalse( qpm2.terminal );\n    assertEquals( 1, qpm2.subMap.size() );\n    assertNotNull( qpm2.subMap.get( \"bc\" ) );\n    QueryPhraseMap qpm3 = qpm2.subMap.get( \"bc\" );\n    assertTrue( qpm3.terminal );\n    assertEquals( 1F, qpm3.boost );\n\n    // \"ab bc cd\"\n    assertEquals( 1, qpm3.subMap.size() );\n    assertNotNull( qpm3.subMap.get( \"cd\" ) );\n    QueryPhraseMap qpm4 = qpm3.subMap.get( \"cd\" );\n    assertTrue( qpm4.terminal );\n    assertEquals( 1F, qpm4.boost );\n\n    // \"bc cd\"\n    assertNotNull( qpm.subMap.get( \"bc\" ) );\n    qpm2 = qpm.subMap.get( \"bc\" );\n    assertFalse( qpm2.terminal );\n    assertEquals( 1, qpm2.subMap.size() );\n    assertNotNull( qpm2.subMap.get( \"cd\" ) );\n    qpm3 = qpm2.subMap.get( \"cd\" );\n    assertTrue( qpm3.terminal );\n    assertEquals( 1F, qpm3.boost );\n    \n    // phraseHighlight = false, fieldMatch = true\n    fq = new FieldQuery( query, false, true );\n    map = fq.rootMaps;\n    assertEquals( 1, map.size() );\n    assertNull( map.get( null ) );\n    assertNotNull( map.get( F ) );\n    qpm = map.get( F );\n    assertEquals( 3, qpm.subMap.size() );\n\n    // \"ab bc\"\n    assertNotNull( qpm.subMap.get( \"ab\" ) );\n    qpm2 = qpm.subMap.get( \"ab\" );\n    assertTrue( qpm2.terminal );\n    assertEquals( 1F, qpm2.boost );\n    assertEquals( 1, qpm2.subMap.size() );\n    assertNotNull( qpm2.subMap.get( \"bc\" ) );\n    qpm3 = qpm2.subMap.get( \"bc\" );\n    assertTrue( qpm3.terminal );\n    assertEquals( 1F, qpm3.boost );\n\n    // \"ab bc cd\"\n    assertEquals( 1, qpm3.subMap.size() );\n    assertNotNull( qpm3.subMap.get( \"cd\" ) );\n    qpm4 = qpm3.subMap.get( \"cd\" );\n    assertTrue( qpm4.terminal );\n    assertEquals( 1F, qpm4.boost );\n\n    // \"bc cd\"\n    assertNotNull( qpm.subMap.get( \"bc\" ) );\n    qpm2 = qpm.subMap.get( \"bc\" );\n    assertTrue( qpm2.terminal );\n    assertEquals( 1F, qpm2.boost );\n    assertEquals( 1, qpm2.subMap.size() );\n    assertNotNull( qpm2.subMap.get( \"cd\" ) );\n    qpm3 = qpm2.subMap.get( \"cd\" );\n    assertTrue( qpm3.terminal );\n    assertEquals( 1F, qpm3.boost );\n\n    // \"cd\"\n    assertNotNull( qpm.subMap.get( \"cd\" ) );\n    qpm2 = qpm.subMap.get( \"cd\" );\n    assertTrue( qpm2.terminal );\n    assertEquals( 1F, qpm2.boost );\n    assertEquals( 0, qpm2.subMap.size() );\n  }\n\n","sourceOld":"  public void testQueryPhraseMapOverlap2gram() throws Exception {\n    Query query = paB.parse( \"abc AND bcd\" );\n    \n    // phraseHighlight = true, fieldMatch = true\n    FieldQuery fq = new FieldQuery( query, true, true );\n    Map<String, QueryPhraseMap> map = fq.rootMaps;\n    assertEquals( 1, map.size() );\n    assertNull( map.get( null ) );\n    assertNotNull( map.get( F ) );\n    QueryPhraseMap qpm = map.get( F );\n    assertEquals( 2, qpm.subMap.size() );\n\n    // \"ab bc\"\n    assertNotNull( qpm.subMap.get( \"ab\" ) );\n    QueryPhraseMap qpm2 = qpm.subMap.get( \"ab\" );\n    assertFalse( qpm2.terminal );\n    assertEquals( 1, qpm2.subMap.size() );\n    assertNotNull( qpm2.subMap.get( \"bc\" ) );\n    QueryPhraseMap qpm3 = qpm2.subMap.get( \"bc\" );\n    assertTrue( qpm3.terminal );\n    assertEquals( 1F, qpm3.boost );\n\n    // \"ab bc cd\"\n    assertEquals( 1, qpm3.subMap.size() );\n    assertNotNull( qpm3.subMap.get( \"cd\" ) );\n    QueryPhraseMap qpm4 = qpm3.subMap.get( \"cd\" );\n    assertTrue( qpm4.terminal );\n    assertEquals( 1F, qpm4.boost );\n\n    // \"bc cd\"\n    assertNotNull( qpm.subMap.get( \"bc\" ) );\n    qpm2 = qpm.subMap.get( \"bc\" );\n    assertFalse( qpm2.terminal );\n    assertEquals( 1, qpm2.subMap.size() );\n    assertNotNull( qpm2.subMap.get( \"cd\" ) );\n    qpm3 = qpm2.subMap.get( \"cd\" );\n    assertTrue( qpm3.terminal );\n    assertEquals( 1F, qpm3.boost );\n    \n    // phraseHighlight = false, fieldMatch = true\n    fq = new FieldQuery( query, false, true );\n    map = fq.rootMaps;\n    assertEquals( 1, map.size() );\n    assertNull( map.get( null ) );\n    assertNotNull( map.get( F ) );\n    qpm = map.get( F );\n    assertEquals( 3, qpm.subMap.size() );\n\n    // \"ab bc\"\n    assertNotNull( qpm.subMap.get( \"ab\" ) );\n    qpm2 = qpm.subMap.get( \"ab\" );\n    assertTrue( qpm2.terminal );\n    assertEquals( 1F, qpm2.boost );\n    assertEquals( 1, qpm2.subMap.size() );\n    assertNotNull( qpm2.subMap.get( \"bc\" ) );\n    qpm3 = qpm2.subMap.get( \"bc\" );\n    assertTrue( qpm3.terminal );\n    assertEquals( 1F, qpm3.boost );\n\n    // \"ab bc cd\"\n    assertEquals( 1, qpm3.subMap.size() );\n    assertNotNull( qpm3.subMap.get( \"cd\" ) );\n    qpm4 = qpm3.subMap.get( \"cd\" );\n    assertTrue( qpm4.terminal );\n    assertEquals( 1F, qpm4.boost );\n\n    // \"bc cd\"\n    assertNotNull( qpm.subMap.get( \"bc\" ) );\n    qpm2 = qpm.subMap.get( \"bc\" );\n    assertTrue( qpm2.terminal );\n    assertEquals( 1F, qpm2.boost );\n    assertEquals( 1, qpm2.subMap.size() );\n    assertNotNull( qpm2.subMap.get( \"cd\" ) );\n    qpm3 = qpm2.subMap.get( \"cd\" );\n    assertTrue( qpm3.terminal );\n    assertEquals( 1F, qpm3.boost );\n\n    // \"cd\"\n    assertNotNull( qpm.subMap.get( \"cd\" ) );\n    qpm2 = qpm.subMap.get( \"cd\" );\n    assertTrue( qpm2.terminal );\n    assertEquals( 1F, qpm2.boost );\n    assertEquals( 0, qpm2.subMap.size() );\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"d64148a458eb3ddf4d1bb1f1753cb9af194e1707":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["9454a6510e2db155fb01faa5c049b06ece95fab9"],"9454a6510e2db155fb01faa5c049b06ece95fab9":["d64148a458eb3ddf4d1bb1f1753cb9af194e1707"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["d64148a458eb3ddf4d1bb1f1753cb9af194e1707"],"d64148a458eb3ddf4d1bb1f1753cb9af194e1707":["9454a6510e2db155fb01faa5c049b06ece95fab9"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[],"9454a6510e2db155fb01faa5c049b06ece95fab9":["cd5edd1f2b162a5cfa08efd17851a07373a96817"]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}