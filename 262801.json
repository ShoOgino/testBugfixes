{"path":"solr/core/src/test/org/apache/solr/cloud/TestTolerantUpdateProcessorRandomCloud#allDocs(SolrClient,int).mjava","commits":[{"id":"f57cf082c4d2ee975c6a2034fcf3c13f9514e6ef","date":1458928975,"type":0,"author":"Chris Hostetter","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/TestTolerantUpdateProcessorRandomCloud#allDocs(SolrClient,int).mjava","pathOld":"/dev/null","sourceNew":"  /** uses a Cursor to iterate over every doc in the index, recording the 'id_i' value in a BitSet */\n  private static final BitSet allDocs(final SolrClient c, final int maxDocIdExpected) throws Exception {\n    BitSet docs = new BitSet(maxDocIdExpected+1);\n    String cursorMark = CURSOR_MARK_START;\n    int docsOnThisPage = Integer.MAX_VALUE;\n    while (0 < docsOnThisPage) {\n      final SolrParams p = params(\"q\",\"*:*\",\n                                  \"rows\",\"100\",\n                                  // note: not numeric, but we don't actual care about the order\n                                  \"sort\", \"id asc\",\n                                  CURSOR_MARK_PARAM, cursorMark);\n      QueryResponse rsp = c.query(p);\n      cursorMark = rsp.getNextCursorMark();\n      docsOnThisPage = 0;\n      for (SolrDocument doc : rsp.getResults()) {\n        docsOnThisPage++;\n        int id_i = ((Integer)doc.get(\"id_i\")).intValue();\n        assertTrue(\"found id_i bigger then expected \"+maxDocIdExpected+\": \" + id_i,\n                   id_i <= maxDocIdExpected);\n        docs.set(id_i);\n      }\n      cursorMark = rsp.getNextCursorMark();\n    }\n    return docs;\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"f57cf082c4d2ee975c6a2034fcf3c13f9514e6ef":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["f57cf082c4d2ee975c6a2034fcf3c13f9514e6ef"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["f57cf082c4d2ee975c6a2034fcf3c13f9514e6ef"],"f57cf082c4d2ee975c6a2034fcf3c13f9514e6ef":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}