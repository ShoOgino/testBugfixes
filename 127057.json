{"path":"solr/core/src/test/org/apache/solr/handler/component/DistributedFacetPivotLargeTest#setupDistributedPivotFacetDocuments().mjava","commits":[{"id":"92751ba9273251eab6a2e379ec42a1697a32ff96","date":1407954233,"type":0,"author":"Chris M. Hostetter","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/handler/component/DistributedFacetPivotLargeTest#setupDistributedPivotFacetDocuments().mjava","pathOld":"/dev/null","sourceNew":"  private void setupDistributedPivotFacetDocuments() throws Exception{\n    \n    //Clear docs\n    del(\"*:*\");\n    commit();\n\n    final int maxDocs = 50;\n    final SolrServer zeroShard = clients.get(0);\n    final SolrServer oneShard = clients.get(1);\n    final SolrServer twoShard = clients.get(2);\n    final SolrServer threeShard = clients.get(3); // edge case: never gets any matching docs\n\n    for(Integer i=0;i<maxDocs;i++){//50 entries\n      addPivotDoc(zeroShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",2400,\"hiredate_dt\", \"2012-07-01T12:30:00Z\",\"real_b\",\"true\");\n      addPivotDoc(zeroShard, \"id\", getDocNum(), \"place_s\", \"medical staffing network holdings, inc.\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",2400,\"hiredate_dt\", \"2012-07-01T12:30:00Z\");\n      \n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"placeholder\"+i, \"company_t\", \"compHolder\"+i,\"pay_i\",24*i,\"hiredate_dt\", \"2012-08-01T12:30:00Z\");\n      \n      addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"bbc honda\",\"pay_i\",2400,\"hiredate_dt\", \"2012-09-01T12:30:00Z\",\"real_b\",\"true\");\n      addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"compHolder\"+i,\"pay_i\",22*i,\"hiredate_dt\", \"2012-09-01T12:30:00Z\",\"real_b\",\"true\");\n      addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"compHolder\"+i,\"pay_i\",21*i,\"hiredate_dt\", \"2012-09-01T12:30:00Z\",\"real_b\",\"true\");\n      addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"compHolder\"+i,\"pay_i\",20*i,\"hiredate_dt\", \"2012-09-01T12:30:00Z\",\"real_b\",\"true\");\n      \n      //For the filler content\n      //Fifty places with 6 results each\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",2400,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",3100,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",3400,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",5400,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",6400,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",2000,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n\n    }\n\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft\",\"pay_i\",4367,\"hiredate_dt\", \"2012-11-01T12:30:00Z\");\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft bbc\",\"pay_i\",8742,\"hiredate_dt\", \"2012-11-01T12:30:00Z\");\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft polecat\",\"pay_i\",5824,\"hiredate_dt\", \"2012-11-01T12:30:00Z\");\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft \",\"pay_i\",6539,\"hiredate_dt\", \"2012-11-01T12:30:00Z\"); \n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"medical staffing network holdings, inc.\", \"company_t\", \"microsoft \",\"pay_i\",6539,\"hiredate_dt\", \"2012-11-01T12:30:00Z\", \"special_s\", \"xxx\");\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"polecat\",\"pay_i\",4352,\"hiredate_dt\", \"2012-1-01T12:30:00Z\", \"special_s\", \"xxx\"); \n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"krakaw\", \"company_t\", \"polecat\",\"pay_i\",4352,\"hiredate_dt\", \"2012-11-01T12:30:00Z\", \"special_s\", SPECIAL); \n    \n    addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft\",\"pay_i\",12,\"hiredate_dt\", \"2012-11-01T12:30:00Z\", \"special_s\", SPECIAL);\n    addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft\",\"pay_i\",543,\"hiredate_dt\", \"2012-11-01T12:30:00Z\", \"special_s\", SPECIAL);\n\n\n    // two really trivial documents, unrelated to the rest of the tests, \n    // for the purpose of demoing the porblem with mincount=0\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"top_s\", \"aaa\", \"sub_s\", \"bbb\" );\n    addPivotDoc(twoShard, \"id\", getDocNum(), \"top_s\", \"xxx\", \"sub_s\", \"yyy\" );\n\n      \n    commit();\n\n    assertEquals(\"shard #3 should never have any docs\",\n                 0, threeShard.query(params(\"q\", \"*:*\")).getResults().getNumFound());\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"bafca15d8e408346a67f4282ad1143b88023893b","date":1420034748,"type":3,"author":"Alan Woodward","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/handler/component/DistributedFacetPivotLargeTest#setupDistributedPivotFacetDocuments().mjava","pathOld":"solr/core/src/test/org/apache/solr/handler/component/DistributedFacetPivotLargeTest#setupDistributedPivotFacetDocuments().mjava","sourceNew":"  private void setupDistributedPivotFacetDocuments() throws Exception{\n    \n    //Clear docs\n    del(\"*:*\");\n    commit();\n\n    final int maxDocs = 50;\n    final SolrClient zeroShard = clients.get(0);\n    final SolrClient oneShard = clients.get(1);\n    final SolrClient twoShard = clients.get(2);\n    final SolrClient threeShard = clients.get(3); // edge case: never gets any matching docs\n\n    for(Integer i=0;i<maxDocs;i++){//50 entries\n      addPivotDoc(zeroShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",2400,\"hiredate_dt\", \"2012-07-01T12:30:00Z\",\"real_b\",\"true\");\n      addPivotDoc(zeroShard, \"id\", getDocNum(), \"place_s\", \"medical staffing network holdings, inc.\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",2400,\"hiredate_dt\", \"2012-07-01T12:30:00Z\");\n      \n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"placeholder\"+i, \"company_t\", \"compHolder\"+i,\"pay_i\",24*i,\"hiredate_dt\", \"2012-08-01T12:30:00Z\");\n      \n      addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"bbc honda\",\"pay_i\",2400,\"hiredate_dt\", \"2012-09-01T12:30:00Z\",\"real_b\",\"true\");\n      addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"compHolder\"+i,\"pay_i\",22*i,\"hiredate_dt\", \"2012-09-01T12:30:00Z\",\"real_b\",\"true\");\n      addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"compHolder\"+i,\"pay_i\",21*i,\"hiredate_dt\", \"2012-09-01T12:30:00Z\",\"real_b\",\"true\");\n      addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"compHolder\"+i,\"pay_i\",20*i,\"hiredate_dt\", \"2012-09-01T12:30:00Z\",\"real_b\",\"true\");\n      \n      //For the filler content\n      //Fifty places with 6 results each\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",2400,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",3100,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",3400,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",5400,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",6400,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",2000,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n\n    }\n\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft\",\"pay_i\",4367,\"hiredate_dt\", \"2012-11-01T12:30:00Z\");\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft bbc\",\"pay_i\",8742,\"hiredate_dt\", \"2012-11-01T12:30:00Z\");\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft polecat\",\"pay_i\",5824,\"hiredate_dt\", \"2012-11-01T12:30:00Z\");\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft \",\"pay_i\",6539,\"hiredate_dt\", \"2012-11-01T12:30:00Z\"); \n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"medical staffing network holdings, inc.\", \"company_t\", \"microsoft \",\"pay_i\",6539,\"hiredate_dt\", \"2012-11-01T12:30:00Z\", \"special_s\", \"xxx\");\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"polecat\",\"pay_i\",4352,\"hiredate_dt\", \"2012-1-01T12:30:00Z\", \"special_s\", \"xxx\"); \n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"krakaw\", \"company_t\", \"polecat\",\"pay_i\",4352,\"hiredate_dt\", \"2012-11-01T12:30:00Z\", \"special_s\", SPECIAL); \n    \n    addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft\",\"pay_i\",12,\"hiredate_dt\", \"2012-11-01T12:30:00Z\", \"special_s\", SPECIAL);\n    addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft\",\"pay_i\",543,\"hiredate_dt\", \"2012-11-01T12:30:00Z\", \"special_s\", SPECIAL);\n\n\n    // two really trivial documents, unrelated to the rest of the tests, \n    // for the purpose of demoing the porblem with mincount=0\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"top_s\", \"aaa\", \"sub_s\", \"bbb\" );\n    addPivotDoc(twoShard, \"id\", getDocNum(), \"top_s\", \"xxx\", \"sub_s\", \"yyy\" );\n\n      \n    commit();\n\n    assertEquals(\"shard #3 should never have any docs\",\n                 0, threeShard.query(params(\"q\", \"*:*\")).getResults().getNumFound());\n  }\n\n","sourceOld":"  private void setupDistributedPivotFacetDocuments() throws Exception{\n    \n    //Clear docs\n    del(\"*:*\");\n    commit();\n\n    final int maxDocs = 50;\n    final SolrServer zeroShard = clients.get(0);\n    final SolrServer oneShard = clients.get(1);\n    final SolrServer twoShard = clients.get(2);\n    final SolrServer threeShard = clients.get(3); // edge case: never gets any matching docs\n\n    for(Integer i=0;i<maxDocs;i++){//50 entries\n      addPivotDoc(zeroShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",2400,\"hiredate_dt\", \"2012-07-01T12:30:00Z\",\"real_b\",\"true\");\n      addPivotDoc(zeroShard, \"id\", getDocNum(), \"place_s\", \"medical staffing network holdings, inc.\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",2400,\"hiredate_dt\", \"2012-07-01T12:30:00Z\");\n      \n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"placeholder\"+i, \"company_t\", \"compHolder\"+i,\"pay_i\",24*i,\"hiredate_dt\", \"2012-08-01T12:30:00Z\");\n      \n      addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"bbc honda\",\"pay_i\",2400,\"hiredate_dt\", \"2012-09-01T12:30:00Z\",\"real_b\",\"true\");\n      addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"compHolder\"+i,\"pay_i\",22*i,\"hiredate_dt\", \"2012-09-01T12:30:00Z\",\"real_b\",\"true\");\n      addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"compHolder\"+i,\"pay_i\",21*i,\"hiredate_dt\", \"2012-09-01T12:30:00Z\",\"real_b\",\"true\");\n      addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"compHolder\"+i,\"pay_i\",20*i,\"hiredate_dt\", \"2012-09-01T12:30:00Z\",\"real_b\",\"true\");\n      \n      //For the filler content\n      //Fifty places with 6 results each\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",2400,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",3100,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",3400,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",5400,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",6400,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",2000,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n\n    }\n\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft\",\"pay_i\",4367,\"hiredate_dt\", \"2012-11-01T12:30:00Z\");\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft bbc\",\"pay_i\",8742,\"hiredate_dt\", \"2012-11-01T12:30:00Z\");\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft polecat\",\"pay_i\",5824,\"hiredate_dt\", \"2012-11-01T12:30:00Z\");\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft \",\"pay_i\",6539,\"hiredate_dt\", \"2012-11-01T12:30:00Z\"); \n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"medical staffing network holdings, inc.\", \"company_t\", \"microsoft \",\"pay_i\",6539,\"hiredate_dt\", \"2012-11-01T12:30:00Z\", \"special_s\", \"xxx\");\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"polecat\",\"pay_i\",4352,\"hiredate_dt\", \"2012-1-01T12:30:00Z\", \"special_s\", \"xxx\"); \n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"krakaw\", \"company_t\", \"polecat\",\"pay_i\",4352,\"hiredate_dt\", \"2012-11-01T12:30:00Z\", \"special_s\", SPECIAL); \n    \n    addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft\",\"pay_i\",12,\"hiredate_dt\", \"2012-11-01T12:30:00Z\", \"special_s\", SPECIAL);\n    addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft\",\"pay_i\",543,\"hiredate_dt\", \"2012-11-01T12:30:00Z\", \"special_s\", SPECIAL);\n\n\n    // two really trivial documents, unrelated to the rest of the tests, \n    // for the purpose of demoing the porblem with mincount=0\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"top_s\", \"aaa\", \"sub_s\", \"bbb\" );\n    addPivotDoc(twoShard, \"id\", getDocNum(), \"top_s\", \"xxx\", \"sub_s\", \"yyy\" );\n\n      \n    commit();\n\n    assertEquals(\"shard #3 should never have any docs\",\n                 0, threeShard.query(params(\"q\", \"*:*\")).getResults().getNumFound());\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"d3f6c7717a0f1decd1668144537943efcc70cd95","date":1459359762,"type":3,"author":"David Smiley","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/handler/component/DistributedFacetPivotLargeTest#setupDistributedPivotFacetDocuments().mjava","pathOld":"solr/core/src/test/org/apache/solr/handler/component/DistributedFacetPivotLargeTest#setupDistributedPivotFacetDocuments().mjava","sourceNew":"  private void setupDistributedPivotFacetDocuments() throws Exception{\n    \n    //Clear docs\n    del(\"*:*\");\n    commit();\n\n    final int maxDocs = 50;\n    final SolrClient zeroShard = clients.get(0);\n    final SolrClient oneShard = clients.get(1);\n    final SolrClient twoShard = clients.get(2);\n    final SolrClient threeShard = clients.get(3); // edge case: never gets any matching docs\n\n    for(Integer i=0;i<maxDocs;i++){//50 entries\n      addPivotDoc(zeroShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",2400,\"hiredate_dt\", \"2012-07-01T12:30:00Z\",\"real_b\",\"true\");\n      addPivotDoc(zeroShard, \"id\", getDocNum(), \"place_s\", \"medical staffing network holdings, inc.\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",2400,\"hiredate_dt\", \"2012-07-01T12:30:00Z\");\n      \n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"placeholder\"+i, \"company_t\", \"compHolder\"+i,\"pay_i\",24*i,\"hiredate_dt\", \"2012-08-01T12:30:00Z\");\n      \n      addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"bbc honda\",\"pay_i\",2400,\"hiredate_dt\", \"2012-09-01T12:30:00Z\",\"real_b\",\"true\");\n      addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"compHolder\"+i,\"pay_i\",22*i,\"hiredate_dt\", \"2012-09-01T12:30:00Z\",\"real_b\",\"true\");\n      addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"compHolder\"+i,\"pay_i\",21*i,\"hiredate_dt\", \"2012-09-01T12:30:00Z\",\"real_b\",\"true\");\n      addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"compHolder\"+i,\"pay_i\",20*i,\"hiredate_dt\", \"2012-09-01T12:30:00Z\",\"real_b\",\"true\");\n      \n      //For the filler content\n      //Fifty places with 6 results each\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",2400,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",3100,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",3400,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",5400,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",6400,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",2000,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n\n    }\n\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft\",\"pay_i\",4367,\"hiredate_dt\", \"2012-11-01T12:30:00Z\");\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft bbc\",\"pay_i\",8742,\"hiredate_dt\", \"2012-11-01T12:30:00Z\");\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft polecat\",\"pay_i\",5824,\"hiredate_dt\", \"2012-11-01T12:30:00Z\");\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft \",\"pay_i\",6539,\"hiredate_dt\", \"2012-11-01T12:30:00Z\"); \n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"medical staffing network holdings, inc.\", \"company_t\", \"microsoft \",\"pay_i\",6539,\"hiredate_dt\", \"2012-11-01T12:30:00Z\", \"special_s\", \"xxx\");\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"polecat\",\"pay_i\",4352,\"hiredate_dt\", \"2012-01-01T12:30:00Z\", \"special_s\", \"xxx\");\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"krakaw\", \"company_t\", \"polecat\",\"pay_i\",4352,\"hiredate_dt\", \"2012-11-01T12:30:00Z\", \"special_s\", SPECIAL); \n    \n    addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft\",\"pay_i\",12,\"hiredate_dt\", \"2012-11-01T12:30:00Z\", \"special_s\", SPECIAL);\n    addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft\",\"pay_i\",543,\"hiredate_dt\", \"2012-11-01T12:30:00Z\", \"special_s\", SPECIAL);\n\n\n    // two really trivial documents, unrelated to the rest of the tests, \n    // for the purpose of demoing the porblem with mincount=0\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"top_s\", \"aaa\", \"sub_s\", \"bbb\" );\n    addPivotDoc(twoShard, \"id\", getDocNum(), \"top_s\", \"xxx\", \"sub_s\", \"yyy\" );\n\n      \n    commit();\n\n    assertEquals(\"shard #3 should never have any docs\",\n                 0, threeShard.query(params(\"q\", \"*:*\")).getResults().getNumFound());\n  }\n\n","sourceOld":"  private void setupDistributedPivotFacetDocuments() throws Exception{\n    \n    //Clear docs\n    del(\"*:*\");\n    commit();\n\n    final int maxDocs = 50;\n    final SolrClient zeroShard = clients.get(0);\n    final SolrClient oneShard = clients.get(1);\n    final SolrClient twoShard = clients.get(2);\n    final SolrClient threeShard = clients.get(3); // edge case: never gets any matching docs\n\n    for(Integer i=0;i<maxDocs;i++){//50 entries\n      addPivotDoc(zeroShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",2400,\"hiredate_dt\", \"2012-07-01T12:30:00Z\",\"real_b\",\"true\");\n      addPivotDoc(zeroShard, \"id\", getDocNum(), \"place_s\", \"medical staffing network holdings, inc.\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",2400,\"hiredate_dt\", \"2012-07-01T12:30:00Z\");\n      \n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"placeholder\"+i, \"company_t\", \"compHolder\"+i,\"pay_i\",24*i,\"hiredate_dt\", \"2012-08-01T12:30:00Z\");\n      \n      addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"bbc honda\",\"pay_i\",2400,\"hiredate_dt\", \"2012-09-01T12:30:00Z\",\"real_b\",\"true\");\n      addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"compHolder\"+i,\"pay_i\",22*i,\"hiredate_dt\", \"2012-09-01T12:30:00Z\",\"real_b\",\"true\");\n      addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"compHolder\"+i,\"pay_i\",21*i,\"hiredate_dt\", \"2012-09-01T12:30:00Z\",\"real_b\",\"true\");\n      addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"compHolder\"+i,\"pay_i\",20*i,\"hiredate_dt\", \"2012-09-01T12:30:00Z\",\"real_b\",\"true\");\n      \n      //For the filler content\n      //Fifty places with 6 results each\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",2400,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",3100,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",3400,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",5400,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",6400,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n      addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", i+\"placeholder\", \"company_t\", \"microsoft polecat bbc\",\"pay_i\",2000,\"hiredate_dt\", \"2012-10-01T12:30:00Z\",\"real_b\",\"false\");\n\n    }\n\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft\",\"pay_i\",4367,\"hiredate_dt\", \"2012-11-01T12:30:00Z\");\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft bbc\",\"pay_i\",8742,\"hiredate_dt\", \"2012-11-01T12:30:00Z\");\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft polecat\",\"pay_i\",5824,\"hiredate_dt\", \"2012-11-01T12:30:00Z\");\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft \",\"pay_i\",6539,\"hiredate_dt\", \"2012-11-01T12:30:00Z\"); \n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"medical staffing network holdings, inc.\", \"company_t\", \"microsoft \",\"pay_i\",6539,\"hiredate_dt\", \"2012-11-01T12:30:00Z\", \"special_s\", \"xxx\");\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"polecat\",\"pay_i\",4352,\"hiredate_dt\", \"2012-1-01T12:30:00Z\", \"special_s\", \"xxx\"); \n    addPivotDoc(oneShard, \"id\", getDocNum(), \"place_s\", \"krakaw\", \"company_t\", \"polecat\",\"pay_i\",4352,\"hiredate_dt\", \"2012-11-01T12:30:00Z\", \"special_s\", SPECIAL); \n    \n    addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft\",\"pay_i\",12,\"hiredate_dt\", \"2012-11-01T12:30:00Z\", \"special_s\", SPECIAL);\n    addPivotDoc(twoShard, \"id\", getDocNum(), \"place_s\", \"cardiff\", \"company_t\", \"microsoft\",\"pay_i\",543,\"hiredate_dt\", \"2012-11-01T12:30:00Z\", \"special_s\", SPECIAL);\n\n\n    // two really trivial documents, unrelated to the rest of the tests, \n    // for the purpose of demoing the porblem with mincount=0\n    addPivotDoc(oneShard, \"id\", getDocNum(), \"top_s\", \"aaa\", \"sub_s\", \"bbb\" );\n    addPivotDoc(twoShard, \"id\", getDocNum(), \"top_s\", \"xxx\", \"sub_s\", \"yyy\" );\n\n      \n    commit();\n\n    assertEquals(\"shard #3 should never have any docs\",\n                 0, threeShard.query(params(\"q\", \"*:*\")).getResults().getNumFound());\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"92751ba9273251eab6a2e379ec42a1697a32ff96":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"d3f6c7717a0f1decd1668144537943efcc70cd95":["bafca15d8e408346a67f4282ad1143b88023893b"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"bafca15d8e408346a67f4282ad1143b88023893b":["92751ba9273251eab6a2e379ec42a1697a32ff96"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["d3f6c7717a0f1decd1668144537943efcc70cd95"]},"commit2Childs":{"92751ba9273251eab6a2e379ec42a1697a32ff96":["bafca15d8e408346a67f4282ad1143b88023893b"],"d3f6c7717a0f1decd1668144537943efcc70cd95":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["92751ba9273251eab6a2e379ec42a1697a32ff96"],"bafca15d8e408346a67f4282ad1143b88023893b":["d3f6c7717a0f1decd1668144537943efcc70cd95"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}