{"path":"solr/core/src/java/org/apache/solr/handler/component/PivotFacetField#PivotFacetField(ResponseBuilder,PivotFacetValue,String).mjava","commits":[{"id":"92751ba9273251eab6a2e379ec42a1697a32ff96","date":1407954233,"type":0,"author":"Chris M. Hostetter","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/handler/component/PivotFacetField#PivotFacetField(ResponseBuilder,PivotFacetValue,String).mjava","pathOld":"/dev/null","sourceNew":"  private PivotFacetField(ResponseBuilder rb, PivotFacetValue parent, String fieldName) {\n    \n    field = fieldName;\n    parentValue = parent;\n    \n    // facet params\n    SolrParams parameters = rb.req.getParams();\n    facetFieldMinimumCount = parameters.getFieldInt(field, FacetParams.FACET_PIVOT_MINCOUNT, 1);\n    facetFieldOffset = parameters.getFieldInt(field, FacetParams.FACET_OFFSET, 0);\n    facetFieldLimit = parameters.getFieldInt(field, FacetParams.FACET_LIMIT, 100);\n    String defaultSort = (facetFieldLimit > 0) ? FacetParams.FACET_SORT_COUNT : FacetParams.FACET_SORT_INDEX;\n    facetFieldSort = parameters.getFieldParam(field, FacetParams.FACET_SORT, defaultSort);\n\n    valueCollection = new PivotFacetFieldValueCollection(facetFieldMinimumCount, facetFieldOffset, facetFieldLimit, facetFieldSort);\n    \n    if ( (facetFieldLimit < 0) || \n         // TODO: possible refinement issue if limit=0 & mincount=0 & missing=true\n         // (ie: we only want the missing count for this field)\n         (facetFieldLimit <= 0 && facetFieldMinimumCount == 0) ||\n         (facetFieldSort.equals(FacetParams.FACET_SORT_INDEX) && facetFieldMinimumCount <= 0) \n         ) {\n      // in any of these cases, there's no need to refine this level of the pivot\n      needRefinementAtThisLevel = false;\n    }\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"92751ba9273251eab6a2e379ec42a1697a32ff96":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["92751ba9273251eab6a2e379ec42a1697a32ff96"]},"commit2Childs":{"92751ba9273251eab6a2e379ec42a1697a32ff96":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["92751ba9273251eab6a2e379ec42a1697a32ff96"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}