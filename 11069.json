{"path":"solr/core/src/test/org/apache/solr/cloud/autoscaling/AutoAddReplicasPlanActionTest#assertOperations(String,List[SolrRequest],String,List[CloudDescriptor],JettySolrRunner).mjava","commits":[{"id":"5ce607fb6b5358969d344ac8e2ce3a79ff5bc6d1","date":1498792294,"type":1,"author":"Cao Manh Dat","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/autoscaling/AutoAddReplicasPlanActionTest#assertOperations(String,List[SolrRequest],String,List[CloudDescriptor],JettySolrRunner).mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/autoscaling/AutoAddReplicasPlanActionTest#assertOperations(String,List[SolrRequest],String,Set[String],JettySolrRunner).mjava","sourceNew":"  private void assertOperations(String collection, List<SolrRequest> operations, String lostNodeName,\n                                List<CloudDescriptor> cloudDescriptors, JettySolrRunner destJetty) {\n    assertEquals(\"Replicas of \" + collection + \" is not fully moved, operations=\"+operations,\n        cloudDescriptors.stream().filter(cd -> cd.getCollectionName().equals(collection)).count(), operations.size());\n    for (SolrRequest solrRequest : operations) {\n      assertTrue(solrRequest instanceof CollectionAdminRequest.MoveReplica);\n      SolrParams params = solrRequest.getParams();\n\n      assertEquals(params.get(\"collection\"), collection);\n\n      String replica = params.get(\"replica\");\n      boolean found = false;\n      Iterator<CloudDescriptor> it = cloudDescriptors.iterator();\n      while (it.hasNext()) {\n        CloudDescriptor cd = it.next();\n        if (cd.getCollectionName().equals(collection) && cd.getCoreNodeName().equals(replica)) {\n          found = true;\n          it.remove();\n          break;\n        }\n      }\n      assertTrue(\"Can not find \"+replica+ \" in node \" + lostNodeName, found);\n\n      String targetNode = params.get(\"targetNode\");\n      assertFalse(\"Target node match the lost one \" + lostNodeName, lostNodeName.equals(targetNode));\n      if (destJetty != null) {\n        assertEquals(\"Target node is not as expectation\", destJetty.getNodeName(), targetNode);\n      }\n    }\n\n    for (CloudDescriptor cd : cloudDescriptors) {\n      if (cd.getCollectionName().equals(collection)) {\n        fail(\"Exist replica which is not moved \" + cd);\n      }\n    }\n  }\n\n","sourceOld":"  private void assertOperations(String collection, List<SolrRequest> operations, String lostNodeName, Set<String> coreNodeNames, JettySolrRunner destJetty) {\n    assertEquals(\"Replicas of \" + collection + \" is not fully moved, operations=\"+operations,\n        2, operations.size());\n    for (SolrRequest solrRequest : operations) {\n      assertTrue(solrRequest instanceof CollectionAdminRequest.MoveReplica);\n      SolrParams params = solrRequest.getParams();\n\n      assertEquals(params.get(\"collection\"), collection);\n\n      String replica = params.get(\"replica\");\n      assertTrue(\"Can not find \"+replica+ \" in node \" + lostNodeName, coreNodeNames.contains(replica));\n\n      String targetNode = params.get(\"targetNode\");\n      assertFalse(\"Target node match the lost one \" + lostNodeName, lostNodeName.equals(targetNode));\n      if (destJetty != null) {\n        assertEquals(\"Target not is expected\", destJetty.getNodeName(), targetNode);\n      }\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"c304e97e7c1d472bc70e801b35ee78583916c6cd","date":1507105431,"type":0,"author":"Noble Paul","isMerge":true,"pathNew":"solr/core/src/test/org/apache/solr/cloud/autoscaling/AutoAddReplicasPlanActionTest#assertOperations(String,List[SolrRequest],String,List[CloudDescriptor],JettySolrRunner).mjava","pathOld":"/dev/null","sourceNew":"  private void assertOperations(String collection, List<SolrRequest> operations, String lostNodeName,\n                                List<CloudDescriptor> cloudDescriptors, JettySolrRunner destJetty) {\n    assertEquals(\"Replicas of \" + collection + \" is not fully moved, operations=\"+operations,\n        cloudDescriptors.stream().filter(cd -> cd.getCollectionName().equals(collection)).count(), operations.size());\n    for (SolrRequest solrRequest : operations) {\n      assertTrue(solrRequest instanceof CollectionAdminRequest.MoveReplica);\n      SolrParams params = solrRequest.getParams();\n\n      assertEquals(params.get(\"collection\"), collection);\n\n      String replica = params.get(\"replica\");\n      boolean found = false;\n      Iterator<CloudDescriptor> it = cloudDescriptors.iterator();\n      while (it.hasNext()) {\n        CloudDescriptor cd = it.next();\n        if (cd.getCollectionName().equals(collection) && cd.getCoreNodeName().equals(replica)) {\n          found = true;\n          it.remove();\n          break;\n        }\n      }\n      assertTrue(\"Can not find \"+replica+ \" in node \" + lostNodeName, found);\n\n      String targetNode = params.get(\"targetNode\");\n      assertFalse(\"Target node match the lost one \" + lostNodeName, lostNodeName.equals(targetNode));\n      if (destJetty != null) {\n        assertEquals(\"Target node is not as expectation\", destJetty.getNodeName(), targetNode);\n      }\n    }\n\n    for (CloudDescriptor cd : cloudDescriptors) {\n      if (cd.getCollectionName().equals(collection)) {\n        fail(\"Exist replica which is not moved \" + cd);\n      }\n    }\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"560c18d71dad43d675158783c3840f8c80d6d39c","date":1507105532,"type":0,"author":"Cao Manh Dat","isMerge":true,"pathNew":"solr/core/src/test/org/apache/solr/cloud/autoscaling/AutoAddReplicasPlanActionTest#assertOperations(String,List[SolrRequest],String,List[CloudDescriptor],JettySolrRunner).mjava","pathOld":"/dev/null","sourceNew":"  private void assertOperations(String collection, List<SolrRequest> operations, String lostNodeName,\n                                List<CloudDescriptor> cloudDescriptors, JettySolrRunner destJetty) {\n    assertEquals(\"Replicas of \" + collection + \" is not fully moved, operations=\"+operations,\n        cloudDescriptors.stream().filter(cd -> cd.getCollectionName().equals(collection)).count(), operations.size());\n    for (SolrRequest solrRequest : operations) {\n      assertTrue(solrRequest instanceof CollectionAdminRequest.MoveReplica);\n      SolrParams params = solrRequest.getParams();\n\n      assertEquals(params.get(\"collection\"), collection);\n\n      String replica = params.get(\"replica\");\n      boolean found = false;\n      Iterator<CloudDescriptor> it = cloudDescriptors.iterator();\n      while (it.hasNext()) {\n        CloudDescriptor cd = it.next();\n        if (cd.getCollectionName().equals(collection) && cd.getCoreNodeName().equals(replica)) {\n          found = true;\n          it.remove();\n          break;\n        }\n      }\n      assertTrue(\"Can not find \"+replica+ \" in node \" + lostNodeName, found);\n\n      String targetNode = params.get(\"targetNode\");\n      assertFalse(\"Target node match the lost one \" + lostNodeName, lostNodeName.equals(targetNode));\n      if (destJetty != null) {\n        assertEquals(\"Target node is not as expectation\", destJetty.getNodeName(), targetNode);\n      }\n    }\n\n    for (CloudDescriptor cd : cloudDescriptors) {\n      if (cd.getCollectionName().equals(collection)) {\n        fail(\"Exist replica which is not moved \" + cd);\n      }\n    }\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"aa2585c33d5d66a1c837c312221eb55ddb3c4300","date":1592493170,"type":3,"author":"Erick Erickson","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/autoscaling/AutoAddReplicasPlanActionTest#assertOperations(String,List[SolrRequest],String,List[CloudDescriptor],JettySolrRunner).mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/autoscaling/AutoAddReplicasPlanActionTest#assertOperations(String,List[SolrRequest],String,List[CloudDescriptor],JettySolrRunner).mjava","sourceNew":"  private void assertOperations(String collection,\n                                @SuppressWarnings({\"rawtypes\"})List<SolrRequest> operations, String lostNodeName,\n                                List<CloudDescriptor> cloudDescriptors, JettySolrRunner destJetty) {\n    assertEquals(\"Replicas of \" + collection + \" is not fully moved, operations=\"+operations,\n        cloudDescriptors.stream().filter(cd -> cd.getCollectionName().equals(collection)).count(), operations.size());\n    for (@SuppressWarnings({\"rawtypes\"})SolrRequest solrRequest : operations) {\n      assertTrue(solrRequest instanceof CollectionAdminRequest.MoveReplica);\n      SolrParams params = solrRequest.getParams();\n\n      assertEquals(params.get(\"collection\"), collection);\n\n      String replica = params.get(\"replica\");\n      boolean found = false;\n      Iterator<CloudDescriptor> it = cloudDescriptors.iterator();\n      while (it.hasNext()) {\n        CloudDescriptor cd = it.next();\n        if (cd.getCollectionName().equals(collection) && cd.getCoreNodeName().equals(replica)) {\n          found = true;\n          it.remove();\n          break;\n        }\n      }\n      assertTrue(\"Can not find \"+replica+ \" in node \" + lostNodeName, found);\n\n      String targetNode = params.get(\"targetNode\");\n      assertFalse(\"Target node match the lost one \" + lostNodeName, lostNodeName.equals(targetNode));\n      if (destJetty != null) {\n        assertEquals(\"Target node is not as expectation\", destJetty.getNodeName(), targetNode);\n      }\n    }\n\n    for (CloudDescriptor cd : cloudDescriptors) {\n      if (cd.getCollectionName().equals(collection)) {\n        fail(\"Exist replica which is not moved \" + cd);\n      }\n    }\n  }\n\n","sourceOld":"  private void assertOperations(String collection, List<SolrRequest> operations, String lostNodeName,\n                                List<CloudDescriptor> cloudDescriptors, JettySolrRunner destJetty) {\n    assertEquals(\"Replicas of \" + collection + \" is not fully moved, operations=\"+operations,\n        cloudDescriptors.stream().filter(cd -> cd.getCollectionName().equals(collection)).count(), operations.size());\n    for (SolrRequest solrRequest : operations) {\n      assertTrue(solrRequest instanceof CollectionAdminRequest.MoveReplica);\n      SolrParams params = solrRequest.getParams();\n\n      assertEquals(params.get(\"collection\"), collection);\n\n      String replica = params.get(\"replica\");\n      boolean found = false;\n      Iterator<CloudDescriptor> it = cloudDescriptors.iterator();\n      while (it.hasNext()) {\n        CloudDescriptor cd = it.next();\n        if (cd.getCollectionName().equals(collection) && cd.getCoreNodeName().equals(replica)) {\n          found = true;\n          it.remove();\n          break;\n        }\n      }\n      assertTrue(\"Can not find \"+replica+ \" in node \" + lostNodeName, found);\n\n      String targetNode = params.get(\"targetNode\");\n      assertFalse(\"Target node match the lost one \" + lostNodeName, lostNodeName.equals(targetNode));\n      if (destJetty != null) {\n        assertEquals(\"Target node is not as expectation\", destJetty.getNodeName(), targetNode);\n      }\n    }\n\n    for (CloudDescriptor cd : cloudDescriptors) {\n      if (cd.getCollectionName().equals(collection)) {\n        fail(\"Exist replica which is not moved \" + cd);\n      }\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"3f504512a03d978990cbff30db0522b354e846db","date":1595247421,"type":4,"author":"Ishan Chattopadhyaya","isMerge":false,"pathNew":"/dev/null","pathOld":"solr/core/src/test/org/apache/solr/cloud/autoscaling/AutoAddReplicasPlanActionTest#assertOperations(String,List[SolrRequest],String,List[CloudDescriptor],JettySolrRunner).mjava","sourceNew":null,"sourceOld":"  private void assertOperations(String collection,\n                                @SuppressWarnings({\"rawtypes\"})List<SolrRequest> operations, String lostNodeName,\n                                List<CloudDescriptor> cloudDescriptors, JettySolrRunner destJetty) {\n    assertEquals(\"Replicas of \" + collection + \" is not fully moved, operations=\"+operations,\n        cloudDescriptors.stream().filter(cd -> cd.getCollectionName().equals(collection)).count(), operations.size());\n    for (@SuppressWarnings({\"rawtypes\"})SolrRequest solrRequest : operations) {\n      assertTrue(solrRequest instanceof CollectionAdminRequest.MoveReplica);\n      SolrParams params = solrRequest.getParams();\n\n      assertEquals(params.get(\"collection\"), collection);\n\n      String replica = params.get(\"replica\");\n      boolean found = false;\n      Iterator<CloudDescriptor> it = cloudDescriptors.iterator();\n      while (it.hasNext()) {\n        CloudDescriptor cd = it.next();\n        if (cd.getCollectionName().equals(collection) && cd.getCoreNodeName().equals(replica)) {\n          found = true;\n          it.remove();\n          break;\n        }\n      }\n      assertTrue(\"Can not find \"+replica+ \" in node \" + lostNodeName, found);\n\n      String targetNode = params.get(\"targetNode\");\n      assertFalse(\"Target node match the lost one \" + lostNodeName, lostNodeName.equals(targetNode));\n      if (destJetty != null) {\n        assertEquals(\"Target node is not as expectation\", destJetty.getNodeName(), targetNode);\n      }\n    }\n\n    for (CloudDescriptor cd : cloudDescriptors) {\n      if (cd.getCollectionName().equals(collection)) {\n        fail(\"Exist replica which is not moved \" + cd);\n      }\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"c304e97e7c1d472bc70e801b35ee78583916c6cd":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","5ce607fb6b5358969d344ac8e2ce3a79ff5bc6d1"],"aa2585c33d5d66a1c837c312221eb55ddb3c4300":["560c18d71dad43d675158783c3840f8c80d6d39c"],"3f504512a03d978990cbff30db0522b354e846db":["aa2585c33d5d66a1c837c312221eb55ddb3c4300"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"560c18d71dad43d675158783c3840f8c80d6d39c":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","c304e97e7c1d472bc70e801b35ee78583916c6cd"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["3f504512a03d978990cbff30db0522b354e846db"],"5ce607fb6b5358969d344ac8e2ce3a79ff5bc6d1":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"]},"commit2Childs":{"c304e97e7c1d472bc70e801b35ee78583916c6cd":["560c18d71dad43d675158783c3840f8c80d6d39c"],"aa2585c33d5d66a1c837c312221eb55ddb3c4300":["3f504512a03d978990cbff30db0522b354e846db"],"3f504512a03d978990cbff30db0522b354e846db":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["c304e97e7c1d472bc70e801b35ee78583916c6cd","560c18d71dad43d675158783c3840f8c80d6d39c","5ce607fb6b5358969d344ac8e2ce3a79ff5bc6d1"],"560c18d71dad43d675158783c3840f8c80d6d39c":["aa2585c33d5d66a1c837c312221eb55ddb3c4300"],"5ce607fb6b5358969d344ac8e2ce3a79ff5bc6d1":["c304e97e7c1d472bc70e801b35ee78583916c6cd"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}