{"path":"lucene/spatial-extras/src/java/org/apache/lucene/spatial/query/SpatialArgs#calcDistanceFromErrPct(Shape,double,SpatialContext).mjava","commits":[{"id":"112d77ac8d3e10a362516ad834c9a11d35c94234","date":1456784319,"type":1,"author":"nknize","isMerge":false,"pathNew":"lucene/spatial-extras/src/java/org/apache/lucene/spatial/query/SpatialArgs#calcDistanceFromErrPct(Shape,double,SpatialContext).mjava","pathOld":"lucene/spatial/src/java/org/apache/lucene/spatial/query/SpatialArgs#calcDistanceFromErrPct(Shape,double,SpatialContext).mjava","sourceNew":"  /**\n   * Computes the distance given a shape and the {@code distErrPct}.  The\n   * algorithm is the fraction of the distance from the center of the query\n   * shape to its closest bounding box corner.\n   *\n   * @param shape Mandatory.\n   * @param distErrPct 0 to 0.5\n   * @param ctx Mandatory\n   * @return A distance (in degrees).\n   */\n  public static double calcDistanceFromErrPct(Shape shape, double distErrPct, SpatialContext ctx) {\n    if (distErrPct < 0 || distErrPct > 0.5) {\n      throw new IllegalArgumentException(\"distErrPct \" + distErrPct + \" must be between [0 to 0.5]\");\n    }\n    if (distErrPct == 0 || shape instanceof Point) {\n      return 0;\n    }\n    Rectangle bbox = shape.getBoundingBox();\n    //Compute the distance from the center to a corner.  Because the distance\n    // to a bottom corner vs a top corner can vary in a geospatial scenario,\n    // take the closest one (greater precision).\n    Point ctr = bbox.getCenter();\n    double y = (ctr.getY() >= 0 ? bbox.getMaxY() : bbox.getMinY());\n    double diagonalDist = ctx.getDistCalc().distance(ctr, bbox.getMaxX(), y);\n    return diagonalDist * distErrPct;\n  }\n\n","sourceOld":"  /**\n   * Computes the distance given a shape and the {@code distErrPct}.  The\n   * algorithm is the fraction of the distance from the center of the query\n   * shape to its closest bounding box corner.\n   *\n   * @param shape Mandatory.\n   * @param distErrPct 0 to 0.5\n   * @param ctx Mandatory\n   * @return A distance (in degrees).\n   */\n  public static double calcDistanceFromErrPct(Shape shape, double distErrPct, SpatialContext ctx) {\n    if (distErrPct < 0 || distErrPct > 0.5) {\n      throw new IllegalArgumentException(\"distErrPct \" + distErrPct + \" must be between [0 to 0.5]\");\n    }\n    if (distErrPct == 0 || shape instanceof Point) {\n      return 0;\n    }\n    Rectangle bbox = shape.getBoundingBox();\n    //Compute the distance from the center to a corner.  Because the distance\n    // to a bottom corner vs a top corner can vary in a geospatial scenario,\n    // take the closest one (greater precision).\n    Point ctr = bbox.getCenter();\n    double y = (ctr.getY() >= 0 ? bbox.getMaxY() : bbox.getMinY());\n    double diagonalDist = ctx.getDistCalc().distance(ctr, bbox.getMaxX(), y);\n    return diagonalDist * distErrPct;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"af2638813028b254a88b418ebeafb541afb49653","date":1456804822,"type":1,"author":"Noble Paul","isMerge":true,"pathNew":"lucene/spatial-extras/src/java/org/apache/lucene/spatial/query/SpatialArgs#calcDistanceFromErrPct(Shape,double,SpatialContext).mjava","pathOld":"lucene/spatial/src/java/org/apache/lucene/spatial/query/SpatialArgs#calcDistanceFromErrPct(Shape,double,SpatialContext).mjava","sourceNew":"  /**\n   * Computes the distance given a shape and the {@code distErrPct}.  The\n   * algorithm is the fraction of the distance from the center of the query\n   * shape to its closest bounding box corner.\n   *\n   * @param shape Mandatory.\n   * @param distErrPct 0 to 0.5\n   * @param ctx Mandatory\n   * @return A distance (in degrees).\n   */\n  public static double calcDistanceFromErrPct(Shape shape, double distErrPct, SpatialContext ctx) {\n    if (distErrPct < 0 || distErrPct > 0.5) {\n      throw new IllegalArgumentException(\"distErrPct \" + distErrPct + \" must be between [0 to 0.5]\");\n    }\n    if (distErrPct == 0 || shape instanceof Point) {\n      return 0;\n    }\n    Rectangle bbox = shape.getBoundingBox();\n    //Compute the distance from the center to a corner.  Because the distance\n    // to a bottom corner vs a top corner can vary in a geospatial scenario,\n    // take the closest one (greater precision).\n    Point ctr = bbox.getCenter();\n    double y = (ctr.getY() >= 0 ? bbox.getMaxY() : bbox.getMinY());\n    double diagonalDist = ctx.getDistCalc().distance(ctr, bbox.getMaxX(), y);\n    return diagonalDist * distErrPct;\n  }\n\n","sourceOld":"  /**\n   * Computes the distance given a shape and the {@code distErrPct}.  The\n   * algorithm is the fraction of the distance from the center of the query\n   * shape to its closest bounding box corner.\n   *\n   * @param shape Mandatory.\n   * @param distErrPct 0 to 0.5\n   * @param ctx Mandatory\n   * @return A distance (in degrees).\n   */\n  public static double calcDistanceFromErrPct(Shape shape, double distErrPct, SpatialContext ctx) {\n    if (distErrPct < 0 || distErrPct > 0.5) {\n      throw new IllegalArgumentException(\"distErrPct \" + distErrPct + \" must be between [0 to 0.5]\");\n    }\n    if (distErrPct == 0 || shape instanceof Point) {\n      return 0;\n    }\n    Rectangle bbox = shape.getBoundingBox();\n    //Compute the distance from the center to a corner.  Because the distance\n    // to a bottom corner vs a top corner can vary in a geospatial scenario,\n    // take the closest one (greater precision).\n    Point ctr = bbox.getCenter();\n    double y = (ctr.getY() >= 0 ? bbox.getMaxY() : bbox.getMinY());\n    double diagonalDist = ctx.getDistCalc().distance(ctr, bbox.getMaxX(), y);\n    return diagonalDist * distErrPct;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"af2638813028b254a88b418ebeafb541afb49653":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","112d77ac8d3e10a362516ad834c9a11d35c94234"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"112d77ac8d3e10a362516ad834c9a11d35c94234":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["af2638813028b254a88b418ebeafb541afb49653"]},"commit2Childs":{"af2638813028b254a88b418ebeafb541afb49653":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["af2638813028b254a88b418ebeafb541afb49653","112d77ac8d3e10a362516ad834c9a11d35c94234"],"112d77ac8d3e10a362516ad834c9a11d35c94234":["af2638813028b254a88b418ebeafb541afb49653"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}