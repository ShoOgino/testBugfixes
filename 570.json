{"path":"lucene/core/src/java/org/apache/lucene/index/SortingCodecReader#wrap(CodecReader,Sorter.DocMap,Sort).mjava","commits":[{"id":"19d8bfe2b34f3ba4420efc1f441e4145a2ad6c63","date":1599130480,"type":0,"author":"Simon Willnauer","isMerge":false,"pathNew":"lucene/core/src/java/org/apache/lucene/index/SortingCodecReader#wrap(CodecReader,Sorter.DocMap,Sort).mjava","pathOld":"/dev/null","sourceNew":"  /** Expert: same as {@link #wrap(org.apache.lucene.index.CodecReader, Sort)} but operates directly on a {@link Sorter.DocMap}. */\n  static CodecReader wrap(CodecReader reader, Sorter.DocMap docMap, Sort sort) {\n    LeafMetaData metaData = reader.getMetaData();\n    LeafMetaData newMetaData = new LeafMetaData(metaData.getCreatedVersionMajor(), metaData.getMinVersion(), sort);\n    if (docMap == null) {\n      // the reader is already sorted\n      return new FilterCodecReader(reader) {\n        @Override\n        public CacheHelper getCoreCacheHelper() {\n          return null;\n        }\n\n        @Override\n        public CacheHelper getReaderCacheHelper() {\n          return null;\n        }\n\n        @Override\n        public LeafMetaData getMetaData() {\n          return newMetaData;\n        }\n\n        @Override\n        public String toString() {\n          return \"SortingCodecReader(\" + in + \")\";\n        }\n      };\n    }\n    if (reader.maxDoc() != docMap.size()) {\n      throw new IllegalArgumentException(\"reader.maxDoc() should be equal to docMap.size(), got\" + reader.maxDoc() + \" != \" + docMap.size());\n    }\n    assert Sorter.isConsistent(docMap);\n    return new SortingCodecReader(reader, docMap, newMetaData);\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"19d8bfe2b34f3ba4420efc1f441e4145a2ad6c63":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["19d8bfe2b34f3ba4420efc1f441e4145a2ad6c63"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["19d8bfe2b34f3ba4420efc1f441e4145a2ad6c63"],"19d8bfe2b34f3ba4420efc1f441e4145a2ad6c63":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}