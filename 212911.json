{"path":"solr/solrj/src/test/org/apache/solr/client/solrj/impl/BasicHttpSolrServerTest#testUpdate().mjava","commits":[{"id":"22c400c38732e4cee017b09622fb10e5c55b04b8","date":1334921975,"type":0,"author":"Sami Siren","isMerge":false,"pathNew":"solr/solrj/src/test/org/apache/solr/client/solrj/impl/BasicHttpSolrServerTest#testUpdate().mjava","pathOld":"/dev/null","sourceNew":"  @Test\n  public void testUpdate(){\n    DebugServlet.clear();\n    HttpSolrServer server = new HttpSolrServer(\"http://127.0.0.1:\"\n        + jetty.getLocalPort() + \"/solr/debug/foo\");\n    UpdateRequest req = new UpdateRequest();\n    req.add(new SolrInputDocument());\n    req.setParam(\"a\", \"\\u1234\");\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    \n    //default method\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    //agent\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    //default wt\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    //default version\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    //content type\n    assertEquals(\"application/xml; charset=UTF-8\", DebugServlet.headers.get(\"Content-Type\"));\n    //parameter encoding\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n\n    //XML response\n    server.setParser(new XMLResponseParser());\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"xml\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    assertEquals(\"application/xml; charset=UTF-8\", DebugServlet.headers.get(\"Content-Type\"));\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n    \n    //javabin request\n    server.setParser(new BinaryResponseParser());\n    server.setRequestWriter(new BinaryRequestWriter());\n    DebugServlet.clear();\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    assertEquals(\"application/octet-stream\", DebugServlet.headers.get(\"Content-Type\"));\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"042e4d934397657ba04c82b46cc5665076bc5c58","date":1336511170,"type":3,"author":"Ryan McKinley","isMerge":false,"pathNew":"solr/solrj/src/test/org/apache/solr/client/solrj/impl/BasicHttpSolrServerTest#testUpdate().mjava","pathOld":"solr/solrj/src/test/org/apache/solr/client/solrj/impl/BasicHttpSolrServerTest#testUpdate().mjava","sourceNew":"  @Test\n  public void testUpdate(){\n    DebugServlet.clear();\n    HttpSolrServer server = new HttpSolrServer(\"http://127.0.0.1:\"\n        + jetty.getLocalPort() + \"/solr/debug/foo\");\n    UpdateRequest req = new UpdateRequest();\n    req.add(new SolrInputDocument());\n    req.setParam(\"a\", \"\\u1234\");\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    \n    //default method\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    //agent\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    //default wt\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    //default version\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    //content type\n    assertEquals(\"application/xml; charset=UTF-8\", DebugServlet.headers.get(\"Content-Type\"));\n    //parameter encoding\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n\n    //XML response\n    server.setParser(new XMLResponseParser());\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"xml\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    assertEquals(\"application/xml; charset=UTF-8\", DebugServlet.headers.get(\"Content-Type\"));\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n    \n    //javabin request\n    server.setParser(new BinaryResponseParser());\n    server.setRequestWriter(new BinaryRequestWriter());\n    DebugServlet.clear();\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    assertEquals(\"application/javabin\", DebugServlet.headers.get(\"Content-Type\"));\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n  }\n\n","sourceOld":"  @Test\n  public void testUpdate(){\n    DebugServlet.clear();\n    HttpSolrServer server = new HttpSolrServer(\"http://127.0.0.1:\"\n        + jetty.getLocalPort() + \"/solr/debug/foo\");\n    UpdateRequest req = new UpdateRequest();\n    req.add(new SolrInputDocument());\n    req.setParam(\"a\", \"\\u1234\");\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    \n    //default method\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    //agent\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    //default wt\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    //default version\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    //content type\n    assertEquals(\"application/xml; charset=UTF-8\", DebugServlet.headers.get(\"Content-Type\"));\n    //parameter encoding\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n\n    //XML response\n    server.setParser(new XMLResponseParser());\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"xml\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    assertEquals(\"application/xml; charset=UTF-8\", DebugServlet.headers.get(\"Content-Type\"));\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n    \n    //javabin request\n    server.setParser(new BinaryResponseParser());\n    server.setRequestWriter(new BinaryRequestWriter());\n    DebugServlet.clear();\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    assertEquals(\"application/octet-stream\", DebugServlet.headers.get(\"Content-Type\"));\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"f2425308ebcd91b538a601df94ae1551ccaab2bb","date":1340702883,"type":3,"author":"Sami Siren","isMerge":false,"pathNew":"solr/solrj/src/test/org/apache/solr/client/solrj/impl/BasicHttpSolrServerTest#testUpdate().mjava","pathOld":"solr/solrj/src/test/org/apache/solr/client/solrj/impl/BasicHttpSolrServerTest#testUpdate().mjava","sourceNew":"  @Test\n  public void testUpdate(){\n    DebugServlet.clear();\n    HttpSolrServer server = new HttpSolrServer(\"http://127.0.0.1:\"\n        + jetty.getLocalPort() + \"/solr/debug/foo\");\n    UpdateRequest req = new UpdateRequest();\n    req.add(new SolrInputDocument());\n    req.setParam(\"a\", \"\\u1234\");\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    \n    //default method\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    //agent\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    //default wt\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    //default version\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    //content type\n    assertEquals(\"application/xml; charset=UTF-8\", DebugServlet.headers.get(\"Content-Type\"));\n    //parameter encoding\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n\n    //XML response\n    server.setParser(new XMLResponseParser());\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"xml\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    assertEquals(\"application/xml; charset=UTF-8\", DebugServlet.headers.get(\"Content-Type\"));\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n    \n    //javabin request\n    server.setParser(new BinaryResponseParser());\n    server.setRequestWriter(new BinaryRequestWriter());\n    DebugServlet.clear();\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    assertEquals(\"application/javabin\", DebugServlet.headers.get(\"Content-Type\"));\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n    server.shutdown();\n  }\n\n","sourceOld":"  @Test\n  public void testUpdate(){\n    DebugServlet.clear();\n    HttpSolrServer server = new HttpSolrServer(\"http://127.0.0.1:\"\n        + jetty.getLocalPort() + \"/solr/debug/foo\");\n    UpdateRequest req = new UpdateRequest();\n    req.add(new SolrInputDocument());\n    req.setParam(\"a\", \"\\u1234\");\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    \n    //default method\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    //agent\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    //default wt\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    //default version\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    //content type\n    assertEquals(\"application/xml; charset=UTF-8\", DebugServlet.headers.get(\"Content-Type\"));\n    //parameter encoding\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n\n    //XML response\n    server.setParser(new XMLResponseParser());\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"xml\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    assertEquals(\"application/xml; charset=UTF-8\", DebugServlet.headers.get(\"Content-Type\"));\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n    \n    //javabin request\n    server.setParser(new BinaryResponseParser());\n    server.setRequestWriter(new BinaryRequestWriter());\n    DebugServlet.clear();\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    assertEquals(\"application/javabin\", DebugServlet.headers.get(\"Content-Type\"));\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"fe33227f6805edab2036cbb80645cc4e2d1fa424","date":1342713534,"type":3,"author":"Michael McCandless","isMerge":true,"pathNew":"solr/solrj/src/test/org/apache/solr/client/solrj/impl/BasicHttpSolrServerTest#testUpdate().mjava","pathOld":"solr/solrj/src/test/org/apache/solr/client/solrj/impl/BasicHttpSolrServerTest#testUpdate().mjava","sourceNew":"  @Test\n  public void testUpdate(){\n    DebugServlet.clear();\n    HttpSolrServer server = new HttpSolrServer(\"http://127.0.0.1:\"\n        + jetty.getLocalPort() + \"/solr/debug/foo\");\n    UpdateRequest req = new UpdateRequest();\n    req.add(new SolrInputDocument());\n    req.setParam(\"a\", \"\\u1234\");\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    \n    //default method\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    //agent\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    //default wt\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    //default version\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    //content type\n    assertEquals(\"application/xml; charset=UTF-8\", DebugServlet.headers.get(\"Content-Type\"));\n    //parameter encoding\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n\n    //XML response\n    server.setParser(new XMLResponseParser());\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"xml\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    assertEquals(\"application/xml; charset=UTF-8\", DebugServlet.headers.get(\"Content-Type\"));\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n    \n    //javabin request\n    server.setParser(new BinaryResponseParser());\n    server.setRequestWriter(new BinaryRequestWriter());\n    DebugServlet.clear();\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    assertEquals(\"application/javabin\", DebugServlet.headers.get(\"Content-Type\"));\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n    server.shutdown();\n  }\n\n","sourceOld":"  @Test\n  public void testUpdate(){\n    DebugServlet.clear();\n    HttpSolrServer server = new HttpSolrServer(\"http://127.0.0.1:\"\n        + jetty.getLocalPort() + \"/solr/debug/foo\");\n    UpdateRequest req = new UpdateRequest();\n    req.add(new SolrInputDocument());\n    req.setParam(\"a\", \"\\u1234\");\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    \n    //default method\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    //agent\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    //default wt\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    //default version\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    //content type\n    assertEquals(\"application/xml; charset=UTF-8\", DebugServlet.headers.get(\"Content-Type\"));\n    //parameter encoding\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n\n    //XML response\n    server.setParser(new XMLResponseParser());\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"xml\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    assertEquals(\"application/xml; charset=UTF-8\", DebugServlet.headers.get(\"Content-Type\"));\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n    \n    //javabin request\n    server.setParser(new BinaryResponseParser());\n    server.setRequestWriter(new BinaryRequestWriter());\n    DebugServlet.clear();\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    assertEquals(\"application/javabin\", DebugServlet.headers.get(\"Content-Type\"));\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"fa11c355cd3b3b9207608b85fbd33b34f6f1966e","date":1361303536,"type":3,"author":"Chris M. Hostetter","isMerge":false,"pathNew":"solr/solrj/src/test/org/apache/solr/client/solrj/impl/BasicHttpSolrServerTest#testUpdate().mjava","pathOld":"solr/solrj/src/test/org/apache/solr/client/solrj/impl/BasicHttpSolrServerTest#testUpdate().mjava","sourceNew":"  @Test\n  public void testUpdate(){\n    DebugServlet.clear();\n    HttpSolrServer server = new HttpSolrServer(jetty.getBaseUrl().toString() + \n                                               \"/debug/foo\");\n    UpdateRequest req = new UpdateRequest();\n    req.add(new SolrInputDocument());\n    req.setParam(\"a\", \"\\u1234\");\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    \n    //default method\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    //agent\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    //default wt\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    //default version\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    //content type\n    assertEquals(\"application/xml; charset=UTF-8\", DebugServlet.headers.get(\"Content-Type\"));\n    //parameter encoding\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n\n    //XML response\n    server.setParser(new XMLResponseParser());\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"xml\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    assertEquals(\"application/xml; charset=UTF-8\", DebugServlet.headers.get(\"Content-Type\"));\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n    \n    //javabin request\n    server.setParser(new BinaryResponseParser());\n    server.setRequestWriter(new BinaryRequestWriter());\n    DebugServlet.clear();\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    assertEquals(\"application/javabin\", DebugServlet.headers.get(\"Content-Type\"));\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n    server.shutdown();\n  }\n\n","sourceOld":"  @Test\n  public void testUpdate(){\n    DebugServlet.clear();\n    HttpSolrServer server = new HttpSolrServer(\"http://127.0.0.1:\"\n        + jetty.getLocalPort() + \"/solr/debug/foo\");\n    UpdateRequest req = new UpdateRequest();\n    req.add(new SolrInputDocument());\n    req.setParam(\"a\", \"\\u1234\");\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    \n    //default method\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    //agent\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    //default wt\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    //default version\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    //content type\n    assertEquals(\"application/xml; charset=UTF-8\", DebugServlet.headers.get(\"Content-Type\"));\n    //parameter encoding\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n\n    //XML response\n    server.setParser(new XMLResponseParser());\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"xml\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    assertEquals(\"application/xml; charset=UTF-8\", DebugServlet.headers.get(\"Content-Type\"));\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n    \n    //javabin request\n    server.setParser(new BinaryResponseParser());\n    server.setRequestWriter(new BinaryRequestWriter());\n    DebugServlet.clear();\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    assertEquals(\"application/javabin\", DebugServlet.headers.get(\"Content-Type\"));\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n    server.shutdown();\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"bafca15d8e408346a67f4282ad1143b88023893b","date":1420034748,"type":5,"author":"Alan Woodward","isMerge":false,"pathNew":"solr/solrj/src/test/org/apache/solr/client/solrj/impl/BasicHttpSolrClientTest#testUpdate().mjava","pathOld":"solr/solrj/src/test/org/apache/solr/client/solrj/impl/BasicHttpSolrServerTest#testUpdate().mjava","sourceNew":"  @Test\n  public void testUpdate(){\n    DebugServlet.clear();\n    HttpSolrClient client = new HttpSolrClient(jetty.getBaseUrl().toString() + \"/debug/foo\");\n    UpdateRequest req = new UpdateRequest();\n    req.add(new SolrInputDocument());\n    req.setParam(\"a\", \"\\u1234\");\n    try {\n      client.request(req);\n    } catch (Throwable t) {}\n    \n    //default method\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    //agent\n    assertEquals(\"Solr[\" + HttpSolrClient.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    //default wt\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    //default version\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    //content type\n    assertEquals(\"application/xml; charset=UTF-8\", DebugServlet.headers.get(\"Content-Type\"));\n    //parameter encoding\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n\n    //XML response\n    client.setParser(new XMLResponseParser());\n    try {\n      client.request(req);\n    } catch (Throwable t) {}\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    assertEquals(\"Solr[\" + HttpSolrClient.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"xml\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    assertEquals(\"application/xml; charset=UTF-8\", DebugServlet.headers.get(\"Content-Type\"));\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n    \n    //javabin request\n    client.setParser(new BinaryResponseParser());\n    client.setRequestWriter(new BinaryRequestWriter());\n    DebugServlet.clear();\n    try {\n      client.request(req);\n    } catch (Throwable t) {}\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    assertEquals(\"Solr[\" + HttpSolrClient.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    assertEquals(\"application/javabin\", DebugServlet.headers.get(\"Content-Type\"));\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n    client.shutdown();\n  }\n\n","sourceOld":"  @Test\n  public void testUpdate(){\n    DebugServlet.clear();\n    HttpSolrServer server = new HttpSolrServer(jetty.getBaseUrl().toString() + \n                                               \"/debug/foo\");\n    UpdateRequest req = new UpdateRequest();\n    req.add(new SolrInputDocument());\n    req.setParam(\"a\", \"\\u1234\");\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    \n    //default method\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    //agent\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    //default wt\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    //default version\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    //content type\n    assertEquals(\"application/xml; charset=UTF-8\", DebugServlet.headers.get(\"Content-Type\"));\n    //parameter encoding\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n\n    //XML response\n    server.setParser(new XMLResponseParser());\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"xml\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    assertEquals(\"application/xml; charset=UTF-8\", DebugServlet.headers.get(\"Content-Type\"));\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n    \n    //javabin request\n    server.setParser(new BinaryResponseParser());\n    server.setRequestWriter(new BinaryRequestWriter());\n    DebugServlet.clear();\n    try {\n      server.request(req);\n    } catch (Throwable t) {}\n    assertEquals(\"post\", DebugServlet.lastMethod);\n    assertEquals(\"Solr[\" + org.apache.solr.client.solrj.impl.HttpSolrServer.class.getName() + \"] 1.0\", DebugServlet.headers.get(\"User-Agent\"));\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n    assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n    assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n    assertEquals(server.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n    assertEquals(\"application/javabin\", DebugServlet.headers.get(\"Content-Type\"));\n    assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n    assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n    server.shutdown();\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"fa11c355cd3b3b9207608b85fbd33b34f6f1966e":["f2425308ebcd91b538a601df94ae1551ccaab2bb"],"042e4d934397657ba04c82b46cc5665076bc5c58":["22c400c38732e4cee017b09622fb10e5c55b04b8"],"22c400c38732e4cee017b09622fb10e5c55b04b8":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"fe33227f6805edab2036cbb80645cc4e2d1fa424":["042e4d934397657ba04c82b46cc5665076bc5c58","f2425308ebcd91b538a601df94ae1551ccaab2bb"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"bafca15d8e408346a67f4282ad1143b88023893b":["fa11c355cd3b3b9207608b85fbd33b34f6f1966e"],"f2425308ebcd91b538a601df94ae1551ccaab2bb":["042e4d934397657ba04c82b46cc5665076bc5c58"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["bafca15d8e408346a67f4282ad1143b88023893b"]},"commit2Childs":{"fa11c355cd3b3b9207608b85fbd33b34f6f1966e":["bafca15d8e408346a67f4282ad1143b88023893b"],"042e4d934397657ba04c82b46cc5665076bc5c58":["fe33227f6805edab2036cbb80645cc4e2d1fa424","f2425308ebcd91b538a601df94ae1551ccaab2bb"],"22c400c38732e4cee017b09622fb10e5c55b04b8":["042e4d934397657ba04c82b46cc5665076bc5c58"],"fe33227f6805edab2036cbb80645cc4e2d1fa424":[],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["22c400c38732e4cee017b09622fb10e5c55b04b8"],"bafca15d8e408346a67f4282ad1143b88023893b":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"f2425308ebcd91b538a601df94ae1551ccaab2bb":["fa11c355cd3b3b9207608b85fbd33b34f6f1966e","fe33227f6805edab2036cbb80645cc4e2d1fa424"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["fe33227f6805edab2036cbb80645cc4e2d1fa424","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}