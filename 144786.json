{"path":"lucene/test-framework/src/java/org/apache/lucene/util/TestUtil#getTempDir(String).mjava","commits":[{"id":"6613659748fe4411a7dcf85266e55db1f95f7315","date":1392773913,"type":1,"author":"Benson Margulies","isMerge":false,"pathNew":"lucene/test-framework/src/java/org/apache/lucene/util/TestUtil#getTempDir(String).mjava","pathOld":"lucene/test-framework/src/java/org/apache/lucene/util/_TestUtil#getTempDir(String).mjava","sourceNew":"  /**\n   * Returns a temp directory, based on the given description. Creates the\n   * directory.\n   */\n  public static File getTempDir(String desc) {\n    if (desc.length() < 3) {\n      throw new IllegalArgumentException(\"description must be at least 3 characters\");\n    }\n    // always pull a long from master random. that way, the randomness of the test\n    // is not affected by whether it initialized the counter (in genTempFile) or not.\n    // note that the Random used by genTempFile is *not* the master Random, and therefore\n    // does not affect the randomness of the test.\n    final Random random = new Random(RandomizedContext.current().getRandom().nextLong());\n    int attempt = 0;\n    File f;\n    do {\n      f = genTempFile(random, desc, \"tmp\", LuceneTestCase.TEMP_DIR);\n    } while (!f.mkdir() && (attempt++) < GET_TEMP_DIR_RETRY_THRESHOLD);\n    \n    if (attempt > GET_TEMP_DIR_RETRY_THRESHOLD) {\n      throw new RuntimeException(\n          \"failed to get a temporary dir too many times. check your temp directory and consider manually cleaning it.\");\n    }\n    \n    LuceneTestCase.closeAfterSuite(new CloseableFile(f, LuceneTestCase.suiteFailureMarker));\n    return f;\n  }\n\n","sourceOld":"  /**\n   * Returns a temp directory, based on the given description. Creates the\n   * directory.\n   */\n  public static File getTempDir(String desc) {\n    if (desc.length() < 3) {\n      throw new IllegalArgumentException(\"description must be at least 3 characters\");\n    }\n    // always pull a long from master random. that way, the randomness of the test\n    // is not affected by whether it initialized the counter (in genTempFile) or not.\n    // note that the Random used by genTempFile is *not* the master Random, and therefore\n    // does not affect the randomness of the test.\n    final Random random = new Random(RandomizedContext.current().getRandom().nextLong());\n    int attempt = 0;\n    File f;\n    do {\n      f = genTempFile(random, desc, \"tmp\", LuceneTestCase.TEMP_DIR);\n    } while (!f.mkdir() && (attempt++) < GET_TEMP_DIR_RETRY_THRESHOLD);\n    \n    if (attempt > GET_TEMP_DIR_RETRY_THRESHOLD) {\n      throw new RuntimeException(\n          \"failed to get a temporary dir too many times. check your temp directory and consider manually cleaning it.\");\n    }\n    \n    LuceneTestCase.closeAfterSuite(new CloseableFile(f, LuceneTestCase.suiteFailureMarker));\n    return f;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"d0d579490a72f2e6297eaa648940611234c57cf1","date":1395917140,"type":5,"author":"Dawid Weiss","isMerge":false,"pathNew":"lucene/test-framework/src/java/org/apache/lucene/util/TestUtil#createTempDir(String).mjava","pathOld":"lucene/test-framework/src/java/org/apache/lucene/util/TestUtil#getTempDir(String).mjava","sourceNew":"  /**\n   * Returns a new, empty temporary folder, based on the given name. The folder will be\n   * deleted at the end of the suite. Failure to delete the temporary folder will cause\n   * an exception (typically on Windows).\n   */\n  public static File createTempDir(String name) {\n    if (name.length() < 3) {\n      throw new IllegalArgumentException(\"description must be at least 3 characters\");\n    }\n  \n    // always pull a long from master random. that way, the randomness of the test\n    // is not affected by whether it initialized the counter (in genTempFile) or not.\n    // note that the Random used by genTempFile is *not* the master Random, and therefore\n    // does not affect the randomness of the test.\n    final Random random = new Random(RandomizedContext.current().getRandom().nextLong());\n    int attempt = 0;\n    String tmpDir = System.getProperty(\"tempDir\", System.getProperty(\"java.io.tmpdir\"));\n    File f;\n    do {\n      f = genTempFile(random, name + \"_\", \"\", new File(tmpDir));\n    } while (!f.mkdir() && (attempt++) < GET_TEMP_DIR_RETRY_THRESHOLD);\n    \n    if (attempt > GET_TEMP_DIR_RETRY_THRESHOLD) {\n      throw new RuntimeException(\n          \"failed to get a temporary dir too many times. check your temp directory and consider manually cleaning it.\");\n    }\n  \n    LuceneTestCase.closeAfterSuite(new CloseableFile(f, LuceneTestCase.suiteFailureMarker));\n    return f;\n  }\n\n","sourceOld":"  /**\n   * Returns a temp directory, based on the given description. Creates the\n   * directory.\n   */\n  public static File getTempDir(String desc) {\n    if (desc.length() < 3) {\n      throw new IllegalArgumentException(\"description must be at least 3 characters\");\n    }\n    // always pull a long from master random. that way, the randomness of the test\n    // is not affected by whether it initialized the counter (in genTempFile) or not.\n    // note that the Random used by genTempFile is *not* the master Random, and therefore\n    // does not affect the randomness of the test.\n    final Random random = new Random(RandomizedContext.current().getRandom().nextLong());\n    int attempt = 0;\n    File f;\n    do {\n      f = genTempFile(random, desc, \"tmp\", LuceneTestCase.TEMP_DIR);\n    } while (!f.mkdir() && (attempt++) < GET_TEMP_DIR_RETRY_THRESHOLD);\n    \n    if (attempt > GET_TEMP_DIR_RETRY_THRESHOLD) {\n      throw new RuntimeException(\n          \"failed to get a temporary dir too many times. check your temp directory and consider manually cleaning it.\");\n    }\n    \n    LuceneTestCase.closeAfterSuite(new CloseableFile(f, LuceneTestCase.suiteFailureMarker));\n    return f;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"2a0f5bb79c600763ffe7b8141df59a3169d31e48","date":1396689440,"type":4,"author":"Dawid Weiss","isMerge":true,"pathNew":"/dev/null","pathOld":"lucene/test-framework/src/java/org/apache/lucene/util/TestUtil#getTempDir(String).mjava","sourceNew":null,"sourceOld":"  /**\n   * Returns a temp directory, based on the given description. Creates the\n   * directory.\n   */\n  public static File getTempDir(String desc) {\n    if (desc.length() < 3) {\n      throw new IllegalArgumentException(\"description must be at least 3 characters\");\n    }\n    // always pull a long from master random. that way, the randomness of the test\n    // is not affected by whether it initialized the counter (in genTempFile) or not.\n    // note that the Random used by genTempFile is *not* the master Random, and therefore\n    // does not affect the randomness of the test.\n    final Random random = new Random(RandomizedContext.current().getRandom().nextLong());\n    int attempt = 0;\n    File f;\n    do {\n      f = genTempFile(random, desc, \"tmp\", LuceneTestCase.TEMP_DIR);\n    } while (!f.mkdir() && (attempt++) < GET_TEMP_DIR_RETRY_THRESHOLD);\n    \n    if (attempt > GET_TEMP_DIR_RETRY_THRESHOLD) {\n      throw new RuntimeException(\n          \"failed to get a temporary dir too many times. check your temp directory and consider manually cleaning it.\");\n    }\n    \n    LuceneTestCase.closeAfterSuite(new CloseableFile(f, LuceneTestCase.suiteFailureMarker));\n    return f;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"2a0f5bb79c600763ffe7b8141df59a3169d31e48":["6613659748fe4411a7dcf85266e55db1f95f7315","d0d579490a72f2e6297eaa648940611234c57cf1"],"6613659748fe4411a7dcf85266e55db1f95f7315":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"d0d579490a72f2e6297eaa648940611234c57cf1":["6613659748fe4411a7dcf85266e55db1f95f7315"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["2a0f5bb79c600763ffe7b8141df59a3169d31e48"]},"commit2Childs":{"2a0f5bb79c600763ffe7b8141df59a3169d31e48":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"6613659748fe4411a7dcf85266e55db1f95f7315":["2a0f5bb79c600763ffe7b8141df59a3169d31e48","d0d579490a72f2e6297eaa648940611234c57cf1"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["6613659748fe4411a7dcf85266e55db1f95f7315"],"d0d579490a72f2e6297eaa648940611234c57cf1":["2a0f5bb79c600763ffe7b8141df59a3169d31e48"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}