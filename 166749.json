{"path":"sandbox/projects/appex/src/scratchpad/src/JP/co/esm/caddies/doclets/UMLDoclet#writeClass(ClassDoc,ClassDoc[]).mjava","commits":[{"id":"e3074d05d861bc1436ee03619fdee547f9c51d22","date":1020526983,"type":0,"author":"Andrew C. Oliver","isMerge":false,"pathNew":"sandbox/projects/appex/src/scratchpad/src/JP/co/esm/caddies/doclets/UMLDoclet#writeClass(ClassDoc,ClassDoc[]).mjava","pathOld":"/dev/null","sourceNew":"\tvoid writeClass(ClassDoc thiscls, ClassDoc[] clss) throws IOException {\n\t\t// inners\n\t\tClassDoc[] ins = thiscls.innerClasses();\n\t\tList inners = new ArrayList();\n\t\tfor (int i = 0; i < ins.length; i++)\n\t\t\tinners.add(ins[i]);\n\t\t\n\t\t// supers\n\t\tList supers = new ArrayList();\n\t\tClassDoc supercls = thiscls.superclass();\n\t\tif (supercls != null)\n\t\t\tsupers.add(supercls);\n\t\tClassDoc[] ifaces = thiscls.interfaces();\n\t\tfor (int i = 0; i < ifaces.length; i++)\n\t\t\tsupers.add(ifaces[i]);\n\t\t\n\t\t// subs\n\t\tList subs = new ArrayList();\n\t\tif (thiscls.isInterface()) {\n\t\t\tfor (int j = 0; j < clss.length; j++) {\n\t\t\t\tClassDoc[] ifa = clss[j].interfaces();\n\t\t\t\tfor (int k = 0; k < ifa.length; k++) {\n\t\t\t\t\tif (ifa[k] == thiscls)\n\t\t\t\t\t\tsubs.add(clss[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor (int j = 0; j < clss.length; j++)\n\t\t\tif (clss[j].superclass() == thiscls)\n\t\t\t\tsubs.add(clss[j]);\n\t\t\n\t\t// outers\n\t\tClassDoc outer = null;\n\tFIND_OUTER:\n\t\tfor (int j = 0; j < clss.length; j++) {\n\t\t\tClassDoc[] in = clss[j].innerClasses();\n\t\t\tfor (int k = 0; k < in.length; k++) {\n\t\t\t\tif (in[k] == thiscls) {\n\t\t\t\t\touter = clss[j];\n\t\t\t\t\tbreak FIND_OUTER;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t// write html\n        String destdir = configuration().destdirname.length() > 0 ? configuration().destdirname + File.separatorChar : \"\";\n        String pkg = thiscls.containingPackage().name();\n        String dstpath = \"\";\n        if (pkg.length() > 0) {\n\t        destdir += pkg.replace('.', File.separatorChar) + File.separatorChar;\n\t        StringBuffer sb = new StringBuffer(\"../\");\n\t        for (int i = 0; i < pkg.length(); i++)\n\t\t\t\tif (pkg.charAt(i) == '.')\n\t\t\t\t\tsb.append(\"../\");\n\t\t\tdstpath = sb.toString();\n\t    }\n\t    String imgpath = \"<img src=\" + dstpath + \"images/\";\n        String fn = destdir + PREFIX + thiscls.name() + \".html\";\n\t\tmakeContainer(fn);\n\t\tOutputStream os = new FileOutputStream(fn);\n        String docencoding = configuration().docencoding;\n        OutputStreamWriter oswriter;\n        if (docencoding == null)\n            oswriter = new OutputStreamWriter(os);\n        else\n            oswriter = new OutputStreamWriter(os, docencoding);\n        PrintWriter out = new PrintWriter(oswriter);\n        out.println(\"<html><head><title>\");\n        if (configuration().windowtitle != null) {\n\t\t\tout.print(configuration().windowtitle + \" : \");\n\t\t}\n        out.print(thiscls.name());\n        out.println(\"</title></head><body bgcolor=\\\"#ffffff\\\" text=\\\"#000000\\\" vlink=\\\"#330000\\\" alink=\\\"#330044\\\" link=\\\"#0000aa\\\">\");\n\t\t\n\t\tout.println(\"<h2 class=\\\"thisclassname\\\">\" + thiscls.name() + \"</h2>\");\n\t\t\n\t\tout.println(\"<table width=100% cellspacing=0 cellpadding=0>\");\n\t\t\n\t\t// inners\n\t\tif (!inners.isEmpty()) {\n\t\t\tout.println(\"<tr><td width=32%></td><td width=12></td><td width=32% valign=bottom>\");\n\t\t\twriteClasses(out, inners, configuration().INNER, dstpath);\n\t\t\tout.println(\"</td><td width=12></td><td width=32%></td></tr><tr><td width=32%></td><td width=12>\");\n\t\t\tout.println(\"</td><td width=32% align=center valign=middle>\");\n\t\t\tout.println(imgpath + \"inner.gif>\");\n\t\t\tout.println(\"</td><td width=12></td><td width=32%></td></tr>\");\n\t\t}\n\t\t\n\t\t// supers\n\t\tout.println(\"<tr><td width=32% valign=top>\");\n\t\tif (!supers.isEmpty())\n\t\t\twriteClasses(out, supers, configuration().SUPER, dstpath);\n\t\tout.println(\"</td><td width=12 align=center valign=top>\");\n\t\tif (!supers.isEmpty())\n\t\t\tout.println(imgpath + \"ext.gif>\");\n\t\t\n\t\t// this\n\t\tout.println(\"</td><td width=32% valign=top align=center>\");\n\t\twriteClass(out, thiscls, configuration().PIVOT, dstpath, true);\n\t\t\n\t\t// outer\n\t\tif (outer != null) {\n\t\t\tout.println(imgpath + \"outer.gif>\");\n\t\t\twriteClass(out, outer, configuration().OUTER, dstpath, false);\n\t\t}\n\t\tout.println(\"</td><td width=\\\"12\\\" align=\\\"center\\\" valign=\\\"top\\\">\");\n\n\t\t// subs\n\t\tif (!subs.isEmpty())\n\t\t\tout.println(imgpath + \"ext.gif\");\n\t\tout.println(\"</td>\");\n\t\tout.println(\"<td width=32% valign=top>\");\n\t\tif (!subs.isEmpty())\n\t\t\twriteClasses(out, subs, configuration().SUB, dstpath);\n\t\tout.println(\"</td></tr>\");\n\t\t\n\t\tout.println(\"</table></body></html>\");\n\t\tout.close();\n\t}\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"f35ba86e9cc568fdc800d780c620749584b1d5bc","date":1051838861,"type":4,"author":"Kelvin Tan","isMerge":false,"pathNew":"/dev/null","pathOld":"sandbox/projects/appex/src/scratchpad/src/JP/co/esm/caddies/doclets/UMLDoclet#writeClass(ClassDoc,ClassDoc[]).mjava","sourceNew":null,"sourceOld":"\tvoid writeClass(ClassDoc thiscls, ClassDoc[] clss) throws IOException {\n\t\t// inners\n\t\tClassDoc[] ins = thiscls.innerClasses();\n\t\tList inners = new ArrayList();\n\t\tfor (int i = 0; i < ins.length; i++)\n\t\t\tinners.add(ins[i]);\n\t\t\n\t\t// supers\n\t\tList supers = new ArrayList();\n\t\tClassDoc supercls = thiscls.superclass();\n\t\tif (supercls != null)\n\t\t\tsupers.add(supercls);\n\t\tClassDoc[] ifaces = thiscls.interfaces();\n\t\tfor (int i = 0; i < ifaces.length; i++)\n\t\t\tsupers.add(ifaces[i]);\n\t\t\n\t\t// subs\n\t\tList subs = new ArrayList();\n\t\tif (thiscls.isInterface()) {\n\t\t\tfor (int j = 0; j < clss.length; j++) {\n\t\t\t\tClassDoc[] ifa = clss[j].interfaces();\n\t\t\t\tfor (int k = 0; k < ifa.length; k++) {\n\t\t\t\t\tif (ifa[k] == thiscls)\n\t\t\t\t\t\tsubs.add(clss[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor (int j = 0; j < clss.length; j++)\n\t\t\tif (clss[j].superclass() == thiscls)\n\t\t\t\tsubs.add(clss[j]);\n\t\t\n\t\t// outers\n\t\tClassDoc outer = null;\n\tFIND_OUTER:\n\t\tfor (int j = 0; j < clss.length; j++) {\n\t\t\tClassDoc[] in = clss[j].innerClasses();\n\t\t\tfor (int k = 0; k < in.length; k++) {\n\t\t\t\tif (in[k] == thiscls) {\n\t\t\t\t\touter = clss[j];\n\t\t\t\t\tbreak FIND_OUTER;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t// write html\n        String destdir = configuration().destdirname.length() > 0 ? configuration().destdirname + File.separatorChar : \"\";\n        String pkg = thiscls.containingPackage().name();\n        String dstpath = \"\";\n        if (pkg.length() > 0) {\n\t        destdir += pkg.replace('.', File.separatorChar) + File.separatorChar;\n\t        StringBuffer sb = new StringBuffer(\"../\");\n\t        for (int i = 0; i < pkg.length(); i++)\n\t\t\t\tif (pkg.charAt(i) == '.')\n\t\t\t\t\tsb.append(\"../\");\n\t\t\tdstpath = sb.toString();\n\t    }\n\t    String imgpath = \"<img src=\" + dstpath + \"images/\";\n        String fn = destdir + PREFIX + thiscls.name() + \".html\";\n\t\tmakeContainer(fn);\n\t\tOutputStream os = new FileOutputStream(fn);\n        String docencoding = configuration().docencoding;\n        OutputStreamWriter oswriter;\n        if (docencoding == null)\n            oswriter = new OutputStreamWriter(os);\n        else\n            oswriter = new OutputStreamWriter(os, docencoding);\n        PrintWriter out = new PrintWriter(oswriter);\n        out.println(\"<html><head><title>\");\n        if (configuration().windowtitle != null) {\n\t\t\tout.print(configuration().windowtitle + \" : \");\n\t\t}\n        out.print(thiscls.name());\n        out.println(\"</title></head><body bgcolor=\\\"#ffffff\\\" text=\\\"#000000\\\" vlink=\\\"#330000\\\" alink=\\\"#330044\\\" link=\\\"#0000aa\\\">\");\n\t\t\n\t\tout.println(\"<h2 class=\\\"thisclassname\\\">\" + thiscls.name() + \"</h2>\");\n\t\t\n\t\tout.println(\"<table width=100% cellspacing=0 cellpadding=0>\");\n\t\t\n\t\t// inners\n\t\tif (!inners.isEmpty()) {\n\t\t\tout.println(\"<tr><td width=32%></td><td width=12></td><td width=32% valign=bottom>\");\n\t\t\twriteClasses(out, inners, configuration().INNER, dstpath);\n\t\t\tout.println(\"</td><td width=12></td><td width=32%></td></tr><tr><td width=32%></td><td width=12>\");\n\t\t\tout.println(\"</td><td width=32% align=center valign=middle>\");\n\t\t\tout.println(imgpath + \"inner.gif>\");\n\t\t\tout.println(\"</td><td width=12></td><td width=32%></td></tr>\");\n\t\t}\n\t\t\n\t\t// supers\n\t\tout.println(\"<tr><td width=32% valign=top>\");\n\t\tif (!supers.isEmpty())\n\t\t\twriteClasses(out, supers, configuration().SUPER, dstpath);\n\t\tout.println(\"</td><td width=12 align=center valign=top>\");\n\t\tif (!supers.isEmpty())\n\t\t\tout.println(imgpath + \"ext.gif>\");\n\t\t\n\t\t// this\n\t\tout.println(\"</td><td width=32% valign=top align=center>\");\n\t\twriteClass(out, thiscls, configuration().PIVOT, dstpath, true);\n\t\t\n\t\t// outer\n\t\tif (outer != null) {\n\t\t\tout.println(imgpath + \"outer.gif>\");\n\t\t\twriteClass(out, outer, configuration().OUTER, dstpath, false);\n\t\t}\n\t\tout.println(\"</td><td width=\\\"12\\\" align=\\\"center\\\" valign=\\\"top\\\">\");\n\n\t\t// subs\n\t\tif (!subs.isEmpty())\n\t\t\tout.println(imgpath + \"ext.gif\");\n\t\tout.println(\"</td>\");\n\t\tout.println(\"<td width=32% valign=top>\");\n\t\tif (!subs.isEmpty())\n\t\t\twriteClasses(out, subs, configuration().SUB, dstpath);\n\t\tout.println(\"</td></tr>\");\n\t\t\n\t\tout.println(\"</table></body></html>\");\n\t\tout.close();\n\t}\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"f35ba86e9cc568fdc800d780c620749584b1d5bc":["e3074d05d861bc1436ee03619fdee547f9c51d22"],"e3074d05d861bc1436ee03619fdee547f9c51d22":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["f35ba86e9cc568fdc800d780c620749584b1d5bc"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["e3074d05d861bc1436ee03619fdee547f9c51d22"],"f35ba86e9cc568fdc800d780c620749584b1d5bc":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"e3074d05d861bc1436ee03619fdee547f9c51d22":["f35ba86e9cc568fdc800d780c620749584b1d5bc"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}