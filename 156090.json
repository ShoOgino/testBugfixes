{"path":"solr/core/src/java/org/apache/solr/rest/ManagedResource#doPut(BaseSolrResource,Object).mjava","commits":[{"id":"89fd5bce15c8e0ca1b10c9988cff9fdcc88c152b","date":1601832109,"type":1,"author":"Timothy Potter","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/rest/ManagedResource#doPut(BaseSolrResource,Object).mjava","pathOld":"solr/core/src/java/org/apache/solr/rest/ManagedResource#doPut(BaseSolrResource,Representation,Object).mjava","sourceNew":"  /**\n   * Applies changes to initArgs or managed data.\n   */\n  @SuppressWarnings(\"unchecked\")\n  public synchronized void doPut(BaseSolrResource endpoint, Object json) {\n\n    if (log.isInfoEnabled()) {\n      log.info(\"Processing update to {}: {} is a {}\", getResourceId(), json, json.getClass().getName());\n    }\n    \n    boolean updatedInitArgs = false;\n    Object managedData = null;\n    if (json instanceof Map) {\n      // hmmmm ... not sure how flexible we want to be here?\n      Map<String,Object> jsonMap = (Map<String,Object>)json;      \n      if (jsonMap.containsKey(INIT_ARGS_JSON_FIELD) || \n          jsonMap.containsKey(MANAGED_JSON_LIST_FIELD) || \n          jsonMap.containsKey(MANAGED_JSON_MAP_FIELD))\n      {\n        Map<String,Object> initArgsMap = (Map<String,Object>)jsonMap.get(INIT_ARGS_JSON_FIELD);\n        updatedInitArgs = updateInitArgs(new NamedList<>(initArgsMap));\n        \n        if (jsonMap.containsKey(MANAGED_JSON_LIST_FIELD)) {\n          managedData = jsonMap.get(MANAGED_JSON_LIST_FIELD);          \n        } else if (jsonMap.containsKey(MANAGED_JSON_MAP_FIELD)) {\n          managedData = jsonMap.get(MANAGED_JSON_MAP_FIELD);                    \n        }\n      } else {\n        managedData = jsonMap;        \n      }      \n    } else if (json instanceof List) {\n      managedData = json;\n    } else {\n      throw new SolrException(ErrorCode.BAD_REQUEST,\n          \"Unsupported update format \"+json.getClass().getName());\n    }\n        \n    Object updated = null;\n    if (managedData != null) {\n      updated = applyUpdatesToManagedData(managedData);\n    }\n    \n    if (updatedInitArgs || updated != null) {\n      storeManagedData(updated);\n    }\n    \n    // PUT just returns success status code with an empty body\n  }\n\n","sourceOld":"  /**\n   * Applies changes to initArgs or managed data.\n   */\n  @SuppressWarnings(\"unchecked\")\n  public synchronized void doPut(BaseSolrResource endpoint, Representation entity, Object json) {\n\n    if (log.isInfoEnabled()) {\n      log.info(\"Processing update to {}: {} is a {}\", getResourceId(), json, json.getClass().getName());\n    }\n    \n    boolean updatedInitArgs = false;\n    Object managedData = null;\n    if (json instanceof Map) {\n      // hmmmm ... not sure how flexible we want to be here?\n      Map<String,Object> jsonMap = (Map<String,Object>)json;      \n      if (jsonMap.containsKey(INIT_ARGS_JSON_FIELD) || \n          jsonMap.containsKey(MANAGED_JSON_LIST_FIELD) || \n          jsonMap.containsKey(MANAGED_JSON_MAP_FIELD))\n      {\n        Map<String,Object> initArgsMap = (Map<String,Object>)jsonMap.get(INIT_ARGS_JSON_FIELD);\n        updatedInitArgs = updateInitArgs(new NamedList<>(initArgsMap));\n        \n        if (jsonMap.containsKey(MANAGED_JSON_LIST_FIELD)) {\n          managedData = jsonMap.get(MANAGED_JSON_LIST_FIELD);          \n        } else if (jsonMap.containsKey(MANAGED_JSON_MAP_FIELD)) {\n          managedData = jsonMap.get(MANAGED_JSON_MAP_FIELD);                    \n        }\n      } else {\n        managedData = jsonMap;        \n      }      \n    } else if (json instanceof List) {\n      managedData = json;\n    } else {\n      throw new ResourceException(Status.CLIENT_ERROR_BAD_REQUEST, \n          \"Unsupported update format \"+json.getClass().getName());\n    }\n        \n    Object updated = null;\n    if (managedData != null) {\n      updated = applyUpdatesToManagedData(managedData);\n    }\n    \n    if (updatedInitArgs || updated != null) {\n      storeManagedData(updated);\n    }\n    \n    // PUT just returns success status code with an empty body\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"89fd5bce15c8e0ca1b10c9988cff9fdcc88c152b":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["89fd5bce15c8e0ca1b10c9988cff9fdcc88c152b"]},"commit2Childs":{"89fd5bce15c8e0ca1b10c9988cff9fdcc88c152b":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["89fd5bce15c8e0ca1b10c9988cff9fdcc88c152b"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}