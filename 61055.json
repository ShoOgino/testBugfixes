{"path":"solr/core/src/java/org/apache/solr/search/PointSetQuery[GraphTermsQParserPlugin]#getLiveDocs(IndexSearcher).mjava","commits":[{"id":"e05158fccbb5082f97e4ae2566c5ecfb9df35b7a","date":1501604915,"type":0,"author":"yonik","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/search/PointSetQuery[GraphTermsQParserPlugin]#getLiveDocs(IndexSearcher).mjava","pathOld":"/dev/null","sourceNew":"  private FixedBitSet getLiveDocs(IndexSearcher searcher) throws IOException {\n    if (searcher instanceof SolrIndexSearcher) {\n      BitDocSet liveDocs = ((SolrIndexSearcher) searcher).getLiveDocs();\n      FixedBitSet liveBits = liveDocs.size() == ((SolrIndexSearcher) searcher).maxDoc() ? null : liveDocs.getBits();\n      return liveBits;\n    } else {\n      if (searcher.getTopReaderContext().reader().maxDoc() == searcher.getTopReaderContext().reader().numDocs()) return null;\n      FixedBitSet bs = new FixedBitSet(searcher.getTopReaderContext().reader().maxDoc());\n      for (LeafReaderContext ctx : searcher.getTopReaderContext().leaves()) {\n        Bits liveDocs = ctx.reader().getLiveDocs();\n        int max = ctx.reader().maxDoc();\n        int base = ctx.docBase;\n        for (int i=0; i<max; i++) {\n          if (liveDocs.get(i)) bs.set(i + base);\n        }\n      }\n      return bs;\n    }\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"7a23cf16c8fa265dc0a564adcabb55e3f054e0ac","date":1502192746,"type":0,"author":"Shalin Shekhar Mangar","isMerge":true,"pathNew":"solr/core/src/java/org/apache/solr/search/PointSetQuery[GraphTermsQParserPlugin]#getLiveDocs(IndexSearcher).mjava","pathOld":"/dev/null","sourceNew":"  private FixedBitSet getLiveDocs(IndexSearcher searcher) throws IOException {\n    if (searcher instanceof SolrIndexSearcher) {\n      BitDocSet liveDocs = ((SolrIndexSearcher) searcher).getLiveDocs();\n      FixedBitSet liveBits = liveDocs.size() == ((SolrIndexSearcher) searcher).maxDoc() ? null : liveDocs.getBits();\n      return liveBits;\n    } else {\n      if (searcher.getTopReaderContext().reader().maxDoc() == searcher.getTopReaderContext().reader().numDocs()) return null;\n      FixedBitSet bs = new FixedBitSet(searcher.getTopReaderContext().reader().maxDoc());\n      for (LeafReaderContext ctx : searcher.getTopReaderContext().leaves()) {\n        Bits liveDocs = ctx.reader().getLiveDocs();\n        int max = ctx.reader().maxDoc();\n        int base = ctx.docBase;\n        for (int i=0; i<max; i++) {\n          if (liveDocs.get(i)) bs.set(i + base);\n        }\n      }\n      return bs;\n    }\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"bf29cc8a76949bbcbc15b386a9e46a533f5b3332","date":1527778512,"type":3,"author":"David Smiley","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/search/PointSetQuery[GraphTermsQParserPlugin]#getLiveDocs(IndexSearcher).mjava","pathOld":"solr/core/src/java/org/apache/solr/search/PointSetQuery[GraphTermsQParserPlugin]#getLiveDocs(IndexSearcher).mjava","sourceNew":"  private FixedBitSet getLiveDocs(IndexSearcher searcher) throws IOException {\n    if (!searcher.getIndexReader().hasDeletions()) {\n      return null;\n    }\n    if (searcher instanceof SolrIndexSearcher) {\n      return ((SolrIndexSearcher) searcher).getLiveDocSet().getBits();\n    } else {\n      // TODO Does this ever happen?  In Solr should always be SolrIndexSearcher?\n      //smallSetSize==0 thus will always produce a BitDocSet (FixedBitSet)\n      DocSetCollector docSetCollector = new DocSetCollector(0, searcher.getIndexReader().maxDoc());\n      searcher.search(new MatchAllDocsQuery(), docSetCollector);\n      return ((BitDocSet) docSetCollector.getDocSet()).getBits();\n    }\n  }\n\n","sourceOld":"  private FixedBitSet getLiveDocs(IndexSearcher searcher) throws IOException {\n    if (searcher instanceof SolrIndexSearcher) {\n      BitDocSet liveDocs = ((SolrIndexSearcher) searcher).getLiveDocs();\n      FixedBitSet liveBits = liveDocs.size() == ((SolrIndexSearcher) searcher).maxDoc() ? null : liveDocs.getBits();\n      return liveBits;\n    } else {\n      if (searcher.getTopReaderContext().reader().maxDoc() == searcher.getTopReaderContext().reader().numDocs()) return null;\n      FixedBitSet bs = new FixedBitSet(searcher.getTopReaderContext().reader().maxDoc());\n      for (LeafReaderContext ctx : searcher.getTopReaderContext().leaves()) {\n        Bits liveDocs = ctx.reader().getLiveDocs();\n        int max = ctx.reader().maxDoc();\n        int base = ctx.docBase;\n        for (int i=0; i<max; i++) {\n          if (liveDocs.get(i)) bs.set(i + base);\n        }\n      }\n      return bs;\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"90440a2155c2b9ce30bf8fc29b1c978c58dae1e7","date":1582642100,"type":3,"author":"David Smiley","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/search/PointSetQuery[GraphTermsQParserPlugin]#getLiveDocs(IndexSearcher).mjava","pathOld":"solr/core/src/java/org/apache/solr/search/PointSetQuery[GraphTermsQParserPlugin]#getLiveDocs(IndexSearcher).mjava","sourceNew":"  private FixedBitSet getLiveDocs(IndexSearcher searcher) throws IOException {\n    if (!searcher.getIndexReader().hasDeletions()) {\n      return null;\n    }\n    if (searcher instanceof SolrIndexSearcher) {\n      return ((SolrIndexSearcher) searcher).getLiveDocSet().getBits();\n    } else { // could happen in Delete-by-query situation\n      //smallSetSize==0 thus will always produce a BitDocSet (FixedBitSet)\n      DocSetCollector docSetCollector = new DocSetCollector(0, searcher.getIndexReader().maxDoc());\n      searcher.search(new MatchAllDocsQuery(), docSetCollector);\n      return ((BitDocSet) docSetCollector.getDocSet()).getBits();\n    }\n  }\n\n","sourceOld":"  private FixedBitSet getLiveDocs(IndexSearcher searcher) throws IOException {\n    if (!searcher.getIndexReader().hasDeletions()) {\n      return null;\n    }\n    if (searcher instanceof SolrIndexSearcher) {\n      return ((SolrIndexSearcher) searcher).getLiveDocSet().getBits();\n    } else {\n      // TODO Does this ever happen?  In Solr should always be SolrIndexSearcher?\n      //smallSetSize==0 thus will always produce a BitDocSet (FixedBitSet)\n      DocSetCollector docSetCollector = new DocSetCollector(0, searcher.getIndexReader().maxDoc());\n      searcher.search(new MatchAllDocsQuery(), docSetCollector);\n      return ((BitDocSet) docSetCollector.getDocSet()).getBits();\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"7a23cf16c8fa265dc0a564adcabb55e3f054e0ac":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","e05158fccbb5082f97e4ae2566c5ecfb9df35b7a"],"e05158fccbb5082f97e4ae2566c5ecfb9df35b7a":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"bf29cc8a76949bbcbc15b386a9e46a533f5b3332":["e05158fccbb5082f97e4ae2566c5ecfb9df35b7a"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"90440a2155c2b9ce30bf8fc29b1c978c58dae1e7":["bf29cc8a76949bbcbc15b386a9e46a533f5b3332"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["90440a2155c2b9ce30bf8fc29b1c978c58dae1e7"]},"commit2Childs":{"7a23cf16c8fa265dc0a564adcabb55e3f054e0ac":[],"e05158fccbb5082f97e4ae2566c5ecfb9df35b7a":["7a23cf16c8fa265dc0a564adcabb55e3f054e0ac","bf29cc8a76949bbcbc15b386a9e46a533f5b3332"],"bf29cc8a76949bbcbc15b386a9e46a533f5b3332":["90440a2155c2b9ce30bf8fc29b1c978c58dae1e7"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["7a23cf16c8fa265dc0a564adcabb55e3f054e0ac","e05158fccbb5082f97e4ae2566c5ecfb9df35b7a"],"90440a2155c2b9ce30bf8fc29b1c978c58dae1e7":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["7a23cf16c8fa265dc0a564adcabb55e3f054e0ac","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}