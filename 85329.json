{"path":"solr/core/src/test/org/apache/solr/update/processor/DocExpirationUpdateProcessorFactoryTest#testTTLFieldConversion().mjava","commits":[{"id":"ca70fffb953aae4d27efbfc28758033a317f39b1","date":1396371342,"type":0,"author":"Chris M. Hostetter","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/update/processor/DocExpirationUpdateProcessorFactoryTest#testTTLFieldConversion().mjava","pathOld":"/dev/null","sourceNew":"  public void testTTLFieldConversion() throws Exception {\n    final String chain = \"convert-ttl-field\";\n    SolrInputDocument d = null;\n    d = processAdd(chain,\n                   params(\"NOW\",\"1394059630042\"),\n                   doc(f(\"id\", \"1111\"),\n                       f(\"_ttl_field_\",\"+5MINUTES\")));\n    assertNotNull(d);\n    assertEquals(new Date(1394059930042L), d.getFieldValue(\"_expire_at_tdt\"));\n\n    d = processAdd(chain,\n                   params(\"NOW\",\"1394059630042\"),\n                   doc(f(\"id\", \"2222\"),\n                       f(\"_ttl_field_\",\"+27MINUTES\")));\n    assertNotNull(d);\n    assertEquals(new Date(1394061250042L), d.getFieldValue(\"_expire_at_tdt\"));\n\n    d = processAdd(chain,\n                   params(\"NOW\",\"1394059630042\"),\n                   doc(f(\"id\", \"3333\"),\n                       f(\"_ttl_field_\",\"+1YEAR\")));\n    assertNotNull(d);\n    assertEquals(new Date(1425595630042L), d.getFieldValue(\"_expire_at_tdt\"));\n\n    d = processAdd(chain,\n                   params(\"NOW\",\"1394059630042\"),\n                   doc(f(\"id\", \"1111\"),\n                       f(\"_ttl_field_\",\"/DAY+1YEAR\")));\n    assertNotNull(d);\n    assertEquals(new Date(1425513600000L), d.getFieldValue(\"_expire_at_tdt\"));\n\n    // default ttlParamName is disabled, this should not convert...\n    d = processAdd(chain,\n                   params(\"NOW\",\"1394059630042\",\n                          \"_ttl_\",\"+5MINUTES\"),\n                   doc(f(\"id\", \"1111\")));\n    assertNotNull(d);\n    assertNull(d.getFieldValue(\"_expire_at_tdt\"));\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"5eb2511ababf862ea11e10761c70ee560cd84510","date":1396607225,"type":0,"author":"Dawid Weiss","isMerge":true,"pathNew":"solr/core/src/test/org/apache/solr/update/processor/DocExpirationUpdateProcessorFactoryTest#testTTLFieldConversion().mjava","pathOld":"/dev/null","sourceNew":"  public void testTTLFieldConversion() throws Exception {\n    final String chain = \"convert-ttl-field\";\n    SolrInputDocument d = null;\n    d = processAdd(chain,\n                   params(\"NOW\",\"1394059630042\"),\n                   doc(f(\"id\", \"1111\"),\n                       f(\"_ttl_field_\",\"+5MINUTES\")));\n    assertNotNull(d);\n    assertEquals(new Date(1394059930042L), d.getFieldValue(\"_expire_at_tdt\"));\n\n    d = processAdd(chain,\n                   params(\"NOW\",\"1394059630042\"),\n                   doc(f(\"id\", \"2222\"),\n                       f(\"_ttl_field_\",\"+27MINUTES\")));\n    assertNotNull(d);\n    assertEquals(new Date(1394061250042L), d.getFieldValue(\"_expire_at_tdt\"));\n\n    d = processAdd(chain,\n                   params(\"NOW\",\"1394059630042\"),\n                   doc(f(\"id\", \"3333\"),\n                       f(\"_ttl_field_\",\"+1YEAR\")));\n    assertNotNull(d);\n    assertEquals(new Date(1425595630042L), d.getFieldValue(\"_expire_at_tdt\"));\n\n    d = processAdd(chain,\n                   params(\"NOW\",\"1394059630042\"),\n                   doc(f(\"id\", \"1111\"),\n                       f(\"_ttl_field_\",\"/DAY+1YEAR\")));\n    assertNotNull(d);\n    assertEquals(new Date(1425513600000L), d.getFieldValue(\"_expire_at_tdt\"));\n\n    // default ttlParamName is disabled, this should not convert...\n    d = processAdd(chain,\n                   params(\"NOW\",\"1394059630042\",\n                          \"_ttl_\",\"+5MINUTES\"),\n                   doc(f(\"id\", \"1111\")));\n    assertNotNull(d);\n    assertNull(d.getFieldValue(\"_expire_at_tdt\"));\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"5eb2511ababf862ea11e10761c70ee560cd84510":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","ca70fffb953aae4d27efbfc28758033a317f39b1"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"ca70fffb953aae4d27efbfc28758033a317f39b1":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["ca70fffb953aae4d27efbfc28758033a317f39b1"]},"commit2Childs":{"5eb2511ababf862ea11e10761c70ee560cd84510":[],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["5eb2511ababf862ea11e10761c70ee560cd84510","ca70fffb953aae4d27efbfc28758033a317f39b1"],"ca70fffb953aae4d27efbfc28758033a317f39b1":["5eb2511ababf862ea11e10761c70ee560cd84510","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["5eb2511ababf862ea11e10761c70ee560cd84510","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}