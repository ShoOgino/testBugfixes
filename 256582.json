{"path":"solr/core/src/test/org/apache/solr/cloud/RouteFieldTest#checkShardsHaveSameDocs().mjava","commits":[{"id":"25726728867b518829d762aa00b696cbfa96818c","date":1595801885,"type":0,"author":"Erick Erickson","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/RouteFieldTest#checkShardsHaveSameDocs().mjava","pathOld":"/dev/null","sourceNew":"  private void checkShardsHaveSameDocs() throws IOException, SolrServerException {\n\n    CloudSolrClient client = cluster.getSolrClient();\n\n    DocCollection docColl = client.getZkStateReader().getClusterState().getCollection(COLL_ROUTE);\n    List<Replica> reps = new ArrayList<>(docColl.getSlice(\"shard1\").getReplicas());\n    String urlRouteShard1 = reps.get(0).get(\"base_url\") + \"/\" + reps.get(0).get(\"core\");\n\n    reps = new ArrayList<>(docColl.getSlice(\"shard2\").getReplicas());\n    String urlRouteShard2 = reps.get(0).get(\"base_url\") + \"/\" + reps.get(0).get(\"core\");\n\n    docColl = client.getZkStateReader().getClusterState().getCollection(COLL_ID);\n    reps = new ArrayList<>(docColl.getSlice(\"shard1\").getReplicas());\n    String urlIdShard1 = reps.get(0).get(\"base_url\") + \"/\" + reps.get(0).get(\"core\");\n\n    reps = new ArrayList<>(docColl.getSlice(\"shard2\").getReplicas());\n    String urlIdShard2 = reps.get(0).get(\"base_url\") + \"/\" + reps.get(0).get(\"core\");\n\n    assertNotEquals(\"URLs shouldn't be the same\", urlRouteShard1, urlIdShard1);\n    assertNotEquals(\"URLs shouldn't be the same\", urlRouteShard2, urlIdShard2);\n    compareShardDocs(urlIdShard1, urlRouteShard1);\n    compareShardDocs(urlIdShard2, urlRouteShard2);\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"25726728867b518829d762aa00b696cbfa96818c":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["25726728867b518829d762aa00b696cbfa96818c"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["25726728867b518829d762aa00b696cbfa96818c"],"25726728867b518829d762aa00b696cbfa96818c":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}