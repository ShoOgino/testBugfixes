{"path":"solr/core/src/test/org/apache/solr/search/TestSolr4Spatial2#testGeodistSortPossibleWithLatLonPointSpatialFieldOrSpatialRecursivePrefixTreeField().mjava","commits":[{"id":"254ec3078340f6312bb97bed5b76742a18079ec8","date":1600658388,"type":0,"author":"Tom Edge","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/search/TestSolr4Spatial2#testGeodistSortPossibleWithLatLonPointSpatialFieldOrSpatialRecursivePrefixTreeField().mjava","pathOld":"/dev/null","sourceNew":"  @Test // SOLR-14802\n  public void testGeodistSortPossibleWithLatLonPointSpatialFieldOrSpatialRecursivePrefixTreeField() throws Exception {\n    assertU(adoc(\"id\", \"1\", \"llp\", \"53.4721936,-2.24703\", \"srpt_quad\", \"53.425272,-2.322356\"));\n    assertU(commit());\n\n    assertJQ(req(\n            \"q\", \"*:*\",\n            \"fq\", \"{!geofilt}\",\n            \"d\", \"50\",\n            \"pt\", \"53.4721936,-2.24703\",\n            \"sfield\", \"srpt_quad\",\n            \"sort\", \"min(geodist(),geodist(llp,53.4721936,-2.24703)) asc\"\n            ),\n            \"/response/docs/[0]/id=='1'\");\n\n    assertJQ(req(\n            \"q\", \"*:*\",\n            \"fq\", \"{!geofilt}\",\n            \"d\", \"50\",\n            \"pt\", \"53.4721936,-2.24703\",\n            \"sfield\", \"srpt_quad\",\n            \"sort\", \"min(geodist(),geodist(53.4721936,-2.24703,llp)) asc\" // moved llp to the end\n            ),\n            \"/response/docs/[0]/id=='1'\");\n\n    assertJQ(req(\n            \"q\", \"*:*\",\n            \"fq\", \"{!geofilt}\",\n            \"d\", \"50\",\n            \"pt\", \"53.4721936,-2.24703\",\n            \"sfield\", \"llp\", // trying another field type\n            \"sort\", \"min(geodist(),geodist(53.4721936,-2.24703,srpt_quad)) asc\"\n            ),\n            \"/response/docs/[0]/id=='1'\");\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"254ec3078340f6312bb97bed5b76742a18079ec8":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["254ec3078340f6312bb97bed5b76742a18079ec8"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["254ec3078340f6312bb97bed5b76742a18079ec8"],"254ec3078340f6312bb97bed5b76742a18079ec8":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}