{"path":"lucene/src/java/org/apache/lucene/index/DocumentsWriterPerThreadPool#newThreadState(boolean).mjava","commits":[{"id":"761f91143f5b5b8e3016b2b178ee0f2f61a9b4e4","date":1303818069,"type":0,"author":"Simon Willnauer","isMerge":false,"pathNew":"lucene/src/java/org/apache/lucene/index/DocumentsWriterPerThreadPool#newThreadState(boolean).mjava","pathOld":"/dev/null","sourceNew":"  /**\n   * Returns a new {@link ThreadState} iff any new state is available otherwise\n   * <code>null</code>.\n   * \n   * @param lock\n   *          <code>true</code> iff the new {@link ThreadState} should be locked\n   *          before published otherwise <code>false</code>.\n   * @return a new {@link ThreadState} iff any new state is available otherwise\n   *         <code>null</code>\n   */\n  public synchronized ThreadState newThreadState(boolean lock) {\n    if (numThreadStatesActive < perThreads.length) {\n      final ThreadState threadState = perThreads[numThreadStatesActive];\n      threadState.lock();\n      threadState.perThread.initialize();\n      numThreadStatesActive++; // increment will publish the ThreadState\n      return threadState;\n    }\n    return null;\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":["7a5e335ca550a22534d8ca9fd0914f14091e47ee"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"78248211b373c5a9b53071bf888805d4fab51bd3","date":1303919265,"type":5,"author":"Simon Willnauer","isMerge":false,"pathNew":"lucene/src/java/org/apache/lucene/index/DocumentsWriterPerThreadPool#newThreadState().mjava","pathOld":"lucene/src/java/org/apache/lucene/index/DocumentsWriterPerThreadPool#newThreadState(boolean).mjava","sourceNew":"  /**\n   * Returns a new {@link ThreadState} iff any new state is available otherwise\n   * <code>null</code>.\n   * <p>\n   * NOTE: the returned {@link ThreadState} is already locked iff non-\n   * <code>null</code>.\n   * \n   * @return a new {@link ThreadState} iff any new state is available otherwise\n   *         <code>null</code>\n   */\n  public synchronized ThreadState newThreadState() {\n    if (numThreadStatesActive < perThreads.length) {\n      final ThreadState threadState = perThreads[numThreadStatesActive];\n      threadState.lock(); // lock so nobody else will get this ThreadState\n      numThreadStatesActive++; // increment will publish the ThreadState\n      threadState.perThread.initialize();\n      return threadState;\n    }\n    return null;\n  }\n\n","sourceOld":"  /**\n   * Returns a new {@link ThreadState} iff any new state is available otherwise\n   * <code>null</code>.\n   * \n   * @param lock\n   *          <code>true</code> iff the new {@link ThreadState} should be locked\n   *          before published otherwise <code>false</code>.\n   * @return a new {@link ThreadState} iff any new state is available otherwise\n   *         <code>null</code>\n   */\n  public synchronized ThreadState newThreadState(boolean lock) {\n    if (numThreadStatesActive < perThreads.length) {\n      final ThreadState threadState = perThreads[numThreadStatesActive];\n      threadState.lock();\n      threadState.perThread.initialize();\n      numThreadStatesActive++; // increment will publish the ThreadState\n      return threadState;\n    }\n    return null;\n  }\n\n","bugFix":null,"bugIntro":["7a5e335ca550a22534d8ca9fd0914f14091e47ee"],"isBuggy":true,"nexts":[],"revCommit":null}],"commit2Parents":{"761f91143f5b5b8e3016b2b178ee0f2f61a9b4e4":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"78248211b373c5a9b53071bf888805d4fab51bd3":["761f91143f5b5b8e3016b2b178ee0f2f61a9b4e4"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"]},"commit2Childs":{"761f91143f5b5b8e3016b2b178ee0f2f61a9b4e4":["78248211b373c5a9b53071bf888805d4fab51bd3"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["761f91143f5b5b8e3016b2b178ee0f2f61a9b4e4","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"78248211b373c5a9b53071bf888805d4fab51bd3":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["78248211b373c5a9b53071bf888805d4fab51bd3","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}