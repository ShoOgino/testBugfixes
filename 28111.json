{"path":"lucene/highlighter/src/java/org/apache/lucene/search/highlight/TokenStreamFromTermPositionVector#initTokensArray().mjava","commits":[{"id":"ae230518a1a68acc124bef8df61ef94bd7c1295e","date":1417181719,"type":0,"author":"David Wayne Smiley","isMerge":false,"pathNew":"lucene/highlighter/src/java/org/apache/lucene/search/highlight/TokenStreamFromTermPositionVector#initTokensArray().mjava","pathOld":"/dev/null","sourceNew":"  private TokenLL[] initTokensArray() throws IOException {\n    // Estimate the number of position slots we need. We use some estimation factors taken from Wikipedia\n    //  that reduce the likelihood of needing to expand the array.\n    int sumTotalTermFreq = (int) vector.getSumTotalTermFreq();\n    if (sumTotalTermFreq == -1) {//unfortunately term vectors seem to not have this stat\n      int size = (int) vector.size();\n      if (size == -1) {//doesn't happen with term vectors, it seems, but pick a default any way\n        size = 128;\n      }\n      sumTotalTermFreq = (int)(size * 2.4);\n    }\n    final int originalPositionEstimate = (int) (sumTotalTermFreq * 1.5);//less than 1 in 10 docs exceed this\n    return new TokenLL[originalPositionEstimate];\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"714aa8d007eef87d7203cfc6e0fe4dab8dd8a497","date":1417181893,"type":5,"author":"David Wayne Smiley","isMerge":false,"pathNew":"lucene/highlighter/src/java/org/apache/lucene/search/highlight/TokenStreamFromTermVector#initTokensArray().mjava","pathOld":"lucene/highlighter/src/java/org/apache/lucene/search/highlight/TokenStreamFromTermPositionVector#initTokensArray().mjava","sourceNew":"  private TokenLL[] initTokensArray() throws IOException {\n    // Estimate the number of position slots we need. We use some estimation factors taken from Wikipedia\n    //  that reduce the likelihood of needing to expand the array.\n    int sumTotalTermFreq = (int) vector.getSumTotalTermFreq();\n    if (sumTotalTermFreq == -1) {//unfortunately term vectors seem to not have this stat\n      int size = (int) vector.size();\n      if (size == -1) {//doesn't happen with term vectors, it seems, but pick a default any way\n        size = 128;\n      }\n      sumTotalTermFreq = (int)(size * 2.4);\n    }\n    final int originalPositionEstimate = (int) (sumTotalTermFreq * 1.5);//less than 1 in 10 docs exceed this\n    return new TokenLL[originalPositionEstimate];\n  }\n\n","sourceOld":"  private TokenLL[] initTokensArray() throws IOException {\n    // Estimate the number of position slots we need. We use some estimation factors taken from Wikipedia\n    //  that reduce the likelihood of needing to expand the array.\n    int sumTotalTermFreq = (int) vector.getSumTotalTermFreq();\n    if (sumTotalTermFreq == -1) {//unfortunately term vectors seem to not have this stat\n      int size = (int) vector.size();\n      if (size == -1) {//doesn't happen with term vectors, it seems, but pick a default any way\n        size = 128;\n      }\n      sumTotalTermFreq = (int)(size * 2.4);\n    }\n    final int originalPositionEstimate = (int) (sumTotalTermFreq * 1.5);//less than 1 in 10 docs exceed this\n    return new TokenLL[originalPositionEstimate];\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"714aa8d007eef87d7203cfc6e0fe4dab8dd8a497":["ae230518a1a68acc124bef8df61ef94bd7c1295e"],"ae230518a1a68acc124bef8df61ef94bd7c1295e":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["714aa8d007eef87d7203cfc6e0fe4dab8dd8a497"]},"commit2Childs":{"714aa8d007eef87d7203cfc6e0fe4dab8dd8a497":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"ae230518a1a68acc124bef8df61ef94bd7c1295e":["714aa8d007eef87d7203cfc6e0fe4dab8dd8a497"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["ae230518a1a68acc124bef8df61ef94bd7c1295e"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}