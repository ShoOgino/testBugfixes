{"path":"solr/core/src/test/org/apache/solr/request/SimpleFacetsTest#testFacetMissing().mjava","commits":[{"id":"7679cc7d5b465ec8936979698cedf5fdbd71c95c","date":1566227764,"type":0,"author":"Munendra S N","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/request/SimpleFacetsTest#testFacetMissing().mjava","pathOld":"/dev/null","sourceNew":"  @Test\n  public void testFacetMissing() {\n    SolrParams commonParams = params(\"q\", \"foo_s:A\", \"rows\", \"0\", \"facet\", \"true\", \"facet.missing\", \"true\");\n\n    // with facet.limit!=0 and facet.missing=true\n    assertQ(\n        req(commonParams, \"facet.field\", \"trait_s\", \"facet.limit\", \"1\"),\n        \"//lst[@name='facet_counts']/lst[@name='facet_fields']\",\n        \"//lst[@name='facet_counts']/lst[@name='facet_fields']/lst[@name='trait_s']\",\n        \"*[count(//lst[@name='trait_s']/int)=2]\",\n        \"//lst[@name='trait_s']/int[@name='Obnoxious'][.='2']\",\n        \"//lst[@name='trait_s']/int[.='1']\"\n    );\n\n    // with facet.limit=0 and facet.missing=true\n    assertQ(\n        req(commonParams, \"facet.field\", \"trait_s\", \"facet.limit\", \"0\"),\n        \"//lst[@name='facet_counts']/lst[@name='facet_fields']\",\n        \"//lst[@name='facet_counts']/lst[@name='facet_fields']/lst[@name='trait_s']\",\n        \"*[count(//lst[@name='trait_s']/int)=1]\",\n        \"//lst[@name='trait_s']/int[.='1']\"\n    );\n\n    // facet.method=enum\n    assertQ(\n        req(commonParams, \"facet.field\", \"trait_s\", \"facet.limit\", \"0\", \"facet.method\", \"enum\"),\n        \"//lst[@name='facet_counts']/lst[@name='facet_fields']\",\n        \"//lst[@name='facet_counts']/lst[@name='facet_fields']/lst[@name='trait_s']\",\n        \"*[count(//lst[@name='trait_s']/int)=1]\",\n        \"//lst[@name='trait_s']/int[.='1']\"\n    );\n\n    assertQ(\n        req(commonParams, \"facet.field\", \"trait_s\", \"facet.limit\", \"0\", \"facet.mincount\", \"1\",\n            \"facet.method\", \"uif\"),\n        \"//lst[@name='facet_counts']/lst[@name='facet_fields']\",\n        \"//lst[@name='facet_counts']/lst[@name='facet_fields']/lst[@name='trait_s']\",\n        \"*[count(//lst[@name='trait_s']/int)=1]\",\n        \"//lst[@name='trait_s']/int[.='1']\"\n    );\n\n    // facet.method=fcs\n    assertQ(\n        req(commonParams, \"facet.field\", \"trait_s\", \"facet.limit\", \"0\", \"facet.method\", \"fcs\"),\n        \"//lst[@name='facet_counts']/lst[@name='facet_fields']\",\n        \"//lst[@name='facet_counts']/lst[@name='facet_fields']/lst[@name='trait_s']\",\n        \"*[count(//lst[@name='trait_s']/int)=1]\",\n        \"//lst[@name='trait_s']/int[.='1']\"\n    );\n\n    // facet.missing=true on numeric field\n    assertQ(\n        req(commonParams, \"facet.field\", \"range_facet_f\", \"facet.limit\", \"1\", \"facet.mincount\", \"1\"),\n        \"//lst[@name='facet_counts']/lst[@name='facet_fields']\",\n        \"//lst[@name='facet_counts']/lst[@name='facet_fields']/lst[@name='range_facet_f']\",\n        \"*[count(//lst[@name='range_facet_f']/int)=2]\",\n        \"//lst[@name='range_facet_f']/int[.='0']\"\n    );\n\n    // facet.limit=0\n    assertQ(\n        req(commonParams, \"facet.field\", \"range_facet_f\", \"facet.limit\", \"0\", \"facet.mincount\", \"1\"),\n        \"//lst[@name='facet_counts']/lst[@name='facet_fields']\",\n        \"//lst[@name='facet_counts']/lst[@name='facet_fields']/lst[@name='range_facet_f']\",\n        \"*[count(//lst[@name='range_facet_f']/int)=1]\",\n        \"//lst[@name='range_facet_f']/int[.='0']\"\n    );\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"7679cc7d5b465ec8936979698cedf5fdbd71c95c":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["7679cc7d5b465ec8936979698cedf5fdbd71c95c"]},"commit2Childs":{"7679cc7d5b465ec8936979698cedf5fdbd71c95c":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["7679cc7d5b465ec8936979698cedf5fdbd71c95c"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}