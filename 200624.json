{"path":"solr/core/src/test/org/apache/solr/search/facet/TestJsonFacetsWithNestedObjects#testBoolExclusion().mjava","commits":[{"id":"5b2cebce8aded9fff0c315c32efe811679c29d47","date":1593532507,"type":0,"author":"Mikhail Khludnev","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/search/facet/TestJsonFacetsWithNestedObjects#testBoolExclusion().mjava","pathOld":"/dev/null","sourceNew":"  public void testBoolExclusion() throws Exception {\n    final Client client = Client.localClient();\n    ModifiableSolrParams p = params(\"rows\", \"0\");\n    client.testJQ(params(p,\n            \"json.queries\", \"{'childquery':'comment_t:*',\" +\n                    \"'parentquery':'type_s:book',\" +\n                    \"'child.fq':[  {'#author':{'field':{'f':'author_s','query':'dan'}}},\" +\n                                  \"{'#stars':{'field':{'f':'stars_i','query':'4'}}}],\" +\n                    \"'snowcrash':{'field':{'f':'title_t','query':'Snow Crash'}}\" +\n                    \"}\",\n            \"json.query\", \"{'#top':{'parent':{'which':{'param':'parentquery'},\" +\n                                             \"'query':{'bool':{'filter':{'param':'child.fq'},\" +\n                                                              \"'must':{'param':'childquery'}\" +\n                    \"}}}}}\",\n            \"json.facet\", \"{\" +\n                    \"'comments_for_author':{'domain':{\" +\n                                \"'excludeTags':'top', \" +\n                                \"'blockChildren':'{!v=$parentquery}',\" +\n                                \"'filter':'{!bool filter=$child.fq filter=$childquery excludeTags=author}'\" +\n                            \"},\" +\n                            \"'type':'terms', 'field':'author_s'\" +\n                    \"}\" +\n                    \"  ,comments_for_stars: {\" +\n                                        \" domain: { excludeTags:top, \" +\n                                              \"'blockChildren':'{!v=$parentquery}',\" +\n                                              \" filter:\\\"{!bool filter=$child.fq  excludeTags=stars filter=$childquery}\\\" },\" +\n                            \"type:terms, field:stars_i\" +\n                    \"}\" +\n                    \",comments_for_stars_parent_filter: {\" +\n                                          \"domain: { \" +\n                                            \"excludeTags:top, \" +\n                                            \"'blockChildren':'{!v=$parentquery}',\" +\n                                            \"filter:[\\\"{!bool filter=$child.fq  excludeTags=stars filter=$childquery}\\\",\"\n                                          + \"\\\"{!child of=$parentquery}{!bool filter=$snowcrash}}\\\"] },\" +\n                            \"type:terms, field:stars_i\"+\n                    \" }\" +\n            \"}\",\n            \"json.fields\", \"'id,title_t'\")\n            , \"response=={numFound:0,start:0,'numFoundExact':true,docs:[]}\"\n            , \"facets=={ count:0,\" +\n                    \"comments_for_author:{\" +\n                    \"    buckets:[ {val:mary,    count:1} ]}\" +\n                    \",\" +\n                    \"comments_for_stars:{\" +\n                    \"    buckets:[ {val:2, count:1},\" +\n                    \"              {val:3, count:1} ]},\" +\n                    \"comments_for_stars_parent_filter:{\" +\n                    \"    buckets:[ {val:2, count:1} ]}\" +\n                    \"}\");\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"5b2cebce8aded9fff0c315c32efe811679c29d47":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["5b2cebce8aded9fff0c315c32efe811679c29d47"]},"commit2Childs":{"5b2cebce8aded9fff0c315c32efe811679c29d47":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["5b2cebce8aded9fff0c315c32efe811679c29d47"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}