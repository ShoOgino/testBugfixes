{"path":"solr/contrib/dataimporthandler/src/java/org/apache/solr/handler/dataimport/DIHCacheSupport#DIHCacheSupport(Context,String).mjava","commits":[{"id":"3337b86edd36607f0208321f1deee79c55e5fd21","date":1321266471,"type":0,"author":"Noble Paul","isMerge":false,"pathNew":"solr/contrib/dataimporthandler/src/java/org/apache/solr/handler/dataimport/DIHCacheSupport#DIHCacheSupport(Context,String).mjava","pathOld":"/dev/null","sourceNew":"  public DIHCacheSupport(Context context, String cacheImplName) {\n    this.cacheImplName = cacheImplName;\n    \n    String where = context.getEntityAttribute(\"where\");\n    String cacheKey = context\n        .getEntityAttribute(DIHCacheSupport.CACHE_PRIMARY_KEY);\n    String lookupKey = context\n        .getEntityAttribute(DIHCacheSupport.CACHE_FOREIGN_KEY);\n    if (cacheKey != null && lookupKey == null) {\n      throw new DataImportHandlerException(DataImportHandlerException.SEVERE,\n          \"'cacheKey' is specified for the entity \"\n              + context.getEntityAttribute(\"name\")\n              + \" but 'cacheLookup' is missing\");\n      \n    }\n    if (where == null && cacheKey == null) {\n      cacheDoKeyLookup = false;\n    } else {\n      if (where != null) {\n        String[] splits = where.split(\"=\");\n        cacheVariableName = splits[1].trim();\n      } else {\n        cacheVariableName = lookupKey;\n      }\n      cacheDoKeyLookup = true;\n    }\n    context.setSessionAttribute(DIHCacheSupport.CACHE_PRIMARY_KEY, cacheKey,\n        Context.SCOPE_ENTITY);\n    context.setSessionAttribute(DIHCacheSupport.CACHE_FOREIGN_KEY, lookupKey,\n        Context.SCOPE_ENTITY);\n    context.setSessionAttribute(DIHCacheSupport.CACHE_DELETE_PRIOR_DATA,\n        \"true\", Context.SCOPE_ENTITY);\n    context.setSessionAttribute(DIHCacheSupport.CACHE_READ_ONLY, \"false\",\n        Context.SCOPE_ENTITY);\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"24ceb971f4e38f66031e08ad9875913046ed5ee4","date":1329415741,"type":3,"author":"James Dyer","isMerge":false,"pathNew":"solr/contrib/dataimporthandler/src/java/org/apache/solr/handler/dataimport/DIHCacheSupport#DIHCacheSupport(Context,String).mjava","pathOld":"solr/contrib/dataimporthandler/src/java/org/apache/solr/handler/dataimport/DIHCacheSupport#DIHCacheSupport(Context,String).mjava","sourceNew":"  public DIHCacheSupport(Context context, String cacheImplName) {\n    this.cacheImplName = cacheImplName;\n    \n    String where = context.getEntityAttribute(\"where\");\n    String cacheKey = context.getEntityAttribute(DIHCacheSupport.CACHE_PRIMARY_KEY);\n    String lookupKey = context.getEntityAttribute(DIHCacheSupport.CACHE_FOREIGN_KEY);\n    if (cacheKey != null && lookupKey == null) {\n      throw new DataImportHandlerException(DataImportHandlerException.SEVERE,\n          \"'cacheKey' is specified for the entity \"\n              + context.getEntityAttribute(\"name\")\n              + \" but 'cacheLookup' is missing\");\n      \n    }\n    if (where == null && cacheKey == null) {\n      cacheDoKeyLookup = false;\n    } else {\n      if (where != null) {\n        String[] splits = where.split(\"=\");\n        cacheKey = splits[0];\n        cacheForeignKey = splits[1].trim();\n      } else {\n        cacheForeignKey = lookupKey;\n      }\n      cacheDoKeyLookup = true;\n    }\n    context.setSessionAttribute(DIHCacheSupport.CACHE_PRIMARY_KEY, cacheKey,\n        Context.SCOPE_ENTITY);\n    context.setSessionAttribute(DIHCacheSupport.CACHE_FOREIGN_KEY, cacheForeignKey,\n        Context.SCOPE_ENTITY);\n    context.setSessionAttribute(DIHCacheSupport.CACHE_DELETE_PRIOR_DATA,\n        \"true\", Context.SCOPE_ENTITY);\n    context.setSessionAttribute(DIHCacheSupport.CACHE_READ_ONLY, \"false\",\n        Context.SCOPE_ENTITY);\n  }\n\n","sourceOld":"  public DIHCacheSupport(Context context, String cacheImplName) {\n    this.cacheImplName = cacheImplName;\n    \n    String where = context.getEntityAttribute(\"where\");\n    String cacheKey = context\n        .getEntityAttribute(DIHCacheSupport.CACHE_PRIMARY_KEY);\n    String lookupKey = context\n        .getEntityAttribute(DIHCacheSupport.CACHE_FOREIGN_KEY);\n    if (cacheKey != null && lookupKey == null) {\n      throw new DataImportHandlerException(DataImportHandlerException.SEVERE,\n          \"'cacheKey' is specified for the entity \"\n              + context.getEntityAttribute(\"name\")\n              + \" but 'cacheLookup' is missing\");\n      \n    }\n    if (where == null && cacheKey == null) {\n      cacheDoKeyLookup = false;\n    } else {\n      if (where != null) {\n        String[] splits = where.split(\"=\");\n        cacheVariableName = splits[1].trim();\n      } else {\n        cacheVariableName = lookupKey;\n      }\n      cacheDoKeyLookup = true;\n    }\n    context.setSessionAttribute(DIHCacheSupport.CACHE_PRIMARY_KEY, cacheKey,\n        Context.SCOPE_ENTITY);\n    context.setSessionAttribute(DIHCacheSupport.CACHE_FOREIGN_KEY, lookupKey,\n        Context.SCOPE_ENTITY);\n    context.setSessionAttribute(DIHCacheSupport.CACHE_DELETE_PRIOR_DATA,\n        \"true\", Context.SCOPE_ENTITY);\n    context.setSessionAttribute(DIHCacheSupport.CACHE_READ_ONLY, \"false\",\n        Context.SCOPE_ENTITY);\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"4ae7b4adfa274da5f5fdc865e127928b25e5e929","date":1417607786,"type":3,"author":"Noble Paul","isMerge":false,"pathNew":"solr/contrib/dataimporthandler/src/java/org/apache/solr/handler/dataimport/DIHCacheSupport#DIHCacheSupport(Context,String).mjava","pathOld":"solr/contrib/dataimporthandler/src/java/org/apache/solr/handler/dataimport/DIHCacheSupport#DIHCacheSupport(Context,String).mjava","sourceNew":"  public DIHCacheSupport(Context context, String cacheImplName) {\n    this.cacheImplName = cacheImplName;\n    \n    Relation r = new Relation(context);\n    cacheDoKeyLookup = r.doKeyLookup;\n    String cacheKey = r.primaryKey;\n    cacheForeignKey = r.foreignKey;\n    \n    context.setSessionAttribute(DIHCacheSupport.CACHE_PRIMARY_KEY, cacheKey,\n        Context.SCOPE_ENTITY);\n    context.setSessionAttribute(DIHCacheSupport.CACHE_FOREIGN_KEY, cacheForeignKey,\n        Context.SCOPE_ENTITY);\n    context.setSessionAttribute(DIHCacheSupport.CACHE_DELETE_PRIOR_DATA,\n        \"true\", Context.SCOPE_ENTITY);\n    context.setSessionAttribute(DIHCacheSupport.CACHE_READ_ONLY, \"false\",\n        Context.SCOPE_ENTITY);\n  }\n\n","sourceOld":"  public DIHCacheSupport(Context context, String cacheImplName) {\n    this.cacheImplName = cacheImplName;\n    \n    String where = context.getEntityAttribute(\"where\");\n    String cacheKey = context.getEntityAttribute(DIHCacheSupport.CACHE_PRIMARY_KEY);\n    String lookupKey = context.getEntityAttribute(DIHCacheSupport.CACHE_FOREIGN_KEY);\n    if (cacheKey != null && lookupKey == null) {\n      throw new DataImportHandlerException(DataImportHandlerException.SEVERE,\n          \"'cacheKey' is specified for the entity \"\n              + context.getEntityAttribute(\"name\")\n              + \" but 'cacheLookup' is missing\");\n      \n    }\n    if (where == null && cacheKey == null) {\n      cacheDoKeyLookup = false;\n    } else {\n      if (where != null) {\n        String[] splits = where.split(\"=\");\n        cacheKey = splits[0];\n        cacheForeignKey = splits[1].trim();\n      } else {\n        cacheForeignKey = lookupKey;\n      }\n      cacheDoKeyLookup = true;\n    }\n    context.setSessionAttribute(DIHCacheSupport.CACHE_PRIMARY_KEY, cacheKey,\n        Context.SCOPE_ENTITY);\n    context.setSessionAttribute(DIHCacheSupport.CACHE_FOREIGN_KEY, cacheForeignKey,\n        Context.SCOPE_ENTITY);\n    context.setSessionAttribute(DIHCacheSupport.CACHE_DELETE_PRIOR_DATA,\n        \"true\", Context.SCOPE_ENTITY);\n    context.setSessionAttribute(DIHCacheSupport.CACHE_READ_ONLY, \"false\",\n        Context.SCOPE_ENTITY);\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"d2c8f5c46c2501b61e2f55eb7ee59e6c5372290b","date":1598712724,"type":4,"author":"Alexandre Rafalovitch","isMerge":false,"pathNew":"/dev/null","pathOld":"solr/contrib/dataimporthandler/src/java/org/apache/solr/handler/dataimport/DIHCacheSupport#DIHCacheSupport(Context,String).mjava","sourceNew":null,"sourceOld":"  public DIHCacheSupport(Context context, String cacheImplName) {\n    this.cacheImplName = cacheImplName;\n    \n    Relation r = new Relation(context);\n    cacheDoKeyLookup = r.doKeyLookup;\n    String cacheKey = r.primaryKey;\n    cacheForeignKey = r.foreignKey;\n    \n    context.setSessionAttribute(DIHCacheSupport.CACHE_PRIMARY_KEY, cacheKey,\n        Context.SCOPE_ENTITY);\n    context.setSessionAttribute(DIHCacheSupport.CACHE_FOREIGN_KEY, cacheForeignKey,\n        Context.SCOPE_ENTITY);\n    context.setSessionAttribute(DIHCacheSupport.CACHE_DELETE_PRIOR_DATA,\n        \"true\", Context.SCOPE_ENTITY);\n    context.setSessionAttribute(DIHCacheSupport.CACHE_READ_ONLY, \"false\",\n        Context.SCOPE_ENTITY);\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"4ae7b4adfa274da5f5fdc865e127928b25e5e929":["24ceb971f4e38f66031e08ad9875913046ed5ee4"],"d2c8f5c46c2501b61e2f55eb7ee59e6c5372290b":["4ae7b4adfa274da5f5fdc865e127928b25e5e929"],"3337b86edd36607f0208321f1deee79c55e5fd21":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["d2c8f5c46c2501b61e2f55eb7ee59e6c5372290b"],"24ceb971f4e38f66031e08ad9875913046ed5ee4":["3337b86edd36607f0208321f1deee79c55e5fd21"]},"commit2Childs":{"4ae7b4adfa274da5f5fdc865e127928b25e5e929":["d2c8f5c46c2501b61e2f55eb7ee59e6c5372290b"],"d2c8f5c46c2501b61e2f55eb7ee59e6c5372290b":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"3337b86edd36607f0208321f1deee79c55e5fd21":["24ceb971f4e38f66031e08ad9875913046ed5ee4"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["3337b86edd36607f0208321f1deee79c55e5fd21"],"24ceb971f4e38f66031e08ad9875913046ed5ee4":["4ae7b4adfa274da5f5fdc865e127928b25e5e929"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}