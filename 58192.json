{"path":"solr/core/src/java/org/apache/solr/schema/LatLonPointSpatialField.LatLonPointSpatialStrategy#makeQueryFromIndex(Shape).mjava","commits":[{"id":"7280772020b860cd9a473ed847c5b79251a850d7","date":1489283281,"type":0,"author":"David Smiley","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/schema/LatLonPointSpatialField.LatLonPointSpatialStrategy#makeQueryFromIndex(Shape).mjava","pathOld":"/dev/null","sourceNew":"    // Uses LatLonPoint\n    protected Query makeQueryFromIndex(Shape shape) {\n      // note: latitude then longitude order for LLP's methods\n      if (shape instanceof Circle) {\n        Circle circle = (Circle) shape;\n        double radiusMeters = circle.getRadius() * DistanceUtils.DEG_TO_KM * 1000;\n        return LatLonPoint.newDistanceQuery(getFieldName(),\n            circle.getCenter().getY(), circle.getCenter().getX(),\n            radiusMeters);\n      } else if (shape instanceof Rectangle) {\n        Rectangle rect = (Rectangle) shape;\n        return LatLonPoint.newBoxQuery(getFieldName(),\n            rect.getMinY(), rect.getMaxY(), rect.getMinX(), rect.getMaxX());\n      } else if (shape instanceof Point) {\n        Point point = (Point) shape;\n        return LatLonPoint.newDistanceQuery(getFieldName(),\n            point.getY(), point.getX(), 0);\n      } else {\n        throw new UnsupportedOperationException(\"Shape \" + shape.getClass() + \" is not supported by \" + getClass());\n      }\n//      } else if (shape instanceof LucenePolygonShape) {\n//        // TODO support multi-polygon\n//        Polygon poly = ((LucenePolygonShape)shape).lucenePolygon;\n//        return LatLonPoint.newPolygonQuery(getFieldName(), poly);\n    }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"7280772020b860cd9a473ed847c5b79251a850d7":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["7280772020b860cd9a473ed847c5b79251a850d7"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["7280772020b860cd9a473ed847c5b79251a850d7"],"7280772020b860cd9a473ed847c5b79251a850d7":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}