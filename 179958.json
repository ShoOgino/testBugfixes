{"path":"lucene/core/src/test/org/apache/lucene/geo/TestGeoUtils#testAxisLat().mjava","commits":[{"id":"546f71f5b1e19230d6e7e59f117d08dbcf59fbfe","date":1459623422,"type":1,"author":"nknize","isMerge":false,"pathNew":"lucene/core/src/test/org/apache/lucene/geo/TestGeoUtils#testAxisLat().mjava","pathOld":"lucene/spatial/src/test/org/apache/lucene/spatial/util/TestGeoUtils#testAxisLat().mjava","sourceNew":"  public void testAxisLat() {\n    double earthCircumference = 2D * Math.PI * GeoUtils.EARTH_MEAN_RADIUS_METERS;\n    assertEquals(90, Rectangle.axisLat(0, earthCircumference / 4), 0.0D);\n\n    for (int i = 0; i < 100; ++i) {\n      boolean reallyBig = random().nextInt(10) == 0;\n      final double maxRadius = reallyBig ? 1.1 * earthCircumference : earthCircumference / 8;\n      final double radius = maxRadius * random().nextDouble();\n      double prevAxisLat = Rectangle.axisLat(0.0D, radius);\n      for (double lat = 0.1D; lat < 90D; lat += 0.1D) {\n        double nextAxisLat = Rectangle.axisLat(lat, radius);\n        Rectangle bbox = Rectangle.fromPointDistance(lat, 180D, radius);\n        double dist = SloppyMath.haversinMeters(lat, 180D, nextAxisLat, bbox.maxLon);\n        if (nextAxisLat < GeoUtils.MAX_LAT_INCL) {\n          assertEquals(\"lat = \" + lat, dist, radius, 0.1D);\n        }\n        assertTrue(\"lat = \" + lat, prevAxisLat <= nextAxisLat);\n        prevAxisLat = nextAxisLat;\n      }\n\n      prevAxisLat = Rectangle.axisLat(-0.0D, radius);\n      for (double lat = -0.1D; lat > -90D; lat -= 0.1D) {\n        double nextAxisLat = Rectangle.axisLat(lat, radius);\n        Rectangle bbox = Rectangle.fromPointDistance(lat, 180D, radius);\n        double dist = SloppyMath.haversinMeters(lat, 180D, nextAxisLat, bbox.maxLon);\n        if (nextAxisLat > GeoUtils.MIN_LAT_INCL) {\n          assertEquals(\"lat = \" + lat, dist, radius, 0.1D);\n        }\n        assertTrue(\"lat = \" + lat, prevAxisLat >= nextAxisLat);\n        prevAxisLat = nextAxisLat;\n      }\n    }\n  }\n\n","sourceOld":"  public void testAxisLat() {\n    double earthCircumference = 2D * Math.PI * GeoUtils.EARTH_MEAN_RADIUS_METERS;\n    assertEquals(90, GeoRect.axisLat(0, earthCircumference / 4), 0.0D);\n\n    for (int i = 0; i < 100; ++i) {\n      boolean reallyBig = random().nextInt(10) == 0;\n      final double maxRadius = reallyBig ? 1.1 * earthCircumference : earthCircumference / 8;\n      final double radius = maxRadius * random().nextDouble();\n      double prevAxisLat = GeoRect.axisLat(0.0D, radius);\n      for (double lat = 0.1D; lat < 90D; lat += 0.1D) {\n        double nextAxisLat = GeoRect.axisLat(lat, radius);\n        GeoRect bbox = GeoRect.fromPointDistance(lat, 180D, radius);\n        double dist = SloppyMath.haversinMeters(lat, 180D, nextAxisLat, bbox.maxLon);\n        if (nextAxisLat < GeoUtils.MAX_LAT_INCL) {\n          assertEquals(\"lat = \" + lat, dist, radius, 0.1D);\n        }\n        assertTrue(\"lat = \" + lat, prevAxisLat <= nextAxisLat);\n        prevAxisLat = nextAxisLat;\n      }\n\n      prevAxisLat = GeoRect.axisLat(-0.0D, radius);\n      for (double lat = -0.1D; lat > -90D; lat -= 0.1D) {\n        double nextAxisLat = GeoRect.axisLat(lat, radius);\n        GeoRect bbox = GeoRect.fromPointDistance(lat, 180D, radius);\n        double dist = SloppyMath.haversinMeters(lat, 180D, nextAxisLat, bbox.maxLon);\n        if (nextAxisLat > GeoUtils.MIN_LAT_INCL) {\n          assertEquals(\"lat = \" + lat, dist, radius, 0.1D);\n        }\n        assertTrue(\"lat = \" + lat, prevAxisLat >= nextAxisLat);\n        prevAxisLat = nextAxisLat;\n      }\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"546f71f5b1e19230d6e7e59f117d08dbcf59fbfe":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["546f71f5b1e19230d6e7e59f117d08dbcf59fbfe"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["546f71f5b1e19230d6e7e59f117d08dbcf59fbfe"],"546f71f5b1e19230d6e7e59f117d08dbcf59fbfe":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}