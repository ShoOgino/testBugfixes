{"path":"lucene/core/src/test/org/apache/lucene/index/TestIndexWriterExceptions#testNullStoredBytesFieldReuse().mjava","commits":[{"id":"5d865fb5bb649d437707d6becbc9d8d940930d56","date":1399653385,"type":0,"author":"Robert Muir","isMerge":false,"pathNew":"lucene/core/src/test/org/apache/lucene/index/TestIndexWriterExceptions#testNullStoredBytesFieldReuse().mjava","pathOld":"/dev/null","sourceNew":"  /** test a null byte[] value doesn't abort the entire segment */\n  public void testNullStoredBytesFieldReuse() throws Exception {\n    Directory dir = newDirectory();\n    Analyzer analyzer = new MockAnalyzer(random());\n    IndexWriter iw = new IndexWriter(dir, new IndexWriterConfig(TEST_VERSION_CURRENT, analyzer));\n    // add good document\n    Document doc = new Document();\n    Field theField = new StoredField(\"foo\", new BytesRef(\"hello\").bytes);\n    doc.add(theField);\n    iw.addDocument(doc);\n    try {\n      // set to null value\n      byte v[] = null;\n      theField.setBytesValue(v);\n      iw.addDocument(doc);\n    } catch (NullPointerException expected) {}\n    iw.shutdown();\n    // make sure we see our good doc\n    DirectoryReader r = DirectoryReader.open(dir);\n    assertEquals(1, r.numDocs());\n    r.close();\n    dir.close();\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":["05fe562aa248790944d43cdd478f512572835ba0"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"8a30097e81de1a26384ee054b0b5ac831beac7a3","date":1400304103,"type":3,"author":"Robert Muir","isMerge":false,"pathNew":"lucene/core/src/test/org/apache/lucene/index/TestIndexWriterExceptions#testNullStoredBytesFieldReuse().mjava","pathOld":"lucene/core/src/test/org/apache/lucene/index/TestIndexWriterExceptions#testNullStoredBytesFieldReuse().mjava","sourceNew":"  /** test a null byte[] value doesn't abort the entire segment */\n  public void testNullStoredBytesFieldReuse() throws Exception {\n    Directory dir = newDirectory();\n    Analyzer analyzer = new MockAnalyzer(random());\n    IndexWriter iw = new IndexWriter(dir, new IndexWriterConfig(TEST_VERSION_CURRENT, analyzer));\n    // add good document\n    Document doc = new Document();\n    Field theField = new StoredField(\"foo\", new BytesRef(\"hello\").bytes);\n    doc.add(theField);\n    iw.addDocument(doc);\n    try {\n      // set to null value\n      byte v[] = null;\n      theField.setBytesValue(v);\n      iw.addDocument(doc);\n      fail(\"didn't get expected exception\");\n    } catch (NullPointerException expected) {}\n    iw.shutdown();\n    // make sure we see our good doc\n    DirectoryReader r = DirectoryReader.open(dir);\n    assertEquals(1, r.numDocs());\n    r.close();\n    dir.close();\n  }\n\n","sourceOld":"  /** test a null byte[] value doesn't abort the entire segment */\n  public void testNullStoredBytesFieldReuse() throws Exception {\n    Directory dir = newDirectory();\n    Analyzer analyzer = new MockAnalyzer(random());\n    IndexWriter iw = new IndexWriter(dir, new IndexWriterConfig(TEST_VERSION_CURRENT, analyzer));\n    // add good document\n    Document doc = new Document();\n    Field theField = new StoredField(\"foo\", new BytesRef(\"hello\").bytes);\n    doc.add(theField);\n    iw.addDocument(doc);\n    try {\n      // set to null value\n      byte v[] = null;\n      theField.setBytesValue(v);\n      iw.addDocument(doc);\n    } catch (NullPointerException expected) {}\n    iw.shutdown();\n    // make sure we see our good doc\n    DirectoryReader r = DirectoryReader.open(dir);\n    assertEquals(1, r.numDocs());\n    r.close();\n    dir.close();\n  }\n\n","bugFix":null,"bugIntro":["05fe562aa248790944d43cdd478f512572835ba0"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"56572ec06f1407c066d6b7399413178b33176cd8","date":1400495675,"type":3,"author":"Michael McCandless","isMerge":true,"pathNew":"lucene/core/src/test/org/apache/lucene/index/TestIndexWriterExceptions#testNullStoredBytesFieldReuse().mjava","pathOld":"lucene/core/src/test/org/apache/lucene/index/TestIndexWriterExceptions#testNullStoredBytesFieldReuse().mjava","sourceNew":"  /** test a null byte[] value doesn't abort the entire segment */\n  public void testNullStoredBytesFieldReuse() throws Exception {\n    Directory dir = newDirectory();\n    Analyzer analyzer = new MockAnalyzer(random());\n    IndexWriter iw = new IndexWriter(dir, new IndexWriterConfig(TEST_VERSION_CURRENT, analyzer));\n    // add good document\n    Document doc = new Document();\n    Field theField = new StoredField(\"foo\", new BytesRef(\"hello\").bytes);\n    doc.add(theField);\n    iw.addDocument(doc);\n    try {\n      // set to null value\n      byte v[] = null;\n      theField.setBytesValue(v);\n      iw.addDocument(doc);\n      fail(\"didn't get expected exception\");\n    } catch (NullPointerException expected) {}\n    iw.shutdown();\n    // make sure we see our good doc\n    DirectoryReader r = DirectoryReader.open(dir);\n    assertEquals(1, r.numDocs());\n    r.close();\n    dir.close();\n  }\n\n","sourceOld":"  /** test a null byte[] value doesn't abort the entire segment */\n  public void testNullStoredBytesFieldReuse() throws Exception {\n    Directory dir = newDirectory();\n    Analyzer analyzer = new MockAnalyzer(random());\n    IndexWriter iw = new IndexWriter(dir, new IndexWriterConfig(TEST_VERSION_CURRENT, analyzer));\n    // add good document\n    Document doc = new Document();\n    Field theField = new StoredField(\"foo\", new BytesRef(\"hello\").bytes);\n    doc.add(theField);\n    iw.addDocument(doc);\n    try {\n      // set to null value\n      byte v[] = null;\n      theField.setBytesValue(v);\n      iw.addDocument(doc);\n    } catch (NullPointerException expected) {}\n    iw.shutdown();\n    // make sure we see our good doc\n    DirectoryReader r = DirectoryReader.open(dir);\n    assertEquals(1, r.numDocs());\n    r.close();\n    dir.close();\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"d0ef034a4f10871667ae75181537775ddcf8ade4","date":1407610475,"type":3,"author":"Ryan Ernst","isMerge":false,"pathNew":"lucene/core/src/test/org/apache/lucene/index/TestIndexWriterExceptions#testNullStoredBytesFieldReuse().mjava","pathOld":"lucene/core/src/test/org/apache/lucene/index/TestIndexWriterExceptions#testNullStoredBytesFieldReuse().mjava","sourceNew":"  /** test a null byte[] value doesn't abort the entire segment */\n  public void testNullStoredBytesFieldReuse() throws Exception {\n    Directory dir = newDirectory();\n    Analyzer analyzer = new MockAnalyzer(random());\n    IndexWriter iw = new IndexWriter(dir, new IndexWriterConfig(analyzer));\n    // add good document\n    Document doc = new Document();\n    Field theField = new StoredField(\"foo\", new BytesRef(\"hello\").bytes);\n    doc.add(theField);\n    iw.addDocument(doc);\n    try {\n      // set to null value\n      byte v[] = null;\n      theField.setBytesValue(v);\n      iw.addDocument(doc);\n      fail(\"didn't get expected exception\");\n    } catch (NullPointerException expected) {}\n    iw.close();\n    // make sure we see our good doc\n    DirectoryReader r = DirectoryReader.open(dir);\n    assertEquals(1, r.numDocs());\n    r.close();\n    dir.close();\n  }\n\n","sourceOld":"  /** test a null byte[] value doesn't abort the entire segment */\n  public void testNullStoredBytesFieldReuse() throws Exception {\n    Directory dir = newDirectory();\n    Analyzer analyzer = new MockAnalyzer(random());\n    IndexWriter iw = new IndexWriter(dir, new IndexWriterConfig(TEST_VERSION_CURRENT, analyzer));\n    // add good document\n    Document doc = new Document();\n    Field theField = new StoredField(\"foo\", new BytesRef(\"hello\").bytes);\n    doc.add(theField);\n    iw.addDocument(doc);\n    try {\n      // set to null value\n      byte v[] = null;\n      theField.setBytesValue(v);\n      iw.addDocument(doc);\n      fail(\"didn't get expected exception\");\n    } catch (NullPointerException expected) {}\n    iw.shutdown();\n    // make sure we see our good doc\n    DirectoryReader r = DirectoryReader.open(dir);\n    assertEquals(1, r.numDocs());\n    r.close();\n    dir.close();\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"e390cd18556ba5c7850f9d277a2977e978bd44be","date":1423083957,"type":3,"author":"Michael McCandless","isMerge":false,"pathNew":"lucene/core/src/test/org/apache/lucene/index/TestIndexWriterExceptions#testNullStoredBytesFieldReuse().mjava","pathOld":"lucene/core/src/test/org/apache/lucene/index/TestIndexWriterExceptions#testNullStoredBytesFieldReuse().mjava","sourceNew":"  /** test a null byte[] value doesn't abort the entire segment */\n  public void testNullStoredBytesFieldReuse() throws Exception {\n    Directory dir = newDirectory();\n    Analyzer analyzer = new MockAnalyzer(random());\n    IndexWriter iw = new IndexWriter(dir, new IndexWriterConfig(analyzer));\n    // add good document\n    Document doc = new Document();\n    Field theField = new StoredField(\"foo\", new BytesRef(\"hello\").bytes);\n    doc.add(theField);\n    iw.addDocument(doc);\n    try {\n      // set to null value\n      byte v[] = null;\n      theField.setBytesValue(v);\n      iw.addDocument(doc);\n      fail(\"didn't get expected exception\");\n    } catch (NullPointerException expected) {}\n    assertNull(iw.getTragicException());\n    iw.close();\n    // make sure we see our good doc\n    DirectoryReader r = DirectoryReader.open(dir);\n    assertEquals(1, r.numDocs());\n    r.close();\n    dir.close();\n  }\n\n","sourceOld":"  /** test a null byte[] value doesn't abort the entire segment */\n  public void testNullStoredBytesFieldReuse() throws Exception {\n    Directory dir = newDirectory();\n    Analyzer analyzer = new MockAnalyzer(random());\n    IndexWriter iw = new IndexWriter(dir, new IndexWriterConfig(analyzer));\n    // add good document\n    Document doc = new Document();\n    Field theField = new StoredField(\"foo\", new BytesRef(\"hello\").bytes);\n    doc.add(theField);\n    iw.addDocument(doc);\n    try {\n      // set to null value\n      byte v[] = null;\n      theField.setBytesValue(v);\n      iw.addDocument(doc);\n      fail(\"didn't get expected exception\");\n    } catch (NullPointerException expected) {}\n    iw.close();\n    // make sure we see our good doc\n    DirectoryReader r = DirectoryReader.open(dir);\n    assertEquals(1, r.numDocs());\n    r.close();\n    dir.close();\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"05fe562aa248790944d43cdd478f512572835ba0","date":1455901667,"type":3,"author":"Robert Muir","isMerge":false,"pathNew":"lucene/core/src/test/org/apache/lucene/index/TestIndexWriterExceptions#testNullStoredBytesFieldReuse().mjava","pathOld":"lucene/core/src/test/org/apache/lucene/index/TestIndexWriterExceptions#testNullStoredBytesFieldReuse().mjava","sourceNew":"  /** test a null byte[] value doesn't abort the entire segment */\n  public void testNullStoredBytesFieldReuse() throws Exception {\n    Directory dir = newDirectory();\n    Analyzer analyzer = new MockAnalyzer(random());\n    IndexWriter iw = new IndexWriter(dir, new IndexWriterConfig(analyzer));\n    // add good document\n    Document doc = new Document();\n    Field theField = new StoredField(\"foo\", new BytesRef(\"hello\").bytes);\n    doc.add(theField);\n    iw.addDocument(doc);\n    expectThrows(NullPointerException.class, () -> {\n      // set to null value\n      byte v[] = null;\n      theField.setBytesValue(v);\n      iw.addDocument(doc);\n    });\n\n    assertNull(iw.getTragicException());\n    iw.close();\n    // make sure we see our good doc\n    DirectoryReader r = DirectoryReader.open(dir);\n    assertEquals(1, r.numDocs());\n    r.close();\n    dir.close();\n  }\n\n","sourceOld":"  /** test a null byte[] value doesn't abort the entire segment */\n  public void testNullStoredBytesFieldReuse() throws Exception {\n    Directory dir = newDirectory();\n    Analyzer analyzer = new MockAnalyzer(random());\n    IndexWriter iw = new IndexWriter(dir, new IndexWriterConfig(analyzer));\n    // add good document\n    Document doc = new Document();\n    Field theField = new StoredField(\"foo\", new BytesRef(\"hello\").bytes);\n    doc.add(theField);\n    iw.addDocument(doc);\n    try {\n      // set to null value\n      byte v[] = null;\n      theField.setBytesValue(v);\n      iw.addDocument(doc);\n      fail(\"didn't get expected exception\");\n    } catch (NullPointerException expected) {}\n    assertNull(iw.getTragicException());\n    iw.close();\n    // make sure we see our good doc\n    DirectoryReader r = DirectoryReader.open(dir);\n    assertEquals(1, r.numDocs());\n    r.close();\n    dir.close();\n  }\n\n","bugFix":["5d865fb5bb649d437707d6becbc9d8d940930d56","8a30097e81de1a26384ee054b0b5ac831beac7a3"],"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"5d865fb5bb649d437707d6becbc9d8d940930d56":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"e390cd18556ba5c7850f9d277a2977e978bd44be":["d0ef034a4f10871667ae75181537775ddcf8ade4"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"05fe562aa248790944d43cdd478f512572835ba0":["e390cd18556ba5c7850f9d277a2977e978bd44be"],"d0ef034a4f10871667ae75181537775ddcf8ade4":["8a30097e81de1a26384ee054b0b5ac831beac7a3"],"56572ec06f1407c066d6b7399413178b33176cd8":["5d865fb5bb649d437707d6becbc9d8d940930d56","8a30097e81de1a26384ee054b0b5ac831beac7a3"],"8a30097e81de1a26384ee054b0b5ac831beac7a3":["5d865fb5bb649d437707d6becbc9d8d940930d56"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["05fe562aa248790944d43cdd478f512572835ba0"]},"commit2Childs":{"5d865fb5bb649d437707d6becbc9d8d940930d56":["56572ec06f1407c066d6b7399413178b33176cd8","8a30097e81de1a26384ee054b0b5ac831beac7a3"],"e390cd18556ba5c7850f9d277a2977e978bd44be":["05fe562aa248790944d43cdd478f512572835ba0"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["5d865fb5bb649d437707d6becbc9d8d940930d56"],"d0ef034a4f10871667ae75181537775ddcf8ade4":["e390cd18556ba5c7850f9d277a2977e978bd44be"],"05fe562aa248790944d43cdd478f512572835ba0":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"56572ec06f1407c066d6b7399413178b33176cd8":[],"8a30097e81de1a26384ee054b0b5ac831beac7a3":["d0ef034a4f10871667ae75181537775ddcf8ade4","56572ec06f1407c066d6b7399413178b33176cd8"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["56572ec06f1407c066d6b7399413178b33176cd8","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}