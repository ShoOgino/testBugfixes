{"path":"solr/core/src/test/org/apache/solr/handler/component/DistributedTermsComponentTest#query(boolean,SolrParams).mjava","commits":[{"id":"8998ebc47a334c61dfed58318c481a7d84e3eaeb","date":1560839882,"type":0,"author":"Mikhail Khludnev","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/handler/component/DistributedTermsComponentTest#query(boolean,SolrParams).mjava","pathOld":"/dev/null","sourceNew":"  @Override\n  protected QueryResponse query(boolean setDistribParams, SolrParams p) throws Exception {\n    QueryResponse queryResponse = super.query(setDistribParams, p);\n\n    final ModifiableSolrParams params = new ModifiableSolrParams(p);\n    // TODO: look into why passing true causes fails\n    params.set(\"distrib\", \"false\");\n\n    for (ResponseParser responseParser : getResponseParsers()) {\n      final NamedList<Object> controlRsp = queryClient(controlClient, params, responseParser);\n      params.remove(\"distrib\");\n      if (setDistribParams) {\n        setDistributedParams(params);\n      }\n\n      // query a random server\n      int which = r.nextInt(clients.size());\n      SolrClient client = clients.get(which);\n      NamedList<Object> rsp = queryClient(client, params, responseParser);\n\n      // flags needs to be called here since only terms response is passed to compare\n      // other way is to pass whole response to compare\n      assertNull(compare(rsp.findRecursive(\"terms\"),\n          controlRsp.findRecursive(\"terms\"), flags(handle, \"terms\"), handle));\n    }\n    return queryResponse;\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"8998ebc47a334c61dfed58318c481a7d84e3eaeb":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["8998ebc47a334c61dfed58318c481a7d84e3eaeb"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["8998ebc47a334c61dfed58318c481a7d84e3eaeb"],"8998ebc47a334c61dfed58318c481a7d84e3eaeb":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}