{"path":"solr/core/src/test/org/apache/solr/search/AnalyticsMergeStrategyTest#test().mjava","commits":[{"id":"abb23fcc2461782ab204e61213240feb77d355aa","date":1422029612,"type":1,"author":"Erick Erickson","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/search/AnalyticsMergeStrategyTest#test().mjava","pathOld":"solr/core/src/test/org/apache/solr/search/AnalyticsMergeStrategyTest#doTest().mjava","sourceNew":"  @Test\n  @ShardsFixed(num = 3)\n  public void test() throws Exception {\n    del(\"*:*\");\n\n    index_specific(0,\"id\",\"1\", \"sort_i\", \"5\");\n    index_specific(0,\"id\",\"2\", \"sort_i\", \"50\");\n    index_specific(1,\"id\",\"5\", \"sort_i\", \"4\");\n    index_specific(1,\"id\",\"6\", \"sort_i\", \"10\");\n    index_specific(0,\"id\",\"7\", \"sort_i\", \"1\");\n    index_specific(1,\"id\",\"8\", \"sort_i\", \"2\");\n    index_specific(2,\"id\",\"9\", \"sort_i\", \"1000\");\n    index_specific(2,\"id\",\"10\", \"sort_i\", \"1500\");\n    index_specific(2,\"id\",\"11\", \"sort_i\", \"1300\");\n    index_specific(1,\"id\",\"12\", \"sort_i\", \"15\");\n    index_specific(1,\"id\",\"13\", \"sort_i\", \"16\");\n\n    commit();\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!count}\");\n    setDistributedParams(params);\n    QueryResponse rsp = queryServer(params);\n    assertCount(rsp, 11);\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"id:(1 2 5 6)\");\n    params.add(\"fq\", \"{!count}\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    assertCount(rsp, 4);\n  }\n\n","sourceOld":"  @Override\n  public void doTest() throws Exception {\n    del(\"*:*\");\n\n    index_specific(0,\"id\",\"1\", \"sort_i\", \"5\");\n    index_specific(0,\"id\",\"2\", \"sort_i\", \"50\");\n    index_specific(1,\"id\",\"5\", \"sort_i\", \"4\");\n    index_specific(1,\"id\",\"6\", \"sort_i\", \"10\");\n    index_specific(0,\"id\",\"7\", \"sort_i\", \"1\");\n    index_specific(1,\"id\",\"8\", \"sort_i\", \"2\");\n    index_specific(2,\"id\",\"9\", \"sort_i\", \"1000\");\n    index_specific(2,\"id\",\"10\", \"sort_i\", \"1500\");\n    index_specific(2,\"id\",\"11\", \"sort_i\", \"1300\");\n    index_specific(1,\"id\",\"12\", \"sort_i\", \"15\");\n    index_specific(1,\"id\",\"13\", \"sort_i\", \"16\");\n\n    commit();\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!count}\");\n    setDistributedParams(params);\n    QueryResponse rsp = queryServer(params);\n    assertCount(rsp, 11);\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"id:(1 2 5 6)\");\n    params.add(\"fq\", \"{!count}\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    assertCount(rsp, 4);\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"918eb732e5f2f2e5e908dd4c94e07d63f3915eab","date":1450295083,"type":3,"author":"Joel Bernstein","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/search/AnalyticsMergeStrategyTest#test().mjava","pathOld":"solr/core/src/test/org/apache/solr/search/AnalyticsMergeStrategyTest#test().mjava","sourceNew":"  @Test\n  @ShardsFixed(num = 3)\n  public void test() throws Exception {\n    del(\"*:*\");\n\n    index_specific(0,\"id\",\"1\", \"sort_i\", \"5\");\n    index_specific(0,\"id\",\"2\", \"sort_i\", \"50\");\n    index_specific(1,\"id\",\"5\", \"sort_i\", \"4\");\n    index_specific(1,\"id\",\"6\", \"sort_i\", \"10\");\n    index_specific(0,\"id\",\"7\", \"sort_i\", \"1\");\n    index_specific(1,\"id\",\"8\", \"sort_i\", \"2\");\n    index_specific(2,\"id\",\"9\", \"sort_i\", \"1000\");\n    index_specific(2,\"id\",\"10\", \"sort_i\", \"1500\");\n    index_specific(2,\"id\",\"11\", \"sort_i\", \"1300\");\n    index_specific(1,\"id\",\"12\", \"sort_i\", \"15\");\n    index_specific(1,\"id\",\"13\", \"sort_i\", \"16\");\n\n    commit();\n\n    /*\n    *  The count qparser plugin is pointing to the TestAnalyticsQParserPlugin. This class defines a simple AnalyticsQuery and\n    *  has two merge strategies. If the iterate local param is true then an InterativeMergeStrategy is used.\n    */\n\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!count}\");\n    setDistributedParams(params);\n    QueryResponse rsp = queryServer(params);\n    assertCount(rsp, 11);\n\n    //Test IterativeMergeStrategy\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!count iterate=true}\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    assertCountOnly(rsp, 44);\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"id:(1 2 5 6)\");\n    params.add(\"fq\", \"{!count}\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    assertCount(rsp, 4);\n  }\n\n","sourceOld":"  @Test\n  @ShardsFixed(num = 3)\n  public void test() throws Exception {\n    del(\"*:*\");\n\n    index_specific(0,\"id\",\"1\", \"sort_i\", \"5\");\n    index_specific(0,\"id\",\"2\", \"sort_i\", \"50\");\n    index_specific(1,\"id\",\"5\", \"sort_i\", \"4\");\n    index_specific(1,\"id\",\"6\", \"sort_i\", \"10\");\n    index_specific(0,\"id\",\"7\", \"sort_i\", \"1\");\n    index_specific(1,\"id\",\"8\", \"sort_i\", \"2\");\n    index_specific(2,\"id\",\"9\", \"sort_i\", \"1000\");\n    index_specific(2,\"id\",\"10\", \"sort_i\", \"1500\");\n    index_specific(2,\"id\",\"11\", \"sort_i\", \"1300\");\n    index_specific(1,\"id\",\"12\", \"sort_i\", \"15\");\n    index_specific(1,\"id\",\"13\", \"sort_i\", \"16\");\n\n    commit();\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!count}\");\n    setDistributedParams(params);\n    QueryResponse rsp = queryServer(params);\n    assertCount(rsp, 11);\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"id:(1 2 5 6)\");\n    params.add(\"fq\", \"{!count}\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    assertCount(rsp, 4);\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"f5672eb934a241f2fe54856b60b22b3f82108999","date":1487644800,"type":3,"author":"markrmiller","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/search/AnalyticsMergeStrategyTest#test().mjava","pathOld":"solr/core/src/test/org/apache/solr/search/AnalyticsMergeStrategyTest#test().mjava","sourceNew":"  @Test\n  @ShardsFixed(num = 3)\n  public void test() throws Exception {\n    del(\"*:*\");\n\n    index_specific(0,\"id\",\"1\", \"sort_i\", \"5\");\n    index_specific(0,\"id\",\"2\", \"sort_i\", \"50\");\n    index_specific(1,\"id\",\"5\", \"sort_i\", \"4\");\n    index_specific(1,\"id\",\"6\", \"sort_i\", \"10\");\n    index_specific(0,\"id\",\"7\", \"sort_i\", \"1\");\n    index_specific(1,\"id\",\"8\", \"sort_i\", \"2\");\n    index_specific(2,\"id\",\"9\", \"sort_i\", \"1000\");\n    index_specific(2,\"id\",\"10\", \"sort_i\", \"1500\");\n    index_specific(2,\"id\",\"11\", \"sort_i\", \"1300\");\n    index_specific(1,\"id\",\"12\", \"sort_i\", \"15\");\n    index_specific(1,\"id\",\"13\", \"sort_i\", \"16\");\n\n    commit();\n\n    /*\n    *  The count qparser plugin is pointing to AnalyticsTestQParserPlugin. This class defines a simple AnalyticsQuery and\n    *  has two merge strategies. If the iterate local param is true then an InterativeMergeStrategy is used.\n    */\n\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!count}\");\n    setDistributedParams(params);\n    QueryResponse rsp = queryServer(params);\n    assertCount(rsp, 11);\n\n    //Test IterativeMergeStrategy\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!count iterate=true}\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    assertCountOnly(rsp, 44);\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"id:(1 2 5 6)\");\n    params.add(\"fq\", \"{!count}\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    assertCount(rsp, 4);\n  }\n\n","sourceOld":"  @Test\n  @ShardsFixed(num = 3)\n  public void test() throws Exception {\n    del(\"*:*\");\n\n    index_specific(0,\"id\",\"1\", \"sort_i\", \"5\");\n    index_specific(0,\"id\",\"2\", \"sort_i\", \"50\");\n    index_specific(1,\"id\",\"5\", \"sort_i\", \"4\");\n    index_specific(1,\"id\",\"6\", \"sort_i\", \"10\");\n    index_specific(0,\"id\",\"7\", \"sort_i\", \"1\");\n    index_specific(1,\"id\",\"8\", \"sort_i\", \"2\");\n    index_specific(2,\"id\",\"9\", \"sort_i\", \"1000\");\n    index_specific(2,\"id\",\"10\", \"sort_i\", \"1500\");\n    index_specific(2,\"id\",\"11\", \"sort_i\", \"1300\");\n    index_specific(1,\"id\",\"12\", \"sort_i\", \"15\");\n    index_specific(1,\"id\",\"13\", \"sort_i\", \"16\");\n\n    commit();\n\n    /*\n    *  The count qparser plugin is pointing to the TestAnalyticsQParserPlugin. This class defines a simple AnalyticsQuery and\n    *  has two merge strategies. If the iterate local param is true then an InterativeMergeStrategy is used.\n    */\n\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!count}\");\n    setDistributedParams(params);\n    QueryResponse rsp = queryServer(params);\n    assertCount(rsp, 11);\n\n    //Test IterativeMergeStrategy\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"*:*\");\n    params.add(\"fq\", \"{!count iterate=true}\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    assertCountOnly(rsp, 44);\n\n    params = new ModifiableSolrParams();\n    params.add(\"q\", \"id:(1 2 5 6)\");\n    params.add(\"fq\", \"{!count}\");\n    setDistributedParams(params);\n    rsp = queryServer(params);\n    assertCount(rsp, 4);\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"abb23fcc2461782ab204e61213240feb77d355aa":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"f5672eb934a241f2fe54856b60b22b3f82108999":["918eb732e5f2f2e5e908dd4c94e07d63f3915eab"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"918eb732e5f2f2e5e908dd4c94e07d63f3915eab":["abb23fcc2461782ab204e61213240feb77d355aa"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["f5672eb934a241f2fe54856b60b22b3f82108999"]},"commit2Childs":{"abb23fcc2461782ab204e61213240feb77d355aa":["918eb732e5f2f2e5e908dd4c94e07d63f3915eab"],"f5672eb934a241f2fe54856b60b22b3f82108999":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["abb23fcc2461782ab204e61213240feb77d355aa"],"918eb732e5f2f2e5e908dd4c94e07d63f3915eab":["f5672eb934a241f2fe54856b60b22b3f82108999"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}