{"path":"solr/core/src/test/org/apache/solr/search/function/TestFunctionQuery#testQueryAsFlParam().mjava","commits":[{"id":"15945ff3f3391bc929e2e244bbb02a145b2641d9","date":1584508273,"type":0,"author":"Munendra S N","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/search/function/TestFunctionQuery#testQueryAsFlParam().mjava","pathOld":"/dev/null","sourceNew":"  @Test\n  public void testQueryAsFlParam() {\n    clearIndex();\n\n    assertU(adoc(\"id\", \"1\", \"age_i\", \"35\"));\n    assertU(adoc(\"id\", \"2\", \"age_i\", \"25\"));\n    assertU(commit());\n\n    // some docs match the query func but some doesn't\n    // if doc doesn't match, it should use default value\n    assertQ(req(\"q\", \"*:*\", \"fl\", \"*,score,bleh:query($qq,5.0)\", \"qq\", \"id:2\"),\n        \"//*[@numFound='2']\",\n        \"//result/doc[1]/str[@name='id'][.='1']\",\n        \"//result/doc[2]/str[@name='id'][.='2']\",\n        \"//result/doc[1]/float[@name='bleh'][.='5.0']\",\n        \"count(//result/doc[2]/float[@name='bleh'][.='5.0'])=0\",\n        \"//result/doc[2]/float[@name='bleh']\" // since score can't be known, doing existing match\n        );\n\n    // when the doc match the query func condition default value shouldn't be used\n    // when no def val is passed in query func, 0.0 would be used\n    assertQ(req(\"q\", \"*:*\", \"fl\", \"*,score,bleh:query($qq)\", \"qq\", \"id:*\"),\n        \"//*[@numFound='2']\",\n        \"//result/doc[1]/str[@name='id'][.='1']\",\n        \"//result/doc[2]/str[@name='id'][.='2']\",\n        \"count(//result/doc[1]/float[@name='bleh'][.='0.0'])=0\",\n        \"count(//result/doc[2]/float[@name='bleh'][.='0.0'])=0\",\n        \"//result/doc[1]/float[@name='bleh']\",\n        \"//result/doc[2]/float[@name='bleh']\"\n    );\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"15945ff3f3391bc929e2e244bbb02a145b2641d9":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["15945ff3f3391bc929e2e244bbb02a145b2641d9"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["15945ff3f3391bc929e2e244bbb02a145b2641d9"],"15945ff3f3391bc929e2e244bbb02a145b2641d9":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}