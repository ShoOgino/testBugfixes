{"path":"lucene/test-framework/src/java/org/apache/lucene/geo/ShapeTestUtil#containsSlowly(XYPolygon,double,double).mjava","commits":[{"id":"0b0a0cc5a33a45ace11b2e1e09fa39ce852e1a04","date":1582280790,"type":0,"author":"Ignacio Vera","isMerge":false,"pathNew":"lucene/test-framework/src/java/org/apache/lucene/geo/ShapeTestUtil#containsSlowly(XYPolygon,double,double).mjava","pathOld":"/dev/null","sourceNew":"  /**\n   * Simple slow point in polygon check (for testing)\n   */\n  // direct port of PNPOLY C code (https://www.ecse.rpi.edu/~wrf/Research/Short_Notes/pnpoly.html)\n  // this allows us to improve the code yet still ensure we have its properties\n  // it is under the BSD license (https://www.ecse.rpi.edu/~wrf/Research/Short_Notes/pnpoly.html#License%20to%20Use)\n  //\n  // Copyright (c) 1970-2003, Wm. Randolph Franklin\n  //\n  // Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\n  // documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation\n  // the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and\n  // to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n  //\n  // 1. Redistributions of source code must retain the above copyright\n  //    notice, this list of conditions and the following disclaimers.\n  // 2. Redistributions in binary form must reproduce the above copyright\n  //    notice in the documentation and/or other materials provided with\n  //    the distribution.\n  // 3. The name of W. Randolph Franklin may not be used to endorse or\n  //    promote products derived from this Software without specific\n  //    prior written permission.\n  //\n  // THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED\n  // TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL\n  // THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF\n  // CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n  // IN THE SOFTWARE.\n  public static boolean containsSlowly(XYPolygon polygon, double x, double y) {\n    if (polygon.getHoles().length > 0) {\n      throw new UnsupportedOperationException(\"this testing method does not support holes\");\n    }\n    double polyXs[] = XYEncodingUtils.floatArrayToDoubleArray(polygon.getPolyX());\n    double polyYs[] =XYEncodingUtils.floatArrayToDoubleArray(polygon.getPolyY());\n    // bounding box check required due to rounding errors (we don't solve that problem)\n    if (x < polygon.minX || x > polygon.maxX || y < polygon.minY || y > polygon.maxY) {\n      return false;\n    }\n\n    boolean c = false;\n    int i, j;\n    int nvert = polyYs.length;\n    double verty[] = polyYs;\n    double vertx[] = polyXs;\n    double testy = y;\n    double testx = x;\n    for (i = 0, j = 1; j < nvert; ++i, ++j) {\n      if (testy == verty[j] && testy == verty[i] ||\n          ((testy <= verty[j] && testy >= verty[i]) != (testy >= verty[j] && testy <= verty[i]))) {\n        if ((testx == vertx[j] && testx == vertx[i]) ||\n            ((testx <= vertx[j] && testx >= vertx[i]) != (testx >= vertx[j] && testx <= vertx[i]) &&\n                GeoUtils.orient(vertx[i], verty[i], vertx[j], verty[j], testx, testy) == 0)) {\n          // return true if point is on boundary\n          return true;\n        } else if ( ((verty[i] > testy) != (verty[j] > testy)) &&\n            (testx < (vertx[j]-vertx[i]) * (testy-verty[i]) / (verty[j]-verty[i]) + vertx[i]) ) {\n          c = !c;\n        }\n      }\n    }\n    return c;\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"0b0a0cc5a33a45ace11b2e1e09fa39ce852e1a04":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["0b0a0cc5a33a45ace11b2e1e09fa39ce852e1a04"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["0b0a0cc5a33a45ace11b2e1e09fa39ce852e1a04"],"0b0a0cc5a33a45ace11b2e1e09fa39ce852e1a04":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}