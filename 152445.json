{"path":"contrib/fast-vector-highlighter/src/test/org/apache/lucene/search/vectorhighlight/FieldQueryTest#testQueryPhraseMapOverlapPhrases().mjava","commits":[{"id":"d64148a458eb3ddf4d1bb1f1753cb9af194e1707","date":1247144811,"type":0,"author":"Michael McCandless","isMerge":false,"pathNew":"contrib/fast-vector-highlighter/src/test/org/apache/lucene/search/vectorhighlight/FieldQueryTest#testQueryPhraseMapOverlapPhrases().mjava","pathOld":"/dev/null","sourceNew":"  /*\n   * <t>...terminal\n   * \n   * a-b-c-<t>\n   *     +-d-<t>\n   * b-c-d-<t>\n   * +-d-<t>\n   */\n  public void testQueryPhraseMapOverlapPhrases() throws Exception {\n    BooleanQuery query = new BooleanQuery();\n    query.add( pqF( \"a\", \"b\", \"c\" ), Occur.SHOULD );\n    query.add( pqF( 2, \"b\", \"c\", \"d\" ), Occur.SHOULD );\n    query.add( pqF( 3, \"b\", \"d\" ), Occur.SHOULD );\n    \n    // phraseHighlight = true, fieldMatch = true\n    FieldQuery fq = new FieldQuery( query, true, true );\n    Map<String, QueryPhraseMap> map = fq.rootMaps;\n    assertEquals( 1, map.size() );\n    assertNull( map.get( null ) );\n    assertNotNull( map.get( F ) );\n    QueryPhraseMap qpm = map.get( F );\n    assertEquals( 2, qpm.subMap.size() );\n\n    // \"a b c\"\n    assertNotNull( qpm.subMap.get( \"a\" ) );\n    QueryPhraseMap qpm2 = qpm.subMap.get( \"a\" );\n    assertFalse( qpm2.terminal );\n    assertEquals( 1, qpm2.subMap.size() );\n    assertNotNull( qpm2.subMap.get( \"b\" ) );\n    QueryPhraseMap qpm3 = qpm2.subMap.get( \"b\" );\n    assertFalse( qpm3.terminal );\n    assertEquals( 1, qpm3.subMap.size() );\n    assertNotNull( qpm3.subMap.get( \"c\" ) );\n    QueryPhraseMap qpm4 = qpm3.subMap.get( \"c\" );\n    assertTrue( qpm4.terminal );\n    assertEquals( 1F, qpm4.boost );\n    assertNotNull( qpm4.subMap.get( \"d\" ) );\n    QueryPhraseMap qpm5 = qpm4.subMap.get( \"d\" );\n    assertTrue( qpm5.terminal );\n    assertEquals( 1F, qpm5.boost );\n\n    // \"b c d\"^2, \"b d\"^3\n    assertNotNull( qpm.subMap.get( \"b\" ) );\n    qpm2 = qpm.subMap.get( \"b\" );\n    assertFalse( qpm2.terminal );\n    assertEquals( 2, qpm2.subMap.size() );\n    assertNotNull( qpm2.subMap.get( \"c\" ) );\n    qpm3 = qpm2.subMap.get( \"c\" );\n    assertFalse( qpm3.terminal );\n    assertEquals( 1, qpm3.subMap.size() );\n    assertNotNull( qpm3.subMap.get( \"d\" ) );\n    qpm4 = qpm3.subMap.get( \"d\" );\n    assertTrue( qpm4.terminal );\n    assertEquals( 2F, qpm4.boost );\n    assertNotNull( qpm2.subMap.get( \"d\" ) );\n    qpm3 = qpm2.subMap.get( \"d\" );\n    assertTrue( qpm3.terminal );\n    assertEquals( 3F, qpm3.boost );\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"9454a6510e2db155fb01faa5c049b06ece95fab9","date":1453508333,"type":5,"author":"Dawid Weiss","isMerge":false,"pathNew":"lucene/contrib/fast-vector-highlighter/src/test/org/apache/lucene/search/vectorhighlight/FieldQueryTest#testQueryPhraseMapOverlapPhrases().mjava","pathOld":"contrib/fast-vector-highlighter/src/test/org/apache/lucene/search/vectorhighlight/FieldQueryTest#testQueryPhraseMapOverlapPhrases().mjava","sourceNew":"  /*\n   * <t>...terminal\n   * \n   * a-b-c-<t>\n   *     +-d-<t>\n   * b-c-d-<t>\n   * +-d-<t>\n   */\n  public void testQueryPhraseMapOverlapPhrases() throws Exception {\n    BooleanQuery query = new BooleanQuery();\n    query.add( pqF( \"a\", \"b\", \"c\" ), Occur.SHOULD );\n    query.add( pqF( 2, \"b\", \"c\", \"d\" ), Occur.SHOULD );\n    query.add( pqF( 3, \"b\", \"d\" ), Occur.SHOULD );\n    \n    // phraseHighlight = true, fieldMatch = true\n    FieldQuery fq = new FieldQuery( query, true, true );\n    Map<String, QueryPhraseMap> map = fq.rootMaps;\n    assertEquals( 1, map.size() );\n    assertNull( map.get( null ) );\n    assertNotNull( map.get( F ) );\n    QueryPhraseMap qpm = map.get( F );\n    assertEquals( 2, qpm.subMap.size() );\n\n    // \"a b c\"\n    assertNotNull( qpm.subMap.get( \"a\" ) );\n    QueryPhraseMap qpm2 = qpm.subMap.get( \"a\" );\n    assertFalse( qpm2.terminal );\n    assertEquals( 1, qpm2.subMap.size() );\n    assertNotNull( qpm2.subMap.get( \"b\" ) );\n    QueryPhraseMap qpm3 = qpm2.subMap.get( \"b\" );\n    assertFalse( qpm3.terminal );\n    assertEquals( 1, qpm3.subMap.size() );\n    assertNotNull( qpm3.subMap.get( \"c\" ) );\n    QueryPhraseMap qpm4 = qpm3.subMap.get( \"c\" );\n    assertTrue( qpm4.terminal );\n    assertEquals( 1F, qpm4.boost );\n    assertNotNull( qpm4.subMap.get( \"d\" ) );\n    QueryPhraseMap qpm5 = qpm4.subMap.get( \"d\" );\n    assertTrue( qpm5.terminal );\n    assertEquals( 1F, qpm5.boost );\n\n    // \"b c d\"^2, \"b d\"^3\n    assertNotNull( qpm.subMap.get( \"b\" ) );\n    qpm2 = qpm.subMap.get( \"b\" );\n    assertFalse( qpm2.terminal );\n    assertEquals( 2, qpm2.subMap.size() );\n    assertNotNull( qpm2.subMap.get( \"c\" ) );\n    qpm3 = qpm2.subMap.get( \"c\" );\n    assertFalse( qpm3.terminal );\n    assertEquals( 1, qpm3.subMap.size() );\n    assertNotNull( qpm3.subMap.get( \"d\" ) );\n    qpm4 = qpm3.subMap.get( \"d\" );\n    assertTrue( qpm4.terminal );\n    assertEquals( 2F, qpm4.boost );\n    assertNotNull( qpm2.subMap.get( \"d\" ) );\n    qpm3 = qpm2.subMap.get( \"d\" );\n    assertTrue( qpm3.terminal );\n    assertEquals( 3F, qpm3.boost );\n  }\n\n","sourceOld":"  /*\n   * <t>...terminal\n   * \n   * a-b-c-<t>\n   *     +-d-<t>\n   * b-c-d-<t>\n   * +-d-<t>\n   */\n  public void testQueryPhraseMapOverlapPhrases() throws Exception {\n    BooleanQuery query = new BooleanQuery();\n    query.add( pqF( \"a\", \"b\", \"c\" ), Occur.SHOULD );\n    query.add( pqF( 2, \"b\", \"c\", \"d\" ), Occur.SHOULD );\n    query.add( pqF( 3, \"b\", \"d\" ), Occur.SHOULD );\n    \n    // phraseHighlight = true, fieldMatch = true\n    FieldQuery fq = new FieldQuery( query, true, true );\n    Map<String, QueryPhraseMap> map = fq.rootMaps;\n    assertEquals( 1, map.size() );\n    assertNull( map.get( null ) );\n    assertNotNull( map.get( F ) );\n    QueryPhraseMap qpm = map.get( F );\n    assertEquals( 2, qpm.subMap.size() );\n\n    // \"a b c\"\n    assertNotNull( qpm.subMap.get( \"a\" ) );\n    QueryPhraseMap qpm2 = qpm.subMap.get( \"a\" );\n    assertFalse( qpm2.terminal );\n    assertEquals( 1, qpm2.subMap.size() );\n    assertNotNull( qpm2.subMap.get( \"b\" ) );\n    QueryPhraseMap qpm3 = qpm2.subMap.get( \"b\" );\n    assertFalse( qpm3.terminal );\n    assertEquals( 1, qpm3.subMap.size() );\n    assertNotNull( qpm3.subMap.get( \"c\" ) );\n    QueryPhraseMap qpm4 = qpm3.subMap.get( \"c\" );\n    assertTrue( qpm4.terminal );\n    assertEquals( 1F, qpm4.boost );\n    assertNotNull( qpm4.subMap.get( \"d\" ) );\n    QueryPhraseMap qpm5 = qpm4.subMap.get( \"d\" );\n    assertTrue( qpm5.terminal );\n    assertEquals( 1F, qpm5.boost );\n\n    // \"b c d\"^2, \"b d\"^3\n    assertNotNull( qpm.subMap.get( \"b\" ) );\n    qpm2 = qpm.subMap.get( \"b\" );\n    assertFalse( qpm2.terminal );\n    assertEquals( 2, qpm2.subMap.size() );\n    assertNotNull( qpm2.subMap.get( \"c\" ) );\n    qpm3 = qpm2.subMap.get( \"c\" );\n    assertFalse( qpm3.terminal );\n    assertEquals( 1, qpm3.subMap.size() );\n    assertNotNull( qpm3.subMap.get( \"d\" ) );\n    qpm4 = qpm3.subMap.get( \"d\" );\n    assertTrue( qpm4.terminal );\n    assertEquals( 2F, qpm4.boost );\n    assertNotNull( qpm2.subMap.get( \"d\" ) );\n    qpm3 = qpm2.subMap.get( \"d\" );\n    assertTrue( qpm3.terminal );\n    assertEquals( 3F, qpm3.boost );\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"d64148a458eb3ddf4d1bb1f1753cb9af194e1707":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["9454a6510e2db155fb01faa5c049b06ece95fab9"],"9454a6510e2db155fb01faa5c049b06ece95fab9":["d64148a458eb3ddf4d1bb1f1753cb9af194e1707"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["d64148a458eb3ddf4d1bb1f1753cb9af194e1707"],"d64148a458eb3ddf4d1bb1f1753cb9af194e1707":["9454a6510e2db155fb01faa5c049b06ece95fab9"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[],"9454a6510e2db155fb01faa5c049b06ece95fab9":["cd5edd1f2b162a5cfa08efd17851a07373a96817"]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}