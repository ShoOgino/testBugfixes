{"path":"solr/core/src/test/org/apache/solr/update/processor/TestDocBasedVersionConstraints#testTombstoneConfig().mjava","commits":[{"id":"667eea18b7ca87af38d05d81d479f943a717a6b1","date":1548452298,"type":0,"author":"Tomas Fernandez Lobbe","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/update/processor/TestDocBasedVersionConstraints#testTombstoneConfig().mjava","pathOld":"/dev/null","sourceNew":"  public void testTombstoneConfig() throws Exception {\n    assertJQ(req(\"q\",\"*:*\"),\"/response/numFound==0\");\n    updateWithChain(\"tombstone-config\", \n        \"id\", \"b!doc1\", \n        \"my_version_l\", \"1\");\n    assertU(commit());\n    assertJQ(req(\"q\",\"*:*\"),\"/response/numFound==1\");\n    assertJQ(req(\"q\",\"foo_b:true\"),\"/response/numFound==0\");\n    assertJQ(req(\"q\",\"foo_i:1\"),\"/response/numFound==0\");\n    assertJQ(req(\"q\",\"foo_l:1\"),\"/response/numFound==0\");\n    assertJQ(req(\"q\",\"foo_f:1.5\"),\"/response/numFound==0\");\n    assertJQ(req(\"q\",\"foo_s:bar\"),\"/response/numFound==0\");\n    assertJQ(req(\"q\",\"foo_ss:bar1\"),\"/response/numFound==0\");\n    assertJQ(req(\"q\",\"foo_ss:bar2\"),\"/response/numFound==0\");\n    \n    deleteAndGetVersion(\"b!doc1\",\n        params(\"del_version\", \"2\", \"update.chain\",\n            \"tombstone-config\"));\n    assertU(commit());\n    \n    assertJQ(req(\"q\",\"foo_b:true\"),\"/response/numFound==1\");\n    assertJQ(req(\"q\",\"foo_i:1\"),\"/response/numFound==1\");\n    assertJQ(req(\"q\",\"foo_l:1\"),\"/response/numFound==1\");\n    assertJQ(req(\"q\",\"foo_f:1.5\"),\"/response/numFound==1\");\n    assertJQ(req(\"q\",\"foo_s:bar\"),\"/response/numFound==1\");\n    assertJQ(req(\"q\",\"foo_ss:bar1\"),\"/response/numFound==1\");\n    assertJQ(req(\"q\",\"foo_ss:bar2\"),\"/response/numFound==1\");\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"667eea18b7ca87af38d05d81d479f943a717a6b1":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["667eea18b7ca87af38d05d81d479f943a717a6b1"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["667eea18b7ca87af38d05d81d479f943a717a6b1"],"667eea18b7ca87af38d05d81d479f943a717a6b1":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}