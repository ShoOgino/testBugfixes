{"path":"src/java/org/apache/solr/core/SolrCore#setResponseHeaderValues(NamedList,SolrQueryRequest,SolrQueryResponse).mjava","commits":[{"id":"7aef5adbca53f7820aa6289dda74f595ed816ac7","date":1166101420,"type":0,"author":"Bertrand Delacretaz","isMerge":false,"pathNew":"src/java/org/apache/solr/core/SolrCore#setResponseHeaderValues(NamedList,SolrQueryRequest,SolrQueryResponse).mjava","pathOld":"/dev/null","sourceNew":"  protected void setResponseHeaderValues(NamedList responseHeader,SolrQueryRequest req, SolrQueryResponse rsp) {\n    // TODO should check that responseHeader has not been replaced by handler\n    \n    final int qtime=(int)(rsp.getEndTime() - req.getStartTime());\n    responseHeader.add(\"status\",rsp.getException()==null ? 0 : 500);\n    responseHeader.add(\"QTime\",qtime);\n    \n    // Values for echoParams... false/true/all or false/explicit/all ???\n    final String EP_PARAM = \"echoParams\";\n    final String EXPLICIT = \"explicit\";\n    final String epValue = req.getParams().get(EP_PARAM); \n    if (EXPLICIT.equals(epValue)) {\n        responseHeader.add(\"params\", req.getOriginalParams().toNamedList());\n    } else if(epValue!=null) {\n      throw new SolrException(400,\"Invalid value '\" + epValue + \"' for \" + EP_PARAM + \" parameter, use '\" + EXPLICIT + \"'\");\n    }\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"d119e8687d5c78856fc86eee0f86c8367fdfad1f","date":1176085764,"type":5,"author":"Erik Hatcher","isMerge":false,"pathNew":"src/java/org/apache/solr/core/SolrCore#setResponseHeaderValues(SolrRequestHandler,NamedList[Object],SolrQueryRequest,SolrQueryResponse).mjava","pathOld":"src/java/org/apache/solr/core/SolrCore#setResponseHeaderValues(NamedList,SolrQueryRequest,SolrQueryResponse).mjava","sourceNew":"  protected void setResponseHeaderValues(SolrRequestHandler handler, NamedList<Object> responseHeader,SolrQueryRequest req, SolrQueryResponse rsp) {\n    // TODO should check that responseHeader has not been replaced by handler\n    \n    final int qtime=(int)(rsp.getEndTime() - req.getStartTime());\n    responseHeader.add(\"status\",rsp.getException()==null ? 0 : 500);\n    responseHeader.add(\"QTime\",qtime);\n        \n    SolrParams params = req.getParams();\n    if( params.getBool(SolrParams.HEADER_ECHO_HANDLER, false) ) {\n      responseHeader.add(\"handler\", handler.getName() );\n    }\n    \n    // Values for echoParams... false/true/all or false/explicit/all ???\n    String ep = params.get( SolrParams.HEADER_ECHO_PARAMS, null );\n    if( ep != null ) {\n      EchoParamStyle echoParams = EchoParamStyle.get( ep );\n      if( echoParams == null ) {\n        throw new SolrException(400,\"Invalid value '\" + ep + \"' for \" + SolrParams.HEADER_ECHO_PARAMS \n            + \" parameter, use '\" + EchoParamStyle.EXPLICIT + \"' or '\" + EchoParamStyle.ALL + \"'\" );\n      }\n      if( echoParams == EchoParamStyle.EXPLICIT ) {\n        responseHeader.add(\"params\", req.getOriginalParams().toNamedList());\n      }\n      else if( echoParams == EchoParamStyle.ALL ) {\n        responseHeader.add(\"params\", req.getParams().toNamedList());\n      }\n    }\n  }\n\n","sourceOld":"  protected void setResponseHeaderValues(NamedList responseHeader,SolrQueryRequest req, SolrQueryResponse rsp) {\n    // TODO should check that responseHeader has not been replaced by handler\n    \n    final int qtime=(int)(rsp.getEndTime() - req.getStartTime());\n    responseHeader.add(\"status\",rsp.getException()==null ? 0 : 500);\n    responseHeader.add(\"QTime\",qtime);\n    \n    // Values for echoParams... false/true/all or false/explicit/all ???\n    final String EP_PARAM = \"echoParams\";\n    final String EXPLICIT = \"explicit\";\n    final String epValue = req.getParams().get(EP_PARAM); \n    if (EXPLICIT.equals(epValue)) {\n        responseHeader.add(\"params\", req.getOriginalParams().toNamedList());\n    } else if(epValue!=null) {\n      throw new SolrException(400,\"Invalid value '\" + epValue + \"' for \" + EP_PARAM + \" parameter, use '\" + EXPLICIT + \"'\");\n    }\n  }\n\n","bugFix":null,"bugIntro":["8df14eca184f665d0ebd21bff9b962df55107e03"],"isBuggy":true,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b":[],"d119e8687d5c78856fc86eee0f86c8367fdfad1f":["7aef5adbca53f7820aa6289dda74f595ed816ac7"],"7aef5adbca53f7820aa6289dda74f595ed816ac7":["3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b":["7aef5adbca53f7820aa6289dda74f595ed816ac7"],"d119e8687d5c78856fc86eee0f86c8367fdfad1f":[],"7aef5adbca53f7820aa6289dda74f595ed816ac7":["d119e8687d5c78856fc86eee0f86c8367fdfad1f"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["d119e8687d5c78856fc86eee0f86c8367fdfad1f","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","3cdb369a6112bacd5f5fc1d4e022bed2f8bffb9b"],"pathCommit":null}