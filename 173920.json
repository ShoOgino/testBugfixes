{"path":"solr/core/src/test/org/apache/solr/highlight/HighlighterTest#testMaxMvParams().mjava","commits":[{"id":"17197618d443fdba7cdd03b52a61e09814931638","date":1364910298,"type":0,"author":"Erick Erickson","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/highlight/HighlighterTest#testMaxMvParams().mjava","pathOld":"/dev/null","sourceNew":"  @Test\n  public void testMaxMvParams() {\n    assertU(adoc(\"title\", \"Apache Software Foundation\", \"id\", \"1000\",\n        \"lower\", \"gap1 target\",\n        \"lower\", \"gap2 target\",\n        \"lower\", \"gap3 nothing\",\n        \"lower\", \"gap4 nothing\",\n        \"lower\", \"gap5 target\",\n        \"lower\", \"gap6 target\",\n        \"lower\", \"gap7 nothing\",\n        \"lower\", \"gap8 nothing\",\n        \"lower\", \"gap9 target\",\n        \"lower\", \"gap10 target\" ));\n\n    assertU(commit());\n\n    // First insure we can count all six\n    assertQ(\"Counting all MV pairs failed\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=6]\"\n    );\n\n    // NOTE: These tests seem repeated, but we're testing for off-by-one errors\n    // Now we should see exactly 2 by limiting the number of values searched to 4\n    assertQ(\"Off by one by going too far\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"4\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=2]\"\n    );\n\n\n    // Does 0 work?\n    assertQ(\"Off by one by going too far\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"0\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000' and count(child::*) = 0]\"\n    );\n\n\n    // Now we should see exactly 2 by limiting the number of values searched to 2\n    assertQ(\"Off by one by not going far enough\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"2\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=2]\"\n    );\n\n\n    // Now we should see exactly 1 by limiting the number of values searched to 1\n    assertQ(\"Not counting exactly 1\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"1\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=1]\"\n    );\n\n\n    // Now we should see exactly 4 by limiting the number of values found to 4\n    assertQ(\"Matching 4 should exactly match 4\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"4\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=4]\"\n    );\n\n\n    // Now we should see exactly 2 by limiting the number of values found to 2\n    assertQ(\"Matching 6 should exactly search them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"6\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=6]\"\n    );\n\n\n    // Now we should see exactly 1 by limiting the number of values found to 1\n    assertQ(\"Matching 6 should exactly match them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"1\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=1]\"\n    );\n\n    // Now we should see exactly 0 by limiting the number of values found to 0\n    assertQ(\"Matching 6 should exactly match them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"0\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000' and count(child::*) = 0]\"\n    );\n\n\n\n    // Should bail at the first parameter matched.\n    assertQ(\"Matching 6 should exactly match them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"2\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"10\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=2]\"\n    );\n\n    // Should bail at the first parameter matched.\n    assertQ(\"Matching 6 should exactly match them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"10\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"2\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=2]\"\n    );\n\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"19275ba31e621f6da1b83bf13af75233876fd3d4","date":1374846698,"type":3,"author":"Han Jiang","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/highlight/HighlighterTest#testMaxMvParams().mjava","pathOld":"solr/core/src/test/org/apache/solr/highlight/HighlighterTest#testMaxMvParams().mjava","sourceNew":"  @Test\n  public void testMaxMvParams() {\n    assertU(adoc(\"title\", \"Apache Software Foundation\", \"id\", \"1000\",\n        \"lower\", \"gap1 target\",\n        \"lower\", \"gap2 target\",\n        \"lower\", \"gap3 nothing\",\n        \"lower\", \"gap4 nothing\",\n        \"lower\", \"gap5 target\",\n        \"lower\", \"gap6 target\",\n        \"lower\", \"gap7 nothing\",\n        \"lower\", \"gap8 nothing\",\n        \"lower\", \"gap9 target\",\n        \"lower\", \"gap10 target\" ));\n\n    assertU(commit());\n\n    // First insure we can count all six\n    assertQ(\"Counting all MV pairs failed\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=6]\"\n    );\n\n    // NOTE: These tests seem repeated, but we're testing for off-by-one errors\n    // Now we should see exactly 2 by limiting the number of values searched to 4\n    assertQ(\"Off by one by going too far\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"4\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=2]\"\n    );\n\n\n    // Does 0 work?\n    assertQ(\"Off by one by going too far\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"0\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000' and count(child::*) = 0]\"\n    );\n\n\n    // Now we should see exactly 2 by limiting the number of values searched to 2\n    assertQ(\"Off by one by not going far enough\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"2\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=2]\"\n    );\n\n\n    // Now we should see exactly 1 by limiting the number of values searched to 1\n    assertQ(\"Not counting exactly 1\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"1\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=1]\"\n    );\n\n\n    // Now we should see exactly 4 by limiting the number of values found to 4\n    assertQ(\"Matching 4 should exactly match 4\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"4\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=4]\"\n    );\n\n\n    // Now we should see exactly 2 by limiting the number of values found to 2\n    assertQ(\"Matching 6 should exactly search them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"6\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=6]\"\n    );\n\n\n    // Now we should see exactly 1 by limiting the number of values found to 1\n    assertQ(\"Matching 6 should exactly match them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"1\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=1]\"\n    );\n\n    // Now we should see exactly 0 by limiting the number of values found to 0\n    assertQ(\"Matching 6 should exactly match them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"0\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000' and count(child::*) = 0]\"\n    );\n\n\n\n    // Should bail at the first parameter matched.\n    assertQ(\"Matching 6 should exactly match them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"2\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"10\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=2]\"\n    );\n\n    // Should bail at the first parameter matched.\n    assertQ(\"Matching 6 should exactly match them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"10\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"2\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=2]\"\n    );\n\n  }\n\n","sourceOld":"  @Test\n  public void testMaxMvParams() {\n    assertU(adoc(\"title\", \"Apache Software Foundation\", \"id\", \"1000\",\n        \"lower\", \"gap1 target\",\n        \"lower\", \"gap2 target\",\n        \"lower\", \"gap3 nothing\",\n        \"lower\", \"gap4 nothing\",\n        \"lower\", \"gap5 target\",\n        \"lower\", \"gap6 target\",\n        \"lower\", \"gap7 nothing\",\n        \"lower\", \"gap8 nothing\",\n        \"lower\", \"gap9 target\",\n        \"lower\", \"gap10 target\" ));\n\n    assertU(commit());\n\n    // First insure we can count all six\n    assertQ(\"Counting all MV pairs failed\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=6]\"\n    );\n\n    // NOTE: These tests seem repeated, but we're testing for off-by-one errors\n    // Now we should see exactly 2 by limiting the number of values searched to 4\n    assertQ(\"Off by one by going too far\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"4\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=2]\"\n    );\n\n\n    // Does 0 work?\n    assertQ(\"Off by one by going too far\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"0\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000' and count(child::*) = 0]\"\n    );\n\n\n    // Now we should see exactly 2 by limiting the number of values searched to 2\n    assertQ(\"Off by one by not going far enough\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"2\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=2]\"\n    );\n\n\n    // Now we should see exactly 1 by limiting the number of values searched to 1\n    assertQ(\"Not counting exactly 1\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"1\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=1]\"\n    );\n\n\n    // Now we should see exactly 4 by limiting the number of values found to 4\n    assertQ(\"Matching 4 should exactly match 4\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"4\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=4]\"\n    );\n\n\n    // Now we should see exactly 2 by limiting the number of values found to 2\n    assertQ(\"Matching 6 should exactly search them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"6\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=6]\"\n    );\n\n\n    // Now we should see exactly 1 by limiting the number of values found to 1\n    assertQ(\"Matching 6 should exactly match them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"1\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=1]\"\n    );\n\n    // Now we should see exactly 0 by limiting the number of values found to 0\n    assertQ(\"Matching 6 should exactly match them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"0\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000' and count(child::*) = 0]\"\n    );\n\n\n\n    // Should bail at the first parameter matched.\n    assertQ(\"Matching 6 should exactly match them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"2\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"10\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=2]\"\n    );\n\n    // Should bail at the first parameter matched.\n    assertQ(\"Matching 6 should exactly match them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"10\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"2\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=2]\"\n    );\n\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"716d18f3a9b0993bc679d7fa7abdc9bfb03411ec","date":1376375609,"type":3,"author":"Han Jiang","isMerge":true,"pathNew":"solr/core/src/test/org/apache/solr/highlight/HighlighterTest#testMaxMvParams().mjava","pathOld":"solr/core/src/test/org/apache/solr/highlight/HighlighterTest#testMaxMvParams().mjava","sourceNew":"  @Test\n  public void testMaxMvParams() {\n    assertU(adoc(\"title\", \"Apache Software Foundation\", \"id\", \"1000\",\n        \"lower\", \"gap1 target\",\n        \"lower\", \"gap2 target\",\n        \"lower\", \"gap3 nothing\",\n        \"lower\", \"gap4 nothing\",\n        \"lower\", \"gap5 target\",\n        \"lower\", \"gap6 target\",\n        \"lower\", \"gap7 nothing\",\n        \"lower\", \"gap8 nothing\",\n        \"lower\", \"gap9 target\",\n        \"lower\", \"gap10 target\" ));\n\n    assertU(commit());\n\n    // First insure we can count all six\n    assertQ(\"Counting all MV pairs failed\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=6]\"\n    );\n\n    // NOTE: These tests seem repeated, but we're testing for off-by-one errors\n    // Now we should see exactly 2 by limiting the number of values searched to 4\n    assertQ(\"Off by one by going too far\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"4\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=2]\"\n    );\n\n\n    // Does 0 work?\n    assertQ(\"Off by one by going too far\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"0\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000' and count(child::*) = 0]\"\n    );\n\n\n    // Now we should see exactly 2 by limiting the number of values searched to 2\n    assertQ(\"Off by one by not going far enough\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"2\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=2]\"\n    );\n\n\n    // Now we should see exactly 1 by limiting the number of values searched to 1\n    assertQ(\"Not counting exactly 1\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"1\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=1]\"\n    );\n\n\n    // Now we should see exactly 4 by limiting the number of values found to 4\n    assertQ(\"Matching 4 should exactly match 4\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"4\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=4]\"\n    );\n\n\n    // Now we should see exactly 2 by limiting the number of values found to 2\n    assertQ(\"Matching 6 should exactly search them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"6\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=6]\"\n    );\n\n\n    // Now we should see exactly 1 by limiting the number of values found to 1\n    assertQ(\"Matching 6 should exactly match them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"1\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=1]\"\n    );\n\n    // Now we should see exactly 0 by limiting the number of values found to 0\n    assertQ(\"Matching 6 should exactly match them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"0\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000' and count(child::*) = 0]\"\n    );\n\n\n\n    // Should bail at the first parameter matched.\n    assertQ(\"Matching 6 should exactly match them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"2\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"10\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=2]\"\n    );\n\n    // Should bail at the first parameter matched.\n    assertQ(\"Matching 6 should exactly match them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"10\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"2\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=2]\"\n    );\n\n  }\n\n","sourceOld":"  @Test\n  public void testMaxMvParams() {\n    assertU(adoc(\"title\", \"Apache Software Foundation\", \"id\", \"1000\",\n        \"lower\", \"gap1 target\",\n        \"lower\", \"gap2 target\",\n        \"lower\", \"gap3 nothing\",\n        \"lower\", \"gap4 nothing\",\n        \"lower\", \"gap5 target\",\n        \"lower\", \"gap6 target\",\n        \"lower\", \"gap7 nothing\",\n        \"lower\", \"gap8 nothing\",\n        \"lower\", \"gap9 target\",\n        \"lower\", \"gap10 target\" ));\n\n    assertU(commit());\n\n    // First insure we can count all six\n    assertQ(\"Counting all MV pairs failed\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=6]\"\n    );\n\n    // NOTE: These tests seem repeated, but we're testing for off-by-one errors\n    // Now we should see exactly 2 by limiting the number of values searched to 4\n    assertQ(\"Off by one by going too far\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"4\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=2]\"\n    );\n\n\n    // Does 0 work?\n    assertQ(\"Off by one by going too far\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"0\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000' and count(child::*) = 0]\"\n    );\n\n\n    // Now we should see exactly 2 by limiting the number of values searched to 2\n    assertQ(\"Off by one by not going far enough\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"2\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=2]\"\n    );\n\n\n    // Now we should see exactly 1 by limiting the number of values searched to 1\n    assertQ(\"Not counting exactly 1\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"1\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=1]\"\n    );\n\n\n    // Now we should see exactly 4 by limiting the number of values found to 4\n    assertQ(\"Matching 4 should exactly match 4\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"4\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=4]\"\n    );\n\n\n    // Now we should see exactly 2 by limiting the number of values found to 2\n    assertQ(\"Matching 6 should exactly search them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"6\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=6]\"\n    );\n\n\n    // Now we should see exactly 1 by limiting the number of values found to 1\n    assertQ(\"Matching 6 should exactly match them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"1\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=1]\"\n    );\n\n    // Now we should see exactly 0 by limiting the number of values found to 0\n    assertQ(\"Matching 6 should exactly match them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"0\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000' and count(child::*) = 0]\"\n    );\n\n\n\n    // Should bail at the first parameter matched.\n    assertQ(\"Matching 6 should exactly match them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"2\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"10\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=2]\"\n    );\n\n    // Should bail at the first parameter matched.\n    assertQ(\"Matching 6 should exactly match them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"10\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"2\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=2]\"\n    );\n\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"d1f66bb85f641eb4cf7699495d10e0ab50eae3ad","date":1428936836,"type":3,"author":"David Wayne Smiley","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/highlight/HighlighterTest#testMaxMvParams().mjava","pathOld":"solr/core/src/test/org/apache/solr/highlight/HighlighterTest#testMaxMvParams().mjava","sourceNew":"  @Test\n  public void testMaxMvParams() {\n    assertU(adoc(\"title\", \"Apache Software Foundation\", \"id\", \"1000\",\n        \"lower\", \"gap1 target\",\n        \"lower\", \"gap2 target\",\n        \"lower\", \"gap3 nothing\",\n        \"lower\", \"gap4 nothing\",\n        \"lower\", \"gap5 target\",\n        \"lower\", \"gap6 target\",\n        \"lower\", \"gap7 nothing\",\n        \"lower\", \"gap8 nothing\",\n        \"lower\", \"gap9 target\",\n        \"lower\", \"gap10 target\"));\n\n    assertU(commit());\n\n    // First ensure we can count all six\n    assertQ(\"Counting all MV pairs failed\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=6]\"\n    );\n\n    // NOTE: These tests seem repeated, but we're testing for off-by-one errors\n\n    // Now we should see exactly 2 by limiting the number of values searched to 4\n    assertQ(\"Off by one by going too far\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"4\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=2]\"\n    );\n\n    // Does 0 work?\n    assertQ(\"Off by one by going too far\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"0\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000' and count(child::*) = 0]\"\n    );\n\n    // Now we should see exactly 2 by limiting the number of values searched to 2\n    assertQ(\"Off by one by not going far enough\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"2\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=2]\"\n    );\n\n    // Now we should see exactly 1 by limiting the number of values searched to 1\n    assertQ(\"Not counting exactly 1\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"1\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=1]\"\n    );\n\n    // Now we should see exactly 4 by limiting the number of values found to 4\n    assertQ(\"Matching 4 should exactly match 4\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"4\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=4]\"\n    );\n\n    // But if hl.preserveMulti=true then we should see 6 snippets even though 2 didn't match\n    assertQ(\"hl.preserveMulti\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"4\",\n            HighlightParams.PRESERVE_MULTI, \"true\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=6]\"\n    );\n\n    // Now we should see exactly 2 by limiting the number of values found to 2\n    assertQ(\"Matching 6 should exactly search them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"6\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=6]\"\n    );\n\n    // Now we should see exactly 1 by limiting the number of values found to 1\n    assertQ(\"Matching 6 should exactly match them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"1\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=1]\"\n    );\n\n    // Now we should see exactly 0 by limiting the number of values found to 0\n    assertQ(\"Matching 6 should exactly match them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"0\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000' and count(child::*) = 0]\"\n    );\n\n\n    // Should bail at the first parameter matched.\n    assertQ(\"Matching 6 should exactly match them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"2\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"10\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=2]\"\n    );\n\n    // Should bail at the first parameter matched.\n    assertQ(\"Matching 6 should exactly match them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"10\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"2\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=2]\"\n    );\n\n  }\n\n","sourceOld":"  @Test\n  public void testMaxMvParams() {\n    assertU(adoc(\"title\", \"Apache Software Foundation\", \"id\", \"1000\",\n        \"lower\", \"gap1 target\",\n        \"lower\", \"gap2 target\",\n        \"lower\", \"gap3 nothing\",\n        \"lower\", \"gap4 nothing\",\n        \"lower\", \"gap5 target\",\n        \"lower\", \"gap6 target\",\n        \"lower\", \"gap7 nothing\",\n        \"lower\", \"gap8 nothing\",\n        \"lower\", \"gap9 target\",\n        \"lower\", \"gap10 target\" ));\n\n    assertU(commit());\n\n    // First insure we can count all six\n    assertQ(\"Counting all MV pairs failed\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=6]\"\n    );\n\n    // NOTE: These tests seem repeated, but we're testing for off-by-one errors\n    // Now we should see exactly 2 by limiting the number of values searched to 4\n    assertQ(\"Off by one by going too far\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"4\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=2]\"\n    );\n\n\n    // Does 0 work?\n    assertQ(\"Off by one by going too far\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"0\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000' and count(child::*) = 0]\"\n    );\n\n\n    // Now we should see exactly 2 by limiting the number of values searched to 2\n    assertQ(\"Off by one by not going far enough\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"2\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=2]\"\n    );\n\n\n    // Now we should see exactly 1 by limiting the number of values searched to 1\n    assertQ(\"Not counting exactly 1\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"1\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=1]\"\n    );\n\n\n    // Now we should see exactly 4 by limiting the number of values found to 4\n    assertQ(\"Matching 4 should exactly match 4\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"4\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=4]\"\n    );\n\n\n    // Now we should see exactly 2 by limiting the number of values found to 2\n    assertQ(\"Matching 6 should exactly search them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"6\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=6]\"\n    );\n\n\n    // Now we should see exactly 1 by limiting the number of values found to 1\n    assertQ(\"Matching 6 should exactly match them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"1\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=1]\"\n    );\n\n    // Now we should see exactly 0 by limiting the number of values found to 0\n    assertQ(\"Matching 6 should exactly match them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"0\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000' and count(child::*) = 0]\"\n    );\n\n\n\n    // Should bail at the first parameter matched.\n    assertQ(\"Matching 6 should exactly match them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"2\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"10\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=2]\"\n    );\n\n    // Should bail at the first parameter matched.\n    assertQ(\"Matching 6 should exactly match them all\",\n        req(\n            \"q\", \"id:1000\",\n            HighlightParams.HIGHLIGHT, \"true\",\n            HighlightParams.FIELDS, \"lower\",\n            HighlightParams.Q, \"target\",\n            HighlightParams.SNIPPETS, \"100\",\n            HighlightParams.MAX_MULTIVALUED_TO_MATCH, \"10\",\n            HighlightParams.MAX_MULTIVALUED_TO_EXAMINE, \"2\"\n        ),\n        \"//lst[@name='highlighting']/lst[@name='1000']/arr[@name='lower' and count(*)=2]\"\n    );\n\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"716d18f3a9b0993bc679d7fa7abdc9bfb03411ec":["17197618d443fdba7cdd03b52a61e09814931638","19275ba31e621f6da1b83bf13af75233876fd3d4"],"d1f66bb85f641eb4cf7699495d10e0ab50eae3ad":["19275ba31e621f6da1b83bf13af75233876fd3d4"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"19275ba31e621f6da1b83bf13af75233876fd3d4":["17197618d443fdba7cdd03b52a61e09814931638"],"17197618d443fdba7cdd03b52a61e09814931638":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["d1f66bb85f641eb4cf7699495d10e0ab50eae3ad"]},"commit2Childs":{"716d18f3a9b0993bc679d7fa7abdc9bfb03411ec":[],"d1f66bb85f641eb4cf7699495d10e0ab50eae3ad":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["17197618d443fdba7cdd03b52a61e09814931638"],"19275ba31e621f6da1b83bf13af75233876fd3d4":["716d18f3a9b0993bc679d7fa7abdc9bfb03411ec","d1f66bb85f641eb4cf7699495d10e0ab50eae3ad"],"17197618d443fdba7cdd03b52a61e09814931638":["716d18f3a9b0993bc679d7fa7abdc9bfb03411ec","19275ba31e621f6da1b83bf13af75233876fd3d4"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["716d18f3a9b0993bc679d7fa7abdc9bfb03411ec","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}