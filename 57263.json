{"path":"solr/solrj/src/test/org/apache/solr/client/solrj/io/stream/ops/ConcatOperationTest#concatMultipleFieldsWithIgnoredFieldsExpression().mjava","commits":[{"id":"b671049b6133b72a11a8b48321607e9623b41923","date":1453313296,"type":0,"author":"Dennis Gove","isMerge":false,"pathNew":"solr/solrj/src/test/org/apache/solr/client/solrj/io/stream/ops/ConcatOperationTest#concatMultipleFieldsWithIgnoredFieldsExpression().mjava","pathOld":"/dev/null","sourceNew":"  @Test\n  public void concatMultipleFieldsWithIgnoredFieldsExpression() throws Exception{\n    Tuple tuple;\n    StreamOperation operation;\n        \n    operation = new ConcatOperation(StreamExpressionParser.parse(\"concat(fields=\\\"fieldA,fieldB\\\", as=\\\"fieldABConcat\\\", delim=\\\"-\\\")\"), factory);\n    values.clear();\n    values.put(\"fieldA\", \"bar\");\n    values.put(\"fieldB\", \"baz\");\n    values.put(\"fieldC\", \"bab\");\n    values.put(\"fieldD\", \"bat\");\n    tuple = new Tuple(values);\n    operation.operate(tuple);\n    \n    Assert.assertNotNull(tuple.get(\"fieldA\"));\n    Assert.assertEquals(\"bar\", tuple.get(\"fieldA\"));\n    \n    Assert.assertNotNull(tuple.get(\"fieldB\"));\n    Assert.assertEquals(\"baz\", tuple.get(\"fieldB\"));\n    \n    Assert.assertNotNull(tuple.get(\"fieldC\"));\n    Assert.assertEquals(\"bab\", tuple.get(\"fieldC\"));\n    \n    Assert.assertNotNull(tuple.get(\"fieldD\"));\n    Assert.assertEquals(\"bat\", tuple.get(\"fieldD\"));\n    \n    Assert.assertNotNull(tuple.get(\"fieldABConcat\"));\n    Assert.assertEquals(\"bar-baz\", tuple.get(\"fieldABConcat\"));\n    \n    // do the same in oposite order\n    operation = new ConcatOperation(StreamExpressionParser.parse(\"concat(fields=\\\"fieldB,fieldA\\\", as=\\\"fieldABConcat\\\", delim=\\\"-\\\")\"), factory);\n    tuple = new Tuple(values);\n    operation.operate(tuple);\n    \n    Assert.assertNotNull(tuple.get(\"fieldA\"));\n    Assert.assertEquals(\"bar\", tuple.get(\"fieldA\"));\n    \n    Assert.assertNotNull(tuple.get(\"fieldB\"));\n    Assert.assertEquals(\"baz\", tuple.get(\"fieldB\"));\n    \n    Assert.assertNotNull(tuple.get(\"fieldABConcat\"));\n    Assert.assertEquals(\"baz-bar\", tuple.get(\"fieldABConcat\"));\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"b671049b6133b72a11a8b48321607e9623b41923":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["b671049b6133b72a11a8b48321607e9623b41923"]},"commit2Childs":{"b671049b6133b72a11a8b48321607e9623b41923":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["b671049b6133b72a11a8b48321607e9623b41923"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}