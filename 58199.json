{"path":"solr/core/src/test/org/apache/solr/search/facet/TestJsonFacets#testDomainGraph().mjava","commits":[{"id":"2bcd6a2cefce164763af175ff1accaf232439e8e","date":1527469335,"type":0,"author":"yonik","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/search/facet/TestJsonFacets#testDomainGraph().mjava","pathOld":"/dev/null","sourceNew":"  public void testDomainGraph() throws Exception {\n    Client client = Client.localClient();\n    indexSimple(client);\n\n    // should be the same as join self\n    assertJQ(req(\"q\", \"*:*\", \"rows\", \"0\",\n        \"json.facet\", \"\"\n            + \"{x: { type: terms, field: 'num_i', \"\n            + \"      facet: { y: { domain: { graph: { from: 'cat_s', to: 'cat_s' } }, \"\n            + \"                    type: terms, field: 'where_s' \"\n            + \"                  } } } }\")\n        , \"facets=={count:6, x:{ buckets:[\"\n            + \"   { val:-5, count:2, \"\n            + \"     y : { buckets:[{ val:'NJ', count:2 }, { val:'NY', count:1 } ] } }, \"\n            + \"   { val:2, count:1, \"\n            + \"     y : { buckets:[{ val:'NJ', count:1 }, { val:'NY', count:1 } ] } }, \"\n            + \"   { val:3, count:1, \"\n            + \"     y : { buckets:[{ val:'NJ', count:1 }, { val:'NY', count:1 } ] } }, \"\n            + \"   { val:7, count:1, \"\n            + \"     y : { buckets:[{ val:'NJ', count:2 }, { val:'NY', count:1 } ] } } ] } }\"\n    );\n\n    // This time, test with a traversalFilter\n    // should be the same as join self\n    assertJQ(req(\"q\", \"*:*\", \"rows\", \"0\",\n        \"json.facet\", \"\"\n            + \"{x: { type: terms, field: 'num_i', \"\n            + \"      facet: { y: { domain: { graph: { from: 'cat_s', to: 'cat_s', traversalFilter: 'where_s:NY' } }, \"\n            + \"                    type: terms, field: 'where_s' \"\n            + \"                  } } } }\")\n        , \"facets=={count:6, x:{ buckets:[\"\n            + \"   { val:-5, count:2, \"\n            + \"     y : { buckets:[{ val:'NJ', count:1 }, { val:'NY', count:1 } ] } }, \"\n            + \"   { val:2, count:1, \"\n            + \"     y : { buckets:[{ val:'NY', count:1 } ] } }, \"\n            + \"   { val:3, count:1, \"\n            + \"     y : { buckets:[{ val:'NJ', count:1 }, { val:'NY', count:1 } ] } }, \"\n            + \"   { val:7, count:1, \"\n            + \"     y : { buckets:[{ val:'NJ', count:1  }, { val:'NY', count:1 } ] } } ] } }\"\n    );\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"2bcd6a2cefce164763af175ff1accaf232439e8e":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["2bcd6a2cefce164763af175ff1accaf232439e8e"]},"commit2Childs":{"2bcd6a2cefce164763af175ff1accaf232439e8e":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["2bcd6a2cefce164763af175ff1accaf232439e8e"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}