{"path":"solr/core/src/test/org/apache/solr/CursorPagingTest#assertFullWalkNoDupsWithFacets(int,SolrParams).mjava","commits":[{"id":"851e2bd9deeca46bef2e8c5328c9448e4198a688","date":1389637622,"type":0,"author":"Steven Rowe","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/CursorPagingTest#assertFullWalkNoDupsWithFacets(int,SolrParams).mjava","pathOld":"/dev/null","sourceNew":"  /**\n   * Given a set of params, executes a cursor query using {@link #CURSOR_MARK_START}\n   * and then continuously walks the results using {@link #CURSOR_MARK_START} as long\n   * as a non-0 number of docs ar returned.  This method records the the set of all id's\n   * (must be positive ints) encountered and throws an assertion failure if any id is\n   * encountered more than once, or if the set grows above maxSize.\n   *\n   * Also checks that facets are the same with each page, and that they are correct.\n   */\n  public SentinelIntSet assertFullWalkNoDupsWithFacets(int maxSize, SolrParams params)\n      throws Exception {\n\n    final String facetField = params.get(\"facet.field\");\n    assertNotNull(\"facet.field param not specified\", facetField);\n    assertFalse(\"facet.field param contains multiple values\", facetField.contains(\",\"));\n    assertEquals(\"facet.limit param not set to -1\", \"-1\", params.get(\"facet.limit\"));\n    final Map<String,MutableValueInt> facetCounts = new HashMap<String,MutableValueInt>();\n    SentinelIntSet ids = new SentinelIntSet(maxSize, -1);\n    String cursorMark = CURSOR_MARK_START;\n    int docsOnThisPage = Integer.MAX_VALUE;\n    List previousFacets = null;\n    while (0 < docsOnThisPage) {\n      String json = assertJQ(req(params, CURSOR_MARK_PARAM, cursorMark));\n      Map rsp = (Map) ObjectBuilder.fromJSON(json);\n      assertTrue(\"response doesn't contain \" + CURSOR_MARK_NEXT + \": \" + json,\n                 rsp.containsKey(CURSOR_MARK_NEXT));\n      String nextCursorMark = (String)rsp.get(CURSOR_MARK_NEXT);\n      assertNotNull(CURSOR_MARK_NEXT + \" is null\", nextCursorMark);\n      List<Map<Object,Object>> docs = (List)(((Map)rsp.get(\"response\")).get(\"docs\"));\n      docsOnThisPage = docs.size();\n      if (null != params.getInt(CommonParams.ROWS)) {\n        int rows = params.getInt(CommonParams.ROWS);\n        assertTrue(\"Too many docs on this page: \" + rows + \" < \" + docsOnThisPage,\n                   docsOnThisPage <= rows);\n      }\n      if (0 == docsOnThisPage) {\n        assertEquals(\"no more docs, but \"+CURSOR_MARK_NEXT+\" isn't same\",\n                     cursorMark, nextCursorMark);\n      }\n      for (Map<Object,Object> doc : docs) {\n        int id = ((Long)doc.get(\"id\")).intValue();\n        assertFalse(\"walk already seen: \" + id, ids.exists(id));\n        ids.put(id);\n        assertFalse(\"id set bigger then max allowed (\"+maxSize+\"): \" + ids.size(),\n                    maxSize < ids.size());\n        Object facet = doc.get(facetField);\n        String facetString = null == facet ? null : facet.toString(); // null: missing facet value\n        MutableValueInt count = facetCounts.get(facetString);\n        if (null == count) {\n          count = new MutableValueInt();\n          facetCounts.put(facetString, count);\n        }\n        ++count.value;\n      }\n      cursorMark = nextCursorMark;\n\n      Map facetFields = (Map)((Map)rsp.get(\"facet_counts\")).get(\"facet_fields\");\n      List facets = (List)facetFields.get(facetField);\n      if (null != previousFacets) {\n        assertEquals(\"Facets not the same as on previous page:\\nprevious page facets: \"\n            + Arrays.toString(facets.toArray(new Object[facets.size()]))\n            + \"\\ncurrent page facets: \"\n            + Arrays.toString(previousFacets.toArray(new Object[previousFacets.size()])),\n            previousFacets, facets);\n      }\n      previousFacets = facets;\n    }\n\n    assertNotNull(\"previousFacets is null\", previousFacets);\n    assertEquals(\"Mismatch in number of facets: \", facetCounts.size(), previousFacets.size() / 2);\n    int pos;\n    for (pos = 0 ; pos < previousFacets.size() ; pos += 2) {\n      String label = (String)previousFacets.get(pos);\n      int expectedCount = ((Number)previousFacets.get(pos + 1)).intValue();\n      MutableValueInt count = facetCounts.get(label);\n      assertNotNull(\"Expected facet label #\" + (pos / 2) + \" not found: '\" + label + \"'\", count);\n      assertEquals(\"Facet count mismatch for label #\" + (pos / 2) + \" '\" + label + \"'\", expectedCount,\n                   facetCounts.get(label).value);\n      pos += 2;\n    }\n    return ids;\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":["1e210ae1e604402eb4eeff2a52e56d189cd4f2f1"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"634f330c54fd3f9f491d52036dc3f40b4f4d8934","date":1394635157,"type":3,"author":"Robert Muir","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/CursorPagingTest#assertFullWalkNoDupsWithFacets(int,SolrParams).mjava","pathOld":"solr/core/src/test/org/apache/solr/CursorPagingTest#assertFullWalkNoDupsWithFacets(int,SolrParams).mjava","sourceNew":"  /**\n   * Given a set of params, executes a cursor query using {@link #CURSOR_MARK_START}\n   * and then continuously walks the results using {@link #CURSOR_MARK_START} as long\n   * as a non-0 number of docs ar returned.  This method records the the set of all id's\n   * (must be positive ints) encountered and throws an assertion failure if any id is\n   * encountered more than once, or if the set grows above maxSize.\n   *\n   * Also checks that facets are the same with each page, and that they are correct.\n   */\n  public SentinelIntSet assertFullWalkNoDupsWithFacets(int maxSize, SolrParams params)\n      throws Exception {\n\n    final String facetField = params.get(\"facet.field\");\n    assertNotNull(\"facet.field param not specified\", facetField);\n    assertFalse(\"facet.field param contains multiple values\", facetField.contains(\",\"));\n    assertEquals(\"facet.limit param not set to -1\", \"-1\", params.get(\"facet.limit\"));\n    final Map<String,MutableValueInt> facetCounts = new HashMap<>();\n    SentinelIntSet ids = new SentinelIntSet(maxSize, -1);\n    String cursorMark = CURSOR_MARK_START;\n    int docsOnThisPage = Integer.MAX_VALUE;\n    List previousFacets = null;\n    while (0 < docsOnThisPage) {\n      String json = assertJQ(req(params, CURSOR_MARK_PARAM, cursorMark));\n      Map rsp = (Map) ObjectBuilder.fromJSON(json);\n      assertTrue(\"response doesn't contain \" + CURSOR_MARK_NEXT + \": \" + json,\n                 rsp.containsKey(CURSOR_MARK_NEXT));\n      String nextCursorMark = (String)rsp.get(CURSOR_MARK_NEXT);\n      assertNotNull(CURSOR_MARK_NEXT + \" is null\", nextCursorMark);\n      List<Map<Object,Object>> docs = (List)(((Map)rsp.get(\"response\")).get(\"docs\"));\n      docsOnThisPage = docs.size();\n      if (null != params.getInt(CommonParams.ROWS)) {\n        int rows = params.getInt(CommonParams.ROWS);\n        assertTrue(\"Too many docs on this page: \" + rows + \" < \" + docsOnThisPage,\n                   docsOnThisPage <= rows);\n      }\n      if (0 == docsOnThisPage) {\n        assertEquals(\"no more docs, but \"+CURSOR_MARK_NEXT+\" isn't same\",\n                     cursorMark, nextCursorMark);\n      }\n      for (Map<Object,Object> doc : docs) {\n        int id = ((Long)doc.get(\"id\")).intValue();\n        assertFalse(\"walk already seen: \" + id, ids.exists(id));\n        ids.put(id);\n        assertFalse(\"id set bigger then max allowed (\"+maxSize+\"): \" + ids.size(),\n                    maxSize < ids.size());\n        Object facet = doc.get(facetField);\n        String facetString = null == facet ? null : facet.toString(); // null: missing facet value\n        MutableValueInt count = facetCounts.get(facetString);\n        if (null == count) {\n          count = new MutableValueInt();\n          facetCounts.put(facetString, count);\n        }\n        ++count.value;\n      }\n      cursorMark = nextCursorMark;\n\n      Map facetFields = (Map)((Map)rsp.get(\"facet_counts\")).get(\"facet_fields\");\n      List facets = (List)facetFields.get(facetField);\n      if (null != previousFacets) {\n        assertEquals(\"Facets not the same as on previous page:\\nprevious page facets: \"\n            + Arrays.toString(facets.toArray(new Object[facets.size()]))\n            + \"\\ncurrent page facets: \"\n            + Arrays.toString(previousFacets.toArray(new Object[previousFacets.size()])),\n            previousFacets, facets);\n      }\n      previousFacets = facets;\n    }\n\n    assertNotNull(\"previousFacets is null\", previousFacets);\n    assertEquals(\"Mismatch in number of facets: \", facetCounts.size(), previousFacets.size() / 2);\n    int pos;\n    for (pos = 0 ; pos < previousFacets.size() ; pos += 2) {\n      String label = (String)previousFacets.get(pos);\n      int expectedCount = ((Number)previousFacets.get(pos + 1)).intValue();\n      MutableValueInt count = facetCounts.get(label);\n      assertNotNull(\"Expected facet label #\" + (pos / 2) + \" not found: '\" + label + \"'\", count);\n      assertEquals(\"Facet count mismatch for label #\" + (pos / 2) + \" '\" + label + \"'\", expectedCount,\n                   facetCounts.get(label).value);\n      pos += 2;\n    }\n    return ids;\n  }\n\n","sourceOld":"  /**\n   * Given a set of params, executes a cursor query using {@link #CURSOR_MARK_START}\n   * and then continuously walks the results using {@link #CURSOR_MARK_START} as long\n   * as a non-0 number of docs ar returned.  This method records the the set of all id's\n   * (must be positive ints) encountered and throws an assertion failure if any id is\n   * encountered more than once, or if the set grows above maxSize.\n   *\n   * Also checks that facets are the same with each page, and that they are correct.\n   */\n  public SentinelIntSet assertFullWalkNoDupsWithFacets(int maxSize, SolrParams params)\n      throws Exception {\n\n    final String facetField = params.get(\"facet.field\");\n    assertNotNull(\"facet.field param not specified\", facetField);\n    assertFalse(\"facet.field param contains multiple values\", facetField.contains(\",\"));\n    assertEquals(\"facet.limit param not set to -1\", \"-1\", params.get(\"facet.limit\"));\n    final Map<String,MutableValueInt> facetCounts = new HashMap<String,MutableValueInt>();\n    SentinelIntSet ids = new SentinelIntSet(maxSize, -1);\n    String cursorMark = CURSOR_MARK_START;\n    int docsOnThisPage = Integer.MAX_VALUE;\n    List previousFacets = null;\n    while (0 < docsOnThisPage) {\n      String json = assertJQ(req(params, CURSOR_MARK_PARAM, cursorMark));\n      Map rsp = (Map) ObjectBuilder.fromJSON(json);\n      assertTrue(\"response doesn't contain \" + CURSOR_MARK_NEXT + \": \" + json,\n                 rsp.containsKey(CURSOR_MARK_NEXT));\n      String nextCursorMark = (String)rsp.get(CURSOR_MARK_NEXT);\n      assertNotNull(CURSOR_MARK_NEXT + \" is null\", nextCursorMark);\n      List<Map<Object,Object>> docs = (List)(((Map)rsp.get(\"response\")).get(\"docs\"));\n      docsOnThisPage = docs.size();\n      if (null != params.getInt(CommonParams.ROWS)) {\n        int rows = params.getInt(CommonParams.ROWS);\n        assertTrue(\"Too many docs on this page: \" + rows + \" < \" + docsOnThisPage,\n                   docsOnThisPage <= rows);\n      }\n      if (0 == docsOnThisPage) {\n        assertEquals(\"no more docs, but \"+CURSOR_MARK_NEXT+\" isn't same\",\n                     cursorMark, nextCursorMark);\n      }\n      for (Map<Object,Object> doc : docs) {\n        int id = ((Long)doc.get(\"id\")).intValue();\n        assertFalse(\"walk already seen: \" + id, ids.exists(id));\n        ids.put(id);\n        assertFalse(\"id set bigger then max allowed (\"+maxSize+\"): \" + ids.size(),\n                    maxSize < ids.size());\n        Object facet = doc.get(facetField);\n        String facetString = null == facet ? null : facet.toString(); // null: missing facet value\n        MutableValueInt count = facetCounts.get(facetString);\n        if (null == count) {\n          count = new MutableValueInt();\n          facetCounts.put(facetString, count);\n        }\n        ++count.value;\n      }\n      cursorMark = nextCursorMark;\n\n      Map facetFields = (Map)((Map)rsp.get(\"facet_counts\")).get(\"facet_fields\");\n      List facets = (List)facetFields.get(facetField);\n      if (null != previousFacets) {\n        assertEquals(\"Facets not the same as on previous page:\\nprevious page facets: \"\n            + Arrays.toString(facets.toArray(new Object[facets.size()]))\n            + \"\\ncurrent page facets: \"\n            + Arrays.toString(previousFacets.toArray(new Object[previousFacets.size()])),\n            previousFacets, facets);\n      }\n      previousFacets = facets;\n    }\n\n    assertNotNull(\"previousFacets is null\", previousFacets);\n    assertEquals(\"Mismatch in number of facets: \", facetCounts.size(), previousFacets.size() / 2);\n    int pos;\n    for (pos = 0 ; pos < previousFacets.size() ; pos += 2) {\n      String label = (String)previousFacets.get(pos);\n      int expectedCount = ((Number)previousFacets.get(pos + 1)).intValue();\n      MutableValueInt count = facetCounts.get(label);\n      assertNotNull(\"Expected facet label #\" + (pos / 2) + \" not found: '\" + label + \"'\", count);\n      assertEquals(\"Facet count mismatch for label #\" + (pos / 2) + \" '\" + label + \"'\", expectedCount,\n                   facetCounts.get(label).value);\n      pos += 2;\n    }\n    return ids;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"1e210ae1e604402eb4eeff2a52e56d189cd4f2f1","date":1423508552,"type":3,"author":"Robert Muir","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/CursorPagingTest#assertFullWalkNoDupsWithFacets(int,SolrParams).mjava","pathOld":"solr/core/src/test/org/apache/solr/CursorPagingTest#assertFullWalkNoDupsWithFacets(int,SolrParams).mjava","sourceNew":"  /**\n   * Given a set of params, executes a cursor query using {@link CursorMarkParams#CURSOR_MARK_START}\n   * and then continuously walks the results using {@link CursorMarkParams#CURSOR_MARK_START} as long\n   * as a non-0 number of docs ar returned.  This method records the the set of all id's\n   * (must be positive ints) encountered and throws an assertion failure if any id is\n   * encountered more than once, or if the set grows above maxSize.\n   *\n   * Also checks that facets are the same with each page, and that they are correct.\n   */\n  public SentinelIntSet assertFullWalkNoDupsWithFacets(int maxSize, SolrParams params)\n      throws Exception {\n\n    final String facetField = params.get(\"facet.field\");\n    assertNotNull(\"facet.field param not specified\", facetField);\n    assertFalse(\"facet.field param contains multiple values\", facetField.contains(\",\"));\n    assertEquals(\"facet.limit param not set to -1\", \"-1\", params.get(\"facet.limit\"));\n    final Map<String,MutableValueInt> facetCounts = new HashMap<>();\n    SentinelIntSet ids = new SentinelIntSet(maxSize, -1);\n    String cursorMark = CURSOR_MARK_START;\n    int docsOnThisPage = Integer.MAX_VALUE;\n    List previousFacets = null;\n    while (0 < docsOnThisPage) {\n      String json = assertJQ(req(params, CURSOR_MARK_PARAM, cursorMark));\n      Map rsp = (Map) ObjectBuilder.fromJSON(json);\n      assertTrue(\"response doesn't contain \" + CURSOR_MARK_NEXT + \": \" + json,\n                 rsp.containsKey(CURSOR_MARK_NEXT));\n      String nextCursorMark = (String)rsp.get(CURSOR_MARK_NEXT);\n      assertNotNull(CURSOR_MARK_NEXT + \" is null\", nextCursorMark);\n      List<Map<Object,Object>> docs = (List)(((Map)rsp.get(\"response\")).get(\"docs\"));\n      docsOnThisPage = docs.size();\n      if (null != params.getInt(CommonParams.ROWS)) {\n        int rows = params.getInt(CommonParams.ROWS);\n        assertTrue(\"Too many docs on this page: \" + rows + \" < \" + docsOnThisPage,\n                   docsOnThisPage <= rows);\n      }\n      if (0 == docsOnThisPage) {\n        assertEquals(\"no more docs, but \"+CURSOR_MARK_NEXT+\" isn't same\",\n                     cursorMark, nextCursorMark);\n      }\n      for (Map<Object,Object> doc : docs) {\n        int id = ((Long)doc.get(\"id\")).intValue();\n        assertFalse(\"walk already seen: \" + id, ids.exists(id));\n        ids.put(id);\n        assertFalse(\"id set bigger then max allowed (\"+maxSize+\"): \" + ids.size(),\n                    maxSize < ids.size());\n        Object facet = doc.get(facetField);\n        String facetString = null == facet ? null : facet.toString(); // null: missing facet value\n        MutableValueInt count = facetCounts.get(facetString);\n        if (null == count) {\n          count = new MutableValueInt();\n          facetCounts.put(facetString, count);\n        }\n        ++count.value;\n      }\n      cursorMark = nextCursorMark;\n\n      Map facetFields = (Map)((Map)rsp.get(\"facet_counts\")).get(\"facet_fields\");\n      List facets = (List)facetFields.get(facetField);\n      if (null != previousFacets) {\n        assertEquals(\"Facets not the same as on previous page:\\nprevious page facets: \"\n            + Arrays.toString(facets.toArray(new Object[facets.size()]))\n            + \"\\ncurrent page facets: \"\n            + Arrays.toString(previousFacets.toArray(new Object[previousFacets.size()])),\n            previousFacets, facets);\n      }\n      previousFacets = facets;\n    }\n\n    assertNotNull(\"previousFacets is null\", previousFacets);\n    assertEquals(\"Mismatch in number of facets: \", facetCounts.size(), previousFacets.size() / 2);\n    int pos;\n    for (pos = 0 ; pos < previousFacets.size() ; pos += 2) {\n      String label = (String)previousFacets.get(pos);\n      int expectedCount = ((Number)previousFacets.get(pos + 1)).intValue();\n      MutableValueInt count = facetCounts.get(label);\n      assertNotNull(\"Expected facet label #\" + (pos / 2) + \" not found: '\" + label + \"'\", count);\n      assertEquals(\"Facet count mismatch for label #\" + (pos / 2) + \" '\" + label + \"'\", expectedCount,\n                   facetCounts.get(label).value);\n      pos += 2;\n    }\n    return ids;\n  }\n\n","sourceOld":"  /**\n   * Given a set of params, executes a cursor query using {@link #CURSOR_MARK_START}\n   * and then continuously walks the results using {@link #CURSOR_MARK_START} as long\n   * as a non-0 number of docs ar returned.  This method records the the set of all id's\n   * (must be positive ints) encountered and throws an assertion failure if any id is\n   * encountered more than once, or if the set grows above maxSize.\n   *\n   * Also checks that facets are the same with each page, and that they are correct.\n   */\n  public SentinelIntSet assertFullWalkNoDupsWithFacets(int maxSize, SolrParams params)\n      throws Exception {\n\n    final String facetField = params.get(\"facet.field\");\n    assertNotNull(\"facet.field param not specified\", facetField);\n    assertFalse(\"facet.field param contains multiple values\", facetField.contains(\",\"));\n    assertEquals(\"facet.limit param not set to -1\", \"-1\", params.get(\"facet.limit\"));\n    final Map<String,MutableValueInt> facetCounts = new HashMap<>();\n    SentinelIntSet ids = new SentinelIntSet(maxSize, -1);\n    String cursorMark = CURSOR_MARK_START;\n    int docsOnThisPage = Integer.MAX_VALUE;\n    List previousFacets = null;\n    while (0 < docsOnThisPage) {\n      String json = assertJQ(req(params, CURSOR_MARK_PARAM, cursorMark));\n      Map rsp = (Map) ObjectBuilder.fromJSON(json);\n      assertTrue(\"response doesn't contain \" + CURSOR_MARK_NEXT + \": \" + json,\n                 rsp.containsKey(CURSOR_MARK_NEXT));\n      String nextCursorMark = (String)rsp.get(CURSOR_MARK_NEXT);\n      assertNotNull(CURSOR_MARK_NEXT + \" is null\", nextCursorMark);\n      List<Map<Object,Object>> docs = (List)(((Map)rsp.get(\"response\")).get(\"docs\"));\n      docsOnThisPage = docs.size();\n      if (null != params.getInt(CommonParams.ROWS)) {\n        int rows = params.getInt(CommonParams.ROWS);\n        assertTrue(\"Too many docs on this page: \" + rows + \" < \" + docsOnThisPage,\n                   docsOnThisPage <= rows);\n      }\n      if (0 == docsOnThisPage) {\n        assertEquals(\"no more docs, but \"+CURSOR_MARK_NEXT+\" isn't same\",\n                     cursorMark, nextCursorMark);\n      }\n      for (Map<Object,Object> doc : docs) {\n        int id = ((Long)doc.get(\"id\")).intValue();\n        assertFalse(\"walk already seen: \" + id, ids.exists(id));\n        ids.put(id);\n        assertFalse(\"id set bigger then max allowed (\"+maxSize+\"): \" + ids.size(),\n                    maxSize < ids.size());\n        Object facet = doc.get(facetField);\n        String facetString = null == facet ? null : facet.toString(); // null: missing facet value\n        MutableValueInt count = facetCounts.get(facetString);\n        if (null == count) {\n          count = new MutableValueInt();\n          facetCounts.put(facetString, count);\n        }\n        ++count.value;\n      }\n      cursorMark = nextCursorMark;\n\n      Map facetFields = (Map)((Map)rsp.get(\"facet_counts\")).get(\"facet_fields\");\n      List facets = (List)facetFields.get(facetField);\n      if (null != previousFacets) {\n        assertEquals(\"Facets not the same as on previous page:\\nprevious page facets: \"\n            + Arrays.toString(facets.toArray(new Object[facets.size()]))\n            + \"\\ncurrent page facets: \"\n            + Arrays.toString(previousFacets.toArray(new Object[previousFacets.size()])),\n            previousFacets, facets);\n      }\n      previousFacets = facets;\n    }\n\n    assertNotNull(\"previousFacets is null\", previousFacets);\n    assertEquals(\"Mismatch in number of facets: \", facetCounts.size(), previousFacets.size() / 2);\n    int pos;\n    for (pos = 0 ; pos < previousFacets.size() ; pos += 2) {\n      String label = (String)previousFacets.get(pos);\n      int expectedCount = ((Number)previousFacets.get(pos + 1)).intValue();\n      MutableValueInt count = facetCounts.get(label);\n      assertNotNull(\"Expected facet label #\" + (pos / 2) + \" not found: '\" + label + \"'\", count);\n      assertEquals(\"Facet count mismatch for label #\" + (pos / 2) + \" '\" + label + \"'\", expectedCount,\n                   facetCounts.get(label).value);\n      pos += 2;\n    }\n    return ids;\n  }\n\n","bugFix":["851e2bd9deeca46bef2e8c5328c9448e4198a688"],"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"a71f63026529f3c1f03cfdd664910873ab2369ae","date":1497543264,"type":3,"author":"Chris Hostetter","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/CursorPagingTest#assertFullWalkNoDupsWithFacets(int,SolrParams).mjava","pathOld":"solr/core/src/test/org/apache/solr/CursorPagingTest#assertFullWalkNoDupsWithFacets(int,SolrParams).mjava","sourceNew":"  /**\n   * Given a set of params, executes a cursor query using {@link CursorMarkParams#CURSOR_MARK_START}\n   * and then continuously walks the results using {@link CursorMarkParams#CURSOR_MARK_START} as long\n   * as a non-0 number of docs ar returned.  This method records the the set of all id's\n   * (must be positive ints) encountered and throws an assertion failure if any id is\n   * encountered more than once, or if the set grows above maxSize.\n   *\n   * Also checks that facets are the same with each page, and that they are correct.\n   */\n  public SentinelIntSet assertFullWalkNoDupsWithFacets(int maxSize, SolrParams params)\n      throws Exception {\n\n    final String facetField = params.get(\"facet.field\");\n    assertNotNull(\"facet.field param not specified\", facetField);\n    assertFalse(\"facet.field param contains multiple values\", facetField.contains(\",\"));\n    assertEquals(\"facet.limit param not set to -1\", \"-1\", params.get(\"facet.limit\"));\n    final Map<String,MutableValueInt> facetCounts = new HashMap<>();\n    SentinelIntSet ids = new SentinelIntSet(maxSize, -1);\n    String cursorMark = CURSOR_MARK_START;\n    int docsOnThisPage = Integer.MAX_VALUE;\n    List previousFacets = null;\n    while (0 < docsOnThisPage) {\n      String json = assertJQ(req(params, CURSOR_MARK_PARAM, cursorMark));\n      Map rsp = (Map) ObjectBuilder.fromJSON(json);\n      assertTrue(\"response doesn't contain \" + CURSOR_MARK_NEXT + \": \" + json,\n                 rsp.containsKey(CURSOR_MARK_NEXT));\n      String nextCursorMark = (String)rsp.get(CURSOR_MARK_NEXT);\n      assertNotNull(CURSOR_MARK_NEXT + \" is null\", nextCursorMark);\n      List<Map<Object,Object>> docs = (List)(((Map)rsp.get(\"response\")).get(\"docs\"));\n      docsOnThisPage = docs.size();\n      if (null != params.getInt(CommonParams.ROWS)) {\n        int rows = params.getInt(CommonParams.ROWS);\n        assertTrue(\"Too many docs on this page: \" + rows + \" < \" + docsOnThisPage,\n                   docsOnThisPage <= rows);\n      }\n      if (0 == docsOnThisPage) {\n        assertEquals(\"no more docs, but \"+CURSOR_MARK_NEXT+\" isn't same\",\n                     cursorMark, nextCursorMark);\n      }\n      for (Map<Object,Object> doc : docs) {\n        int id = Integer.parseInt(doc.get(\"id\").toString());\n        assertFalse(\"walk already seen: \" + id, ids.exists(id));\n        ids.put(id);\n        assertFalse(\"id set bigger then max allowed (\"+maxSize+\"): \" + ids.size(),\n                    maxSize < ids.size());\n        Object facet = doc.get(facetField);\n        String facetString = null == facet ? null : facet.toString(); // null: missing facet value\n        MutableValueInt count = facetCounts.get(facetString);\n        if (null == count) {\n          count = new MutableValueInt();\n          facetCounts.put(facetString, count);\n        }\n        ++count.value;\n      }\n      cursorMark = nextCursorMark;\n\n      Map facetFields = (Map)((Map)rsp.get(\"facet_counts\")).get(\"facet_fields\");\n      List facets = (List)facetFields.get(facetField);\n      if (null != previousFacets) {\n        assertEquals(\"Facets not the same as on previous page:\\nprevious page facets: \"\n            + Arrays.toString(facets.toArray(new Object[facets.size()]))\n            + \"\\ncurrent page facets: \"\n            + Arrays.toString(previousFacets.toArray(new Object[previousFacets.size()])),\n            previousFacets, facets);\n      }\n      previousFacets = facets;\n    }\n\n    assertNotNull(\"previousFacets is null\", previousFacets);\n    assertEquals(\"Mismatch in number of facets: \", facetCounts.size(), previousFacets.size() / 2);\n    int pos;\n    for (pos = 0 ; pos < previousFacets.size() ; pos += 2) {\n      String label = (String)previousFacets.get(pos);\n      int expectedCount = ((Number)previousFacets.get(pos + 1)).intValue();\n      MutableValueInt count = facetCounts.get(label);\n      assertNotNull(\"Expected facet label #\" + (pos / 2) + \" not found: '\" + label + \"'\", count);\n      assertEquals(\"Facet count mismatch for label #\" + (pos / 2) + \" '\" + label + \"'\", expectedCount,\n                   facetCounts.get(label).value);\n      pos += 2;\n    }\n    return ids;\n  }\n\n","sourceOld":"  /**\n   * Given a set of params, executes a cursor query using {@link CursorMarkParams#CURSOR_MARK_START}\n   * and then continuously walks the results using {@link CursorMarkParams#CURSOR_MARK_START} as long\n   * as a non-0 number of docs ar returned.  This method records the the set of all id's\n   * (must be positive ints) encountered and throws an assertion failure if any id is\n   * encountered more than once, or if the set grows above maxSize.\n   *\n   * Also checks that facets are the same with each page, and that they are correct.\n   */\n  public SentinelIntSet assertFullWalkNoDupsWithFacets(int maxSize, SolrParams params)\n      throws Exception {\n\n    final String facetField = params.get(\"facet.field\");\n    assertNotNull(\"facet.field param not specified\", facetField);\n    assertFalse(\"facet.field param contains multiple values\", facetField.contains(\",\"));\n    assertEquals(\"facet.limit param not set to -1\", \"-1\", params.get(\"facet.limit\"));\n    final Map<String,MutableValueInt> facetCounts = new HashMap<>();\n    SentinelIntSet ids = new SentinelIntSet(maxSize, -1);\n    String cursorMark = CURSOR_MARK_START;\n    int docsOnThisPage = Integer.MAX_VALUE;\n    List previousFacets = null;\n    while (0 < docsOnThisPage) {\n      String json = assertJQ(req(params, CURSOR_MARK_PARAM, cursorMark));\n      Map rsp = (Map) ObjectBuilder.fromJSON(json);\n      assertTrue(\"response doesn't contain \" + CURSOR_MARK_NEXT + \": \" + json,\n                 rsp.containsKey(CURSOR_MARK_NEXT));\n      String nextCursorMark = (String)rsp.get(CURSOR_MARK_NEXT);\n      assertNotNull(CURSOR_MARK_NEXT + \" is null\", nextCursorMark);\n      List<Map<Object,Object>> docs = (List)(((Map)rsp.get(\"response\")).get(\"docs\"));\n      docsOnThisPage = docs.size();\n      if (null != params.getInt(CommonParams.ROWS)) {\n        int rows = params.getInt(CommonParams.ROWS);\n        assertTrue(\"Too many docs on this page: \" + rows + \" < \" + docsOnThisPage,\n                   docsOnThisPage <= rows);\n      }\n      if (0 == docsOnThisPage) {\n        assertEquals(\"no more docs, but \"+CURSOR_MARK_NEXT+\" isn't same\",\n                     cursorMark, nextCursorMark);\n      }\n      for (Map<Object,Object> doc : docs) {\n        int id = ((Long)doc.get(\"id\")).intValue();\n        assertFalse(\"walk already seen: \" + id, ids.exists(id));\n        ids.put(id);\n        assertFalse(\"id set bigger then max allowed (\"+maxSize+\"): \" + ids.size(),\n                    maxSize < ids.size());\n        Object facet = doc.get(facetField);\n        String facetString = null == facet ? null : facet.toString(); // null: missing facet value\n        MutableValueInt count = facetCounts.get(facetString);\n        if (null == count) {\n          count = new MutableValueInt();\n          facetCounts.put(facetString, count);\n        }\n        ++count.value;\n      }\n      cursorMark = nextCursorMark;\n\n      Map facetFields = (Map)((Map)rsp.get(\"facet_counts\")).get(\"facet_fields\");\n      List facets = (List)facetFields.get(facetField);\n      if (null != previousFacets) {\n        assertEquals(\"Facets not the same as on previous page:\\nprevious page facets: \"\n            + Arrays.toString(facets.toArray(new Object[facets.size()]))\n            + \"\\ncurrent page facets: \"\n            + Arrays.toString(previousFacets.toArray(new Object[previousFacets.size()])),\n            previousFacets, facets);\n      }\n      previousFacets = facets;\n    }\n\n    assertNotNull(\"previousFacets is null\", previousFacets);\n    assertEquals(\"Mismatch in number of facets: \", facetCounts.size(), previousFacets.size() / 2);\n    int pos;\n    for (pos = 0 ; pos < previousFacets.size() ; pos += 2) {\n      String label = (String)previousFacets.get(pos);\n      int expectedCount = ((Number)previousFacets.get(pos + 1)).intValue();\n      MutableValueInt count = facetCounts.get(label);\n      assertNotNull(\"Expected facet label #\" + (pos / 2) + \" not found: '\" + label + \"'\", count);\n      assertEquals(\"Facet count mismatch for label #\" + (pos / 2) + \" '\" + label + \"'\", expectedCount,\n                   facetCounts.get(label).value);\n      pos += 2;\n    }\n    return ids;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"2a3ed3f77cdd034e789d00d1ca8bb7054c9fb8e9","date":1498028748,"type":3,"author":"Shalin Shekhar Mangar","isMerge":true,"pathNew":"solr/core/src/test/org/apache/solr/CursorPagingTest#assertFullWalkNoDupsWithFacets(int,SolrParams).mjava","pathOld":"solr/core/src/test/org/apache/solr/CursorPagingTest#assertFullWalkNoDupsWithFacets(int,SolrParams).mjava","sourceNew":"  /**\n   * Given a set of params, executes a cursor query using {@link CursorMarkParams#CURSOR_MARK_START}\n   * and then continuously walks the results using {@link CursorMarkParams#CURSOR_MARK_START} as long\n   * as a non-0 number of docs ar returned.  This method records the the set of all id's\n   * (must be positive ints) encountered and throws an assertion failure if any id is\n   * encountered more than once, or if the set grows above maxSize.\n   *\n   * Also checks that facets are the same with each page, and that they are correct.\n   */\n  public SentinelIntSet assertFullWalkNoDupsWithFacets(int maxSize, SolrParams params)\n      throws Exception {\n\n    final String facetField = params.get(\"facet.field\");\n    assertNotNull(\"facet.field param not specified\", facetField);\n    assertFalse(\"facet.field param contains multiple values\", facetField.contains(\",\"));\n    assertEquals(\"facet.limit param not set to -1\", \"-1\", params.get(\"facet.limit\"));\n    final Map<String,MutableValueInt> facetCounts = new HashMap<>();\n    SentinelIntSet ids = new SentinelIntSet(maxSize, -1);\n    String cursorMark = CURSOR_MARK_START;\n    int docsOnThisPage = Integer.MAX_VALUE;\n    List previousFacets = null;\n    while (0 < docsOnThisPage) {\n      String json = assertJQ(req(params, CURSOR_MARK_PARAM, cursorMark));\n      Map rsp = (Map) ObjectBuilder.fromJSON(json);\n      assertTrue(\"response doesn't contain \" + CURSOR_MARK_NEXT + \": \" + json,\n                 rsp.containsKey(CURSOR_MARK_NEXT));\n      String nextCursorMark = (String)rsp.get(CURSOR_MARK_NEXT);\n      assertNotNull(CURSOR_MARK_NEXT + \" is null\", nextCursorMark);\n      List<Map<Object,Object>> docs = (List)(((Map)rsp.get(\"response\")).get(\"docs\"));\n      docsOnThisPage = docs.size();\n      if (null != params.getInt(CommonParams.ROWS)) {\n        int rows = params.getInt(CommonParams.ROWS);\n        assertTrue(\"Too many docs on this page: \" + rows + \" < \" + docsOnThisPage,\n                   docsOnThisPage <= rows);\n      }\n      if (0 == docsOnThisPage) {\n        assertEquals(\"no more docs, but \"+CURSOR_MARK_NEXT+\" isn't same\",\n                     cursorMark, nextCursorMark);\n      }\n      for (Map<Object,Object> doc : docs) {\n        int id = Integer.parseInt(doc.get(\"id\").toString());\n        assertFalse(\"walk already seen: \" + id, ids.exists(id));\n        ids.put(id);\n        assertFalse(\"id set bigger then max allowed (\"+maxSize+\"): \" + ids.size(),\n                    maxSize < ids.size());\n        Object facet = doc.get(facetField);\n        String facetString = null == facet ? null : facet.toString(); // null: missing facet value\n        MutableValueInt count = facetCounts.get(facetString);\n        if (null == count) {\n          count = new MutableValueInt();\n          facetCounts.put(facetString, count);\n        }\n        ++count.value;\n      }\n      cursorMark = nextCursorMark;\n\n      Map facetFields = (Map)((Map)rsp.get(\"facet_counts\")).get(\"facet_fields\");\n      List facets = (List)facetFields.get(facetField);\n      if (null != previousFacets) {\n        assertEquals(\"Facets not the same as on previous page:\\nprevious page facets: \"\n            + Arrays.toString(facets.toArray(new Object[facets.size()]))\n            + \"\\ncurrent page facets: \"\n            + Arrays.toString(previousFacets.toArray(new Object[previousFacets.size()])),\n            previousFacets, facets);\n      }\n      previousFacets = facets;\n    }\n\n    assertNotNull(\"previousFacets is null\", previousFacets);\n    assertEquals(\"Mismatch in number of facets: \", facetCounts.size(), previousFacets.size() / 2);\n    int pos;\n    for (pos = 0 ; pos < previousFacets.size() ; pos += 2) {\n      String label = (String)previousFacets.get(pos);\n      int expectedCount = ((Number)previousFacets.get(pos + 1)).intValue();\n      MutableValueInt count = facetCounts.get(label);\n      assertNotNull(\"Expected facet label #\" + (pos / 2) + \" not found: '\" + label + \"'\", count);\n      assertEquals(\"Facet count mismatch for label #\" + (pos / 2) + \" '\" + label + \"'\", expectedCount,\n                   facetCounts.get(label).value);\n      pos += 2;\n    }\n    return ids;\n  }\n\n","sourceOld":"  /**\n   * Given a set of params, executes a cursor query using {@link CursorMarkParams#CURSOR_MARK_START}\n   * and then continuously walks the results using {@link CursorMarkParams#CURSOR_MARK_START} as long\n   * as a non-0 number of docs ar returned.  This method records the the set of all id's\n   * (must be positive ints) encountered and throws an assertion failure if any id is\n   * encountered more than once, or if the set grows above maxSize.\n   *\n   * Also checks that facets are the same with each page, and that they are correct.\n   */\n  public SentinelIntSet assertFullWalkNoDupsWithFacets(int maxSize, SolrParams params)\n      throws Exception {\n\n    final String facetField = params.get(\"facet.field\");\n    assertNotNull(\"facet.field param not specified\", facetField);\n    assertFalse(\"facet.field param contains multiple values\", facetField.contains(\",\"));\n    assertEquals(\"facet.limit param not set to -1\", \"-1\", params.get(\"facet.limit\"));\n    final Map<String,MutableValueInt> facetCounts = new HashMap<>();\n    SentinelIntSet ids = new SentinelIntSet(maxSize, -1);\n    String cursorMark = CURSOR_MARK_START;\n    int docsOnThisPage = Integer.MAX_VALUE;\n    List previousFacets = null;\n    while (0 < docsOnThisPage) {\n      String json = assertJQ(req(params, CURSOR_MARK_PARAM, cursorMark));\n      Map rsp = (Map) ObjectBuilder.fromJSON(json);\n      assertTrue(\"response doesn't contain \" + CURSOR_MARK_NEXT + \": \" + json,\n                 rsp.containsKey(CURSOR_MARK_NEXT));\n      String nextCursorMark = (String)rsp.get(CURSOR_MARK_NEXT);\n      assertNotNull(CURSOR_MARK_NEXT + \" is null\", nextCursorMark);\n      List<Map<Object,Object>> docs = (List)(((Map)rsp.get(\"response\")).get(\"docs\"));\n      docsOnThisPage = docs.size();\n      if (null != params.getInt(CommonParams.ROWS)) {\n        int rows = params.getInt(CommonParams.ROWS);\n        assertTrue(\"Too many docs on this page: \" + rows + \" < \" + docsOnThisPage,\n                   docsOnThisPage <= rows);\n      }\n      if (0 == docsOnThisPage) {\n        assertEquals(\"no more docs, but \"+CURSOR_MARK_NEXT+\" isn't same\",\n                     cursorMark, nextCursorMark);\n      }\n      for (Map<Object,Object> doc : docs) {\n        int id = ((Long)doc.get(\"id\")).intValue();\n        assertFalse(\"walk already seen: \" + id, ids.exists(id));\n        ids.put(id);\n        assertFalse(\"id set bigger then max allowed (\"+maxSize+\"): \" + ids.size(),\n                    maxSize < ids.size());\n        Object facet = doc.get(facetField);\n        String facetString = null == facet ? null : facet.toString(); // null: missing facet value\n        MutableValueInt count = facetCounts.get(facetString);\n        if (null == count) {\n          count = new MutableValueInt();\n          facetCounts.put(facetString, count);\n        }\n        ++count.value;\n      }\n      cursorMark = nextCursorMark;\n\n      Map facetFields = (Map)((Map)rsp.get(\"facet_counts\")).get(\"facet_fields\");\n      List facets = (List)facetFields.get(facetField);\n      if (null != previousFacets) {\n        assertEquals(\"Facets not the same as on previous page:\\nprevious page facets: \"\n            + Arrays.toString(facets.toArray(new Object[facets.size()]))\n            + \"\\ncurrent page facets: \"\n            + Arrays.toString(previousFacets.toArray(new Object[previousFacets.size()])),\n            previousFacets, facets);\n      }\n      previousFacets = facets;\n    }\n\n    assertNotNull(\"previousFacets is null\", previousFacets);\n    assertEquals(\"Mismatch in number of facets: \", facetCounts.size(), previousFacets.size() / 2);\n    int pos;\n    for (pos = 0 ; pos < previousFacets.size() ; pos += 2) {\n      String label = (String)previousFacets.get(pos);\n      int expectedCount = ((Number)previousFacets.get(pos + 1)).intValue();\n      MutableValueInt count = facetCounts.get(label);\n      assertNotNull(\"Expected facet label #\" + (pos / 2) + \" not found: '\" + label + \"'\", count);\n      assertEquals(\"Facet count mismatch for label #\" + (pos / 2) + \" '\" + label + \"'\", expectedCount,\n                   facetCounts.get(label).value);\n      pos += 2;\n    }\n    return ids;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"28288370235ed02234a64753cdbf0c6ec096304a","date":1498726817,"type":3,"author":"Karl Wright","isMerge":true,"pathNew":"solr/core/src/test/org/apache/solr/CursorPagingTest#assertFullWalkNoDupsWithFacets(int,SolrParams).mjava","pathOld":"solr/core/src/test/org/apache/solr/CursorPagingTest#assertFullWalkNoDupsWithFacets(int,SolrParams).mjava","sourceNew":"  /**\n   * Given a set of params, executes a cursor query using {@link CursorMarkParams#CURSOR_MARK_START}\n   * and then continuously walks the results using {@link CursorMarkParams#CURSOR_MARK_START} as long\n   * as a non-0 number of docs ar returned.  This method records the the set of all id's\n   * (must be positive ints) encountered and throws an assertion failure if any id is\n   * encountered more than once, or if the set grows above maxSize.\n   *\n   * Also checks that facets are the same with each page, and that they are correct.\n   */\n  public SentinelIntSet assertFullWalkNoDupsWithFacets(int maxSize, SolrParams params)\n      throws Exception {\n\n    final String facetField = params.get(\"facet.field\");\n    assertNotNull(\"facet.field param not specified\", facetField);\n    assertFalse(\"facet.field param contains multiple values\", facetField.contains(\",\"));\n    assertEquals(\"facet.limit param not set to -1\", \"-1\", params.get(\"facet.limit\"));\n    final Map<String,MutableValueInt> facetCounts = new HashMap<>();\n    SentinelIntSet ids = new SentinelIntSet(maxSize, -1);\n    String cursorMark = CURSOR_MARK_START;\n    int docsOnThisPage = Integer.MAX_VALUE;\n    List previousFacets = null;\n    while (0 < docsOnThisPage) {\n      String json = assertJQ(req(params, CURSOR_MARK_PARAM, cursorMark));\n      Map rsp = (Map) ObjectBuilder.fromJSON(json);\n      assertTrue(\"response doesn't contain \" + CURSOR_MARK_NEXT + \": \" + json,\n                 rsp.containsKey(CURSOR_MARK_NEXT));\n      String nextCursorMark = (String)rsp.get(CURSOR_MARK_NEXT);\n      assertNotNull(CURSOR_MARK_NEXT + \" is null\", nextCursorMark);\n      List<Map<Object,Object>> docs = (List)(((Map)rsp.get(\"response\")).get(\"docs\"));\n      docsOnThisPage = docs.size();\n      if (null != params.getInt(CommonParams.ROWS)) {\n        int rows = params.getInt(CommonParams.ROWS);\n        assertTrue(\"Too many docs on this page: \" + rows + \" < \" + docsOnThisPage,\n                   docsOnThisPage <= rows);\n      }\n      if (0 == docsOnThisPage) {\n        assertEquals(\"no more docs, but \"+CURSOR_MARK_NEXT+\" isn't same\",\n                     cursorMark, nextCursorMark);\n      }\n      for (Map<Object,Object> doc : docs) {\n        int id = Integer.parseInt(doc.get(\"id\").toString());\n        assertFalse(\"walk already seen: \" + id, ids.exists(id));\n        ids.put(id);\n        assertFalse(\"id set bigger then max allowed (\"+maxSize+\"): \" + ids.size(),\n                    maxSize < ids.size());\n        Object facet = doc.get(facetField);\n        String facetString = null == facet ? null : facet.toString(); // null: missing facet value\n        MutableValueInt count = facetCounts.get(facetString);\n        if (null == count) {\n          count = new MutableValueInt();\n          facetCounts.put(facetString, count);\n        }\n        ++count.value;\n      }\n      cursorMark = nextCursorMark;\n\n      Map facetFields = (Map)((Map)rsp.get(\"facet_counts\")).get(\"facet_fields\");\n      List facets = (List)facetFields.get(facetField);\n      if (null != previousFacets) {\n        assertEquals(\"Facets not the same as on previous page:\\nprevious page facets: \"\n            + Arrays.toString(facets.toArray(new Object[facets.size()]))\n            + \"\\ncurrent page facets: \"\n            + Arrays.toString(previousFacets.toArray(new Object[previousFacets.size()])),\n            previousFacets, facets);\n      }\n      previousFacets = facets;\n    }\n\n    assertNotNull(\"previousFacets is null\", previousFacets);\n    assertEquals(\"Mismatch in number of facets: \", facetCounts.size(), previousFacets.size() / 2);\n    int pos;\n    for (pos = 0 ; pos < previousFacets.size() ; pos += 2) {\n      String label = (String)previousFacets.get(pos);\n      int expectedCount = ((Number)previousFacets.get(pos + 1)).intValue();\n      MutableValueInt count = facetCounts.get(label);\n      assertNotNull(\"Expected facet label #\" + (pos / 2) + \" not found: '\" + label + \"'\", count);\n      assertEquals(\"Facet count mismatch for label #\" + (pos / 2) + \" '\" + label + \"'\", expectedCount,\n                   facetCounts.get(label).value);\n      pos += 2;\n    }\n    return ids;\n  }\n\n","sourceOld":"  /**\n   * Given a set of params, executes a cursor query using {@link CursorMarkParams#CURSOR_MARK_START}\n   * and then continuously walks the results using {@link CursorMarkParams#CURSOR_MARK_START} as long\n   * as a non-0 number of docs ar returned.  This method records the the set of all id's\n   * (must be positive ints) encountered and throws an assertion failure if any id is\n   * encountered more than once, or if the set grows above maxSize.\n   *\n   * Also checks that facets are the same with each page, and that they are correct.\n   */\n  public SentinelIntSet assertFullWalkNoDupsWithFacets(int maxSize, SolrParams params)\n      throws Exception {\n\n    final String facetField = params.get(\"facet.field\");\n    assertNotNull(\"facet.field param not specified\", facetField);\n    assertFalse(\"facet.field param contains multiple values\", facetField.contains(\",\"));\n    assertEquals(\"facet.limit param not set to -1\", \"-1\", params.get(\"facet.limit\"));\n    final Map<String,MutableValueInt> facetCounts = new HashMap<>();\n    SentinelIntSet ids = new SentinelIntSet(maxSize, -1);\n    String cursorMark = CURSOR_MARK_START;\n    int docsOnThisPage = Integer.MAX_VALUE;\n    List previousFacets = null;\n    while (0 < docsOnThisPage) {\n      String json = assertJQ(req(params, CURSOR_MARK_PARAM, cursorMark));\n      Map rsp = (Map) ObjectBuilder.fromJSON(json);\n      assertTrue(\"response doesn't contain \" + CURSOR_MARK_NEXT + \": \" + json,\n                 rsp.containsKey(CURSOR_MARK_NEXT));\n      String nextCursorMark = (String)rsp.get(CURSOR_MARK_NEXT);\n      assertNotNull(CURSOR_MARK_NEXT + \" is null\", nextCursorMark);\n      List<Map<Object,Object>> docs = (List)(((Map)rsp.get(\"response\")).get(\"docs\"));\n      docsOnThisPage = docs.size();\n      if (null != params.getInt(CommonParams.ROWS)) {\n        int rows = params.getInt(CommonParams.ROWS);\n        assertTrue(\"Too many docs on this page: \" + rows + \" < \" + docsOnThisPage,\n                   docsOnThisPage <= rows);\n      }\n      if (0 == docsOnThisPage) {\n        assertEquals(\"no more docs, but \"+CURSOR_MARK_NEXT+\" isn't same\",\n                     cursorMark, nextCursorMark);\n      }\n      for (Map<Object,Object> doc : docs) {\n        int id = ((Long)doc.get(\"id\")).intValue();\n        assertFalse(\"walk already seen: \" + id, ids.exists(id));\n        ids.put(id);\n        assertFalse(\"id set bigger then max allowed (\"+maxSize+\"): \" + ids.size(),\n                    maxSize < ids.size());\n        Object facet = doc.get(facetField);\n        String facetString = null == facet ? null : facet.toString(); // null: missing facet value\n        MutableValueInt count = facetCounts.get(facetString);\n        if (null == count) {\n          count = new MutableValueInt();\n          facetCounts.put(facetString, count);\n        }\n        ++count.value;\n      }\n      cursorMark = nextCursorMark;\n\n      Map facetFields = (Map)((Map)rsp.get(\"facet_counts\")).get(\"facet_fields\");\n      List facets = (List)facetFields.get(facetField);\n      if (null != previousFacets) {\n        assertEquals(\"Facets not the same as on previous page:\\nprevious page facets: \"\n            + Arrays.toString(facets.toArray(new Object[facets.size()]))\n            + \"\\ncurrent page facets: \"\n            + Arrays.toString(previousFacets.toArray(new Object[previousFacets.size()])),\n            previousFacets, facets);\n      }\n      previousFacets = facets;\n    }\n\n    assertNotNull(\"previousFacets is null\", previousFacets);\n    assertEquals(\"Mismatch in number of facets: \", facetCounts.size(), previousFacets.size() / 2);\n    int pos;\n    for (pos = 0 ; pos < previousFacets.size() ; pos += 2) {\n      String label = (String)previousFacets.get(pos);\n      int expectedCount = ((Number)previousFacets.get(pos + 1)).intValue();\n      MutableValueInt count = facetCounts.get(label);\n      assertNotNull(\"Expected facet label #\" + (pos / 2) + \" not found: '\" + label + \"'\", count);\n      assertEquals(\"Facet count mismatch for label #\" + (pos / 2) + \" '\" + label + \"'\", expectedCount,\n                   facetCounts.get(label).value);\n      pos += 2;\n    }\n    return ids;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"3714bcf66a68a1600e9dd11442fc1b33b62ef088","date":1556832005,"type":3,"author":"noble","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/CursorPagingTest#assertFullWalkNoDupsWithFacets(int,SolrParams).mjava","pathOld":"solr/core/src/test/org/apache/solr/CursorPagingTest#assertFullWalkNoDupsWithFacets(int,SolrParams).mjava","sourceNew":"  /**\n   * Given a set of params, executes a cursor query using {@link CursorMarkParams#CURSOR_MARK_START}\n   * and then continuously walks the results using {@link CursorMarkParams#CURSOR_MARK_START} as long\n   * as a non-0 number of docs ar returned.  This method records the the set of all id's\n   * (must be positive ints) encountered and throws an assertion failure if any id is\n   * encountered more than once, or if the set grows above maxSize.\n   *\n   * Also checks that facets are the same with each page, and that they are correct.\n   */\n  public SentinelIntSet assertFullWalkNoDupsWithFacets(int maxSize, SolrParams params)\n      throws Exception {\n\n    final String facetField = params.get(\"facet.field\");\n    assertNotNull(\"facet.field param not specified\", facetField);\n    assertFalse(\"facet.field param contains multiple values\", facetField.contains(\",\"));\n    assertEquals(\"facet.limit param not set to -1\", \"-1\", params.get(\"facet.limit\"));\n    final Map<String,MutableValueInt> facetCounts = new HashMap<>();\n    SentinelIntSet ids = new SentinelIntSet(maxSize, -1);\n    String cursorMark = CURSOR_MARK_START;\n    int docsOnThisPage = Integer.MAX_VALUE;\n    List previousFacets = null;\n    while (0 < docsOnThisPage) {\n      String json = assertJQ(req(params, CURSOR_MARK_PARAM, cursorMark));\n      Map rsp = (Map) fromJSONString(json);\n      assertTrue(\"response doesn't contain \" + CURSOR_MARK_NEXT + \": \" + json,\n                 rsp.containsKey(CURSOR_MARK_NEXT));\n      String nextCursorMark = (String)rsp.get(CURSOR_MARK_NEXT);\n      assertNotNull(CURSOR_MARK_NEXT + \" is null\", nextCursorMark);\n      List<Map<Object,Object>> docs = (List)(((Map)rsp.get(\"response\")).get(\"docs\"));\n      docsOnThisPage = docs.size();\n      if (null != params.getInt(CommonParams.ROWS)) {\n        int rows = params.getInt(CommonParams.ROWS);\n        assertTrue(\"Too many docs on this page: \" + rows + \" < \" + docsOnThisPage,\n                   docsOnThisPage <= rows);\n      }\n      if (0 == docsOnThisPage) {\n        assertEquals(\"no more docs, but \"+CURSOR_MARK_NEXT+\" isn't same\",\n                     cursorMark, nextCursorMark);\n      }\n      for (Map<Object,Object> doc : docs) {\n        int id = Integer.parseInt(doc.get(\"id\").toString());\n        assertFalse(\"walk already seen: \" + id, ids.exists(id));\n        ids.put(id);\n        assertFalse(\"id set bigger then max allowed (\"+maxSize+\"): \" + ids.size(),\n                    maxSize < ids.size());\n        Object facet = doc.get(facetField);\n        String facetString = null == facet ? null : facet.toString(); // null: missing facet value\n        MutableValueInt count = facetCounts.get(facetString);\n        if (null == count) {\n          count = new MutableValueInt();\n          facetCounts.put(facetString, count);\n        }\n        ++count.value;\n      }\n      cursorMark = nextCursorMark;\n\n      Map facetFields = (Map)((Map)rsp.get(\"facet_counts\")).get(\"facet_fields\");\n      List facets = (List)facetFields.get(facetField);\n      if (null != previousFacets) {\n        assertEquals(\"Facets not the same as on previous page:\\nprevious page facets: \"\n            + Arrays.toString(facets.toArray(new Object[facets.size()]))\n            + \"\\ncurrent page facets: \"\n            + Arrays.toString(previousFacets.toArray(new Object[previousFacets.size()])),\n            previousFacets, facets);\n      }\n      previousFacets = facets;\n    }\n\n    assertNotNull(\"previousFacets is null\", previousFacets);\n    assertEquals(\"Mismatch in number of facets: \", facetCounts.size(), previousFacets.size() / 2);\n    int pos;\n    for (pos = 0 ; pos < previousFacets.size() ; pos += 2) {\n      String label = (String)previousFacets.get(pos);\n      int expectedCount = ((Number)previousFacets.get(pos + 1)).intValue();\n      MutableValueInt count = facetCounts.get(label);\n      assertNotNull(\"Expected facet label #\" + (pos / 2) + \" not found: '\" + label + \"'\", count);\n      assertEquals(\"Facet count mismatch for label #\" + (pos / 2) + \" '\" + label + \"'\", expectedCount,\n                   facetCounts.get(label).value);\n      pos += 2;\n    }\n    return ids;\n  }\n\n","sourceOld":"  /**\n   * Given a set of params, executes a cursor query using {@link CursorMarkParams#CURSOR_MARK_START}\n   * and then continuously walks the results using {@link CursorMarkParams#CURSOR_MARK_START} as long\n   * as a non-0 number of docs ar returned.  This method records the the set of all id's\n   * (must be positive ints) encountered and throws an assertion failure if any id is\n   * encountered more than once, or if the set grows above maxSize.\n   *\n   * Also checks that facets are the same with each page, and that they are correct.\n   */\n  public SentinelIntSet assertFullWalkNoDupsWithFacets(int maxSize, SolrParams params)\n      throws Exception {\n\n    final String facetField = params.get(\"facet.field\");\n    assertNotNull(\"facet.field param not specified\", facetField);\n    assertFalse(\"facet.field param contains multiple values\", facetField.contains(\",\"));\n    assertEquals(\"facet.limit param not set to -1\", \"-1\", params.get(\"facet.limit\"));\n    final Map<String,MutableValueInt> facetCounts = new HashMap<>();\n    SentinelIntSet ids = new SentinelIntSet(maxSize, -1);\n    String cursorMark = CURSOR_MARK_START;\n    int docsOnThisPage = Integer.MAX_VALUE;\n    List previousFacets = null;\n    while (0 < docsOnThisPage) {\n      String json = assertJQ(req(params, CURSOR_MARK_PARAM, cursorMark));\n      Map rsp = (Map) ObjectBuilder.fromJSON(json);\n      assertTrue(\"response doesn't contain \" + CURSOR_MARK_NEXT + \": \" + json,\n                 rsp.containsKey(CURSOR_MARK_NEXT));\n      String nextCursorMark = (String)rsp.get(CURSOR_MARK_NEXT);\n      assertNotNull(CURSOR_MARK_NEXT + \" is null\", nextCursorMark);\n      List<Map<Object,Object>> docs = (List)(((Map)rsp.get(\"response\")).get(\"docs\"));\n      docsOnThisPage = docs.size();\n      if (null != params.getInt(CommonParams.ROWS)) {\n        int rows = params.getInt(CommonParams.ROWS);\n        assertTrue(\"Too many docs on this page: \" + rows + \" < \" + docsOnThisPage,\n                   docsOnThisPage <= rows);\n      }\n      if (0 == docsOnThisPage) {\n        assertEquals(\"no more docs, but \"+CURSOR_MARK_NEXT+\" isn't same\",\n                     cursorMark, nextCursorMark);\n      }\n      for (Map<Object,Object> doc : docs) {\n        int id = Integer.parseInt(doc.get(\"id\").toString());\n        assertFalse(\"walk already seen: \" + id, ids.exists(id));\n        ids.put(id);\n        assertFalse(\"id set bigger then max allowed (\"+maxSize+\"): \" + ids.size(),\n                    maxSize < ids.size());\n        Object facet = doc.get(facetField);\n        String facetString = null == facet ? null : facet.toString(); // null: missing facet value\n        MutableValueInt count = facetCounts.get(facetString);\n        if (null == count) {\n          count = new MutableValueInt();\n          facetCounts.put(facetString, count);\n        }\n        ++count.value;\n      }\n      cursorMark = nextCursorMark;\n\n      Map facetFields = (Map)((Map)rsp.get(\"facet_counts\")).get(\"facet_fields\");\n      List facets = (List)facetFields.get(facetField);\n      if (null != previousFacets) {\n        assertEquals(\"Facets not the same as on previous page:\\nprevious page facets: \"\n            + Arrays.toString(facets.toArray(new Object[facets.size()]))\n            + \"\\ncurrent page facets: \"\n            + Arrays.toString(previousFacets.toArray(new Object[previousFacets.size()])),\n            previousFacets, facets);\n      }\n      previousFacets = facets;\n    }\n\n    assertNotNull(\"previousFacets is null\", previousFacets);\n    assertEquals(\"Mismatch in number of facets: \", facetCounts.size(), previousFacets.size() / 2);\n    int pos;\n    for (pos = 0 ; pos < previousFacets.size() ; pos += 2) {\n      String label = (String)previousFacets.get(pos);\n      int expectedCount = ((Number)previousFacets.get(pos + 1)).intValue();\n      MutableValueInt count = facetCounts.get(label);\n      assertNotNull(\"Expected facet label #\" + (pos / 2) + \" not found: '\" + label + \"'\", count);\n      assertEquals(\"Facet count mismatch for label #\" + (pos / 2) + \" '\" + label + \"'\", expectedCount,\n                   facetCounts.get(label).value);\n      pos += 2;\n    }\n    return ids;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"aa2585c33d5d66a1c837c312221eb55ddb3c4300","date":1592493170,"type":3,"author":"Erick Erickson","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/CursorPagingTest#assertFullWalkNoDupsWithFacets(int,SolrParams).mjava","pathOld":"solr/core/src/test/org/apache/solr/CursorPagingTest#assertFullWalkNoDupsWithFacets(int,SolrParams).mjava","sourceNew":"  /**\n   * Given a set of params, executes a cursor query using {@link CursorMarkParams#CURSOR_MARK_START}\n   * and then continuously walks the results using {@link CursorMarkParams#CURSOR_MARK_START} as long\n   * as a non-0 number of docs ar returned.  This method records the the set of all id's\n   * (must be positive ints) encountered and throws an assertion failure if any id is\n   * encountered more than once, or if the set grows above maxSize.\n   *\n   * Also checks that facets are the same with each page, and that they are correct.\n   */\n  @SuppressWarnings({\"unchecked\"})\n  public SentinelIntSet assertFullWalkNoDupsWithFacets(int maxSize, SolrParams params)\n      throws Exception {\n\n    final String facetField = params.get(\"facet.field\");\n    assertNotNull(\"facet.field param not specified\", facetField);\n    assertFalse(\"facet.field param contains multiple values\", facetField.contains(\",\"));\n    assertEquals(\"facet.limit param not set to -1\", \"-1\", params.get(\"facet.limit\"));\n    final Map<String,MutableValueInt> facetCounts = new HashMap<>();\n    SentinelIntSet ids = new SentinelIntSet(maxSize, -1);\n    String cursorMark = CURSOR_MARK_START;\n    int docsOnThisPage = Integer.MAX_VALUE;\n    @SuppressWarnings({\"rawtypes\"})\n    List previousFacets = null;\n    while (0 < docsOnThisPage) {\n      String json = assertJQ(req(params, CURSOR_MARK_PARAM, cursorMark));\n      @SuppressWarnings({\"rawtypes\"})\n      Map rsp = (Map) fromJSONString(json);\n      assertTrue(\"response doesn't contain \" + CURSOR_MARK_NEXT + \": \" + json,\n                 rsp.containsKey(CURSOR_MARK_NEXT));\n      String nextCursorMark = (String)rsp.get(CURSOR_MARK_NEXT);\n      assertNotNull(CURSOR_MARK_NEXT + \" is null\", nextCursorMark);\n      List<Map<Object,Object>> docs = (List)(((Map)rsp.get(\"response\")).get(\"docs\"));\n      docsOnThisPage = docs.size();\n      if (null != params.getInt(CommonParams.ROWS)) {\n        int rows = params.getInt(CommonParams.ROWS);\n        assertTrue(\"Too many docs on this page: \" + rows + \" < \" + docsOnThisPage,\n                   docsOnThisPage <= rows);\n      }\n      if (0 == docsOnThisPage) {\n        assertEquals(\"no more docs, but \"+CURSOR_MARK_NEXT+\" isn't same\",\n                     cursorMark, nextCursorMark);\n      }\n      for (Map<Object,Object> doc : docs) {\n        int id = Integer.parseInt(doc.get(\"id\").toString());\n        assertFalse(\"walk already seen: \" + id, ids.exists(id));\n        ids.put(id);\n        assertFalse(\"id set bigger then max allowed (\"+maxSize+\"): \" + ids.size(),\n                    maxSize < ids.size());\n        Object facet = doc.get(facetField);\n        String facetString = null == facet ? null : facet.toString(); // null: missing facet value\n        MutableValueInt count = facetCounts.get(facetString);\n        if (null == count) {\n          count = new MutableValueInt();\n          facetCounts.put(facetString, count);\n        }\n        ++count.value;\n      }\n      cursorMark = nextCursorMark;\n\n      @SuppressWarnings({\"rawtypes\"})\n      Map facetFields = (Map)((Map)rsp.get(\"facet_counts\")).get(\"facet_fields\");\n      @SuppressWarnings({\"rawtypes\"})\n      List facets = (List)facetFields.get(facetField);\n      if (null != previousFacets) {\n        assertEquals(\"Facets not the same as on previous page:\\nprevious page facets: \"\n            + Arrays.toString(facets.toArray(new Object[facets.size()]))\n            + \"\\ncurrent page facets: \"\n            + Arrays.toString(previousFacets.toArray(new Object[previousFacets.size()])),\n            previousFacets, facets);\n      }\n      previousFacets = facets;\n    }\n\n    assertNotNull(\"previousFacets is null\", previousFacets);\n    assertEquals(\"Mismatch in number of facets: \", facetCounts.size(), previousFacets.size() / 2);\n    int pos;\n    for (pos = 0 ; pos < previousFacets.size() ; pos += 2) {\n      String label = (String)previousFacets.get(pos);\n      int expectedCount = ((Number)previousFacets.get(pos + 1)).intValue();\n      MutableValueInt count = facetCounts.get(label);\n      assertNotNull(\"Expected facet label #\" + (pos / 2) + \" not found: '\" + label + \"'\", count);\n      assertEquals(\"Facet count mismatch for label #\" + (pos / 2) + \" '\" + label + \"'\", expectedCount,\n                   facetCounts.get(label).value);\n      pos += 2;\n    }\n    return ids;\n  }\n\n","sourceOld":"  /**\n   * Given a set of params, executes a cursor query using {@link CursorMarkParams#CURSOR_MARK_START}\n   * and then continuously walks the results using {@link CursorMarkParams#CURSOR_MARK_START} as long\n   * as a non-0 number of docs ar returned.  This method records the the set of all id's\n   * (must be positive ints) encountered and throws an assertion failure if any id is\n   * encountered more than once, or if the set grows above maxSize.\n   *\n   * Also checks that facets are the same with each page, and that they are correct.\n   */\n  public SentinelIntSet assertFullWalkNoDupsWithFacets(int maxSize, SolrParams params)\n      throws Exception {\n\n    final String facetField = params.get(\"facet.field\");\n    assertNotNull(\"facet.field param not specified\", facetField);\n    assertFalse(\"facet.field param contains multiple values\", facetField.contains(\",\"));\n    assertEquals(\"facet.limit param not set to -1\", \"-1\", params.get(\"facet.limit\"));\n    final Map<String,MutableValueInt> facetCounts = new HashMap<>();\n    SentinelIntSet ids = new SentinelIntSet(maxSize, -1);\n    String cursorMark = CURSOR_MARK_START;\n    int docsOnThisPage = Integer.MAX_VALUE;\n    List previousFacets = null;\n    while (0 < docsOnThisPage) {\n      String json = assertJQ(req(params, CURSOR_MARK_PARAM, cursorMark));\n      Map rsp = (Map) fromJSONString(json);\n      assertTrue(\"response doesn't contain \" + CURSOR_MARK_NEXT + \": \" + json,\n                 rsp.containsKey(CURSOR_MARK_NEXT));\n      String nextCursorMark = (String)rsp.get(CURSOR_MARK_NEXT);\n      assertNotNull(CURSOR_MARK_NEXT + \" is null\", nextCursorMark);\n      List<Map<Object,Object>> docs = (List)(((Map)rsp.get(\"response\")).get(\"docs\"));\n      docsOnThisPage = docs.size();\n      if (null != params.getInt(CommonParams.ROWS)) {\n        int rows = params.getInt(CommonParams.ROWS);\n        assertTrue(\"Too many docs on this page: \" + rows + \" < \" + docsOnThisPage,\n                   docsOnThisPage <= rows);\n      }\n      if (0 == docsOnThisPage) {\n        assertEquals(\"no more docs, but \"+CURSOR_MARK_NEXT+\" isn't same\",\n                     cursorMark, nextCursorMark);\n      }\n      for (Map<Object,Object> doc : docs) {\n        int id = Integer.parseInt(doc.get(\"id\").toString());\n        assertFalse(\"walk already seen: \" + id, ids.exists(id));\n        ids.put(id);\n        assertFalse(\"id set bigger then max allowed (\"+maxSize+\"): \" + ids.size(),\n                    maxSize < ids.size());\n        Object facet = doc.get(facetField);\n        String facetString = null == facet ? null : facet.toString(); // null: missing facet value\n        MutableValueInt count = facetCounts.get(facetString);\n        if (null == count) {\n          count = new MutableValueInt();\n          facetCounts.put(facetString, count);\n        }\n        ++count.value;\n      }\n      cursorMark = nextCursorMark;\n\n      Map facetFields = (Map)((Map)rsp.get(\"facet_counts\")).get(\"facet_fields\");\n      List facets = (List)facetFields.get(facetField);\n      if (null != previousFacets) {\n        assertEquals(\"Facets not the same as on previous page:\\nprevious page facets: \"\n            + Arrays.toString(facets.toArray(new Object[facets.size()]))\n            + \"\\ncurrent page facets: \"\n            + Arrays.toString(previousFacets.toArray(new Object[previousFacets.size()])),\n            previousFacets, facets);\n      }\n      previousFacets = facets;\n    }\n\n    assertNotNull(\"previousFacets is null\", previousFacets);\n    assertEquals(\"Mismatch in number of facets: \", facetCounts.size(), previousFacets.size() / 2);\n    int pos;\n    for (pos = 0 ; pos < previousFacets.size() ; pos += 2) {\n      String label = (String)previousFacets.get(pos);\n      int expectedCount = ((Number)previousFacets.get(pos + 1)).intValue();\n      MutableValueInt count = facetCounts.get(label);\n      assertNotNull(\"Expected facet label #\" + (pos / 2) + \" not found: '\" + label + \"'\", count);\n      assertEquals(\"Facet count mismatch for label #\" + (pos / 2) + \" '\" + label + \"'\", expectedCount,\n                   facetCounts.get(label).value);\n      pos += 2;\n    }\n    return ids;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"634f330c54fd3f9f491d52036dc3f40b4f4d8934":["851e2bd9deeca46bef2e8c5328c9448e4198a688"],"851e2bd9deeca46bef2e8c5328c9448e4198a688":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"aa2585c33d5d66a1c837c312221eb55ddb3c4300":["3714bcf66a68a1600e9dd11442fc1b33b62ef088"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"a71f63026529f3c1f03cfdd664910873ab2369ae":["1e210ae1e604402eb4eeff2a52e56d189cd4f2f1"],"3714bcf66a68a1600e9dd11442fc1b33b62ef088":["28288370235ed02234a64753cdbf0c6ec096304a"],"1e210ae1e604402eb4eeff2a52e56d189cd4f2f1":["634f330c54fd3f9f491d52036dc3f40b4f4d8934"],"28288370235ed02234a64753cdbf0c6ec096304a":["1e210ae1e604402eb4eeff2a52e56d189cd4f2f1","a71f63026529f3c1f03cfdd664910873ab2369ae"],"2a3ed3f77cdd034e789d00d1ca8bb7054c9fb8e9":["1e210ae1e604402eb4eeff2a52e56d189cd4f2f1","a71f63026529f3c1f03cfdd664910873ab2369ae"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["aa2585c33d5d66a1c837c312221eb55ddb3c4300"]},"commit2Childs":{"634f330c54fd3f9f491d52036dc3f40b4f4d8934":["1e210ae1e604402eb4eeff2a52e56d189cd4f2f1"],"851e2bd9deeca46bef2e8c5328c9448e4198a688":["634f330c54fd3f9f491d52036dc3f40b4f4d8934"],"aa2585c33d5d66a1c837c312221eb55ddb3c4300":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["851e2bd9deeca46bef2e8c5328c9448e4198a688"],"a71f63026529f3c1f03cfdd664910873ab2369ae":["28288370235ed02234a64753cdbf0c6ec096304a","2a3ed3f77cdd034e789d00d1ca8bb7054c9fb8e9"],"3714bcf66a68a1600e9dd11442fc1b33b62ef088":["aa2585c33d5d66a1c837c312221eb55ddb3c4300"],"1e210ae1e604402eb4eeff2a52e56d189cd4f2f1":["a71f63026529f3c1f03cfdd664910873ab2369ae","28288370235ed02234a64753cdbf0c6ec096304a","2a3ed3f77cdd034e789d00d1ca8bb7054c9fb8e9"],"28288370235ed02234a64753cdbf0c6ec096304a":["3714bcf66a68a1600e9dd11442fc1b33b62ef088"],"2a3ed3f77cdd034e789d00d1ca8bb7054c9fb8e9":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["2a3ed3f77cdd034e789d00d1ca8bb7054c9fb8e9","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}