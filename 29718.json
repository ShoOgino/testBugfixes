{"path":"solr/core/src/test/org/apache/solr/core/QueryResultKeyTest#testRandomQueryKeyEquality().mjava","commits":[{"id":"e8a8ec7bd407ce5ad65fe8d53fd69d9cd597f58f","date":1389311746,"type":0,"author":"Chris M. Hostetter","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/core/QueryResultKeyTest#testRandomQueryKeyEquality().mjava","pathOld":"/dev/null","sourceNew":"  public void testRandomQueryKeyEquality() {\n\n\n    final int minIters = atLeast(100 * 1000);\n    final Query base = new FlatHashTermQuery(\"base\");\n    \n    // ensure we cover both code paths at least once\n    boolean didEquals = false;\n    boolean didNotEquals = false;\n    int iter = 1;\n    while (iter <= minIters || (! didEquals ) || (! didNotEquals ) ) {\n      iter++;\n      int[] numsA = smallArrayOfRandomNumbers();\n      int[] numsB = smallArrayOfRandomNumbers();\n      QueryResultKey aa = new QueryResultKey(base, buildFiltersFromNumbers(numsA), null, 0);\n      QueryResultKey bb = new QueryResultKey(base, buildFiltersFromNumbers(numsB), null, 0);\n      // now that we have our keys, sort the numbers so we know what to expect\n      Arrays.sort(numsA);\n      Arrays.sort(numsB);\n      if (Arrays.equals(numsA, numsB)) {\n        didEquals = true;\n        assertKeyEquals(aa, bb);\n      } else {\n        didNotEquals = true;\n        assertKeyNotEquals(aa, bb);\n      }\n    }\n    assert minIters <= iter;\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"e8a8ec7bd407ce5ad65fe8d53fd69d9cd597f58f":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["e8a8ec7bd407ce5ad65fe8d53fd69d9cd597f58f"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["e8a8ec7bd407ce5ad65fe8d53fd69d9cd597f58f"],"e8a8ec7bd407ce5ad65fe8d53fd69d9cd597f58f":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}