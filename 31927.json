{"path":"solr/core/src/java/org/apache/solr/cloud/ZkController#getLeaderUrl(String,String).mjava","commits":[{"id":"c516f1fb8a8bbd4b308968d3f638304888ce86d1","date":1329014706,"type":0,"author":"Mark Robert Miller","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/cloud/ZkController#getLeaderUrl(String,String).mjava","pathOld":"/dev/null","sourceNew":"  /**\n   * Get leader URL directly from zk nodes.\n   * \n   * @param collection\n   * @param slice\n   * @return\n   * @throws KeeperException\n   * @throws InterruptedException\n   */\n  private String getLeaderUrl(final String collection, final String slice)\n      throws KeeperException, InterruptedException {\n    int iterCount = 60;\n    while (iterCount-- > 0)\n      try {\n        byte[] data = zkClient.getData(\n            ZkStateReader.getShardLeadersPath(collection, slice), null, null,\n            true);\n        ZkCoreNodeProps leaderProps = new ZkCoreNodeProps(\n            ZkNodeProps.load(data));\n        return leaderProps.getCoreUrl();\n      } catch (NoNodeException e) {\n        Thread.sleep(500);\n      }\n    throw new RuntimeException(\"Could not get leader props\");\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":["a6378064655e76cd7b908b1cab4ce425b384b508"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"3a80994db3380cd78c6f65b84515e2e931b6b3da","date":1329530403,"type":5,"author":"Mark Robert Miller","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/cloud/ZkController#getLeaderProps(String,String).mjava","pathOld":"solr/core/src/java/org/apache/solr/cloud/ZkController#getLeaderUrl(String,String).mjava","sourceNew":"  /**\n   * Get leader props directly from zk nodes.\n   * \n   * @param collection\n   * @param slice\n   * @return\n   * @throws KeeperException\n   * @throws InterruptedException\n   */\n  private ZkCoreNodeProps getLeaderProps(final String collection, final String slice)\n      throws KeeperException, InterruptedException {\n    int iterCount = 60;\n    while (iterCount-- > 0)\n      try {\n        byte[] data = zkClient.getData(\n            ZkStateReader.getShardLeadersPath(collection, slice), null, null,\n            true);\n        ZkCoreNodeProps leaderProps = new ZkCoreNodeProps(\n            ZkNodeProps.load(data));\n        return leaderProps;\n      } catch (NoNodeException e) {\n        Thread.sleep(500);\n      }\n    throw new RuntimeException(\"Could not get leader props\");\n  }\n\n","sourceOld":"  /**\n   * Get leader URL directly from zk nodes.\n   * \n   * @param collection\n   * @param slice\n   * @return\n   * @throws KeeperException\n   * @throws InterruptedException\n   */\n  private String getLeaderUrl(final String collection, final String slice)\n      throws KeeperException, InterruptedException {\n    int iterCount = 60;\n    while (iterCount-- > 0)\n      try {\n        byte[] data = zkClient.getData(\n            ZkStateReader.getShardLeadersPath(collection, slice), null, null,\n            true);\n        ZkCoreNodeProps leaderProps = new ZkCoreNodeProps(\n            ZkNodeProps.load(data));\n        return leaderProps.getCoreUrl();\n      } catch (NoNodeException e) {\n        Thread.sleep(500);\n      }\n    throw new RuntimeException(\"Could not get leader props\");\n  }\n\n","bugFix":null,"bugIntro":["a6378064655e76cd7b908b1cab4ce425b384b508"],"isBuggy":true,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"c516f1fb8a8bbd4b308968d3f638304888ce86d1":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"3a80994db3380cd78c6f65b84515e2e931b6b3da":["c516f1fb8a8bbd4b308968d3f638304888ce86d1"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["3a80994db3380cd78c6f65b84515e2e931b6b3da"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["c516f1fb8a8bbd4b308968d3f638304888ce86d1"],"c516f1fb8a8bbd4b308968d3f638304888ce86d1":["3a80994db3380cd78c6f65b84515e2e931b6b3da"],"3a80994db3380cd78c6f65b84515e2e931b6b3da":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}