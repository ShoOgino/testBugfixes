{"path":"solr/test-framework/src/java/org/apache/solr/cloud/CloudInspectUtil#showDiff(SolrDocumentList,SolrDocumentList,String,String).mjava","commits":[{"id":"4339eef0c1b12030c8590187e652cd1cd0a1f3cb","date":1397833225,"type":1,"author":"Mark Robert Miller","isMerge":false,"pathNew":"solr/test-framework/src/java/org/apache/solr/cloud/CloudInspectUtil#showDiff(SolrDocumentList,SolrDocumentList,String,String).mjava","pathOld":"solr/test-framework/src/java/org/apache/solr/cloud/AbstractFullDistribZkTestBase#showDiff(SolrDocumentList,SolrDocumentList,String,String).mjava","sourceNew":"  /**\n   * Shows the difference between two lists of documents.\n   * \n   * @param a the first list\n   * @param b the second list\n   * @param aName label for the first list\n   * @param bName label for the second list\n   * @return the documents only in list a\n   */\n  public static Set<Map> showDiff(SolrDocumentList a, SolrDocumentList b,\n      String aName, String bName) {\n    System.err.println(\"######\" + aName + \": \" + toStr(a, 10));\n    System.err.println(\"######\" + bName + \": \" + toStr(b, 10));\n    System.err.println(\"###### sizes=\" + a.size() + \",\" + b.size());\n    \n    Set<Map> setA = new HashSet<>();\n    for (SolrDocument sdoc : a) {\n      setA.add(new HashMap(sdoc));\n    }\n    \n    Set<Map> setB = new HashSet<>();\n    for (SolrDocument sdoc : b) {\n      setB.add(new HashMap(sdoc));\n    }\n    \n    Set<Map> onlyInA = new HashSet<>(setA);\n    onlyInA.removeAll(setB);\n    Set<Map> onlyInB = new HashSet<>(setB);\n    onlyInB.removeAll(setA);\n    \n    if (onlyInA.size() > 0) {\n      System.err.println(\"###### Only in \" + aName + \": \" + onlyInA);\n    }\n    if (onlyInB.size() > 0) {\n      System.err.println(\"###### Only in \" + bName + \": \" + onlyInB);\n    }\n    \n    onlyInA.addAll(onlyInB);\n    return onlyInA;\n  }\n\n","sourceOld":"  Set<Map> showDiff(SolrDocumentList a, SolrDocumentList b, String aName, String bName) {\n    System.err.println(\"######\"+aName+ \": \" + toStr(a,10));\n    System.err.println(\"######\"+bName+ \": \" + toStr(b,10));\n    System.err.println(\"###### sizes=\" + a.size() + \",\" + b.size());\n    \n    Set<Map> setA = new HashSet<>();\n    for (SolrDocument sdoc : a) {\n      setA.add(new HashMap(sdoc));\n    }\n\n    Set<Map> setB = new HashSet<>();\n    for (SolrDocument sdoc : b) {\n      setB.add(new HashMap(sdoc));\n    }\n\n    Set<Map> onlyInA = new HashSet<>(setA);\n    onlyInA.removeAll(setB);\n    Set<Map> onlyInB = new HashSet<>(setB);\n    onlyInB.removeAll(setA);\n\n    if (onlyInA.size() > 0) {\n      System.err.println(\"###### Only in \" + aName + \": \" + onlyInA);\n    }\n    if (onlyInB.size() > 0) {\n      System.err.println(\"###### Only in \" + bName + \": \" + onlyInB);\n    }\n\n    onlyInA.addAll(onlyInB);\n    return onlyInA;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"6809a6d7924df2c864d6a5863944aff9dfeb372c","date":1591826750,"type":3,"author":"Erick Erickson","isMerge":false,"pathNew":"solr/test-framework/src/java/org/apache/solr/cloud/CloudInspectUtil#showDiff(SolrDocumentList,SolrDocumentList,String,String).mjava","pathOld":"solr/test-framework/src/java/org/apache/solr/cloud/CloudInspectUtil#showDiff(SolrDocumentList,SolrDocumentList,String,String).mjava","sourceNew":"  /**\n   * Shows the difference between two lists of documents.\n   * \n   * @param a the first list\n   * @param b the second list\n   * @param aName label for the first list\n   * @param bName label for the second list\n   * @return the documents only in list a\n   */\n  @SuppressWarnings({\"unchecked\", \"rawtypes\"})\n  public static Set<Map> showDiff(SolrDocumentList a, SolrDocumentList b,\n      String aName, String bName) {\n    System.err.println(\"######\" + aName + \": \" + toStr(a, 10));\n    System.err.println(\"######\" + bName + \": \" + toStr(b, 10));\n    System.err.println(\"###### sizes=\" + a.size() + \",\" + b.size());\n    \n    Set<Map> setA = new HashSet<>();\n    for (SolrDocument sdoc : a) {\n      setA.add(new HashMap(sdoc));\n    }\n    \n    Set<Map> setB = new HashSet<>();\n    for (SolrDocument sdoc : b) {\n      setB.add(new HashMap(sdoc));\n    }\n    \n    Set<Map> onlyInA = new HashSet<>(setA);\n    onlyInA.removeAll(setB);\n    Set<Map> onlyInB = new HashSet<>(setB);\n    onlyInB.removeAll(setA);\n    \n    if (onlyInA.size() > 0) {\n      System.err.println(\"###### Only in \" + aName + \": \" + onlyInA);\n    }\n    if (onlyInB.size() > 0) {\n      System.err.println(\"###### Only in \" + bName + \": \" + onlyInB);\n    }\n    \n    onlyInA.addAll(onlyInB);\n    return onlyInA;\n  }\n\n","sourceOld":"  /**\n   * Shows the difference between two lists of documents.\n   * \n   * @param a the first list\n   * @param b the second list\n   * @param aName label for the first list\n   * @param bName label for the second list\n   * @return the documents only in list a\n   */\n  public static Set<Map> showDiff(SolrDocumentList a, SolrDocumentList b,\n      String aName, String bName) {\n    System.err.println(\"######\" + aName + \": \" + toStr(a, 10));\n    System.err.println(\"######\" + bName + \": \" + toStr(b, 10));\n    System.err.println(\"###### sizes=\" + a.size() + \",\" + b.size());\n    \n    Set<Map> setA = new HashSet<>();\n    for (SolrDocument sdoc : a) {\n      setA.add(new HashMap(sdoc));\n    }\n    \n    Set<Map> setB = new HashSet<>();\n    for (SolrDocument sdoc : b) {\n      setB.add(new HashMap(sdoc));\n    }\n    \n    Set<Map> onlyInA = new HashSet<>(setA);\n    onlyInA.removeAll(setB);\n    Set<Map> onlyInB = new HashSet<>(setB);\n    onlyInB.removeAll(setA);\n    \n    if (onlyInA.size() > 0) {\n      System.err.println(\"###### Only in \" + aName + \": \" + onlyInA);\n    }\n    if (onlyInB.size() > 0) {\n      System.err.println(\"###### Only in \" + bName + \": \" + onlyInB);\n    }\n    \n    onlyInA.addAll(onlyInB);\n    return onlyInA;\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"6809a6d7924df2c864d6a5863944aff9dfeb372c":["4339eef0c1b12030c8590187e652cd1cd0a1f3cb"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"4339eef0c1b12030c8590187e652cd1cd0a1f3cb":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["6809a6d7924df2c864d6a5863944aff9dfeb372c"]},"commit2Childs":{"6809a6d7924df2c864d6a5863944aff9dfeb372c":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["4339eef0c1b12030c8590187e652cd1cd0a1f3cb"],"4339eef0c1b12030c8590187e652cd1cd0a1f3cb":["6809a6d7924df2c864d6a5863944aff9dfeb372c"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}