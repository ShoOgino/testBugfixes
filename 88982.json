{"path":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","commits":[{"id":"6e756785b6f25f3b8f7ee57c7e210c6b67fbfbbf","date":1363562282,"type":0,"author":"Mark Robert Miller","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","pathOld":"/dev/null","sourceNew":"  private void deletePartiallyCreatedCollection() throws Exception {\n    final String baseUrl = getBaseUrl((HttpSolrServer) clients.get(0));\n    String collectionName = \"halfdeletedcollection\";\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    String dataDir = SolrTestCaseJ4.dataDir.getAbsolutePath() + File.separator\n        + System.currentTimeMillis() + \"halfcollection\" + \"_hdn\";\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n    createNewSolrServer(\"\", baseUrl).request(createCmd);\n    \n    printLayout();\n    \n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.DELETE.toString());\n    params.set(\"name\", collectionName);\n    QueryRequest request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n\n    NamedList<Object> resp = createNewSolrServer(\"\", baseUrl).request(request);\n    \n    \n    Thread.sleep(5000);\n    \n    printLayout();\n    \n    \n    // now creating that collection should work\n    // try a bad action\n    params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.CREATE.toString());\n    params.set(\"name\", collectionName);\n    params.set(\"numShards\", 2);\n    request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n    resp = createNewSolrServer(\"\", baseUrl).request(request);\n\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":["587bce86f07b072818f585d0fd32bb3fc7a1c647"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"3e52e25546521bf7de038e2f3a672170f4fa8b2f","date":1363563067,"type":3,"author":"Mark Robert Miller","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","sourceNew":"  private void deletePartiallyCreatedCollection() throws Exception {\n    final String baseUrl = getBaseUrl((HttpSolrServer) clients.get(0));\n    String collectionName = \"halfdeletedcollection\";\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    String dataDir = SolrTestCaseJ4.dataDir.getAbsolutePath() + File.separator\n        + System.currentTimeMillis() + \"halfcollection\" + \"_hdn\";\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n    createNewSolrServer(\"\", baseUrl).request(createCmd);\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.DELETE.toString());\n    params.set(\"name\", collectionName);\n    QueryRequest request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n\n    NamedList<Object> resp = createNewSolrServer(\"\", baseUrl).request(request);\n    \n    checkForMissingCollection(collectionName);\n    \n    // now creating that collection should work\n    params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.CREATE.toString());\n    params.set(\"name\", collectionName);\n    params.set(\"numShards\", 2);\n    request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n    resp = createNewSolrServer(\"\", baseUrl).request(request);\n\n  }\n\n","sourceOld":"  private void deletePartiallyCreatedCollection() throws Exception {\n    final String baseUrl = getBaseUrl((HttpSolrServer) clients.get(0));\n    String collectionName = \"halfdeletedcollection\";\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    String dataDir = SolrTestCaseJ4.dataDir.getAbsolutePath() + File.separator\n        + System.currentTimeMillis() + \"halfcollection\" + \"_hdn\";\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n    createNewSolrServer(\"\", baseUrl).request(createCmd);\n    \n    printLayout();\n    \n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.DELETE.toString());\n    params.set(\"name\", collectionName);\n    QueryRequest request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n\n    NamedList<Object> resp = createNewSolrServer(\"\", baseUrl).request(request);\n    \n    \n    Thread.sleep(5000);\n    \n    printLayout();\n    \n    \n    // now creating that collection should work\n    // try a bad action\n    params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.CREATE.toString());\n    params.set(\"name\", collectionName);\n    params.set(\"numShards\", 2);\n    request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n    resp = createNewSolrServer(\"\", baseUrl).request(request);\n\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"587bce86f07b072818f585d0fd32bb3fc7a1c647","date":1366063632,"type":3,"author":"Mark Robert Miller","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","sourceNew":"  private void deletePartiallyCreatedCollection() throws Exception {\n    final String baseUrl = getBaseUrl((HttpSolrServer) clients.get(0));\n    String collectionName = \"halfdeletedcollection\";\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    String dataDir = SolrTestCaseJ4.dataDir.getAbsolutePath() + File.separator\n        + System.currentTimeMillis() + \"halfcollection\" + \"_hdn\";\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n    createNewSolrServer(\"\", baseUrl).request(createCmd);\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.DELETE.toString());\n    params.set(\"name\", collectionName);\n    QueryRequest request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n\n    NamedList<Object> resp = createNewSolrServer(\"\", baseUrl).request(request);\n    \n    checkForMissingCollection(collectionName);\n    \n    // now creating that collection should work\n    params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.CREATE.toString());\n    params.set(\"name\", collectionName);\n    params.set(\"numShards\", 2);\n    request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n    resp = createNewSolrServer(\"\", baseUrl).request(request);\n  }\n\n","sourceOld":"  private void deletePartiallyCreatedCollection() throws Exception {\n    final String baseUrl = getBaseUrl((HttpSolrServer) clients.get(0));\n    String collectionName = \"halfdeletedcollection\";\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    String dataDir = SolrTestCaseJ4.dataDir.getAbsolutePath() + File.separator\n        + System.currentTimeMillis() + \"halfcollection\" + \"_hdn\";\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n    createNewSolrServer(\"\", baseUrl).request(createCmd);\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.DELETE.toString());\n    params.set(\"name\", collectionName);\n    QueryRequest request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n\n    NamedList<Object> resp = createNewSolrServer(\"\", baseUrl).request(request);\n    \n    checkForMissingCollection(collectionName);\n    \n    // now creating that collection should work\n    params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.CREATE.toString());\n    params.set(\"name\", collectionName);\n    params.set(\"numShards\", 2);\n    request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n    resp = createNewSolrServer(\"\", baseUrl).request(request);\n\n  }\n\n","bugFix":["6e756785b6f25f3b8f7ee57c7e210c6b67fbfbbf"],"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"5a82d855abc18f7ee3e1ec359d8f256c8c86977a","date":1381347960,"type":3,"author":"Mark Robert Miller","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","sourceNew":"  private void deletePartiallyCreatedCollection() throws Exception {\n    final String baseUrl = getBaseUrl((HttpSolrServer) clients.get(0));\n    String collectionName = \"halfdeletedcollection\";\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    String dataDir = SolrTestCaseJ4.dataDir.getAbsolutePath() + File.separator\n        + System.currentTimeMillis() + \"halfcollection\" + \"_hdn\";\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    createNewSolrServer(\"\", baseUrl).request(createCmd);\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.DELETE.toString());\n    params.set(\"name\", collectionName);\n    QueryRequest request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n\n    NamedList<Object> resp = createNewSolrServer(\"\", baseUrl).request(request);\n    \n    checkForMissingCollection(collectionName);\n    \n    // now creating that collection should work\n    params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.CREATE.toString());\n    params.set(\"name\", collectionName);\n    params.set(\"numShards\", 2);\n    request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n    if (secondConfigSet) {\n      params.set(\"collection.configName\", \"conf1\");\n    }\n    resp = createNewSolrServer(\"\", baseUrl).request(request);\n  }\n\n","sourceOld":"  private void deletePartiallyCreatedCollection() throws Exception {\n    final String baseUrl = getBaseUrl((HttpSolrServer) clients.get(0));\n    String collectionName = \"halfdeletedcollection\";\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    String dataDir = SolrTestCaseJ4.dataDir.getAbsolutePath() + File.separator\n        + System.currentTimeMillis() + \"halfcollection\" + \"_hdn\";\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n    createNewSolrServer(\"\", baseUrl).request(createCmd);\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.DELETE.toString());\n    params.set(\"name\", collectionName);\n    QueryRequest request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n\n    NamedList<Object> resp = createNewSolrServer(\"\", baseUrl).request(request);\n    \n    checkForMissingCollection(collectionName);\n    \n    // now creating that collection should work\n    params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.CREATE.toString());\n    params.set(\"name\", collectionName);\n    params.set(\"numShards\", 2);\n    request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n    resp = createNewSolrServer(\"\", baseUrl).request(request);\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"d3a46663789411cdf016145a96a40cf861798ae3","date":1395119088,"type":3,"author":"Mark Robert Miller","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","sourceNew":"  private void deletePartiallyCreatedCollection() throws Exception {\n    final String baseUrl = getBaseUrl((HttpSolrServer) clients.get(0));\n    String collectionName = \"halfdeletedcollection\";\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    String dataDir = SolrTestCaseJ4.dataDir.getAbsolutePath() + File.separator\n        + System.currentTimeMillis() + \"halfcollection\" + \"_hdn\";\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    createNewSolrServer(\"\", baseUrl).request(createCmd);\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.DELETE.toString());\n    params.set(\"name\", collectionName);\n    QueryRequest request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n\n    NamedList<Object> resp = createNewSolrServer(\"\", baseUrl).request(request);\n    \n    checkForMissingCollection(collectionName);\n    \n    // now creating that collection should work\n    params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.CREATE.toString());\n    params.set(\"name\", collectionName);\n    params.set(NUM_SLICES, 2);\n    request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n    if (secondConfigSet) {\n      params.set(COLLECTION_CONFIG_NAME, \"conf1\");\n    }\n    resp = createNewSolrServer(\"\", baseUrl).request(request);\n  }\n\n","sourceOld":"  private void deletePartiallyCreatedCollection() throws Exception {\n    final String baseUrl = getBaseUrl((HttpSolrServer) clients.get(0));\n    String collectionName = \"halfdeletedcollection\";\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    String dataDir = SolrTestCaseJ4.dataDir.getAbsolutePath() + File.separator\n        + System.currentTimeMillis() + \"halfcollection\" + \"_hdn\";\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    createNewSolrServer(\"\", baseUrl).request(createCmd);\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.DELETE.toString());\n    params.set(\"name\", collectionName);\n    QueryRequest request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n\n    NamedList<Object> resp = createNewSolrServer(\"\", baseUrl).request(request);\n    \n    checkForMissingCollection(collectionName);\n    \n    // now creating that collection should work\n    params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.CREATE.toString());\n    params.set(\"name\", collectionName);\n    params.set(\"numShards\", 2);\n    request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n    if (secondConfigSet) {\n      params.set(\"collection.configName\", \"conf1\");\n    }\n    resp = createNewSolrServer(\"\", baseUrl).request(request);\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"963b0a9b072593721af39e1d9b815fba17e88e7f","date":1395120846,"type":3,"author":"Mark Robert Miller","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","sourceNew":"  private void deletePartiallyCreatedCollection() throws Exception {\n    final String baseUrl = getBaseUrl((HttpSolrServer) clients.get(0));\n    String collectionName = \"halfdeletedcollection\";\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    String dataDir = SolrTestCaseJ4.dataDir.getAbsolutePath() + File.separator\n        + System.currentTimeMillis() + \"halfcollection\" + \"_hdn\";\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    createNewSolrServer(\"\", baseUrl).request(createCmd);\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.DELETE.toString());\n    params.set(\"name\", collectionName);\n    QueryRequest request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n\n    NamedList<Object> resp = createNewSolrServer(\"\", baseUrl).request(request);\n    \n    checkForMissingCollection(collectionName);\n    \n    // now creating that collection should work\n    params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.CREATE.toString());\n    params.set(\"name\", collectionName);\n    params.set(\"numShards\", 2);\n    request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n    if (secondConfigSet) {\n      params.set(\"collection.configName\", \"conf1\");\n    }\n    resp = createNewSolrServer(\"\", baseUrl).request(request);\n  }\n\n","sourceOld":"  private void deletePartiallyCreatedCollection() throws Exception {\n    final String baseUrl = getBaseUrl((HttpSolrServer) clients.get(0));\n    String collectionName = \"halfdeletedcollection\";\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    String dataDir = SolrTestCaseJ4.dataDir.getAbsolutePath() + File.separator\n        + System.currentTimeMillis() + \"halfcollection\" + \"_hdn\";\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    createNewSolrServer(\"\", baseUrl).request(createCmd);\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.DELETE.toString());\n    params.set(\"name\", collectionName);\n    QueryRequest request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n\n    NamedList<Object> resp = createNewSolrServer(\"\", baseUrl).request(request);\n    \n    checkForMissingCollection(collectionName);\n    \n    // now creating that collection should work\n    params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.CREATE.toString());\n    params.set(\"name\", collectionName);\n    params.set(NUM_SLICES, 2);\n    request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n    if (secondConfigSet) {\n      params.set(COLLECTION_CONFIG_NAME, \"conf1\");\n    }\n    resp = createNewSolrServer(\"\", baseUrl).request(request);\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"bb1f22cfa77230b5f05b7784feae5367f6bbb488","date":1395968145,"type":3,"author":"Mark Robert Miller","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","sourceNew":"  private void deletePartiallyCreatedCollection() throws Exception {\n    final String baseUrl = getBaseUrl((HttpSolrServer) clients.get(0));\n    String collectionName = \"halfdeletedcollection\";\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    String dataDir = createTempDir().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    createNewSolrServer(\"\", baseUrl).request(createCmd);\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.DELETE.toString());\n    params.set(\"name\", collectionName);\n    QueryRequest request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n\n    NamedList<Object> resp = createNewSolrServer(\"\", baseUrl).request(request);\n    \n    checkForMissingCollection(collectionName);\n    \n    // now creating that collection should work\n    params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.CREATE.toString());\n    params.set(\"name\", collectionName);\n    params.set(\"numShards\", 2);\n    request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n    if (secondConfigSet) {\n      params.set(\"collection.configName\", \"conf1\");\n    }\n    resp = createNewSolrServer(\"\", baseUrl).request(request);\n  }\n\n","sourceOld":"  private void deletePartiallyCreatedCollection() throws Exception {\n    final String baseUrl = getBaseUrl((HttpSolrServer) clients.get(0));\n    String collectionName = \"halfdeletedcollection\";\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    String dataDir = SolrTestCaseJ4.dataDir.getAbsolutePath() + File.separator\n        + System.currentTimeMillis() + \"halfcollection\" + \"_hdn\";\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    createNewSolrServer(\"\", baseUrl).request(createCmd);\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.DELETE.toString());\n    params.set(\"name\", collectionName);\n    QueryRequest request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n\n    NamedList<Object> resp = createNewSolrServer(\"\", baseUrl).request(request);\n    \n    checkForMissingCollection(collectionName);\n    \n    // now creating that collection should work\n    params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.CREATE.toString());\n    params.set(\"name\", collectionName);\n    params.set(\"numShards\", 2);\n    request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n    if (secondConfigSet) {\n      params.set(\"collection.configName\", \"conf1\");\n    }\n    resp = createNewSolrServer(\"\", baseUrl).request(request);\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"2a0f5bb79c600763ffe7b8141df59a3169d31e48","date":1396689440,"type":3,"author":"Dawid Weiss","isMerge":true,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","sourceNew":"  private void deletePartiallyCreatedCollection() throws Exception {\n    final String baseUrl = getBaseUrl((HttpSolrServer) clients.get(0));\n    String collectionName = \"halfdeletedcollection\";\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    String dataDir = createTempDir().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    createNewSolrServer(\"\", baseUrl).request(createCmd);\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.DELETE.toString());\n    params.set(\"name\", collectionName);\n    QueryRequest request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n\n    NamedList<Object> resp = createNewSolrServer(\"\", baseUrl).request(request);\n    \n    checkForMissingCollection(collectionName);\n    \n    // now creating that collection should work\n    params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.CREATE.toString());\n    params.set(\"name\", collectionName);\n    params.set(\"numShards\", 2);\n    request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n    if (secondConfigSet) {\n      params.set(\"collection.configName\", \"conf1\");\n    }\n    resp = createNewSolrServer(\"\", baseUrl).request(request);\n  }\n\n","sourceOld":"  private void deletePartiallyCreatedCollection() throws Exception {\n    final String baseUrl = getBaseUrl((HttpSolrServer) clients.get(0));\n    String collectionName = \"halfdeletedcollection\";\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    String dataDir = SolrTestCaseJ4.dataDir.getAbsolutePath() + File.separator\n        + System.currentTimeMillis() + \"halfcollection\" + \"_hdn\";\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    createNewSolrServer(\"\", baseUrl).request(createCmd);\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.DELETE.toString());\n    params.set(\"name\", collectionName);\n    QueryRequest request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n\n    NamedList<Object> resp = createNewSolrServer(\"\", baseUrl).request(request);\n    \n    checkForMissingCollection(collectionName);\n    \n    // now creating that collection should work\n    params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.CREATE.toString());\n    params.set(\"name\", collectionName);\n    params.set(\"numShards\", 2);\n    request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n    if (secondConfigSet) {\n      params.set(\"collection.configName\", \"conf1\");\n    }\n    resp = createNewSolrServer(\"\", baseUrl).request(request);\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"f4abec28b874149a7223e32cc7a01704c27790de","date":1410644789,"type":3,"author":"Robert Muir","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","sourceNew":"  private void deletePartiallyCreatedCollection() throws Exception {\n    final String baseUrl = getBaseUrl((HttpSolrServer) clients.get(0));\n    String collectionName = \"halfdeletedcollection\";\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    createNewSolrServer(\"\", baseUrl).request(createCmd);\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.DELETE.toString());\n    params.set(\"name\", collectionName);\n    QueryRequest request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n\n    NamedList<Object> resp = createNewSolrServer(\"\", baseUrl).request(request);\n    \n    checkForMissingCollection(collectionName);\n    \n    // now creating that collection should work\n    params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.CREATE.toString());\n    params.set(\"name\", collectionName);\n    params.set(\"numShards\", 2);\n    request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n    if (secondConfigSet) {\n      params.set(\"collection.configName\", \"conf1\");\n    }\n    resp = createNewSolrServer(\"\", baseUrl).request(request);\n  }\n\n","sourceOld":"  private void deletePartiallyCreatedCollection() throws Exception {\n    final String baseUrl = getBaseUrl((HttpSolrServer) clients.get(0));\n    String collectionName = \"halfdeletedcollection\";\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    String dataDir = createTempDir().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    createNewSolrServer(\"\", baseUrl).request(createCmd);\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.DELETE.toString());\n    params.set(\"name\", collectionName);\n    QueryRequest request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n\n    NamedList<Object> resp = createNewSolrServer(\"\", baseUrl).request(request);\n    \n    checkForMissingCollection(collectionName);\n    \n    // now creating that collection should work\n    params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.CREATE.toString());\n    params.set(\"name\", collectionName);\n    params.set(\"numShards\", 2);\n    request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n    if (secondConfigSet) {\n      params.set(\"collection.configName\", \"conf1\");\n    }\n    resp = createNewSolrServer(\"\", baseUrl).request(request);\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"bafca15d8e408346a67f4282ad1143b88023893b","date":1420034748,"type":3,"author":"Alan Woodward","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","sourceNew":"  private void deletePartiallyCreatedCollection() throws Exception {\n    final String baseUrl = getBaseUrl((HttpSolrClient) clients.get(0));\n    String collectionName = \"halfdeletedcollection\";\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    createNewSolrClient(\"\", baseUrl).request(createCmd);\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.DELETE.toString());\n    params.set(\"name\", collectionName);\n    QueryRequest request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n\n    NamedList<Object> resp = createNewSolrClient(\"\", baseUrl).request(request);\n    \n    checkForMissingCollection(collectionName);\n    \n    // now creating that collection should work\n    params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.CREATE.toString());\n    params.set(\"name\", collectionName);\n    params.set(\"numShards\", 2);\n    request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n    if (secondConfigSet) {\n      params.set(\"collection.configName\", \"conf1\");\n    }\n    resp = createNewSolrClient(\"\", baseUrl).request(request);\n  }\n\n","sourceOld":"  private void deletePartiallyCreatedCollection() throws Exception {\n    final String baseUrl = getBaseUrl((HttpSolrServer) clients.get(0));\n    String collectionName = \"halfdeletedcollection\";\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    createNewSolrServer(\"\", baseUrl).request(createCmd);\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.DELETE.toString());\n    params.set(\"name\", collectionName);\n    QueryRequest request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n\n    NamedList<Object> resp = createNewSolrServer(\"\", baseUrl).request(request);\n    \n    checkForMissingCollection(collectionName);\n    \n    // now creating that collection should work\n    params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.CREATE.toString());\n    params.set(\"name\", collectionName);\n    params.set(\"numShards\", 2);\n    request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n    if (secondConfigSet) {\n      params.set(\"collection.configName\", \"conf1\");\n    }\n    resp = createNewSolrServer(\"\", baseUrl).request(request);\n  }\n\n","bugFix":null,"bugIntro":["6784d0cc613dc1ee97030eaaa5e0754edc22d164"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"6784d0cc613dc1ee97030eaaa5e0754edc22d164","date":1420824784,"type":3,"author":"Mark Robert Miller","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","sourceNew":"  private void deletePartiallyCreatedCollection() throws Exception {\n    final String baseUrl = getBaseUrl((HttpSolrClient) clients.get(0));\n    String collectionName = \"halfdeletedcollection\";\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n\n    makeRequest(baseUrl, createCmd);\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.DELETE.toString());\n    params.set(\"name\", collectionName);\n    QueryRequest request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n\n    makeRequest(baseUrl, request);\n    \n    checkForMissingCollection(collectionName);\n    \n    // now creating that collection should work\n    params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.CREATE.toString());\n    params.set(\"name\", collectionName);\n    params.set(\"numShards\", 2);\n    request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n    if (secondConfigSet) {\n      params.set(\"collection.configName\", \"conf1\");\n    }\n    makeRequest(baseUrl, request);\n  }\n\n","sourceOld":"  private void deletePartiallyCreatedCollection() throws Exception {\n    final String baseUrl = getBaseUrl((HttpSolrClient) clients.get(0));\n    String collectionName = \"halfdeletedcollection\";\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n    createNewSolrClient(\"\", baseUrl).request(createCmd);\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.DELETE.toString());\n    params.set(\"name\", collectionName);\n    QueryRequest request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n\n    NamedList<Object> resp = createNewSolrClient(\"\", baseUrl).request(request);\n    \n    checkForMissingCollection(collectionName);\n    \n    // now creating that collection should work\n    params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.CREATE.toString());\n    params.set(\"name\", collectionName);\n    params.set(\"numShards\", 2);\n    request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n    if (secondConfigSet) {\n      params.set(\"collection.configName\", \"conf1\");\n    }\n    resp = createNewSolrClient(\"\", baseUrl).request(request);\n  }\n\n","bugFix":["bafca15d8e408346a67f4282ad1143b88023893b"],"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"234afba21d42e6c527535c6aa11baba09a4771f3","date":1432825127,"type":3,"author":"Shalin Shekhar Mangar","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","sourceNew":"  private void deletePartiallyCreatedCollection() throws Exception {\n    final String baseUrl = getBaseUrl((HttpSolrClient) clients.get(0));\n    String collectionName = \"halfdeletedcollection\";\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n\n    makeRequest(baseUrl, createCmd);\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.DELETE.toString());\n    params.set(\"name\", collectionName);\n    QueryRequest request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n\n    makeRequest(baseUrl, request);\n\n    assertCollectionNotExists(collectionName, 45);\n    \n    // now creating that collection should work\n    params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.CREATE.toString());\n    params.set(\"name\", collectionName);\n    params.set(\"numShards\", 2);\n    request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n    if (secondConfigSet) {\n      params.set(\"collection.configName\", \"conf1\");\n    }\n    makeRequest(baseUrl, request);\n  }\n\n","sourceOld":"  private void deletePartiallyCreatedCollection() throws Exception {\n    final String baseUrl = getBaseUrl((HttpSolrClient) clients.get(0));\n    String collectionName = \"halfdeletedcollection\";\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n\n    makeRequest(baseUrl, createCmd);\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.DELETE.toString());\n    params.set(\"name\", collectionName);\n    QueryRequest request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n\n    makeRequest(baseUrl, request);\n    \n    checkForMissingCollection(collectionName);\n    \n    // now creating that collection should work\n    params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.CREATE.toString());\n    params.set(\"name\", collectionName);\n    params.set(\"numShards\", 2);\n    request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n    if (secondConfigSet) {\n      params.set(\"collection.configName\", \"conf1\");\n    }\n    makeRequest(baseUrl, request);\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"a4efd3fffdd7acd625bb88e455c8097e17f75735","date":1477647201,"type":3,"author":"Alan Woodward","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","sourceNew":"  @Test\n  public void deletePartiallyCreatedCollection() throws Exception {\n\n    final String collectionName = \"halfdeletedcollection\";\n\n    // create a core that simulates something left over from a partially-deleted collection\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    createCmd.setCollectionConfigName(\"conf\");\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n\n    createCmd.process(cluster.getSolrClient());\n\n    CollectionAdminRequest.deleteCollection(collectionName)\n        .process(cluster.getSolrClient());\n\n    assertFalse(CollectionAdminRequest.listCollections(cluster.getSolrClient()).contains(collectionName));\n\n    CollectionAdminRequest.createCollection(collectionName, \"conf\", 2, 1)\n        .process(cluster.getSolrClient());\n\n    assertTrue(CollectionAdminRequest.listCollections(cluster.getSolrClient()).contains(collectionName));\n\n  }\n\n","sourceOld":"  private void deletePartiallyCreatedCollection() throws Exception {\n    final String baseUrl = getBaseUrl((HttpSolrClient) clients.get(0));\n    String collectionName = \"halfdeletedcollection\";\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n\n    makeRequest(baseUrl, createCmd);\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.DELETE.toString());\n    params.set(\"name\", collectionName);\n    QueryRequest request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n\n    makeRequest(baseUrl, request);\n\n    assertCollectionNotExists(collectionName, 45);\n    \n    // now creating that collection should work\n    params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.CREATE.toString());\n    params.set(\"name\", collectionName);\n    params.set(\"numShards\", 2);\n    request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n    if (secondConfigSet) {\n      params.set(\"collection.configName\", \"conf1\");\n    }\n    makeRequest(baseUrl, request);\n  }\n\n","bugFix":null,"bugIntro":["273ff2f5b0b365591fcbe91ea23b5e97027ca60d","273ff2f5b0b365591fcbe91ea23b5e97027ca60d"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"59dce44d6a0b58c171de1d47ad8c0a75831f94fd","date":1477668573,"type":3,"author":"Kevin Risden","isMerge":true,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","sourceNew":"  @Test\n  public void deletePartiallyCreatedCollection() throws Exception {\n\n    final String collectionName = \"halfdeletedcollection\";\n\n    // create a core that simulates something left over from a partially-deleted collection\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    createCmd.setCollectionConfigName(\"conf\");\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n\n    createCmd.process(cluster.getSolrClient());\n\n    CollectionAdminRequest.deleteCollection(collectionName)\n        .process(cluster.getSolrClient());\n\n    assertFalse(CollectionAdminRequest.listCollections(cluster.getSolrClient()).contains(collectionName));\n\n    CollectionAdminRequest.createCollection(collectionName, \"conf\", 2, 1)\n        .process(cluster.getSolrClient());\n\n    assertTrue(CollectionAdminRequest.listCollections(cluster.getSolrClient()).contains(collectionName));\n\n  }\n\n","sourceOld":"  private void deletePartiallyCreatedCollection() throws Exception {\n    final String baseUrl = getBaseUrl((HttpSolrClient) clients.get(0));\n    String collectionName = \"halfdeletedcollection\";\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n    if (secondConfigSet) {\n      createCmd.setCollectionConfigName(\"conf1\");\n    }\n\n    makeRequest(baseUrl, createCmd);\n\n    ModifiableSolrParams params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.DELETE.toString());\n    params.set(\"name\", collectionName);\n    QueryRequest request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n\n    makeRequest(baseUrl, request);\n\n    assertCollectionNotExists(collectionName, 45);\n    \n    // now creating that collection should work\n    params = new ModifiableSolrParams();\n    params.set(\"action\", CollectionAction.CREATE.toString());\n    params.set(\"name\", collectionName);\n    params.set(\"numShards\", 2);\n    request = new QueryRequest(params);\n    request.setPath(\"/admin/collections\");\n    if (secondConfigSet) {\n      params.set(\"collection.configName\", \"conf1\");\n    }\n    makeRequest(baseUrl, request);\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"a9b4296bd51ca61b482138791478afdd0f7d3a3d","date":1498058739,"type":3,"author":"Cao Manh Dat","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","sourceNew":"  @Test\n  public void deletePartiallyCreatedCollection() throws Exception {\n\n    final String collectionName = \"halfdeletedcollection\";\n\n    assertEquals(0, CollectionAdminRequest.createCollection(collectionName, \"conf\", 2, 1)\n        .setCreateNodeSet(\"\")\n        .process(cluster.getSolrClient()).getStatus());\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    // create a core that simulates something left over from a partially-deleted collection\n    assertTrue(CollectionAdminRequest\n        .addReplicaToShard(collectionName, \"shard1\")\n        .setDataDir(dataDir)\n        .process(cluster.getSolrClient()).isSuccess());\n\n    CollectionAdminRequest.deleteCollection(collectionName)\n        .process(cluster.getSolrClient());\n\n    assertFalse(CollectionAdminRequest.listCollections(cluster.getSolrClient()).contains(collectionName));\n\n    CollectionAdminRequest.createCollection(collectionName, \"conf\", 2, 1)\n        .process(cluster.getSolrClient());\n\n    assertTrue(CollectionAdminRequest.listCollections(cluster.getSolrClient()).contains(collectionName));\n\n  }\n\n","sourceOld":"  @Test\n  public void deletePartiallyCreatedCollection() throws Exception {\n\n    final String collectionName = \"halfdeletedcollection\";\n\n    // create a core that simulates something left over from a partially-deleted collection\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    createCmd.setCollectionConfigName(\"conf\");\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n\n    createCmd.process(cluster.getSolrClient());\n\n    CollectionAdminRequest.deleteCollection(collectionName)\n        .process(cluster.getSolrClient());\n\n    assertFalse(CollectionAdminRequest.listCollections(cluster.getSolrClient()).contains(collectionName));\n\n    CollectionAdminRequest.createCollection(collectionName, \"conf\", 2, 1)\n        .process(cluster.getSolrClient());\n\n    assertTrue(CollectionAdminRequest.listCollections(cluster.getSolrClient()).contains(collectionName));\n\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"b7dfa64bc2074fb87d0ca70095a644c1ead107e1","date":1498356339,"type":3,"author":"Shalin Shekhar Mangar","isMerge":true,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","sourceNew":"  @Test\n  public void deletePartiallyCreatedCollection() throws Exception {\n\n    final String collectionName = \"halfdeletedcollection\";\n\n    assertEquals(0, CollectionAdminRequest.createCollection(collectionName, \"conf\", 2, 1)\n        .setCreateNodeSet(\"\")\n        .process(cluster.getSolrClient()).getStatus());\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    // create a core that simulates something left over from a partially-deleted collection\n    assertTrue(CollectionAdminRequest\n        .addReplicaToShard(collectionName, \"shard1\")\n        .setDataDir(dataDir)\n        .process(cluster.getSolrClient()).isSuccess());\n\n    CollectionAdminRequest.deleteCollection(collectionName)\n        .process(cluster.getSolrClient());\n\n    assertFalse(CollectionAdminRequest.listCollections(cluster.getSolrClient()).contains(collectionName));\n\n    CollectionAdminRequest.createCollection(collectionName, \"conf\", 2, 1)\n        .process(cluster.getSolrClient());\n\n    assertTrue(CollectionAdminRequest.listCollections(cluster.getSolrClient()).contains(collectionName));\n\n  }\n\n","sourceOld":"  @Test\n  public void deletePartiallyCreatedCollection() throws Exception {\n\n    final String collectionName = \"halfdeletedcollection\";\n\n    // create a core that simulates something left over from a partially-deleted collection\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    createCmd.setCollectionConfigName(\"conf\");\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n\n    createCmd.process(cluster.getSolrClient());\n\n    CollectionAdminRequest.deleteCollection(collectionName)\n        .process(cluster.getSolrClient());\n\n    assertFalse(CollectionAdminRequest.listCollections(cluster.getSolrClient()).contains(collectionName));\n\n    CollectionAdminRequest.createCollection(collectionName, \"conf\", 2, 1)\n        .process(cluster.getSolrClient());\n\n    assertTrue(CollectionAdminRequest.listCollections(cluster.getSolrClient()).contains(collectionName));\n\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"28288370235ed02234a64753cdbf0c6ec096304a","date":1498726817,"type":3,"author":"Karl Wright","isMerge":true,"pathNew":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","sourceNew":"  @Test\n  public void deletePartiallyCreatedCollection() throws Exception {\n\n    final String collectionName = \"halfdeletedcollection\";\n\n    assertEquals(0, CollectionAdminRequest.createCollection(collectionName, \"conf\", 2, 1)\n        .setCreateNodeSet(\"\")\n        .process(cluster.getSolrClient()).getStatus());\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    // create a core that simulates something left over from a partially-deleted collection\n    assertTrue(CollectionAdminRequest\n        .addReplicaToShard(collectionName, \"shard1\")\n        .setDataDir(dataDir)\n        .process(cluster.getSolrClient()).isSuccess());\n\n    CollectionAdminRequest.deleteCollection(collectionName)\n        .process(cluster.getSolrClient());\n\n    assertFalse(CollectionAdminRequest.listCollections(cluster.getSolrClient()).contains(collectionName));\n\n    CollectionAdminRequest.createCollection(collectionName, \"conf\", 2, 1)\n        .process(cluster.getSolrClient());\n\n    assertTrue(CollectionAdminRequest.listCollections(cluster.getSolrClient()).contains(collectionName));\n\n  }\n\n","sourceOld":"  @Test\n  public void deletePartiallyCreatedCollection() throws Exception {\n\n    final String collectionName = \"halfdeletedcollection\";\n\n    // create a core that simulates something left over from a partially-deleted collection\n    Create createCmd = new Create();\n    createCmd.setCoreName(\"halfdeletedcollection_shard1_replica1\");\n    createCmd.setCollection(collectionName);\n    createCmd.setCollectionConfigName(\"conf\");\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    createCmd.setDataDir(dataDir);\n    createCmd.setNumShards(2);\n\n    createCmd.process(cluster.getSolrClient());\n\n    CollectionAdminRequest.deleteCollection(collectionName)\n        .process(cluster.getSolrClient());\n\n    assertFalse(CollectionAdminRequest.listCollections(cluster.getSolrClient()).contains(collectionName));\n\n    CollectionAdminRequest.createCollection(collectionName, \"conf\", 2, 1)\n        .process(cluster.getSolrClient());\n\n    assertTrue(CollectionAdminRequest.listCollections(cluster.getSolrClient()).contains(collectionName));\n\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"6146c07c0dee1ae1e42926167acd127fed5ef59d","date":1516129420,"type":5,"author":"Varun Thacker","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/cloud/api/collections/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","sourceNew":"  @Test\n  public void deletePartiallyCreatedCollection() throws Exception {\n\n    final String collectionName = \"halfdeletedcollection\";\n\n    assertEquals(0, CollectionAdminRequest.createCollection(collectionName, \"conf\", 2, 1)\n        .setCreateNodeSet(\"\")\n        .process(cluster.getSolrClient()).getStatus());\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    // create a core that simulates something left over from a partially-deleted collection\n    assertTrue(CollectionAdminRequest\n        .addReplicaToShard(collectionName, \"shard1\")\n        .setDataDir(dataDir)\n        .process(cluster.getSolrClient()).isSuccess());\n\n    CollectionAdminRequest.deleteCollection(collectionName)\n        .process(cluster.getSolrClient());\n\n    assertFalse(CollectionAdminRequest.listCollections(cluster.getSolrClient()).contains(collectionName));\n\n    CollectionAdminRequest.createCollection(collectionName, \"conf\", 2, 1)\n        .process(cluster.getSolrClient());\n\n    assertTrue(CollectionAdminRequest.listCollections(cluster.getSolrClient()).contains(collectionName));\n\n  }\n\n","sourceOld":"  @Test\n  public void deletePartiallyCreatedCollection() throws Exception {\n\n    final String collectionName = \"halfdeletedcollection\";\n\n    assertEquals(0, CollectionAdminRequest.createCollection(collectionName, \"conf\", 2, 1)\n        .setCreateNodeSet(\"\")\n        .process(cluster.getSolrClient()).getStatus());\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    // create a core that simulates something left over from a partially-deleted collection\n    assertTrue(CollectionAdminRequest\n        .addReplicaToShard(collectionName, \"shard1\")\n        .setDataDir(dataDir)\n        .process(cluster.getSolrClient()).isSuccess());\n\n    CollectionAdminRequest.deleteCollection(collectionName)\n        .process(cluster.getSolrClient());\n\n    assertFalse(CollectionAdminRequest.listCollections(cluster.getSolrClient()).contains(collectionName));\n\n    CollectionAdminRequest.createCollection(collectionName, \"conf\", 2, 1)\n        .process(cluster.getSolrClient());\n\n    assertTrue(CollectionAdminRequest.listCollections(cluster.getSolrClient()).contains(collectionName));\n\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"b94236357aaa22b76c10629851fe4e376e0cea82","date":1516710914,"type":5,"author":"Karl Wright","isMerge":true,"pathNew":"solr/core/src/test/org/apache/solr/cloud/api/collections/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","pathOld":"solr/core/src/test/org/apache/solr/cloud/CollectionsAPIDistributedZkTest#deletePartiallyCreatedCollection().mjava","sourceNew":"  @Test\n  public void deletePartiallyCreatedCollection() throws Exception {\n\n    final String collectionName = \"halfdeletedcollection\";\n\n    assertEquals(0, CollectionAdminRequest.createCollection(collectionName, \"conf\", 2, 1)\n        .setCreateNodeSet(\"\")\n        .process(cluster.getSolrClient()).getStatus());\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    // create a core that simulates something left over from a partially-deleted collection\n    assertTrue(CollectionAdminRequest\n        .addReplicaToShard(collectionName, \"shard1\")\n        .setDataDir(dataDir)\n        .process(cluster.getSolrClient()).isSuccess());\n\n    CollectionAdminRequest.deleteCollection(collectionName)\n        .process(cluster.getSolrClient());\n\n    assertFalse(CollectionAdminRequest.listCollections(cluster.getSolrClient()).contains(collectionName));\n\n    CollectionAdminRequest.createCollection(collectionName, \"conf\", 2, 1)\n        .process(cluster.getSolrClient());\n\n    assertTrue(CollectionAdminRequest.listCollections(cluster.getSolrClient()).contains(collectionName));\n\n  }\n\n","sourceOld":"  @Test\n  public void deletePartiallyCreatedCollection() throws Exception {\n\n    final String collectionName = \"halfdeletedcollection\";\n\n    assertEquals(0, CollectionAdminRequest.createCollection(collectionName, \"conf\", 2, 1)\n        .setCreateNodeSet(\"\")\n        .process(cluster.getSolrClient()).getStatus());\n    String dataDir = createTempDir().toFile().getAbsolutePath();\n    // create a core that simulates something left over from a partially-deleted collection\n    assertTrue(CollectionAdminRequest\n        .addReplicaToShard(collectionName, \"shard1\")\n        .setDataDir(dataDir)\n        .process(cluster.getSolrClient()).isSuccess());\n\n    CollectionAdminRequest.deleteCollection(collectionName)\n        .process(cluster.getSolrClient());\n\n    assertFalse(CollectionAdminRequest.listCollections(cluster.getSolrClient()).contains(collectionName));\n\n    CollectionAdminRequest.createCollection(collectionName, \"conf\", 2, 1)\n        .process(cluster.getSolrClient());\n\n    assertTrue(CollectionAdminRequest.listCollections(cluster.getSolrClient()).contains(collectionName));\n\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":true,"nexts":[],"revCommit":null}],"commit2Parents":{"a4efd3fffdd7acd625bb88e455c8097e17f75735":["234afba21d42e6c527535c6aa11baba09a4771f3"],"b94236357aaa22b76c10629851fe4e376e0cea82":["28288370235ed02234a64753cdbf0c6ec096304a","6146c07c0dee1ae1e42926167acd127fed5ef59d"],"59dce44d6a0b58c171de1d47ad8c0a75831f94fd":["234afba21d42e6c527535c6aa11baba09a4771f3","a4efd3fffdd7acd625bb88e455c8097e17f75735"],"587bce86f07b072818f585d0fd32bb3fc7a1c647":["3e52e25546521bf7de038e2f3a672170f4fa8b2f"],"bb1f22cfa77230b5f05b7784feae5367f6bbb488":["963b0a9b072593721af39e1d9b815fba17e88e7f"],"a9b4296bd51ca61b482138791478afdd0f7d3a3d":["a4efd3fffdd7acd625bb88e455c8097e17f75735"],"d3a46663789411cdf016145a96a40cf861798ae3":["5a82d855abc18f7ee3e1ec359d8f256c8c86977a"],"2a0f5bb79c600763ffe7b8141df59a3169d31e48":["963b0a9b072593721af39e1d9b815fba17e88e7f","bb1f22cfa77230b5f05b7784feae5367f6bbb488"],"3e52e25546521bf7de038e2f3a672170f4fa8b2f":["6e756785b6f25f3b8f7ee57c7e210c6b67fbfbbf"],"6146c07c0dee1ae1e42926167acd127fed5ef59d":["28288370235ed02234a64753cdbf0c6ec096304a"],"bafca15d8e408346a67f4282ad1143b88023893b":["f4abec28b874149a7223e32cc7a01704c27790de"],"f4abec28b874149a7223e32cc7a01704c27790de":["2a0f5bb79c600763ffe7b8141df59a3169d31e48"],"b7dfa64bc2074fb87d0ca70095a644c1ead107e1":["a4efd3fffdd7acd625bb88e455c8097e17f75735","a9b4296bd51ca61b482138791478afdd0f7d3a3d"],"28288370235ed02234a64753cdbf0c6ec096304a":["a4efd3fffdd7acd625bb88e455c8097e17f75735","a9b4296bd51ca61b482138791478afdd0f7d3a3d"],"5a82d855abc18f7ee3e1ec359d8f256c8c86977a":["587bce86f07b072818f585d0fd32bb3fc7a1c647"],"963b0a9b072593721af39e1d9b815fba17e88e7f":["d3a46663789411cdf016145a96a40cf861798ae3"],"6e756785b6f25f3b8f7ee57c7e210c6b67fbfbbf":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"234afba21d42e6c527535c6aa11baba09a4771f3":["6784d0cc613dc1ee97030eaaa5e0754edc22d164"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"6784d0cc613dc1ee97030eaaa5e0754edc22d164":["bafca15d8e408346a67f4282ad1143b88023893b"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["b94236357aaa22b76c10629851fe4e376e0cea82"]},"commit2Childs":{"a4efd3fffdd7acd625bb88e455c8097e17f75735":["59dce44d6a0b58c171de1d47ad8c0a75831f94fd","a9b4296bd51ca61b482138791478afdd0f7d3a3d","b7dfa64bc2074fb87d0ca70095a644c1ead107e1","28288370235ed02234a64753cdbf0c6ec096304a"],"b94236357aaa22b76c10629851fe4e376e0cea82":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"59dce44d6a0b58c171de1d47ad8c0a75831f94fd":[],"587bce86f07b072818f585d0fd32bb3fc7a1c647":["5a82d855abc18f7ee3e1ec359d8f256c8c86977a"],"bb1f22cfa77230b5f05b7784feae5367f6bbb488":["2a0f5bb79c600763ffe7b8141df59a3169d31e48"],"a9b4296bd51ca61b482138791478afdd0f7d3a3d":["b7dfa64bc2074fb87d0ca70095a644c1ead107e1","28288370235ed02234a64753cdbf0c6ec096304a"],"d3a46663789411cdf016145a96a40cf861798ae3":["963b0a9b072593721af39e1d9b815fba17e88e7f"],"2a0f5bb79c600763ffe7b8141df59a3169d31e48":["f4abec28b874149a7223e32cc7a01704c27790de"],"6146c07c0dee1ae1e42926167acd127fed5ef59d":["b94236357aaa22b76c10629851fe4e376e0cea82"],"3e52e25546521bf7de038e2f3a672170f4fa8b2f":["587bce86f07b072818f585d0fd32bb3fc7a1c647"],"bafca15d8e408346a67f4282ad1143b88023893b":["6784d0cc613dc1ee97030eaaa5e0754edc22d164"],"f4abec28b874149a7223e32cc7a01704c27790de":["bafca15d8e408346a67f4282ad1143b88023893b"],"b7dfa64bc2074fb87d0ca70095a644c1ead107e1":[],"28288370235ed02234a64753cdbf0c6ec096304a":["b94236357aaa22b76c10629851fe4e376e0cea82","6146c07c0dee1ae1e42926167acd127fed5ef59d"],"5a82d855abc18f7ee3e1ec359d8f256c8c86977a":["d3a46663789411cdf016145a96a40cf861798ae3"],"963b0a9b072593721af39e1d9b815fba17e88e7f":["bb1f22cfa77230b5f05b7784feae5367f6bbb488","2a0f5bb79c600763ffe7b8141df59a3169d31e48"],"6e756785b6f25f3b8f7ee57c7e210c6b67fbfbbf":["3e52e25546521bf7de038e2f3a672170f4fa8b2f"],"234afba21d42e6c527535c6aa11baba09a4771f3":["a4efd3fffdd7acd625bb88e455c8097e17f75735","59dce44d6a0b58c171de1d47ad8c0a75831f94fd"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["6e756785b6f25f3b8f7ee57c7e210c6b67fbfbbf"],"6784d0cc613dc1ee97030eaaa5e0754edc22d164":["234afba21d42e6c527535c6aa11baba09a4771f3"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["59dce44d6a0b58c171de1d47ad8c0a75831f94fd","b7dfa64bc2074fb87d0ca70095a644c1ead107e1","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}