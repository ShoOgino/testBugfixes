{"path":"lucene/core/src/java/org/apache/lucene/index/DocumentsWriterDeleteQueue#maybeFreezeGlobalBuffer().mjava","commits":[{"id":"34067df01cbbefc83d0b316037fe4e10d89ba6a3","date":1559054674,"type":0,"author":"Simon Willnauer","isMerge":false,"pathNew":"lucene/core/src/java/org/apache/lucene/index/DocumentsWriterDeleteQueue#maybeFreezeGlobalBuffer().mjava","pathOld":"/dev/null","sourceNew":"  /**\n   * This may freeze the global buffer unless the delete queue has already been closed.\n   * If the queue has been closed this method will return <code>null</code>\n   */\n  FrozenBufferedUpdates maybeFreezeGlobalBuffer() {\n    globalBufferLock.lock();\n    try {\n      if (closed == false) {\n        /*\n         * Here we freeze the global buffer so we need to lock it, apply all\n         * deletes in the queue and reset the global slice to let the GC prune the\n         * queue.\n         */\n        return freezeGlobalBufferInternal(tail); // take the current tail make this local any\n      } else {\n        assert anyChanges() == false : \"we are closed but have changes\";\n        return null;\n      }\n    } finally {\n      globalBufferLock.unlock();\n    }\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"34b5cf63f4ff3d985a7fc828c1a0d1624b0176d9","date":1559371943,"type":0,"author":"Simon Willnauer","isMerge":true,"pathNew":"lucene/core/src/java/org/apache/lucene/index/DocumentsWriterDeleteQueue#maybeFreezeGlobalBuffer().mjava","pathOld":"/dev/null","sourceNew":"  /**\n   * This may freeze the global buffer unless the delete queue has already been closed.\n   * If the queue has been closed this method will return <code>null</code>\n   */\n  FrozenBufferedUpdates maybeFreezeGlobalBuffer() {\n    globalBufferLock.lock();\n    try {\n      if (closed == false) {\n        /*\n         * Here we freeze the global buffer so we need to lock it, apply all\n         * deletes in the queue and reset the global slice to let the GC prune the\n         * queue.\n         */\n        return freezeGlobalBufferInternal(tail); // take the current tail make this local any\n      } else {\n        assert anyChanges() == false : \"we are closed but have changes\";\n        return null;\n      }\n    } finally {\n      globalBufferLock.unlock();\n    }\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"34b5cf63f4ff3d985a7fc828c1a0d1624b0176d9":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","34067df01cbbefc83d0b316037fe4e10d89ba6a3"],"34067df01cbbefc83d0b316037fe4e10d89ba6a3":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["34b5cf63f4ff3d985a7fc828c1a0d1624b0176d9"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["34b5cf63f4ff3d985a7fc828c1a0d1624b0176d9","34067df01cbbefc83d0b316037fe4e10d89ba6a3"],"34b5cf63f4ff3d985a7fc828c1a0d1624b0176d9":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"34067df01cbbefc83d0b316037fe4e10d89ba6a3":["34b5cf63f4ff3d985a7fc828c1a0d1624b0176d9"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}