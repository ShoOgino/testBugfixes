{"path":"lucene/core/src/java/org/apache/lucene/codecs/bulkvint/BulkVIntPostingsFormat.BulkVIntFactory#openInput(Directory,String,IOContext).mjava","commits":[{"id":"2f4bfabd14c1907ffd2cf3cba86be71520983b20","date":1341424058,"type":0,"author":"Michael McCandless","isMerge":false,"pathNew":"lucene/core/src/java/org/apache/lucene/codecs/bulkvint/BulkVIntPostingsFormat.BulkVIntFactory#openInput(Directory,String,IOContext).mjava","pathOld":"/dev/null","sourceNew":"    @Override\n    public FixedIntBlockIndexInput openInput(Directory dir, String fileName, IOContext context) throws IOException {\n      return new FixedIntBlockIndexInput(dir.openInput(fileName, context)) {\n\n        @Override\n        protected BlockReader getBlockReader(final IndexInput in, final int[] buffer) throws IOException {\n          return new BlockReader() {\n            private final byte bytes[] = new byte[blockSize*5]; // header * max(Vint)\n            \n            @Override\n            public void readBlock() throws IOException {\n              final int numBytes = in.readVInt(); // read header\n              if (numBytes == 0) { // 1's\n                Arrays.fill(buffer, 1);\n                return;\n              }\n              in.readBytes(bytes, 0, numBytes); // readBytes\n              \n              int upto = 0;\n              \n              // decode bytes\n              for(int i=0;i<buffer.length;i++) {\n                byte b = bytes[upto++];\n                int j = b & 0x7F;\n                for (int shift = 7; (b & 0x80) != 0; shift += 7) {\n                  b = bytes[upto++];\n                  j |= (b & 0x7F) << shift;\n                }\n                buffer[i] = j;\n              }\n            }\n          };\n        }\n      };\n    }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"dc3aebee6cb78722e5bc6e2baced39db7a5412eb","date":1345028634,"type":4,"author":"Michael McCandless","isMerge":false,"pathNew":"/dev/null","pathOld":"lucene/core/src/java/org/apache/lucene/codecs/bulkvint/BulkVIntPostingsFormat.BulkVIntFactory#openInput(Directory,String,IOContext).mjava","sourceNew":null,"sourceOld":"    @Override\n    public FixedIntBlockIndexInput openInput(Directory dir, String fileName, IOContext context) throws IOException {\n      return new FixedIntBlockIndexInput(dir.openInput(fileName, context)) {\n\n        @Override\n        protected BlockReader getBlockReader(final IndexInput in, final int[] buffer) throws IOException {\n          return new BlockReader() {\n            private final byte bytes[] = new byte[blockSize*5]; // header * max(Vint)\n            \n            @Override\n            public void readBlock() throws IOException {\n              final int numBytes = in.readVInt(); // read header\n              if (numBytes == 0) { // 1's\n                Arrays.fill(buffer, 1);\n                return;\n              }\n              in.readBytes(bytes, 0, numBytes); // readBytes\n              \n              int upto = 0;\n              \n              // decode bytes\n              for(int i=0;i<buffer.length;i++) {\n                byte b = bytes[upto++];\n                int j = b & 0x7F;\n                for (int shift = 7; (b & 0x80) != 0; shift += 7) {\n                  b = bytes[upto++];\n                  j |= (b & 0x7F) << shift;\n                }\n                buffer[i] = j;\n              }\n            }\n          };\n        }\n      };\n    }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"2f4bfabd14c1907ffd2cf3cba86be71520983b20":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"dc3aebee6cb78722e5bc6e2baced39db7a5412eb":["2f4bfabd14c1907ffd2cf3cba86be71520983b20"]},"commit2Childs":{"2f4bfabd14c1907ffd2cf3cba86be71520983b20":["dc3aebee6cb78722e5bc6e2baced39db7a5412eb"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["2f4bfabd14c1907ffd2cf3cba86be71520983b20","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[],"dc3aebee6cb78722e5bc6e2baced39db7a5412eb":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817","dc3aebee6cb78722e5bc6e2baced39db7a5412eb"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}