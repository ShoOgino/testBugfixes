{"path":"solr/core/src/java/org/apache/solr/search/facet/RelatednessAgg.BucketData#computeDerivedValues().mjava","commits":[{"id":"42009f1fefcc8f4d9e07b158e9415cbd6ca7247c","date":1532538390,"type":0,"author":"Chris Hostetter","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/search/facet/RelatednessAgg.BucketData#computeDerivedValues().mjava","pathOld":"/dev/null","sourceNew":"    /**\n     * Computes (and caches) the derived relatedness &amp; popularity scores for this bucket if needed\n     */\n    private void computeDerivedValues() {\n      if (! Double.isNaN(this.relatedness)) {\n        return; // values already computed;\n      }\n\n      this.fg_pop = roundTo5Digits((double) fg_count / bg_size); // yes, BACKGROUND size is intentional\n      this.bg_pop = roundTo5Digits((double) bg_count / bg_size);\n      \n      if (0.0D < agg.min_pop) {\n        // if min_pop is configured, and either (fg|bg) popularity is lower then that value\n        // then \"this.relatedness=-Infinity\" so it sorts below any \"valid\" relatedness scores\n        if (fg_pop < agg.min_pop || bg_pop < agg.min_pop) {\n          this.relatedness = Double.NEGATIVE_INFINITY;\n          return;\n        }\n      }\n      \n      this.relatedness = computeRelatedness(this.fg_count, this.fg_size,\n                                            this.bg_count, this.bg_size);\n    }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"42009f1fefcc8f4d9e07b158e9415cbd6ca7247c":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["42009f1fefcc8f4d9e07b158e9415cbd6ca7247c"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["42009f1fefcc8f4d9e07b158e9415cbd6ca7247c"],"42009f1fefcc8f4d9e07b158e9415cbd6ca7247c":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}