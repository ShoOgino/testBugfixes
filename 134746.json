{"path":"solr/core/src/java/org/apache/solr/store/blockcache/BufferStore#initNewBuffer(int,long,Metrics).mjava","commits":[{"id":"adc1a805943f03a49f6d5cdc1b010526dab1cfc9","date":1417444169,"type":0,"author":"Mark Robert Miller","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/store/blockcache/BufferStore#initNewBuffer(int,long,Metrics).mjava","pathOld":"/dev/null","sourceNew":"  public synchronized static void initNewBuffer(int bufferSize, long totalAmount, Metrics metrics) {\n    if (totalAmount == 0) {\n      return;\n    }\n    BufferStore bufferStore = bufferStores.get(bufferSize);\n    if (bufferStore == null) {\n      long count = totalAmount / bufferSize;\n      if (count > Integer.MAX_VALUE) {\n        count = Integer.MAX_VALUE;\n      }\n      AtomicLong shardBuffercacheLost = new AtomicLong(0);\n      AtomicLong shardBuffercacheAllocate = new AtomicLong(0);\n      if (metrics != null) {\n        shardBuffercacheLost = metrics.shardBuffercacheLost;\n        shardBuffercacheAllocate = metrics.shardBuffercacheAllocate;\n      }\n      BufferStore store = new BufferStore(bufferSize, (int) count, shardBuffercacheAllocate, shardBuffercacheLost);\n      bufferStores.put(bufferSize, store);\n    }\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"adc1a805943f03a49f6d5cdc1b010526dab1cfc9":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["adc1a805943f03a49f6d5cdc1b010526dab1cfc9"]},"commit2Childs":{"adc1a805943f03a49f6d5cdc1b010526dab1cfc9":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["adc1a805943f03a49f6d5cdc1b010526dab1cfc9"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}