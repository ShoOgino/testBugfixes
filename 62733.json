{"path":"lucene/src/java/org/apache/lucene/index/IndexWriter.ReaderPool#dropAll().mjava","commits":[{"id":"a1b4dec651d0a89767d1233eef7353f88a42bea0","date":1314786996,"type":0,"author":"Michael McCandless","isMerge":false,"pathNew":"lucene/src/java/org/apache/lucene/index/IndexWriter.ReaderPool#dropAll().mjava","pathOld":"/dev/null","sourceNew":"    public synchronized void dropAll() throws IOException {\n      Iterator<Map.Entry<SegmentCacheKey,SegmentReader>> iter = readerMap.entrySet().iterator();\n      while (iter.hasNext()) {\n\n        final Map.Entry<SegmentCacheKey,SegmentReader> ent = iter.next();\n\n        SegmentReader sr = ent.getValue();\n        sr.hasChanges = false;\n        iter.remove();\n\n        // NOTE: it is allowed that this decRef does not\n        // actually close the SR; this can happen when a\n        // near real-time reader using this SR is still open\n        sr.decRef();\n      }\n    }\n\n","sourceOld":null,"bugFix":null,"bugIntro":["c1ea6b128a9ab931c83254ad0a4248ae09d81fa4"],"isBuggy":true,"nexts":[],"revCommit":null},{"id":"c1ea6b128a9ab931c83254ad0a4248ae09d81fa4","date":1314791970,"type":3,"author":"Michael McCandless","isMerge":false,"pathNew":"lucene/src/java/org/apache/lucene/index/IndexWriter.ReaderPool#dropAll().mjava","pathOld":"lucene/src/java/org/apache/lucene/index/IndexWriter.ReaderPool#dropAll().mjava","sourceNew":"    public synchronized void dropAll() throws IOException {\n      for(SegmentReader reader : readerMap.values()) {\n        reader.hasChanges = false;\n\n        // NOTE: it is allowed that this decRef does not\n        // actually close the SR; this can happen when a\n        // near real-time reader using this SR is still open\n        reader.decRef();\n      }\n      readerMap.clear();\n    }\n\n","sourceOld":"    public synchronized void dropAll() throws IOException {\n      Iterator<Map.Entry<SegmentCacheKey,SegmentReader>> iter = readerMap.entrySet().iterator();\n      while (iter.hasNext()) {\n\n        final Map.Entry<SegmentCacheKey,SegmentReader> ent = iter.next();\n\n        SegmentReader sr = ent.getValue();\n        sr.hasChanges = false;\n        iter.remove();\n\n        // NOTE: it is allowed that this decRef does not\n        // actually close the SR; this can happen when a\n        // near real-time reader using this SR is still open\n        sr.decRef();\n      }\n    }\n\n","bugFix":["a1b4dec651d0a89767d1233eef7353f88a42bea0"],"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"9ce667c6d3400b22523701c549c0d35e26da8b46","date":1324405053,"type":4,"author":"Michael McCandless","isMerge":false,"pathNew":"/dev/null","pathOld":"lucene/src/java/org/apache/lucene/index/IndexWriter.ReaderPool#dropAll().mjava","sourceNew":null,"sourceOld":"    public synchronized void dropAll() throws IOException {\n      for(SegmentReader reader : readerMap.values()) {\n        reader.hasChanges = false;\n\n        // NOTE: it is allowed that this decRef does not\n        // actually close the SR; this can happen when a\n        // near real-time reader using this SR is still open\n        reader.decRef();\n      }\n      readerMap.clear();\n    }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"a1b4dec651d0a89767d1233eef7353f88a42bea0":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"9ce667c6d3400b22523701c549c0d35e26da8b46":["c1ea6b128a9ab931c83254ad0a4248ae09d81fa4"],"c1ea6b128a9ab931c83254ad0a4248ae09d81fa4":["a1b4dec651d0a89767d1233eef7353f88a42bea0"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["9ce667c6d3400b22523701c549c0d35e26da8b46"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["a1b4dec651d0a89767d1233eef7353f88a42bea0"],"a1b4dec651d0a89767d1233eef7353f88a42bea0":["c1ea6b128a9ab931c83254ad0a4248ae09d81fa4"],"9ce667c6d3400b22523701c549c0d35e26da8b46":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"c1ea6b128a9ab931c83254ad0a4248ae09d81fa4":["9ce667c6d3400b22523701c549c0d35e26da8b46"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}