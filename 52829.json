{"path":"solr/core/src/test/org/apache/solr/search/facet/TestJsonFacets#doFacetValueTypeValidation(Client).mjava","commits":[{"id":"1c841e27891873cab110ebeb89f124a8ec470176","date":1586527220,"type":0,"author":"Munendra S N","isMerge":false,"pathNew":"solr/core/src/test/org/apache/solr/search/facet/TestJsonFacets#doFacetValueTypeValidation(Client).mjava","pathOld":"/dev/null","sourceNew":"  private void doFacetValueTypeValidation(Client client) throws Exception {\n    indexSimple(client);\n\n    client.testXQ(params(\"q\", \"*:*\", \"rows\", \"0\",\n        \"json.facet\", \"{cat_s:{type:terms,field:cat_s,mincount:0,missing:true,allBuckets:true,numBuckets:true,limit:1}}\"),\n        \"/response/lst[@name='facets']/long[@name='count'][.=6]\", // count\n        \"/response/lst[@name='facets']/lst[@name='cat_s']/long[@name='numBuckets'][.=2]\", // total no of buckets\n        \"*[count(/response/lst[@name='facets']/lst[@name='cat_s']/arr[@name='buckets']/lst)=1]\", // no of entries\n        \"/response/lst[@name='facets']/lst[@name='cat_s']/lst[@name='allBuckets']/long[@name='count'][.=5]\", // allBuckets\n        \"/response/lst[@name='facets']/lst[@name='cat_s']/lst[@name='missing']/long[@name='count'][.=1]\", // missing\n        \"/response/lst[@name='facets']/lst[@name='cat_s']/arr[@name='buckets']/lst[1]/str[@name='val'][.='B']\", // facet value\n        \"/response/lst[@name='facets']/lst[@name='cat_s']/arr[@name='buckets']/lst[1]/long[@name='count'][.='3']\" // facet count\n    );\n\n    // aggregations types for string\n    client.testXQ(params(\"q\", \"*:*\", \"rows\", \"0\",\n        \"json.facet\", \"{unique:'unique(cat_s)',hll:'hll(cat_s)',vals:'countvals(cat_s)',missing:'missing(cat_s)'}\"),\n        \"/response/lst[@name='facets']/long[@name='count'][.=6]\", // count\n        \"/response/lst[@name='facets']/long[@name='unique'][.=2]\", // unique\n        \"/response/lst[@name='facets']/long[@name='hll'][.=2]\", // hll\n        \"/response/lst[@name='facets']/long[@name='vals'][.=5]\", // values\n        \"/response/lst[@name='facets']/long[@name='missing'][.=1]\" // missing\n    );\n\n    // aggregations types for number\n    client.testXQ(params(\"q\", \"*:*\", \"rows\", \"0\",\n        \"json.facet\", \"{unique:'unique(num_i)',hll:'hll(num_i)',vals:'countvals(num_i)',missing:'missing(num_i)'}\"),\n        \"/response/lst[@name='facets']/long[@name='count'][.=6]\", // count\n        \"/response/lst[@name='facets']/long[@name='unique'][.=4]\", // unique\n        \"/response/lst[@name='facets']/long[@name='hll'][.=4]\", // hll\n        \"/response/lst[@name='facets']/long[@name='vals'][.=5]\", // values\n        \"/response/lst[@name='facets']/long[@name='missing'][.=1]\" // missing\n    );\n\n    // aggregations types for multi-valued number\n    client.testXQ(params(\"q\", \"*:*\", \"rows\", \"0\",\n        \"json.facet\", \"{unique:'unique(num_is)',hll:'hll(num_is)',vals:'countvals(num_is)',missing:'missing(num_is)'}\"),\n        \"/response/lst[@name='facets']/long[@name='count'][.=6]\", // count\n        \"/response/lst[@name='facets']/long[@name='unique'][.=7]\", // unique\n        \"/response/lst[@name='facets']/long[@name='hll'][.=7]\", // hll\n        \"/response/lst[@name='facets']/long[@name='vals'][.=9]\", // values\n        \"/response/lst[@name='facets']/long[@name='missing'][.=1]\" // missing\n    );\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"1c841e27891873cab110ebeb89f124a8ec470176":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["1c841e27891873cab110ebeb89f124a8ec470176"]},"commit2Childs":{"1c841e27891873cab110ebeb89f124a8ec470176":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["1c841e27891873cab110ebeb89f124a8ec470176"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}