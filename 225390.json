{"path":"solr/contrib/dataimporthandler/src/test/org/apache/solr/handler/dataimport/AbstractDIHJdbcTestCase#withChildEntities(boolean,boolean).mjava","commits":[{"id":"baf341ad3a1a8fb73fb37091af85f8aef0398367","date":1352222680,"type":0,"author":"James Dyer","isMerge":false,"pathNew":"solr/contrib/dataimporthandler/src/test/org/apache/solr/handler/dataimport/AbstractDIHJdbcTestCase#withChildEntities(boolean,boolean).mjava","pathOld":"/dev/null","sourceNew":"  protected void withChildEntities(boolean cached, boolean checkDatabaseRequests) throws Exception {\n    rootTransformerName = random().nextBoolean() ? null : \"AddAColumnTransformer\";\n    int numChildren = random().nextInt(1) + 1;\n    int numDatabaseRequests = 1;\n    if(underlyingDataModified) {\n      if (countryEntity) {\n        if (cached) {\n          numDatabaseRequests++;\n        } else {\n          numDatabaseRequests += totalPeople();\n        }\n      }\n      if (sportsEntity) {\n        if (cached) {\n          numDatabaseRequests++;\n        } else {\n          numDatabaseRequests += totalPeople();\n        }\n      }\n    } else {\n      countryEntity = true;\n      sportsEntity = true;\n      if(numChildren==1) {\n        countryEntity = random().nextBoolean();\n        sportsEntity = !countryEntity;      \n      }\n      if(countryEntity) {\n        countryTransformer = random().nextBoolean();\n        if(cached) {\n          numDatabaseRequests++;\n          countryCached = true;\n        } else {\n          numDatabaseRequests += totalPeople();\n        }\n      }\n      if(sportsEntity) {\n        sportsTransformer = random().nextBoolean();\n        if(cached) {\n          numDatabaseRequests++;\n          sportsCached = true;\n        } else {\n          numDatabaseRequests += totalPeople();\n        }\n      }\n    }\n    h.query(\"/dataimport\", generateRequest());\n    \n    assertQ(req(\"*:*\"), \"//*[@numFound='\" + (totalPeople()) + \"']\");\n    if(!underlyingDataModified && \"AddAColumnTransformer\".equals(rootTransformerName)) {\n      assertQ(req(\"AddAColumn_s:Added\"), \"//*[@numFound='\" + (totalPeople()) + \"']\");\n    }\n    if(countryEntity) {\n      if(personNameExists(\"Jayden\"))\n      {\n        String nrName = countryNameByCode(\"NP\");\n        if(nrName!=null && nrName.length()>0) {\n          assertQ(req(\"NAME_mult_s:Jayden\"), \n              \"//*[@numFound='1']\", \"//doc/str[@name='COUNTRY_NAME_s']='\" + nrName + \"'\");\n        }\n      }\n      String nrName = countryNameByCode(\"NR\");\n      int num = numberPeopleByCountryCode(\"NR\");\n      if(nrName!=null && num>0) { \n        assertQ(req(\"COUNTRY_CODES_mult_s:NR\"), \n            \"//*[@numFound='\" + num + \"']\", \"//doc/str[@name='COUNTRY_NAME_s']='\" + nrName + \"'\");        \n      }\n      if(countryTransformer && !underlyingDataModified) {\n        assertQ(req(\"countryAdded_s:country_added\"), \"//*[@numFound='\" + totalPeople() + \"']\");\n      }\n    }\n    if(sportsEntity) {\n      if(!underlyingDataModified) {\n        assertQ(req(\"SPORT_NAME_mult_s:Sailing\"), \"//*[@numFound='2']\");\n      }\n      String michaelsName = personNameById(3);\n      String[] michaelsSports = sportNamesByPersonId(3);\n      if(michaelsName != null && michaelsSports.length>0) { \n        String[] xpath = new String[michaelsSports.length + 1];\n        xpath[0] = \"//*[@numFound='1']\";\n        int i=1;\n        for(String ms : michaelsSports) {\n          xpath[i] = \"//doc/arr[@name='SPORT_NAME_mult_s']/str[\" + i + \"]='\" + ms + \"'\";\n          i++;\n        }\n        assertQ(req(\"NAME_mult_s:\" + michaelsName.replaceAll(\"\\\\W\", \"\\\\\\\\$0\")), xpath);\n      }\n      if (!underlyingDataModified && sportsTransformer) {\n        assertQ(req(\"sportsAdded_s:sport_added\"), \"//*[@numFound='\" + (totalPeople()) + \"']\");\n      }\n    }    \n    if(checkDatabaseRequests) {\n      Assert.assertTrue(\"Expecting \" + numDatabaseRequests\n          + \" database calls, but DIH reported \" + totalDatabaseRequests(),\n          totalDatabaseRequests() == numDatabaseRequests);\n    }\n  } \n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"478a4195ad791a1c920e4f595a91ca0af760d674","date":1352481474,"type":3,"author":"James Dyer","isMerge":false,"pathNew":"solr/contrib/dataimporthandler/src/test/org/apache/solr/handler/dataimport/AbstractDIHJdbcTestCase#withChildEntities(boolean,boolean).mjava","pathOld":"solr/contrib/dataimporthandler/src/test/org/apache/solr/handler/dataimport/AbstractDIHJdbcTestCase#withChildEntities(boolean,boolean).mjava","sourceNew":"  protected void withChildEntities(boolean cached, boolean checkDatabaseRequests) throws Exception {\n    rootTransformerName = random().nextBoolean() ? null : \"AddAColumnTransformer\";\n    int numChildren = random().nextInt(1) + 1;\n    int numDatabaseRequests = 1;\n    if(underlyingDataModified) {\n      if (countryEntity) {\n        if (cached) {\n          numDatabaseRequests++;\n        } else {\n          numDatabaseRequests += totalPeople();\n        }\n      }\n      if (sportsEntity) {\n        if (cached) {\n          numDatabaseRequests++;\n        } else {\n          numDatabaseRequests += totalPeople();\n        }\n      }\n    } else {\n      countryEntity = true;\n      sportsEntity = true;\n      if(numChildren==1) {\n        countryEntity = random().nextBoolean();\n        sportsEntity = !countryEntity;      \n      }\n      if(countryEntity) {\n        countryTransformer = random().nextBoolean();\n        if(cached) {\n          numDatabaseRequests++;\n          countryCached = true;\n        } else {\n          numDatabaseRequests += totalPeople();\n        }\n      }\n      if(sportsEntity) {\n        sportsTransformer = random().nextBoolean();\n        if(cached) {\n          numDatabaseRequests++;\n          sportsCached = true;\n        } else {\n          numDatabaseRequests += totalPeople();\n        }\n      }\n    }\n    h.query(\"/dataimport\", generateRequest());\n    \n    assertQ(\"There should be 1 document per person in the database: \"\n        + totalPeople(), req(\"*:*\"), \"//*[@numFound='\" + (totalPeople()) + \"']\");\n    if(!underlyingDataModified && \"AddAColumnTransformer\".equals(rootTransformerName)) {\n      assertQ(\"There should be 1 document with a transformer-added column per person is the database: \"\n          + totalPeople(), req(\"AddAColumn_s:Added\"), \"//*[@numFound='\" + (totalPeople()) + \"']\");\n    }\n    if(countryEntity) {\n      if(personNameExists(\"Jayden\"))\n      {\n        String nrName = countryNameByCode(\"NP\");\n        if(nrName!=null && nrName.length()>0) {\n          assertQ(req(\"NAME_mult_s:Jayden\"), \n              \"//*[@numFound='1']\", \"//doc/str[@name='COUNTRY_NAME_s']='\" + nrName + \"'\");\n        }\n      }\n      String nrName = countryNameByCode(\"NR\");\n      int num = numberPeopleByCountryCode(\"NR\");\n      if(nrName!=null && num>0) { \n        assertQ(req(\"COUNTRY_CODES_mult_s:NR\"), \n            \"//*[@numFound='\" + num + \"']\", \"//doc/str[@name='COUNTRY_NAME_s']='\" + nrName + \"'\");        \n      }\n      if(countryTransformer && !underlyingDataModified) {\n        assertQ(req(\"countryAdded_s:country_added\"), \"//*[@numFound='\" + totalPeople() + \"']\");\n      }\n    }\n    if(sportsEntity) {\n      if(!underlyingDataModified) {\n        assertQ(req(\"SPORT_NAME_mult_s:Sailing\"), \"//*[@numFound='2']\");\n      }\n      String michaelsName = personNameById(3);\n      String[] michaelsSports = sportNamesByPersonId(3);\n      if(michaelsName != null && michaelsSports.length>0) { \n        String[] xpath = new String[michaelsSports.length + 1];\n        xpath[0] = \"//*[@numFound='1']\";\n        int i=1;\n        for(String ms : michaelsSports) {\n          xpath[i] = \"//doc/arr[@name='SPORT_NAME_mult_s']/str[\" + i + \"]='\" + ms + \"'\";\n          i++;\n        }\n        assertQ(req(\"NAME_mult_s:\" + michaelsName.replaceAll(\"\\\\W\", \"\\\\\\\\$0\")), xpath);\n      }\n      if (!underlyingDataModified && sportsTransformer) {\n        assertQ(req(\"sportsAdded_s:sport_added\"), \"//*[@numFound='\" + (totalPeople()) + \"']\");\n      }\n    }    \n    if(checkDatabaseRequests) {\n      Assert.assertTrue(\"Expecting \" + numDatabaseRequests\n          + \" database calls, but DIH reported \" + totalDatabaseRequests(),\n          totalDatabaseRequests() == numDatabaseRequests);\n    }\n  } \n\n","sourceOld":"  protected void withChildEntities(boolean cached, boolean checkDatabaseRequests) throws Exception {\n    rootTransformerName = random().nextBoolean() ? null : \"AddAColumnTransformer\";\n    int numChildren = random().nextInt(1) + 1;\n    int numDatabaseRequests = 1;\n    if(underlyingDataModified) {\n      if (countryEntity) {\n        if (cached) {\n          numDatabaseRequests++;\n        } else {\n          numDatabaseRequests += totalPeople();\n        }\n      }\n      if (sportsEntity) {\n        if (cached) {\n          numDatabaseRequests++;\n        } else {\n          numDatabaseRequests += totalPeople();\n        }\n      }\n    } else {\n      countryEntity = true;\n      sportsEntity = true;\n      if(numChildren==1) {\n        countryEntity = random().nextBoolean();\n        sportsEntity = !countryEntity;      \n      }\n      if(countryEntity) {\n        countryTransformer = random().nextBoolean();\n        if(cached) {\n          numDatabaseRequests++;\n          countryCached = true;\n        } else {\n          numDatabaseRequests += totalPeople();\n        }\n      }\n      if(sportsEntity) {\n        sportsTransformer = random().nextBoolean();\n        if(cached) {\n          numDatabaseRequests++;\n          sportsCached = true;\n        } else {\n          numDatabaseRequests += totalPeople();\n        }\n      }\n    }\n    h.query(\"/dataimport\", generateRequest());\n    \n    assertQ(req(\"*:*\"), \"//*[@numFound='\" + (totalPeople()) + \"']\");\n    if(!underlyingDataModified && \"AddAColumnTransformer\".equals(rootTransformerName)) {\n      assertQ(req(\"AddAColumn_s:Added\"), \"//*[@numFound='\" + (totalPeople()) + \"']\");\n    }\n    if(countryEntity) {\n      if(personNameExists(\"Jayden\"))\n      {\n        String nrName = countryNameByCode(\"NP\");\n        if(nrName!=null && nrName.length()>0) {\n          assertQ(req(\"NAME_mult_s:Jayden\"), \n              \"//*[@numFound='1']\", \"//doc/str[@name='COUNTRY_NAME_s']='\" + nrName + \"'\");\n        }\n      }\n      String nrName = countryNameByCode(\"NR\");\n      int num = numberPeopleByCountryCode(\"NR\");\n      if(nrName!=null && num>0) { \n        assertQ(req(\"COUNTRY_CODES_mult_s:NR\"), \n            \"//*[@numFound='\" + num + \"']\", \"//doc/str[@name='COUNTRY_NAME_s']='\" + nrName + \"'\");        \n      }\n      if(countryTransformer && !underlyingDataModified) {\n        assertQ(req(\"countryAdded_s:country_added\"), \"//*[@numFound='\" + totalPeople() + \"']\");\n      }\n    }\n    if(sportsEntity) {\n      if(!underlyingDataModified) {\n        assertQ(req(\"SPORT_NAME_mult_s:Sailing\"), \"//*[@numFound='2']\");\n      }\n      String michaelsName = personNameById(3);\n      String[] michaelsSports = sportNamesByPersonId(3);\n      if(michaelsName != null && michaelsSports.length>0) { \n        String[] xpath = new String[michaelsSports.length + 1];\n        xpath[0] = \"//*[@numFound='1']\";\n        int i=1;\n        for(String ms : michaelsSports) {\n          xpath[i] = \"//doc/arr[@name='SPORT_NAME_mult_s']/str[\" + i + \"]='\" + ms + \"'\";\n          i++;\n        }\n        assertQ(req(\"NAME_mult_s:\" + michaelsName.replaceAll(\"\\\\W\", \"\\\\\\\\$0\")), xpath);\n      }\n      if (!underlyingDataModified && sportsTransformer) {\n        assertQ(req(\"sportsAdded_s:sport_added\"), \"//*[@numFound='\" + (totalPeople()) + \"']\");\n      }\n    }    \n    if(checkDatabaseRequests) {\n      Assert.assertTrue(\"Expecting \" + numDatabaseRequests\n          + \" database calls, but DIH reported \" + totalDatabaseRequests(),\n          totalDatabaseRequests() == numDatabaseRequests);\n    }\n  } \n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"b4804614e0358954d5d9f51128fcf3cd79e6e25b","date":1352831451,"type":5,"author":"James Dyer","isMerge":false,"pathNew":"solr/contrib/dataimporthandler/src/test/org/apache/solr/handler/dataimport/AbstractSqlEntityProcessorTestCase#withChildEntities(boolean,boolean).mjava","pathOld":"solr/contrib/dataimporthandler/src/test/org/apache/solr/handler/dataimport/AbstractDIHJdbcTestCase#withChildEntities(boolean,boolean).mjava","sourceNew":"  protected void withChildEntities(boolean cached, boolean checkDatabaseRequests)\n      throws Exception {\n    rootTransformerName = random().nextBoolean() ? null\n        : \"AddAColumnTransformer\";\n    int numChildren = random().nextInt(1) + 1;\n    int numDatabaseRequests = 1;\n    if (underlyingDataModified) {\n      if (countryEntity) {\n        if (cached) {\n          numDatabaseRequests++;\n        } else {\n          numDatabaseRequests += totalPeople();\n        }\n      }\n      if (sportsEntity) {\n        if (cached) {\n          numDatabaseRequests++;\n        } else {\n          numDatabaseRequests += totalPeople();\n        }\n      }\n    } else {\n      countryEntity = true;\n      sportsEntity = true;\n      if (numChildren == 1) {\n        countryEntity = random().nextBoolean();\n        sportsEntity = !countryEntity;\n      }\n      if (countryEntity) {\n        countryTransformer = random().nextBoolean();\n        if (cached) {\n          numDatabaseRequests++;\n          countryCached = true;\n        } else {\n          numDatabaseRequests += totalPeople();\n        }\n      }\n      if (sportsEntity) {\n        sportsTransformer = random().nextBoolean();\n        if (cached) {\n          numDatabaseRequests++;\n          sportsCached = true;\n        } else {\n          numDatabaseRequests += totalPeople();\n        }\n      }\n    }\n    h.query(\"/dataimport\", generateRequest());\n    \n    assertQ(\"There should be 1 document per person in the database: \"\n        + totalPeople(), req(\"*:*\"), \"//*[@numFound='\" + (totalPeople()) + \"']\");\n    if (!underlyingDataModified\n        && \"AddAColumnTransformer\".equals(rootTransformerName)) {\n      assertQ(\n          \"There should be 1 document with a transformer-added column per person is the database: \"\n              + totalPeople(), req(\"AddAColumn_s:Added\"), \"//*[@numFound='\"\n              + (totalPeople()) + \"']\");\n    }\n    if (countryEntity) {\n      if (personNameExists(\"Jayden\")) {\n        String nrName = countryNameByCode(\"NP\");\n        if (nrName != null && nrName.length() > 0) {\n          assertQ(req(\"NAME_mult_s:Jayden\"), \"//*[@numFound='1']\",\n              \"//doc/str[@name='COUNTRY_NAME_s']='\" + nrName + \"'\");\n        }\n      }\n      String nrName = countryNameByCode(\"NR\");\n      int num = numberPeopleByCountryCode(\"NR\");\n      if (nrName != null && num > 0) {\n        assertQ(req(\"COUNTRY_CODES_mult_s:NR\"), \"//*[@numFound='\" + num + \"']\",\n            \"//doc/str[@name='COUNTRY_NAME_s']='\" + nrName + \"'\");\n      }\n      if (countryTransformer && !underlyingDataModified) {\n        assertQ(req(\"countryAdded_s:country_added\"), \"//*[@numFound='\"\n            + totalPeople() + \"']\");\n      }\n    }\n    if (sportsEntity) {\n      if (!underlyingDataModified) {\n        assertQ(req(\"SPORT_NAME_mult_s:Sailing\"), \"//*[@numFound='2']\");\n      }\n      String michaelsName = personNameById(3);\n      String[] michaelsSports = sportNamesByPersonId(3);\n      if (michaelsName != null && michaelsSports.length > 0) {\n        String[] xpath = new String[michaelsSports.length + 1];\n        xpath[0] = \"//*[@numFound='1']\";\n        int i = 1;\n        for (String ms : michaelsSports) {\n          xpath[i] = \"//doc/arr[@name='SPORT_NAME_mult_s']/str[\" + i + \"]='\"\n              + ms + \"'\";\n          i++;\n        }\n        assertQ(req(\"NAME_mult_s:\" + michaelsName.replaceAll(\"\\\\W\", \"\\\\\\\\$0\")),\n            xpath);\n      }\n      if (!underlyingDataModified && sportsTransformer) {\n        assertQ(req(\"sportsAdded_s:sport_added\"), \"//*[@numFound='\"\n            + (totalPeople()) + \"']\");\n      }\n    }\n    if (checkDatabaseRequests) {\n      Assert.assertTrue(\"Expecting \" + numDatabaseRequests\n          + \" database calls, but DIH reported \" + totalDatabaseRequests(),\n          totalDatabaseRequests() == numDatabaseRequests);\n    }\n  }\n\n","sourceOld":"  protected void withChildEntities(boolean cached, boolean checkDatabaseRequests) throws Exception {\n    rootTransformerName = random().nextBoolean() ? null : \"AddAColumnTransformer\";\n    int numChildren = random().nextInt(1) + 1;\n    int numDatabaseRequests = 1;\n    if(underlyingDataModified) {\n      if (countryEntity) {\n        if (cached) {\n          numDatabaseRequests++;\n        } else {\n          numDatabaseRequests += totalPeople();\n        }\n      }\n      if (sportsEntity) {\n        if (cached) {\n          numDatabaseRequests++;\n        } else {\n          numDatabaseRequests += totalPeople();\n        }\n      }\n    } else {\n      countryEntity = true;\n      sportsEntity = true;\n      if(numChildren==1) {\n        countryEntity = random().nextBoolean();\n        sportsEntity = !countryEntity;      \n      }\n      if(countryEntity) {\n        countryTransformer = random().nextBoolean();\n        if(cached) {\n          numDatabaseRequests++;\n          countryCached = true;\n        } else {\n          numDatabaseRequests += totalPeople();\n        }\n      }\n      if(sportsEntity) {\n        sportsTransformer = random().nextBoolean();\n        if(cached) {\n          numDatabaseRequests++;\n          sportsCached = true;\n        } else {\n          numDatabaseRequests += totalPeople();\n        }\n      }\n    }\n    h.query(\"/dataimport\", generateRequest());\n    \n    assertQ(\"There should be 1 document per person in the database: \"\n        + totalPeople(), req(\"*:*\"), \"//*[@numFound='\" + (totalPeople()) + \"']\");\n    if(!underlyingDataModified && \"AddAColumnTransformer\".equals(rootTransformerName)) {\n      assertQ(\"There should be 1 document with a transformer-added column per person is the database: \"\n          + totalPeople(), req(\"AddAColumn_s:Added\"), \"//*[@numFound='\" + (totalPeople()) + \"']\");\n    }\n    if(countryEntity) {\n      if(personNameExists(\"Jayden\"))\n      {\n        String nrName = countryNameByCode(\"NP\");\n        if(nrName!=null && nrName.length()>0) {\n          assertQ(req(\"NAME_mult_s:Jayden\"), \n              \"//*[@numFound='1']\", \"//doc/str[@name='COUNTRY_NAME_s']='\" + nrName + \"'\");\n        }\n      }\n      String nrName = countryNameByCode(\"NR\");\n      int num = numberPeopleByCountryCode(\"NR\");\n      if(nrName!=null && num>0) { \n        assertQ(req(\"COUNTRY_CODES_mult_s:NR\"), \n            \"//*[@numFound='\" + num + \"']\", \"//doc/str[@name='COUNTRY_NAME_s']='\" + nrName + \"'\");        \n      }\n      if(countryTransformer && !underlyingDataModified) {\n        assertQ(req(\"countryAdded_s:country_added\"), \"//*[@numFound='\" + totalPeople() + \"']\");\n      }\n    }\n    if(sportsEntity) {\n      if(!underlyingDataModified) {\n        assertQ(req(\"SPORT_NAME_mult_s:Sailing\"), \"//*[@numFound='2']\");\n      }\n      String michaelsName = personNameById(3);\n      String[] michaelsSports = sportNamesByPersonId(3);\n      if(michaelsName != null && michaelsSports.length>0) { \n        String[] xpath = new String[michaelsSports.length + 1];\n        xpath[0] = \"//*[@numFound='1']\";\n        int i=1;\n        for(String ms : michaelsSports) {\n          xpath[i] = \"//doc/arr[@name='SPORT_NAME_mult_s']/str[\" + i + \"]='\" + ms + \"'\";\n          i++;\n        }\n        assertQ(req(\"NAME_mult_s:\" + michaelsName.replaceAll(\"\\\\W\", \"\\\\\\\\$0\")), xpath);\n      }\n      if (!underlyingDataModified && sportsTransformer) {\n        assertQ(req(\"sportsAdded_s:sport_added\"), \"//*[@numFound='\" + (totalPeople()) + \"']\");\n      }\n    }    \n    if(checkDatabaseRequests) {\n      Assert.assertTrue(\"Expecting \" + numDatabaseRequests\n          + \" database calls, but DIH reported \" + totalDatabaseRequests(),\n          totalDatabaseRequests() == numDatabaseRequests);\n    }\n  } \n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"407687e67faf6e1f02a211ca078d8e3eed631027","date":1355157407,"type":4,"author":"Robert Muir","isMerge":true,"pathNew":"/dev/null","pathOld":"solr/contrib/dataimporthandler/src/test/org/apache/solr/handler/dataimport/AbstractDIHJdbcTestCase#withChildEntities(boolean,boolean).mjava","sourceNew":null,"sourceOld":"  protected void withChildEntities(boolean cached, boolean checkDatabaseRequests) throws Exception {\n    rootTransformerName = random().nextBoolean() ? null : \"AddAColumnTransformer\";\n    int numChildren = random().nextInt(1) + 1;\n    int numDatabaseRequests = 1;\n    if(underlyingDataModified) {\n      if (countryEntity) {\n        if (cached) {\n          numDatabaseRequests++;\n        } else {\n          numDatabaseRequests += totalPeople();\n        }\n      }\n      if (sportsEntity) {\n        if (cached) {\n          numDatabaseRequests++;\n        } else {\n          numDatabaseRequests += totalPeople();\n        }\n      }\n    } else {\n      countryEntity = true;\n      sportsEntity = true;\n      if(numChildren==1) {\n        countryEntity = random().nextBoolean();\n        sportsEntity = !countryEntity;      \n      }\n      if(countryEntity) {\n        countryTransformer = random().nextBoolean();\n        if(cached) {\n          numDatabaseRequests++;\n          countryCached = true;\n        } else {\n          numDatabaseRequests += totalPeople();\n        }\n      }\n      if(sportsEntity) {\n        sportsTransformer = random().nextBoolean();\n        if(cached) {\n          numDatabaseRequests++;\n          sportsCached = true;\n        } else {\n          numDatabaseRequests += totalPeople();\n        }\n      }\n    }\n    h.query(\"/dataimport\", generateRequest());\n    \n    assertQ(req(\"*:*\"), \"//*[@numFound='\" + (totalPeople()) + \"']\");\n    if(!underlyingDataModified && \"AddAColumnTransformer\".equals(rootTransformerName)) {\n      assertQ(req(\"AddAColumn_s:Added\"), \"//*[@numFound='\" + (totalPeople()) + \"']\");\n    }\n    if(countryEntity) {\n      if(personNameExists(\"Jayden\"))\n      {\n        String nrName = countryNameByCode(\"NP\");\n        if(nrName!=null && nrName.length()>0) {\n          assertQ(req(\"NAME_mult_s:Jayden\"), \n              \"//*[@numFound='1']\", \"//doc/str[@name='COUNTRY_NAME_s']='\" + nrName + \"'\");\n        }\n      }\n      String nrName = countryNameByCode(\"NR\");\n      int num = numberPeopleByCountryCode(\"NR\");\n      if(nrName!=null && num>0) { \n        assertQ(req(\"COUNTRY_CODES_mult_s:NR\"), \n            \"//*[@numFound='\" + num + \"']\", \"//doc/str[@name='COUNTRY_NAME_s']='\" + nrName + \"'\");        \n      }\n      if(countryTransformer && !underlyingDataModified) {\n        assertQ(req(\"countryAdded_s:country_added\"), \"//*[@numFound='\" + totalPeople() + \"']\");\n      }\n    }\n    if(sportsEntity) {\n      if(!underlyingDataModified) {\n        assertQ(req(\"SPORT_NAME_mult_s:Sailing\"), \"//*[@numFound='2']\");\n      }\n      String michaelsName = personNameById(3);\n      String[] michaelsSports = sportNamesByPersonId(3);\n      if(michaelsName != null && michaelsSports.length>0) { \n        String[] xpath = new String[michaelsSports.length + 1];\n        xpath[0] = \"//*[@numFound='1']\";\n        int i=1;\n        for(String ms : michaelsSports) {\n          xpath[i] = \"//doc/arr[@name='SPORT_NAME_mult_s']/str[\" + i + \"]='\" + ms + \"'\";\n          i++;\n        }\n        assertQ(req(\"NAME_mult_s:\" + michaelsName.replaceAll(\"\\\\W\", \"\\\\\\\\$0\")), xpath);\n      }\n      if (!underlyingDataModified && sportsTransformer) {\n        assertQ(req(\"sportsAdded_s:sport_added\"), \"//*[@numFound='\" + (totalPeople()) + \"']\");\n      }\n    }    \n    if(checkDatabaseRequests) {\n      Assert.assertTrue(\"Expecting \" + numDatabaseRequests\n          + \" database calls, but DIH reported \" + totalDatabaseRequests(),\n          totalDatabaseRequests() == numDatabaseRequests);\n    }\n  } \n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"b4804614e0358954d5d9f51128fcf3cd79e6e25b":["478a4195ad791a1c920e4f595a91ca0af760d674"],"478a4195ad791a1c920e4f595a91ca0af760d674":["baf341ad3a1a8fb73fb37091af85f8aef0398367"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"407687e67faf6e1f02a211ca078d8e3eed631027":["baf341ad3a1a8fb73fb37091af85f8aef0398367","b4804614e0358954d5d9f51128fcf3cd79e6e25b"],"baf341ad3a1a8fb73fb37091af85f8aef0398367":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["b4804614e0358954d5d9f51128fcf3cd79e6e25b"]},"commit2Childs":{"b4804614e0358954d5d9f51128fcf3cd79e6e25b":["407687e67faf6e1f02a211ca078d8e3eed631027","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"478a4195ad791a1c920e4f595a91ca0af760d674":["b4804614e0358954d5d9f51128fcf3cd79e6e25b"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["baf341ad3a1a8fb73fb37091af85f8aef0398367"],"407687e67faf6e1f02a211ca078d8e3eed631027":[],"baf341ad3a1a8fb73fb37091af85f8aef0398367":["478a4195ad791a1c920e4f595a91ca0af760d674","407687e67faf6e1f02a211ca078d8e3eed631027"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["407687e67faf6e1f02a211ca078d8e3eed631027","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}