{"path":"solr/core/src/java/org/apache/solr/update/processor/DistributedUpdateProcessor#doLocalCommit(CommitUpdateCommand).mjava","commits":[{"id":"2a4f729cab8ab6d4bf8365940c6ee4e17a0cfdd9","date":1371479482,"type":0,"author":"Mark Robert Miller","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/update/processor/DistributedUpdateProcessor#doLocalCommit(CommitUpdateCommand).mjava","pathOld":"/dev/null","sourceNew":"  private void doLocalCommit(CommitUpdateCommand cmd) throws IOException {\n    if (vinfo != null) {\n      vinfo.lockForUpdate();\n    }\n    try {\n\n      if (ulog == null || ulog.getState() == UpdateLog.State.ACTIVE || (cmd.getFlags() & UpdateCommand.REPLAY) != 0) {\n        super.processCommit(cmd);\n      } else {\n        log.info(\"Ignoring commit while not ACTIVE - state: \" + ulog.getState() + \" replay:\" + (cmd.getFlags() & UpdateCommand.REPLAY));\n      }\n\n    } finally {\n      if (vinfo != null) {\n        vinfo.unlockForUpdate();\n      }\n    }\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"37a0f60745e53927c4c876cfe5b5a58170f0646c","date":1373994005,"type":0,"author":"Han Jiang","isMerge":true,"pathNew":"solr/core/src/java/org/apache/solr/update/processor/DistributedUpdateProcessor#doLocalCommit(CommitUpdateCommand).mjava","pathOld":"/dev/null","sourceNew":"  private void doLocalCommit(CommitUpdateCommand cmd) throws IOException {\n    if (vinfo != null) {\n      vinfo.lockForUpdate();\n    }\n    try {\n\n      if (ulog == null || ulog.getState() == UpdateLog.State.ACTIVE || (cmd.getFlags() & UpdateCommand.REPLAY) != 0) {\n        super.processCommit(cmd);\n      } else {\n        log.info(\"Ignoring commit while not ACTIVE - state: \" + ulog.getState() + \" replay:\" + (cmd.getFlags() & UpdateCommand.REPLAY));\n      }\n\n    } finally {\n      if (vinfo != null) {\n        vinfo.unlockForUpdate();\n      }\n    }\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"d2fe4bec424a892e2ae19e248c23e05b32289646","date":1440101327,"type":3,"author":"Christine Poerschke","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/update/processor/DistributedUpdateProcessor#doLocalCommit(CommitUpdateCommand).mjava","pathOld":"solr/core/src/java/org/apache/solr/update/processor/DistributedUpdateProcessor#doLocalCommit(CommitUpdateCommand).mjava","sourceNew":"  private void doLocalCommit(CommitUpdateCommand cmd) throws IOException {\n    if (vinfo != null) {\n      vinfo.lockForUpdate();\n    }\n    try {\n\n      if (ulog == null || ulog.getState() == UpdateLog.State.ACTIVE || (cmd.getFlags() & UpdateCommand.REPLAY) != 0) {\n        super.processCommit(cmd);\n      } else {\n        log.info(\"Ignoring commit while not ACTIVE - state: \" + ulog.getState() + \" replay: \" + ((cmd.getFlags() & UpdateCommand.REPLAY) != 0));\n      }\n\n    } finally {\n      if (vinfo != null) {\n        vinfo.unlockForUpdate();\n      }\n    }\n  }\n\n","sourceOld":"  private void doLocalCommit(CommitUpdateCommand cmd) throws IOException {\n    if (vinfo != null) {\n      vinfo.lockForUpdate();\n    }\n    try {\n\n      if (ulog == null || ulog.getState() == UpdateLog.State.ACTIVE || (cmd.getFlags() & UpdateCommand.REPLAY) != 0) {\n        super.processCommit(cmd);\n      } else {\n        log.info(\"Ignoring commit while not ACTIVE - state: \" + ulog.getState() + \" replay:\" + (cmd.getFlags() & UpdateCommand.REPLAY));\n      }\n\n    } finally {\n      if (vinfo != null) {\n        vinfo.unlockForUpdate();\n      }\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"9d70e774cb25c8a8d2c3e5e84200f235f9168d87","date":1553016391,"type":3,"author":"Bar Rotstein","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/update/processor/DistributedUpdateProcessor#doLocalCommit(CommitUpdateCommand).mjava","pathOld":"solr/core/src/java/org/apache/solr/update/processor/DistributedUpdateProcessor#doLocalCommit(CommitUpdateCommand).mjava","sourceNew":"  protected void doLocalCommit(CommitUpdateCommand cmd) throws IOException {\n    if (vinfo != null) {\n      long commitVersion = vinfo.getNewClock();\n      cmd.setVersion(commitVersion);\n      vinfo.lockForUpdate();\n    }\n    try {\n\n      if (ulog == null || ulog.getState() == UpdateLog.State.ACTIVE || (cmd.getFlags() & UpdateCommand.REPLAY) != 0) {\n        super.processCommit(cmd);\n      } else {\n        log.info(\"Ignoring commit while not ACTIVE - state: \" + ulog.getState() + \" replay: \" + ((cmd.getFlags() & UpdateCommand.REPLAY) != 0));\n      }\n\n    } finally {\n      if (vinfo != null) {\n        vinfo.unlockForUpdate();\n      }\n    }\n  }\n\n","sourceOld":"  private void doLocalCommit(CommitUpdateCommand cmd) throws IOException {\n    if (vinfo != null) {\n      vinfo.lockForUpdate();\n    }\n    try {\n\n      if (ulog == null || ulog.getState() == UpdateLog.State.ACTIVE || (cmd.getFlags() & UpdateCommand.REPLAY) != 0) {\n        super.processCommit(cmd);\n      } else {\n        log.info(\"Ignoring commit while not ACTIVE - state: \" + ulog.getState() + \" replay: \" + ((cmd.getFlags() & UpdateCommand.REPLAY) != 0));\n      }\n\n    } finally {\n      if (vinfo != null) {\n        vinfo.unlockForUpdate();\n      }\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"740d649f013f07efbeb73ca854f106c60166e7c0","date":1587431295,"type":3,"author":"Erick Erickson","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/update/processor/DistributedUpdateProcessor#doLocalCommit(CommitUpdateCommand).mjava","pathOld":"solr/core/src/java/org/apache/solr/update/processor/DistributedUpdateProcessor#doLocalCommit(CommitUpdateCommand).mjava","sourceNew":"  protected void doLocalCommit(CommitUpdateCommand cmd) throws IOException {\n    if (vinfo != null) {\n      long commitVersion = vinfo.getNewClock();\n      cmd.setVersion(commitVersion);\n      vinfo.lockForUpdate();\n    }\n    try {\n\n      if (ulog == null || ulog.getState() == UpdateLog.State.ACTIVE || (cmd.getFlags() & UpdateCommand.REPLAY) != 0) {\n        super.processCommit(cmd);\n      } else {\n        if (log.isInfoEnabled()) {\n          log.info(\"Ignoring commit while not ACTIVE - state: {} replay: {}\"\n              , ulog.getState(), ((cmd.getFlags() & UpdateCommand.REPLAY) != 0));\n        }\n      }\n\n    } finally {\n      if (vinfo != null) {\n        vinfo.unlockForUpdate();\n      }\n    }\n  }\n\n","sourceOld":"  protected void doLocalCommit(CommitUpdateCommand cmd) throws IOException {\n    if (vinfo != null) {\n      long commitVersion = vinfo.getNewClock();\n      cmd.setVersion(commitVersion);\n      vinfo.lockForUpdate();\n    }\n    try {\n\n      if (ulog == null || ulog.getState() == UpdateLog.State.ACTIVE || (cmd.getFlags() & UpdateCommand.REPLAY) != 0) {\n        super.processCommit(cmd);\n      } else {\n        log.info(\"Ignoring commit while not ACTIVE - state: \" + ulog.getState() + \" replay: \" + ((cmd.getFlags() & UpdateCommand.REPLAY) != 0));\n      }\n\n    } finally {\n      if (vinfo != null) {\n        vinfo.unlockForUpdate();\n      }\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"740d649f013f07efbeb73ca854f106c60166e7c0":["9d70e774cb25c8a8d2c3e5e84200f235f9168d87"],"2a4f729cab8ab6d4bf8365940c6ee4e17a0cfdd9":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"37a0f60745e53927c4c876cfe5b5a58170f0646c":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85","2a4f729cab8ab6d4bf8365940c6ee4e17a0cfdd9"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"d2fe4bec424a892e2ae19e248c23e05b32289646":["2a4f729cab8ab6d4bf8365940c6ee4e17a0cfdd9"],"9d70e774cb25c8a8d2c3e5e84200f235f9168d87":["d2fe4bec424a892e2ae19e248c23e05b32289646"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["740d649f013f07efbeb73ca854f106c60166e7c0"]},"commit2Childs":{"740d649f013f07efbeb73ca854f106c60166e7c0":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"2a4f729cab8ab6d4bf8365940c6ee4e17a0cfdd9":["37a0f60745e53927c4c876cfe5b5a58170f0646c","d2fe4bec424a892e2ae19e248c23e05b32289646"],"37a0f60745e53927c4c876cfe5b5a58170f0646c":[],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["2a4f729cab8ab6d4bf8365940c6ee4e17a0cfdd9","37a0f60745e53927c4c876cfe5b5a58170f0646c"],"d2fe4bec424a892e2ae19e248c23e05b32289646":["9d70e774cb25c8a8d2c3e5e84200f235f9168d87"],"9d70e774cb25c8a8d2c3e5e84200f235f9168d87":["740d649f013f07efbeb73ca854f106c60166e7c0"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["37a0f60745e53927c4c876cfe5b5a58170f0646c","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}