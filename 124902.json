{"path":"lucene/facet/src/test/org/apache/lucene/facet/range/TestRangeAccumulator#testBasicFloat().mjava","commits":[{"id":"2062967ab57824b59d116b38d53d2058ac7e4592","date":1367320813,"type":0,"author":"Michael McCandless","isMerge":false,"pathNew":"lucene/facet/src/test/org/apache/lucene/facet/range/TestRangeAccumulator#testBasicFloat().mjava","pathOld":"/dev/null","sourceNew":"  public void testBasicFloat() throws Exception {\n    Directory d = newDirectory();\n    RandomIndexWriter w = new RandomIndexWriter(random(), d);\n    Document doc = new Document();\n    FloatDocValuesField field = new FloatDocValuesField(\"field\", 0.0f);\n    doc.add(field);\n    for(long l=0;l<100;l++) {\n      field.setFloatValue((float) l);\n      w.addDocument(doc);\n    }\n\n    IndexReader r = w.getReader();\n    w.close();\n\n    FacetSearchParams fsp = new FacetSearchParams(\n                                new RangeFacetRequest<FloatRange>(\"field\",\n                                                      new FloatRange(\"less than 10\", 0.0f, true, 10.0f, false),\n                                                      new FloatRange(\"less than or equal to 10\", 0.0f, true, 10.0f, true),\n                                                      new FloatRange(\"over 90\", 90.0f, false, 100.0f, false),\n                                                      new FloatRange(\"90 or above\", 90.0f, true, 100.0f, false),\n                                                      new FloatRange(\"over 1000\", 1000.0f, false, Float.POSITIVE_INFINITY, false)));\n\n    RangeAccumulator a = new RangeAccumulator(fsp, r);\n    \n    FacetsCollector fc = FacetsCollector.create(a);\n\n    IndexSearcher s = newSearcher(r);\n    s.search(new MatchAllDocsQuery(), fc);\n    List<FacetResult> result = fc.getFacetResults();\n    assertEquals(1, result.size());\n    assertEquals(\"field (0)\\n  less than 10 (10)\\n  less than or equal to 10 (11)\\n  over 90 (9)\\n  90 or above (10)\\n  over 1000 (0)\\n\", FacetTestUtils.toSimpleString(result.get(0)));\n    \n    r.close();\n    d.close();\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"6249cba93d7ad1bf6f5a225c34fbe3d547ed9f49","date":1375103250,"type":3,"author":"Shai Erera","isMerge":false,"pathNew":"lucene/facet/src/test/org/apache/lucene/facet/range/TestRangeAccumulator#testBasicFloat().mjava","pathOld":"lucene/facet/src/test/org/apache/lucene/facet/range/TestRangeAccumulator#testBasicFloat().mjava","sourceNew":"  public void testBasicFloat() throws Exception {\n    Directory d = newDirectory();\n    RandomIndexWriter w = new RandomIndexWriter(random(), d);\n    Document doc = new Document();\n    FloatDocValuesField field = new FloatDocValuesField(\"field\", 0.0f);\n    doc.add(field);\n    for(long l=0;l<100;l++) {\n      field.setFloatValue(l);\n      w.addDocument(doc);\n    }\n\n    IndexReader r = w.getReader();\n    w.close();\n\n    RangeAccumulator a = new RangeAccumulator(new RangeFacetRequest<FloatRange>(\"field\",\n        new FloatRange(\"less than 10\", 0.0f, true, 10.0f, false),\n        new FloatRange(\"less than or equal to 10\", 0.0f, true, 10.0f, true),\n        new FloatRange(\"over 90\", 90.0f, false, 100.0f, false),\n        new FloatRange(\"90 or above\", 90.0f, true, 100.0f, false),\n        new FloatRange(\"over 1000\", 1000.0f, false, Float.POSITIVE_INFINITY, false)));\n    \n    FacetsCollector fc = FacetsCollector.create(a);\n\n    IndexSearcher s = newSearcher(r);\n    s.search(new MatchAllDocsQuery(), fc);\n    List<FacetResult> result = fc.getFacetResults();\n    assertEquals(1, result.size());\n    assertEquals(\"field (0)\\n  less than 10 (10)\\n  less than or equal to 10 (11)\\n  over 90 (9)\\n  90 or above (10)\\n  over 1000 (0)\\n\", FacetTestUtils.toSimpleString(result.get(0)));\n    \n    r.close();\n    d.close();\n  }\n\n","sourceOld":"  public void testBasicFloat() throws Exception {\n    Directory d = newDirectory();\n    RandomIndexWriter w = new RandomIndexWriter(random(), d);\n    Document doc = new Document();\n    FloatDocValuesField field = new FloatDocValuesField(\"field\", 0.0f);\n    doc.add(field);\n    for(long l=0;l<100;l++) {\n      field.setFloatValue((float) l);\n      w.addDocument(doc);\n    }\n\n    IndexReader r = w.getReader();\n    w.close();\n\n    FacetSearchParams fsp = new FacetSearchParams(\n                                new RangeFacetRequest<FloatRange>(\"field\",\n                                                      new FloatRange(\"less than 10\", 0.0f, true, 10.0f, false),\n                                                      new FloatRange(\"less than or equal to 10\", 0.0f, true, 10.0f, true),\n                                                      new FloatRange(\"over 90\", 90.0f, false, 100.0f, false),\n                                                      new FloatRange(\"90 or above\", 90.0f, true, 100.0f, false),\n                                                      new FloatRange(\"over 1000\", 1000.0f, false, Float.POSITIVE_INFINITY, false)));\n\n    RangeAccumulator a = new RangeAccumulator(fsp, r);\n    \n    FacetsCollector fc = FacetsCollector.create(a);\n\n    IndexSearcher s = newSearcher(r);\n    s.search(new MatchAllDocsQuery(), fc);\n    List<FacetResult> result = fc.getFacetResults();\n    assertEquals(1, result.size());\n    assertEquals(\"field (0)\\n  less than 10 (10)\\n  less than or equal to 10 (11)\\n  over 90 (9)\\n  90 or above (10)\\n  over 1000 (0)\\n\", FacetTestUtils.toSimpleString(result.get(0)));\n    \n    r.close();\n    d.close();\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"8989a9672fc1bb2d9a549a4f9005a7d0b0d728ee","date":1376366778,"type":3,"author":"Han Jiang","isMerge":false,"pathNew":"lucene/facet/src/test/org/apache/lucene/facet/range/TestRangeAccumulator#testBasicFloat().mjava","pathOld":"lucene/facet/src/test/org/apache/lucene/facet/range/TestRangeAccumulator#testBasicFloat().mjava","sourceNew":"  public void testBasicFloat() throws Exception {\n    Directory d = newDirectory();\n    RandomIndexWriter w = new RandomIndexWriter(random(), d);\n    Document doc = new Document();\n    FloatDocValuesField field = new FloatDocValuesField(\"field\", 0.0f);\n    doc.add(field);\n    for(long l=0;l<100;l++) {\n      field.setFloatValue(l);\n      w.addDocument(doc);\n    }\n\n    IndexReader r = w.getReader();\n    w.close();\n\n    RangeAccumulator a = new RangeAccumulator(new RangeFacetRequest<FloatRange>(\"field\",\n        new FloatRange(\"less than 10\", 0.0f, true, 10.0f, false),\n        new FloatRange(\"less than or equal to 10\", 0.0f, true, 10.0f, true),\n        new FloatRange(\"over 90\", 90.0f, false, 100.0f, false),\n        new FloatRange(\"90 or above\", 90.0f, true, 100.0f, false),\n        new FloatRange(\"over 1000\", 1000.0f, false, Float.POSITIVE_INFINITY, false)));\n    \n    FacetsCollector fc = FacetsCollector.create(a);\n\n    IndexSearcher s = newSearcher(r);\n    s.search(new MatchAllDocsQuery(), fc);\n    List<FacetResult> result = fc.getFacetResults();\n    assertEquals(1, result.size());\n    assertEquals(\"field (0)\\n  less than 10 (10)\\n  less than or equal to 10 (11)\\n  over 90 (9)\\n  90 or above (10)\\n  over 1000 (0)\\n\", FacetTestUtils.toSimpleString(result.get(0)));\n    \n    r.close();\n    d.close();\n  }\n\n","sourceOld":"  public void testBasicFloat() throws Exception {\n    Directory d = newDirectory();\n    RandomIndexWriter w = new RandomIndexWriter(random(), d);\n    Document doc = new Document();\n    FloatDocValuesField field = new FloatDocValuesField(\"field\", 0.0f);\n    doc.add(field);\n    for(long l=0;l<100;l++) {\n      field.setFloatValue((float) l);\n      w.addDocument(doc);\n    }\n\n    IndexReader r = w.getReader();\n    w.close();\n\n    FacetSearchParams fsp = new FacetSearchParams(\n                                new RangeFacetRequest<FloatRange>(\"field\",\n                                                      new FloatRange(\"less than 10\", 0.0f, true, 10.0f, false),\n                                                      new FloatRange(\"less than or equal to 10\", 0.0f, true, 10.0f, true),\n                                                      new FloatRange(\"over 90\", 90.0f, false, 100.0f, false),\n                                                      new FloatRange(\"90 or above\", 90.0f, true, 100.0f, false),\n                                                      new FloatRange(\"over 1000\", 1000.0f, false, Float.POSITIVE_INFINITY, false)));\n\n    RangeAccumulator a = new RangeAccumulator(fsp, r);\n    \n    FacetsCollector fc = FacetsCollector.create(a);\n\n    IndexSearcher s = newSearcher(r);\n    s.search(new MatchAllDocsQuery(), fc);\n    List<FacetResult> result = fc.getFacetResults();\n    assertEquals(1, result.size());\n    assertEquals(\"field (0)\\n  less than 10 (10)\\n  less than or equal to 10 (11)\\n  over 90 (9)\\n  90 or above (10)\\n  over 1000 (0)\\n\", FacetTestUtils.toSimpleString(result.get(0)));\n    \n    r.close();\n    d.close();\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"ce7aff7772c162c15d520e31af46c555f60d5c3b","date":1385135519,"type":5,"author":"Michael McCandless","isMerge":false,"pathNew":"lucene/facet/src/test/org/apache/lucene/facet/simple/TestRangeFacets#testBasicFloat().mjava","pathOld":"lucene/facet/src/test/org/apache/lucene/facet/range/TestRangeAccumulator#testBasicFloat().mjava","sourceNew":"  public void testBasicFloat() throws Exception {\n    Directory d = newDirectory();\n    RandomIndexWriter w = new RandomIndexWriter(random(), d);\n    Document doc = new Document();\n    FloatDocValuesField field = new FloatDocValuesField(\"field\", 0.0f);\n    doc.add(field);\n    for(long l=0;l<100;l++) {\n      field.setFloatValue(l);\n      w.addDocument(doc);\n    }\n\n    IndexReader r = w.getReader();\n\n    SimpleFacetsCollector fc = new SimpleFacetsCollector();\n\n    IndexSearcher s = newSearcher(r);\n    s.search(new MatchAllDocsQuery(), fc);\n\n    Facets facets = new RangeFacetCounts(\"field\", fc,\n        new FloatRange(\"less than 10\", 0.0f, true, 10.0f, false),\n        new FloatRange(\"less than or equal to 10\", 0.0f, true, 10.0f, true),\n        new FloatRange(\"over 90\", 90.0f, false, 100.0f, false),\n        new FloatRange(\"90 or above\", 90.0f, true, 100.0f, false),\n        new FloatRange(\"over 1000\", 1000.0f, false, Float.POSITIVE_INFINITY, false));\n    \n    assertEquals(\"field (100)\\n  less than 10 (10)\\n  less than or equal to 10 (11)\\n  over 90 (9)\\n  90 or above (10)\\n  over 1000 (0)\\n\",\n                 facets.getTopChildren(10, \"field\").toString());\n    \n    IOUtils.close(w, r, d);\n  }\n\n","sourceOld":"  public void testBasicFloat() throws Exception {\n    Directory d = newDirectory();\n    RandomIndexWriter w = new RandomIndexWriter(random(), d);\n    Document doc = new Document();\n    FloatDocValuesField field = new FloatDocValuesField(\"field\", 0.0f);\n    doc.add(field);\n    for(long l=0;l<100;l++) {\n      field.setFloatValue(l);\n      w.addDocument(doc);\n    }\n\n    IndexReader r = w.getReader();\n    w.close();\n\n    RangeAccumulator a = new RangeAccumulator(new RangeFacetRequest<FloatRange>(\"field\",\n        new FloatRange(\"less than 10\", 0.0f, true, 10.0f, false),\n        new FloatRange(\"less than or equal to 10\", 0.0f, true, 10.0f, true),\n        new FloatRange(\"over 90\", 90.0f, false, 100.0f, false),\n        new FloatRange(\"90 or above\", 90.0f, true, 100.0f, false),\n        new FloatRange(\"over 1000\", 1000.0f, false, Float.POSITIVE_INFINITY, false)));\n    \n    FacetsCollector fc = FacetsCollector.create(a);\n\n    IndexSearcher s = newSearcher(r);\n    s.search(new MatchAllDocsQuery(), fc);\n    List<FacetResult> result = fc.getFacetResults();\n    assertEquals(1, result.size());\n    assertEquals(\"field (0)\\n  less than 10 (10)\\n  less than or equal to 10 (11)\\n  over 90 (9)\\n  90 or above (10)\\n  over 1000 (0)\\n\", FacetTestUtils.toSimpleString(result.get(0)));\n    \n    r.close();\n    d.close();\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"3cc728b07df73b197e6d940d27f9b08b63918f13","date":1388834348,"type":4,"author":"Michael McCandless","isMerge":true,"pathNew":"/dev/null","pathOld":"lucene/facet/src/test/org/apache/lucene/facet/range/TestRangeAccumulator#testBasicFloat().mjava","sourceNew":null,"sourceOld":"  public void testBasicFloat() throws Exception {\n    Directory d = newDirectory();\n    RandomIndexWriter w = new RandomIndexWriter(random(), d);\n    Document doc = new Document();\n    FloatDocValuesField field = new FloatDocValuesField(\"field\", 0.0f);\n    doc.add(field);\n    for(long l=0;l<100;l++) {\n      field.setFloatValue(l);\n      w.addDocument(doc);\n    }\n\n    IndexReader r = w.getReader();\n    w.close();\n\n    RangeAccumulator a = new RangeAccumulator(new RangeFacetRequest<FloatRange>(\"field\",\n        new FloatRange(\"less than 10\", 0.0f, true, 10.0f, false),\n        new FloatRange(\"less than or equal to 10\", 0.0f, true, 10.0f, true),\n        new FloatRange(\"over 90\", 90.0f, false, 100.0f, false),\n        new FloatRange(\"90 or above\", 90.0f, true, 100.0f, false),\n        new FloatRange(\"over 1000\", 1000.0f, false, Float.POSITIVE_INFINITY, false)));\n    \n    FacetsCollector fc = FacetsCollector.create(a);\n\n    IndexSearcher s = newSearcher(r);\n    s.search(new MatchAllDocsQuery(), fc);\n    List<FacetResult> result = fc.getFacetResults();\n    assertEquals(1, result.size());\n    assertEquals(\"field (0)\\n  less than 10 (10)\\n  less than or equal to 10 (11)\\n  over 90 (9)\\n  90 or above (10)\\n  over 1000 (0)\\n\", FacetTestUtils.toSimpleString(result.get(0)));\n    \n    r.close();\n    d.close();\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"2062967ab57824b59d116b38d53d2058ac7e4592":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"8989a9672fc1bb2d9a549a4f9005a7d0b0d728ee":["2062967ab57824b59d116b38d53d2058ac7e4592"],"ce7aff7772c162c15d520e31af46c555f60d5c3b":["6249cba93d7ad1bf6f5a225c34fbe3d547ed9f49"],"3cc728b07df73b197e6d940d27f9b08b63918f13":["6249cba93d7ad1bf6f5a225c34fbe3d547ed9f49","ce7aff7772c162c15d520e31af46c555f60d5c3b"],"6249cba93d7ad1bf6f5a225c34fbe3d547ed9f49":["2062967ab57824b59d116b38d53d2058ac7e4592"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["3cc728b07df73b197e6d940d27f9b08b63918f13"]},"commit2Childs":{"2062967ab57824b59d116b38d53d2058ac7e4592":["8989a9672fc1bb2d9a549a4f9005a7d0b0d728ee","6249cba93d7ad1bf6f5a225c34fbe3d547ed9f49"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["2062967ab57824b59d116b38d53d2058ac7e4592"],"8989a9672fc1bb2d9a549a4f9005a7d0b0d728ee":[],"ce7aff7772c162c15d520e31af46c555f60d5c3b":["3cc728b07df73b197e6d940d27f9b08b63918f13"],"3cc728b07df73b197e6d940d27f9b08b63918f13":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"6249cba93d7ad1bf6f5a225c34fbe3d547ed9f49":["ce7aff7772c162c15d520e31af46c555f60d5c3b","3cc728b07df73b197e6d940d27f9b08b63918f13"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["8989a9672fc1bb2d9a549a4f9005a7d0b0d728ee","cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}