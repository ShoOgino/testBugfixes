{"path":"lucene/core/src/test/org/apache/lucene/index/TestDemoParallelLeafReader.ReindexingReader#getCurrentReader(LeafReader,long).mjava","commits":[{"id":"4d9aa91d3fdd25528bac3b2e6115d54fc2f28753","date":1416999434,"type":0,"author":"Michael McCandless","isMerge":false,"pathNew":"lucene/core/src/test/org/apache/lucene/index/TestDemoParallelLeafReader.ReindexingReader#getCurrentReader(LeafReader,long).mjava","pathOld":"/dev/null","sourceNew":"    LeafReader getCurrentReader(LeafReader reader, long schemaGen) throws IOException {\n      LeafReader parallelReader = getParallelLeafReader(reader, true, schemaGen);\n      if (parallelReader != null) {\n\n        // We should not be embedding one ParallelLeafReader inside another:\n        assertFalse(parallelReader instanceof ParallelLeafReader);\n        assertFalse(reader instanceof ParallelLeafReader);\n\n        // NOTE: important that parallelReader is first, so if there are field name overlaps, because changes to the schema\n        // overwrote existing field names, it wins:\n        LeafReader newReader = new ParallelLeafReader(false, parallelReader, reader) {\n          @Override\n          public Bits getLiveDocs() {\n            return getParallelReaders()[1].getLiveDocs();\n          }\n          @Override\n          public int numDocs() {\n            return getParallelReaders()[1].numDocs();\n          }\n        };\n\n        // Because ParallelLeafReader does its own (extra) incRef:\n        parallelReader.decRef();\n\n        return newReader;\n\n      } else {\n        // This segment was already current as of currentSchemaGen:\n        return reader;\n      }\n    }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"4d9aa91d3fdd25528bac3b2e6115d54fc2f28753":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["4d9aa91d3fdd25528bac3b2e6115d54fc2f28753"]},"commit2Childs":{"4d9aa91d3fdd25528bac3b2e6115d54fc2f28753":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["4d9aa91d3fdd25528bac3b2e6115d54fc2f28753"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}