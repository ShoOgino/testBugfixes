{"path":"solr/solrj/src/java/org/apache/solr/client/solrj/util/ClientUtils#writeVal(Writer,String,Object,String).mjava","commits":[{"id":"acd9883560fd89e6448b2b447302fe543040cd4f","date":1488478696,"type":1,"author":"Adrien Grand","isMerge":false,"pathNew":"solr/solrj/src/java/org/apache/solr/client/solrj/util/ClientUtils#writeVal(Writer,String,Object,String).mjava","pathOld":"solr/solrj/src/java/org/apache/solr/client/solrj/util/ClientUtils#writeVal(Writer,float,String,Object,String).mjava","sourceNew":"  private static void writeVal(Writer writer, String name, Object v, String update) throws IOException {\n    if (v instanceof Date) {\n      v = ((Date)v).toInstant().toString();\n    } else if (v instanceof byte[]) {\n      byte[] bytes = (byte[]) v;\n      v = Base64.byteArrayToBase64(bytes, 0, bytes.length);\n    } else if (v instanceof ByteBuffer) {\n      ByteBuffer bytes = (ByteBuffer) v;\n      v = Base64.byteArrayToBase64(bytes.array(), bytes.position(),bytes.limit() - bytes.position());\n    }\n\n    if (update == null) {\n      if (v != null) {\n        XML.writeXML(writer, \"field\", v.toString(), \"name\", name );\n      }\n    } else {\n      if (v == null)  {\n        XML.writeXML(writer, \"field\", null, \"name\", name, \"update\", update, \"null\", true);\n      } else  {\n        XML.writeXML(writer, \"field\", v.toString(), \"name\", name, \"update\", update);\n      }\n    }\n  }\n\n","sourceOld":"  private static void writeVal(Writer writer, float boost, String name, Object v, String update) throws IOException {\n    if (v instanceof Date) {\n      v = ((Date)v).toInstant().toString();\n    } else if (v instanceof byte[]) {\n      byte[] bytes = (byte[]) v;\n      v = Base64.byteArrayToBase64(bytes, 0, bytes.length);\n    } else if (v instanceof ByteBuffer) {\n      ByteBuffer bytes = (ByteBuffer) v;\n      v = Base64.byteArrayToBase64(bytes.array(), bytes.position(),bytes.limit() - bytes.position());\n    }\n\n    if (update == null) {\n      if( boost != 1.0f ) {\n        XML.writeXML(writer, \"field\", v.toString(), \"name\", name, \"boost\", boost);\n      } else if (v != null) {\n        XML.writeXML(writer, \"field\", v.toString(), \"name\", name );\n      }\n    } else {\n      if( boost != 1.0f ) {\n        XML.writeXML(writer, \"field\", v.toString(), \"name\", name, \"boost\", boost, \"update\", update);\n      } else {\n        if (v == null)  {\n          XML.writeXML(writer, \"field\", null, \"name\", name, \"update\", update, \"null\", true);\n        } else  {\n          XML.writeXML(writer, \"field\", v.toString(), \"name\", name, \"update\", update);\n        }\n      }\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"05216852560771de14a5513cd4afd45c8655d1ee","date":1533664331,"type":3,"author":"Moshe","isMerge":false,"pathNew":"solr/solrj/src/java/org/apache/solr/client/solrj/util/ClientUtils#writeVal(Writer,String,Object,String).mjava","pathOld":"solr/solrj/src/java/org/apache/solr/client/solrj/util/ClientUtils#writeVal(Writer,String,Object,String).mjava","sourceNew":"  private static void writeVal(Writer writer, String name, Object v, String update) throws IOException {\n    if (v instanceof Date) {\n      v = ((Date)v).toInstant().toString();\n    } else if (v instanceof byte[]) {\n      byte[] bytes = (byte[]) v;\n      v = Base64.byteArrayToBase64(bytes, 0, bytes.length);\n    } else if (v instanceof ByteBuffer) {\n      ByteBuffer bytes = (ByteBuffer) v;\n      v = Base64.byteArrayToBase64(bytes.array(), bytes.position(),bytes.limit() - bytes.position());\n    }\n\n    XML.Writable valWriter = null;\n    if(v instanceof SolrInputDocument) {\n      final SolrInputDocument solrDoc = (SolrInputDocument) v;\n      valWriter = (writer1) -> writeXML(solrDoc, writer1);\n    } else if(v != null) {\n      final Object val = v;\n      valWriter = (writer1) -> XML.escapeCharData(val.toString(), writer1);\n    }\n\n    if (update == null) {\n      if (v != null) {\n        XML.writeXML(writer, \"field\", valWriter, \"name\", name);\n      }\n    } else {\n      if (v == null)  {\n        XML.writeXML(writer, \"field\", (XML.Writable) null, \"name\", name, \"update\", update, \"null\", true);\n      } else  {\n        XML.writeXML(writer, \"field\", valWriter, \"name\", name, \"update\", update);\n      }\n    }\n  }\n\n","sourceOld":"  private static void writeVal(Writer writer, String name, Object v, String update) throws IOException {\n    if (v instanceof Date) {\n      v = ((Date)v).toInstant().toString();\n    } else if (v instanceof byte[]) {\n      byte[] bytes = (byte[]) v;\n      v = Base64.byteArrayToBase64(bytes, 0, bytes.length);\n    } else if (v instanceof ByteBuffer) {\n      ByteBuffer bytes = (ByteBuffer) v;\n      v = Base64.byteArrayToBase64(bytes.array(), bytes.position(),bytes.limit() - bytes.position());\n    }\n\n    if (update == null) {\n      if (v != null) {\n        XML.writeXML(writer, \"field\", v.toString(), \"name\", name );\n      }\n    } else {\n      if (v == null)  {\n        XML.writeXML(writer, \"field\", null, \"name\", name, \"update\", update, \"null\", true);\n      } else  {\n        XML.writeXML(writer, \"field\", v.toString(), \"name\", name, \"update\", update);\n      }\n    }\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"acd9883560fd89e6448b2b447302fe543040cd4f":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"05216852560771de14a5513cd4afd45c8655d1ee":["acd9883560fd89e6448b2b447302fe543040cd4f"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["05216852560771de14a5513cd4afd45c8655d1ee"]},"commit2Childs":{"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["acd9883560fd89e6448b2b447302fe543040cd4f"],"acd9883560fd89e6448b2b447302fe543040cd4f":["05216852560771de14a5513cd4afd45c8655d1ee"],"05216852560771de14a5513cd4afd45c8655d1ee":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}