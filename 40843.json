{"path":"solr/core/src/java/org/apache/solr/search/DocSetUtil#createDocSetByIterator(SolrIndexSearcher,Filter).mjava","commits":[{"id":"6727dd701b30630840235b6788bb5c728d20bbfd","date":1439421226,"type":0,"author":"Yonik Seeley","isMerge":false,"pathNew":"solr/core/src/java/org/apache/solr/search/DocSetUtil#createDocSetByIterator(SolrIndexSearcher,Filter).mjava","pathOld":"/dev/null","sourceNew":"  private static DocSet createDocSetByIterator(SolrIndexSearcher searcher, Filter filter) throws IOException {\n    int maxDoc = searcher.getIndexReader().maxDoc();\n\n    Map fcontext = null;\n    if (filter instanceof SolrFilter) {\n      fcontext = ValueSource.newContext(searcher);\n      ((SolrFilter) filter).createWeight(fcontext, searcher);\n    }\n\n    DocSetCollector collector = new DocSetCollector((maxDoc >> 6) + 5, maxDoc);\n\n    for (LeafReaderContext readerContext : searcher.getIndexReader().getContext().leaves()) {\n      collector.doSetNextReader(readerContext);\n      Bits acceptDocs = readerContext.reader().getLiveDocs();\n\n      DocIdSet docIdSet = filter instanceof SolrFilter\n          ? ((SolrFilter) filter).getDocIdSet(fcontext, readerContext, acceptDocs)\n          : filter.getDocIdSet(readerContext, acceptDocs);\n\n      if (docIdSet == null) continue;\n      DocIdSetIterator iter = docIdSet.iterator();\n\n      for (;;) {\n        int id = iter.nextDoc();\n        if (id == DocIdSetIterator.NO_MORE_DOCS) {\n          break;\n        }\n        collector.collect(id);\n      }\n\n    }\n\n    return collector.getDocSet();\n\n  }\n\n","sourceOld":null,"bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null},{"id":"c3f6d4e7c218e8b351cf7e52bbd2e04d5a3dc959","date":1442015844,"type":4,"author":"Yonik Seeley","isMerge":false,"pathNew":"/dev/null","pathOld":"solr/core/src/java/org/apache/solr/search/DocSetUtil#createDocSetByIterator(SolrIndexSearcher,Filter).mjava","sourceNew":null,"sourceOld":"  private static DocSet createDocSetByIterator(SolrIndexSearcher searcher, Filter filter) throws IOException {\n    int maxDoc = searcher.getIndexReader().maxDoc();\n\n    Map fcontext = null;\n    if (filter instanceof SolrFilter) {\n      fcontext = ValueSource.newContext(searcher);\n      ((SolrFilter) filter).createWeight(fcontext, searcher);\n    }\n\n    DocSetCollector collector = new DocSetCollector((maxDoc >> 6) + 5, maxDoc);\n\n    for (LeafReaderContext readerContext : searcher.getIndexReader().getContext().leaves()) {\n      collector.doSetNextReader(readerContext);\n      Bits acceptDocs = readerContext.reader().getLiveDocs();\n\n      DocIdSet docIdSet = filter instanceof SolrFilter\n          ? ((SolrFilter) filter).getDocIdSet(fcontext, readerContext, acceptDocs)\n          : filter.getDocIdSet(readerContext, acceptDocs);\n\n      if (docIdSet == null) continue;\n      DocIdSetIterator iter = docIdSet.iterator();\n\n      for (;;) {\n        int id = iter.nextDoc();\n        if (id == DocIdSetIterator.NO_MORE_DOCS) {\n          break;\n        }\n        collector.collect(id);\n      }\n\n    }\n\n    return collector.getDocSet();\n\n  }\n\n","bugFix":null,"bugIntro":[],"isBuggy":false,"nexts":[],"revCommit":null}],"commit2Parents":{"c3f6d4e7c218e8b351cf7e52bbd2e04d5a3dc959":["6727dd701b30630840235b6788bb5c728d20bbfd"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":[],"cd5edd1f2b162a5cfa08efd17851a07373a96817":["c3f6d4e7c218e8b351cf7e52bbd2e04d5a3dc959"],"6727dd701b30630840235b6788bb5c728d20bbfd":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"]},"commit2Childs":{"c3f6d4e7c218e8b351cf7e52bbd2e04d5a3dc959":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85":["6727dd701b30630840235b6788bb5c728d20bbfd"],"6727dd701b30630840235b6788bb5c728d20bbfd":["c3f6d4e7c218e8b351cf7e52bbd2e04d5a3dc959"],"cd5edd1f2b162a5cfa08efd17851a07373a96817":[]},"heads":["cd5edd1f2b162a5cfa08efd17851a07373a96817"],"roots":["a0e7ee9d0d12370e8d2b5ae0a23b6e687e018d85"],"pathCommit":null}